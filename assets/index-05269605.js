function yS(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in e)){const d=Object.getOwnPropertyDescriptor(i,c);d&&Object.defineProperty(e,c,d.get?d:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const p of d.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function n(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=n(c);fetch(c.href,d)}})();var fj=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ya(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Fl(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var c=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,c.get?c:{enumerable:!0,get:function(){return e[i]}})}),n}var r3={exports:{}},D_={},i3={exports:{}},qn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og=Symbol.for("react.element"),pj=Symbol.for("react.portal"),mj=Symbol.for("react.fragment"),gj=Symbol.for("react.strict_mode"),yj=Symbol.for("react.profiler"),vj=Symbol.for("react.provider"),_j=Symbol.for("react.context"),xj=Symbol.for("react.forward_ref"),bj=Symbol.for("react.suspense"),wj=Symbol.for("react.memo"),Sj=Symbol.for("react.lazy"),Mk=Symbol.iterator;function Ej(e){return e===null||typeof e!="object"?null:(e=Mk&&e[Mk]||e["@@iterator"],typeof e=="function"?e:null)}var o3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s3=Object.assign,a3={};function kf(e,t,n){this.props=e,this.context=t,this.refs=a3,this.updater=n||o3}kf.prototype.isReactComponent={};kf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function l3(){}l3.prototype=kf.prototype;function vS(e,t,n){this.props=e,this.context=t,this.refs=a3,this.updater=n||o3}var _S=vS.prototype=new l3;_S.constructor=vS;s3(_S,kf.prototype);_S.isPureReactComponent=!0;var Dk=Array.isArray,c3=Object.prototype.hasOwnProperty,xS={current:null},u3={key:!0,ref:!0,__self:!0,__source:!0};function d3(e,t,n){var i,c={},d=null,p=null;if(t!=null)for(i in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(d=""+t.key),t)c3.call(t,i)&&!u3.hasOwnProperty(i)&&(c[i]=t[i]);var s=arguments.length-2;if(s===1)c.children=n;else if(1<s){for(var _=Array(s),S=0;S<s;S++)_[S]=arguments[S+2];c.children=_}if(e&&e.defaultProps)for(i in s=e.defaultProps,s)c[i]===void 0&&(c[i]=s[i]);return{$$typeof:Og,type:e,key:d,ref:p,props:c,_owner:xS.current}}function Tj(e,t){return{$$typeof:Og,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bS(e){return typeof e=="object"&&e!==null&&e.$$typeof===Og}function Cj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var zk=/\/+/g;function Lb(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cj(""+e.key):t.toString(36)}function hv(e,t,n,i,c){var d=typeof e;(d==="undefined"||d==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(d){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case Og:case pj:p=!0}}if(p)return p=e,c=c(p),e=i===""?"."+Lb(p,0):i,Dk(c)?(n="",e!=null&&(n=e.replace(zk,"$&/")+"/"),hv(c,t,n,"",function(S){return S})):c!=null&&(bS(c)&&(c=Tj(c,n+(!c.key||p&&p.key===c.key?"":(""+c.key).replace(zk,"$&/")+"/")+e)),t.push(c)),1;if(p=0,i=i===""?".":i+":",Dk(e))for(var s=0;s<e.length;s++){d=e[s];var _=i+Lb(d,s);p+=hv(d,t,n,_,c)}else if(_=Ej(e),typeof _=="function")for(e=_.call(e),s=0;!(d=e.next()).done;)d=d.value,_=i+Lb(d,s++),p+=hv(d,t,n,_,c);else if(d==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function O0(e,t,n){if(e==null)return e;var i=[],c=0;return hv(e,i,"","",function(d){return t.call(n,d,c++)}),i}function Aj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Io={current:null},fv={transition:null},kj={ReactCurrentDispatcher:Io,ReactCurrentBatchConfig:fv,ReactCurrentOwner:xS};function h3(){throw Error("act(...) is not supported in production builds of React.")}qn.Children={map:O0,forEach:function(e,t,n){O0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O0(e,function(){t++}),t},toArray:function(e){return O0(e,function(t){return t})||[]},only:function(e){if(!bS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qn.Component=kf;qn.Fragment=mj;qn.Profiler=yj;qn.PureComponent=vS;qn.StrictMode=gj;qn.Suspense=bj;qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kj;qn.act=h3;qn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=s3({},e.props),c=e.key,d=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(d=t.ref,p=xS.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(_ in t)c3.call(t,_)&&!u3.hasOwnProperty(_)&&(i[_]=t[_]===void 0&&s!==void 0?s[_]:t[_])}var _=arguments.length-2;if(_===1)i.children=n;else if(1<_){s=Array(_);for(var S=0;S<_;S++)s[S]=arguments[S+2];i.children=s}return{$$typeof:Og,type:e.type,key:c,ref:d,props:i,_owner:p}};qn.createContext=function(e){return e={$$typeof:_j,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vj,_context:e},e.Consumer=e};qn.createElement=d3;qn.createFactory=function(e){var t=d3.bind(null,e);return t.type=e,t};qn.createRef=function(){return{current:null}};qn.forwardRef=function(e){return{$$typeof:xj,render:e}};qn.isValidElement=bS;qn.lazy=function(e){return{$$typeof:Sj,_payload:{_status:-1,_result:e},_init:Aj}};qn.memo=function(e,t){return{$$typeof:wj,type:e,compare:t===void 0?null:t}};qn.startTransition=function(e){var t=fv.transition;fv.transition={};try{e()}finally{fv.transition=t}};qn.unstable_act=h3;qn.useCallback=function(e,t){return Io.current.useCallback(e,t)};qn.useContext=function(e){return Io.current.useContext(e)};qn.useDebugValue=function(){};qn.useDeferredValue=function(e){return Io.current.useDeferredValue(e)};qn.useEffect=function(e,t){return Io.current.useEffect(e,t)};qn.useId=function(){return Io.current.useId()};qn.useImperativeHandle=function(e,t,n){return Io.current.useImperativeHandle(e,t,n)};qn.useInsertionEffect=function(e,t){return Io.current.useInsertionEffect(e,t)};qn.useLayoutEffect=function(e,t){return Io.current.useLayoutEffect(e,t)};qn.useMemo=function(e,t){return Io.current.useMemo(e,t)};qn.useReducer=function(e,t,n){return Io.current.useReducer(e,t,n)};qn.useRef=function(e){return Io.current.useRef(e)};qn.useState=function(e){return Io.current.useState(e)};qn.useSyncExternalStore=function(e,t,n){return Io.current.useSyncExternalStore(e,t,n)};qn.useTransition=function(){return Io.current.useTransition()};qn.version="18.3.1";i3.exports=qn;var q=i3.exports;const At=Ya(q),Ov=yS({__proto__:null,default:At},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ij=q,Pj=Symbol.for("react.element"),Mj=Symbol.for("react.fragment"),Dj=Object.prototype.hasOwnProperty,zj=Ij.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Lj={key:!0,ref:!0,__self:!0,__source:!0};function f3(e,t,n){var i,c={},d=null,p=null;n!==void 0&&(d=""+n),t.key!==void 0&&(d=""+t.key),t.ref!==void 0&&(p=t.ref);for(i in t)Dj.call(t,i)&&!Lj.hasOwnProperty(i)&&(c[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)c[i]===void 0&&(c[i]=t[i]);return{$$typeof:Pj,type:e,key:d,ref:p,props:c,_owner:zj.current}}D_.Fragment=Mj;D_.jsx=f3;D_.jsxs=f3;r3.exports=D_;var z=r3.exports;const Rj={grey:{50:"#FBFCFE",100:"#F0F4F8",200:"#DDE7EE",300:"#CDD7E1",400:"#9FA6AD",500:"#636B74",600:"#555E68",700:"#32383E",800:"#171A1C",900:"#0B0D0E"},blue:{50:"#EDF5FD",100:"#E3EFFB",200:"#C7DFF7",300:"#97C3F0",400:"#4393E4",500:"#0B6BCB",600:"#185EA5",700:"#12467B",800:"#0A2744",900:"#051423"},yellow:{50:"#FEFAF6",100:"#FDF0E1",200:"#FCE1C2",300:"#F3C896",400:"#EA9A3E",500:"#9A5B13",600:"#72430D",700:"#492B08",800:"#2E1B05",900:"#1D1002"},red:{50:"#FEF6F6",100:"#FCE4E4",200:"#F7C5C5",300:"#F09898",400:"#E47474",500:"#C41C1C",600:"#A51818",700:"#7D1212",800:"#430A0A",900:"#240505"},green:{50:"#F6FEF6",100:"#E3FBE3",200:"#C7F7C7",300:"#A1E8A1",400:"#51BC51",500:"#1F7A1F",600:"#136C13",700:"#0A470A",800:"#042F04",900:"#021D02"}},um=Rj,kc="$$joy";function tg(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},we.apply(this,arguments)}const Oj=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"}));function p3(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Bj=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Fj=p3(function(e){return Bj.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function jj(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Nj(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var $j=function(){function e(n){var i=this;this._insertTag=function(c){var d;i.tags.length===0?i.insertionPoint?d=i.insertionPoint.nextSibling:i.prepend?d=i.container.firstChild:d=i.before:d=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(c,d),i.tags.push(c)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Nj(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var d=jj(c);try{d.insertRule(i,d.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),yo="-ms-",Bv="-moz-",mr="-webkit-",m3="comm",wS="rule",SS="decl",Vj="@import",g3="@keyframes",Uj="@layer",Wj=Math.abs,z_=String.fromCharCode,Gj=Object.assign;function Hj(e,t){return eo(e,0)^45?(((t<<2^eo(e,0))<<2^eo(e,1))<<2^eo(e,2))<<2^eo(e,3):0}function y3(e){return e.trim()}function Zj(e,t){return(e=t.exec(e))?e[0]:e}function gr(e,t,n){return e.replace(t,n)}function $w(e,t){return e.indexOf(t)}function eo(e,t){return e.charCodeAt(t)|0}function ng(e,t,n){return e.slice(t,n)}function Ra(e){return e.length}function ES(e){return e.length}function B0(e,t){return t.push(e),e}function qj(e,t){return e.map(t).join("")}var L_=1,uf=1,v3=0,Ko=0,Mi=0,If="";function R_(e,t,n,i,c,d,p){return{value:e,root:t,parent:n,type:i,props:c,children:d,line:L_,column:uf,length:p,return:""}}function dm(e,t){return Gj(R_("",null,null,"",null,null,0),e,{length:-e.length},t)}function Kj(){return Mi}function Xj(){return Mi=Ko>0?eo(If,--Ko):0,uf--,Mi===10&&(uf=1,L_--),Mi}function ls(){return Mi=Ko<v3?eo(If,Ko++):0,uf++,Mi===10&&(uf=1,L_++),Mi}function ja(){return eo(If,Ko)}function pv(){return Ko}function Bg(e,t){return ng(If,e,t)}function rg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _3(e){return L_=uf=1,v3=Ra(If=e),Ko=0,[]}function x3(e){return If="",e}function mv(e){return y3(Bg(Ko-1,Vw(e===91?e+2:e===40?e+1:e)))}function Jj(e){for(;(Mi=ja())&&Mi<33;)ls();return rg(e)>2||rg(Mi)>3?"":" "}function Yj(e,t){for(;--t&&ls()&&!(Mi<48||Mi>102||Mi>57&&Mi<65||Mi>70&&Mi<97););return Bg(e,pv()+(t<6&&ja()==32&&ls()==32))}function Vw(e){for(;ls();)switch(Mi){case e:return Ko;case 34:case 39:e!==34&&e!==39&&Vw(Mi);break;case 40:e===41&&Vw(e);break;case 92:ls();break}return Ko}function Qj(e,t){for(;ls()&&e+Mi!==47+10;)if(e+Mi===42+42&&ja()===47)break;return"/*"+Bg(t,Ko-1)+"*"+z_(e===47?e:ls())}function eN(e){for(;!rg(ja());)ls();return Bg(e,Ko)}function tN(e){return x3(gv("",null,null,null,[""],e=_3(e),0,[0],e))}function gv(e,t,n,i,c,d,p,s,_){for(var S=0,E=0,A=p,I=0,O=0,N=0,$=1,K=1,W=1,B=0,U="",J=c,ee=d,ye=i,Q=U;K;)switch(N=B,B=ls()){case 40:if(N!=108&&eo(Q,A-1)==58){$w(Q+=gr(mv(B),"&","&\f"),"&\f")!=-1&&(W=-1);break}case 34:case 39:case 91:Q+=mv(B);break;case 9:case 10:case 13:case 32:Q+=Jj(N);break;case 92:Q+=Yj(pv()-1,7);continue;case 47:switch(ja()){case 42:case 47:B0(nN(Qj(ls(),pv()),t,n),_);break;default:Q+="/"}break;case 123*$:s[S++]=Ra(Q)*W;case 125*$:case 59:case 0:switch(B){case 0:case 125:K=0;case 59+E:W==-1&&(Q=gr(Q,/\f/g,"")),O>0&&Ra(Q)-A&&B0(O>32?Rk(Q+";",i,n,A-1):Rk(gr(Q," ","")+";",i,n,A-2),_);break;case 59:Q+=";";default:if(B0(ye=Lk(Q,t,n,S,E,c,s,U,J=[],ee=[],A),d),B===123)if(E===0)gv(Q,t,ye,ye,J,d,A,s,ee);else switch(I===99&&eo(Q,3)===110?100:I){case 100:case 108:case 109:case 115:gv(e,ye,ye,i&&B0(Lk(e,ye,ye,0,0,c,s,U,c,J=[],A),ee),c,ee,A,s,i?J:ee);break;default:gv(Q,ye,ye,ye,[""],ee,0,s,ee)}}S=E=O=0,$=W=1,U=Q="",A=p;break;case 58:A=1+Ra(Q),O=N;default:if($<1){if(B==123)--$;else if(B==125&&$++==0&&Xj()==125)continue}switch(Q+=z_(B),B*$){case 38:W=E>0?1:(Q+="\f",-1);break;case 44:s[S++]=(Ra(Q)-1)*W,W=1;break;case 64:ja()===45&&(Q+=mv(ls())),I=ja(),E=A=Ra(U=Q+=eN(pv())),B++;break;case 45:N===45&&Ra(Q)==2&&($=0)}}return d}function Lk(e,t,n,i,c,d,p,s,_,S,E){for(var A=c-1,I=c===0?d:[""],O=ES(I),N=0,$=0,K=0;N<i;++N)for(var W=0,B=ng(e,A+1,A=Wj($=p[N])),U=e;W<O;++W)(U=y3($>0?I[W]+" "+B:gr(B,/&\f/g,I[W])))&&(_[K++]=U);return R_(e,t,n,c===0?wS:s,_,S,E)}function nN(e,t,n){return R_(e,t,n,m3,z_(Kj()),ng(e,2,-2),0)}function Rk(e,t,n,i){return R_(e,t,n,SS,ng(e,0,i),ng(e,i+1,-1),i)}function ef(e,t){for(var n="",i=ES(e),c=0;c<i;c++)n+=t(e[c],c,e,t)||"";return n}function rN(e,t,n,i){switch(e.type){case Uj:if(e.children.length)break;case Vj:case SS:return e.return=e.return||e.value;case m3:return"";case g3:return e.return=e.value+"{"+ef(e.children,i)+"}";case wS:e.value=e.props.join(",")}return Ra(n=ef(e.children,i))?e.return=e.value+"{"+n+"}":""}function iN(e){var t=ES(e);return function(n,i,c,d){for(var p="",s=0;s<t;s++)p+=e[s](n,i,c,d)||"";return p}}function oN(e){return function(t){t.root||(t=t.return)&&e(t)}}var sN=function(t,n,i){for(var c=0,d=0;c=d,d=ja(),c===38&&d===12&&(n[i]=1),!rg(d);)ls();return Bg(t,Ko)},aN=function(t,n){var i=-1,c=44;do switch(rg(c)){case 0:c===38&&ja()===12&&(n[i]=1),t[i]+=sN(Ko-1,n,i);break;case 2:t[i]+=mv(c);break;case 4:if(c===44){t[++i]=ja()===58?"&\f":"",n[i]=t[i].length;break}default:t[i]+=z_(c)}while(c=ls());return t},lN=function(t,n){return x3(aN(_3(t),n))},Ok=new WeakMap,cN=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,i=t.parent,c=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Ok.get(i))&&!c){Ok.set(t,!0);for(var d=[],p=lN(n,d),s=i.props,_=0,S=0;_<p.length;_++)for(var E=0;E<s.length;E++,S++)t.props[S]=d[_]?p[_].replace(/&\f/g,s[E]):s[E]+" "+p[_]}}},uN=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function b3(e,t){switch(Hj(e,t)){case 5103:return mr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return mr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return mr+e+Bv+e+yo+e+e;case 6828:case 4268:return mr+e+yo+e+e;case 6165:return mr+e+yo+"flex-"+e+e;case 5187:return mr+e+gr(e,/(\w+).+(:[^]+)/,mr+"box-$1$2"+yo+"flex-$1$2")+e;case 5443:return mr+e+yo+"flex-item-"+gr(e,/flex-|-self/,"")+e;case 4675:return mr+e+yo+"flex-line-pack"+gr(e,/align-content|flex-|-self/,"")+e;case 5548:return mr+e+yo+gr(e,"shrink","negative")+e;case 5292:return mr+e+yo+gr(e,"basis","preferred-size")+e;case 6060:return mr+"box-"+gr(e,"-grow","")+mr+e+yo+gr(e,"grow","positive")+e;case 4554:return mr+gr(e,/([^-])(transform)/g,"$1"+mr+"$2")+e;case 6187:return gr(gr(gr(e,/(zoom-|grab)/,mr+"$1"),/(image-set)/,mr+"$1"),e,"")+e;case 5495:case 3959:return gr(e,/(image-set\([^]*)/,mr+"$1$`$1");case 4968:return gr(gr(e,/(.+:)(flex-)?(.*)/,mr+"box-pack:$3"+yo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+mr+e+e;case 4095:case 3583:case 4068:case 2532:return gr(e,/(.+)-inline(.+)/,mr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ra(e)-1-t>6)switch(eo(e,t+1)){case 109:if(eo(e,t+4)!==45)break;case 102:return gr(e,/(.+:)(.+)-([^]+)/,"$1"+mr+"$2-$3$1"+Bv+(eo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~$w(e,"stretch")?b3(gr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(eo(e,t+1)!==115)break;case 6444:switch(eo(e,Ra(e)-3-(~$w(e,"!important")&&10))){case 107:return gr(e,":",":"+mr)+e;case 101:return gr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+mr+(eo(e,14)===45?"inline-":"")+"box$3$1"+mr+"$2$3$1"+yo+"$2box$3")+e}break;case 5936:switch(eo(e,t+11)){case 114:return mr+e+yo+gr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return mr+e+yo+gr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return mr+e+yo+gr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return mr+e+yo+e+e}return e}var dN=function(t,n,i,c){if(t.length>-1&&!t.return)switch(t.type){case SS:t.return=b3(t.value,t.length);break;case g3:return ef([dm(t,{value:gr(t.value,"@","@"+mr)})],c);case wS:if(t.length)return qj(t.props,function(d){switch(Zj(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ef([dm(t,{props:[gr(d,/:(read-\w+)/,":"+Bv+"$1")]})],c);case"::placeholder":return ef([dm(t,{props:[gr(d,/:(plac\w+)/,":"+mr+"input-$1")]}),dm(t,{props:[gr(d,/:(plac\w+)/,":"+Bv+"$1")]}),dm(t,{props:[gr(d,/:(plac\w+)/,yo+"input-$1")]})],c)}return""})}},hN=[dN],w3=function(t){var n=t.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function($){var K=$.getAttribute("data-emotion");K.indexOf(" ")!==-1&&(document.head.appendChild($),$.setAttribute("data-s",""))})}var c=t.stylisPlugins||hN,d={},p,s=[];p=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function($){for(var K=$.getAttribute("data-emotion").split(" "),W=1;W<K.length;W++)d[K[W]]=!0;s.push($)});var _,S=[cN,uN];{var E,A=[rN,oN(function($){E.insert($)})],I=iN(S.concat(c,A)),O=function(K){return ef(tN(K),I)};_=function(K,W,B,U){E=B,O(K?K+"{"+W.styles+"}":W.styles),U&&(N.inserted[W.name]=!0)}}var N={key:n,sheet:new $j({key:n,container:p,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:d,registered:{},insert:_};return N.sheet.hydrate(s),N},S3={exports:{}},br={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=typeof Symbol=="function"&&Symbol.for,TS=Ji?Symbol.for("react.element"):60103,CS=Ji?Symbol.for("react.portal"):60106,O_=Ji?Symbol.for("react.fragment"):60107,B_=Ji?Symbol.for("react.strict_mode"):60108,F_=Ji?Symbol.for("react.profiler"):60114,j_=Ji?Symbol.for("react.provider"):60109,N_=Ji?Symbol.for("react.context"):60110,AS=Ji?Symbol.for("react.async_mode"):60111,$_=Ji?Symbol.for("react.concurrent_mode"):60111,V_=Ji?Symbol.for("react.forward_ref"):60112,U_=Ji?Symbol.for("react.suspense"):60113,fN=Ji?Symbol.for("react.suspense_list"):60120,W_=Ji?Symbol.for("react.memo"):60115,G_=Ji?Symbol.for("react.lazy"):60116,pN=Ji?Symbol.for("react.block"):60121,mN=Ji?Symbol.for("react.fundamental"):60117,gN=Ji?Symbol.for("react.responder"):60118,yN=Ji?Symbol.for("react.scope"):60119;function fs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case TS:switch(e=e.type,e){case AS:case $_:case O_:case F_:case B_:case U_:return e;default:switch(e=e&&e.$$typeof,e){case N_:case V_:case G_:case W_:case j_:return e;default:return t}}case CS:return t}}}function E3(e){return fs(e)===$_}br.AsyncMode=AS;br.ConcurrentMode=$_;br.ContextConsumer=N_;br.ContextProvider=j_;br.Element=TS;br.ForwardRef=V_;br.Fragment=O_;br.Lazy=G_;br.Memo=W_;br.Portal=CS;br.Profiler=F_;br.StrictMode=B_;br.Suspense=U_;br.isAsyncMode=function(e){return E3(e)||fs(e)===AS};br.isConcurrentMode=E3;br.isContextConsumer=function(e){return fs(e)===N_};br.isContextProvider=function(e){return fs(e)===j_};br.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===TS};br.isForwardRef=function(e){return fs(e)===V_};br.isFragment=function(e){return fs(e)===O_};br.isLazy=function(e){return fs(e)===G_};br.isMemo=function(e){return fs(e)===W_};br.isPortal=function(e){return fs(e)===CS};br.isProfiler=function(e){return fs(e)===F_};br.isStrictMode=function(e){return fs(e)===B_};br.isSuspense=function(e){return fs(e)===U_};br.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===O_||e===$_||e===F_||e===B_||e===U_||e===fN||typeof e=="object"&&e!==null&&(e.$$typeof===G_||e.$$typeof===W_||e.$$typeof===j_||e.$$typeof===N_||e.$$typeof===V_||e.$$typeof===mN||e.$$typeof===gN||e.$$typeof===yN||e.$$typeof===pN)};br.typeOf=fs;S3.exports=br;var vN=S3.exports,T3=vN,_N={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xN={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},C3={};C3[T3.ForwardRef]=_N;C3[T3.Memo]=xN;var bN=!0;function wN(e,t,n){var i="";return n.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):i+=c+" "}),i}var A3=function(t,n,i){var c=t.key+"-"+n.name;(i===!1||bN===!1)&&t.registered[c]===void 0&&(t.registered[c]=n.styles)},k3=function(t,n,i){A3(t,n,i);var c=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var d=n;do t.insert(n===d?"."+c:"",d,t.sheet,!0),d=d.next;while(d!==void 0)}};function SN(e){for(var t=0,n,i=0,c=e.length;c>=4;++i,c-=4)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var EN={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},TN=/[A-Z]|^ms/g,CN=/_EMO_([^_]+?)_([^]*?)_EMO_/g,I3=function(t){return t.charCodeAt(1)===45},Bk=function(t){return t!=null&&typeof t!="boolean"},Rb=p3(function(e){return I3(e)?e:e.replace(TN,"-$&").toLowerCase()}),Fk=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(CN,function(i,c,d){return Oa={name:c,styles:d,next:Oa},c})}return EN[t]!==1&&!I3(t)&&typeof n=="number"&&n!==0?n+"px":n};function ig(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Oa={name:n.name,styles:n.styles,next:Oa},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)Oa={name:i.name,styles:i.styles,next:Oa},i=i.next;var c=n.styles+";";return c}return AN(e,t,n)}case"function":{if(e!==void 0){var d=Oa,p=n(e);return Oa=d,ig(e,t,p)}break}}if(t==null)return n;var s=t[n];return s!==void 0?s:n}function AN(e,t,n){var i="";if(Array.isArray(n))for(var c=0;c<n.length;c++)i+=ig(e,t,n[c])+";";else for(var d in n){var p=n[d];if(typeof p!="object")t!=null&&t[p]!==void 0?i+=d+"{"+t[p]+"}":Bk(p)&&(i+=Rb(d)+":"+Fk(d,p)+";");else if(Array.isArray(p)&&typeof p[0]=="string"&&(t==null||t[p[0]]===void 0))for(var s=0;s<p.length;s++)Bk(p[s])&&(i+=Rb(d)+":"+Fk(d,p[s])+";");else{var _=ig(e,t,p);switch(d){case"animation":case"animationName":{i+=Rb(d)+":"+_+";";break}default:i+=d+"{"+_+"}"}}}return i}var jk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Oa,kS=function(t,n,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,d="";Oa=void 0;var p=t[0];p==null||p.raw===void 0?(c=!1,d+=ig(i,n,p)):d+=p[0];for(var s=1;s<t.length;s++)d+=ig(i,n,t[s]),c&&(d+=p[s]);jk.lastIndex=0;for(var _="",S;(S=jk.exec(d))!==null;)_+="-"+S[1];var E=SN(d)+_;return{name:E,styles:d,next:Oa}},kN=function(t){return t()},P3=Ov["useInsertionEffect"]?Ov["useInsertionEffect"]:!1,IN=P3||kN,Nk=P3||q.useLayoutEffect,M3=q.createContext(typeof HTMLElement<"u"?w3({key:"css"}):null),PN=M3.Provider,D3=function(t){return q.forwardRef(function(n,i){var c=q.useContext(M3);return t(n,c,i)})},Pf=q.createContext({}),z3=D3(function(e,t){var n=e.styles,i=kS([n],void 0,q.useContext(Pf)),c=q.useRef();return Nk(function(){var d=t.key+"-global",p=new t.sheet.constructor({key:d,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,_=document.querySelector('style[data-emotion="'+d+" "+i.name+'"]');return t.sheet.tags.length&&(p.before=t.sheet.tags[0]),_!==null&&(s=!0,_.setAttribute("data-emotion",d),p.hydrate([_])),c.current=[p,s],function(){p.flush()}},[t]),Nk(function(){var d=c.current,p=d[0],s=d[1];if(s){d[1]=!1;return}if(i.next!==void 0&&k3(t,i.next,!0),p.tags.length){var _=p.tags[p.tags.length-1].nextElementSibling;p.before=_,p.flush()}t.insert("",i,p,!1)},[t,i.name]),null});function IS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kS(t)}var L3=function(){var t=IS.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},MN=Fj,DN=function(t){return t!=="theme"},$k=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?MN:DN},Vk=function(t,n,i){var c;if(n){var d=n.shouldForwardProp;c=t.__emotion_forwardProp&&d?function(p){return t.__emotion_forwardProp(p)&&d(p)}:d}return typeof c!="function"&&i&&(c=t.__emotion_forwardProp),c},zN=function(t){var n=t.cache,i=t.serialized,c=t.isStringTag;return A3(n,i,c),IN(function(){return k3(n,i,c)}),null},LN=function e(t,n){var i=t.__emotion_real===t,c=i&&t.__emotion_base||t,d,p;n!==void 0&&(d=n.label,p=n.target);var s=Vk(t,n,i),_=s||$k(c),S=!_("as");return function(){var E=arguments,A=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(d!==void 0&&A.push("label:"+d+";"),E[0]==null||E[0].raw===void 0)A.push.apply(A,E);else{A.push(E[0][0]);for(var I=E.length,O=1;O<I;O++)A.push(E[O],E[0][O])}var N=D3(function($,K,W){var B=S&&$.as||c,U="",J=[],ee=$;if($.theme==null){ee={};for(var ye in $)ee[ye]=$[ye];ee.theme=q.useContext(Pf)}typeof $.className=="string"?U=wN(K.registered,J,$.className):$.className!=null&&(U=$.className+" ");var Q=kS(A.concat(J),K.registered,ee);U+=K.key+"-"+Q.name,p!==void 0&&(U+=" "+p);var be=S&&s===void 0?$k(B):_,re={};for(var Ie in $)S&&Ie==="as"||be(Ie)&&(re[Ie]=$[Ie]);return re.className=U,re.ref=W,q.createElement(q.Fragment,null,q.createElement(zN,{cache:K,serialized:Q,isStringTag:typeof B=="string"}),q.createElement(B,re))});return N.displayName=d!==void 0?d:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=c,N.__emotion_styles=A,N.__emotion_forwardProp=s,Object.defineProperty(N,"toString",{value:function(){return"."+p}}),N.withComponent=function($,K){return e($,we({},n,K,{shouldForwardProp:Vk(N,K,!0)})).apply(void 0,A)},N}},RN=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Fv=LN.bind();RN.forEach(function(e){Fv[e]=Fv(e)});function ON(e){return e==null||Object.keys(e).length===0}function BN(e){const{styles:t,defaultTheme:n={}}=e,i=typeof t=="function"?c=>t(ON(c)?n:c):t;return z.jsx(z3,{styles:i})}/**
 * @mui/styled-engine v6.0.0-alpha.5
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function FN(e,t){return Fv(e,t)}const jN=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))};function gn(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function Sc(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function R3(e){if(!Sc(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=R3(e[n])}),t}function Na(e,t,n={clone:!0}){const i=n.clone?we({},e):e;return Sc(e)&&Sc(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(Sc(t[c])&&c in e&&Sc(e[c])?i[c]=Na(e[c],t[c],n):n.clone?i[c]=Sc(t[c])?R3(t[c]):t[c]:i[c]=t[c])}),i}const NN=["values","unit","step"],$N=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,i)=>n.val-i.val),t.reduce((n,i)=>we({},n,{[i.key]:i.val}),{})};function O3(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=e,c=gn(e,NN),d=$N(t),p=Object.keys(d);function s(I){return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n})`}function _(I){return`@media (max-width:${(typeof t[I]=="number"?t[I]:I)-i/100}${n})`}function S(I,O){const N=p.indexOf(O);return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n}) and (max-width:${(N!==-1&&typeof t[p[N]]=="number"?t[p[N]]:O)-i/100}${n})`}function E(I){return p.indexOf(I)+1<p.length?S(I,p[p.indexOf(I)+1]):s(I)}function A(I){const O=p.indexOf(I);return O===0?s(p[1]):O===p.length-1?_(p[O]):S(I,p[p.indexOf(I)+1]).replace("@media","@media not all and")}return we({keys:p,values:d,up:s,down:_,between:S,only:E,not:A,unit:n},c)}function VN(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(i=>i.startsWith("@container")).sort((i,c)=>{var p,s;const d=/min-width:\s*([0-9.]+)/;return+(((p=i.match(d))==null?void 0:p[1])||0)-+(((s=c.match(d))==null?void 0:s[1])||0)});return n.length?n.reduce((i,c)=>{const d=t[c];return delete i[c],i[c]=d,i},we({},t)):t}function UN(e,t){return t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function WN(e,t){const n=t.match(/^@([^/]+)\/?(.+)?$/);if(!n)return null;const[,i,c]=n,d=Number.isNaN(+i)?i:+i;return e.containerQueries(c).up(d)}function B3(e){const t=(d,p)=>d.replace("@media",p?`@container ${p}`:"@container");function n(d,p){d.up=(...s)=>t(e.breakpoints.up(...s),p),d.down=(...s)=>t(e.breakpoints.down(...s),p),d.between=(...s)=>t(e.breakpoints.between(...s),p),d.only=(...s)=>t(e.breakpoints.only(...s),p),d.not=(...s)=>{const _=t(e.breakpoints.not(...s),p);return _.includes("not all and")?_.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>"):_}}const i={},c=d=>(n(i,d),i);return n(c),we({},e,{containerQueries:c})}const GN={borderRadius:4},HN=GN;function zm(e,t){return t?Na(e,t,{clone:!1}):e}const H_={xs:0,sm:600,md:900,lg:1200,xl:1536},Uk={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${H_[e]}px)`},ZN={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:H_[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Ml(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const d=i.breakpoints||Uk;return t.reduce((p,s,_)=>(p[d.up(d.keys[_])]=n(t[_]),p),{})}if(typeof t=="object"){const d=i.breakpoints||Uk;return Object.keys(t).reduce((p,s)=>{if(UN(d.keys,s)){const _=WN(i.containerQueries?i:ZN,s);_&&(p[_]=n(t[s],s))}else if(Object.keys(d.values||H_).indexOf(s)!==-1){const _=d.up(s);p[_]=n(t[s],s)}else{const _=s;p[_]=t[_]}return p},{})}return n(t)}function qN(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((i,c)=>{const d=e.up(c);return i[d]={},i},{}))||{}}function KN(e,t){return e.reduce((n,i)=>{const c=n[i];return(!c||Object.keys(c).length===0)&&delete n[i],n},t)}function Pn(e){if(typeof e!="string")throw new Error(tg(7));return e.charAt(0).toUpperCase()+e.slice(1)}function Z_(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const i=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(i!=null)return i}return t.split(".").reduce((i,c)=>i&&i[c]!=null?i[c]:null,e)}function jv(e,t,n,i=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||i:c=Z_(e,n)||i,t&&(c=t(c,i,e)),c}function vi(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:c}=e,d=p=>{if(p[t]==null)return null;const s=p[t],_=p.theme,S=Z_(_,i)||{};return Ml(p,s,A=>{let I=jv(S,c,A);return A===I&&typeof A=="string"&&(I=jv(S,c,`${t}${A==="default"?"":Pn(A)}`,A)),n===!1?I:{[n]:I}})};return d.propTypes={},d.filterProps=[t],d}function XN(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const JN={m:"margin",p:"padding"},YN={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Wk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},QN=XN(e=>{if(e.length>2)if(Wk[e])e=Wk[e];else return[e];const[t,n]=e.split(""),i=JN[t],c=YN[n]||"";return Array.isArray(c)?c.map(d=>i+d):[i+c]}),PS=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],MS=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...PS,...MS];function Fg(e,t,n,i){const c=Z_(e,t,!0)??n;return typeof c=="number"||typeof c=="string"?d=>typeof d=="string"?d:typeof c=="string"?`calc(${d} * ${c})`:c*d:Array.isArray(c)?d=>{if(typeof d=="string")return d;const p=Math.abs(d),s=c[p];return d>=0?s:typeof s=="number"?-s:`-${s}`}:typeof c=="function"?c:()=>{}}function DS(e){return Fg(e,"spacing",8)}function jg(e,t){return typeof t=="string"||t==null?t:e(t)}function e$(e,t){return n=>e.reduce((i,c)=>(i[c]=jg(t,n),i),{})}function t$(e,t,n,i){if(t.indexOf(n)===-1)return null;const c=QN(n),d=e$(c,i),p=e[n];return Ml(e,p,d)}function F3(e,t){const n=DS(e.theme);return Object.keys(e).map(i=>t$(e,t,i,n)).reduce(zm,{})}function ai(e){return F3(e,PS)}ai.propTypes={};ai.filterProps=PS;function li(e){return F3(e,MS)}li.propTypes={};li.filterProps=MS;function j3(e=8,t=DS({spacing:e})){if(e.mui)return e;const n=(...i)=>(i.length===0?[1]:i).map(d=>{const p=t(d);return typeof p=="number"?`${p}px`:p}).join(" ");return n.mui=!0,n}function q_(...e){const t=e.reduce((i,c)=>(c.filterProps.forEach(d=>{i[d]=c}),i),{}),n=i=>Object.keys(i).reduce((c,d)=>t[d]?zm(c,t[d](i)):c,{});return n.propTypes={},n.filterProps=e.reduce((i,c)=>i.concat(c.filterProps),[]),n}function Ms(e){return typeof e!="number"?e:`${e}px solid`}function Gs(e,t){return vi({prop:e,themeKey:"borders",transform:t})}const n$=Gs("border",Ms),r$=Gs("borderTop",Ms),i$=Gs("borderRight",Ms),o$=Gs("borderBottom",Ms),s$=Gs("borderLeft",Ms),a$=Gs("borderColor"),l$=Gs("borderTopColor"),c$=Gs("borderRightColor"),u$=Gs("borderBottomColor"),d$=Gs("borderLeftColor"),h$=Gs("outline",Ms),f$=Gs("outlineColor"),K_=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Fg(e.theme,"shape.borderRadius",4),n=i=>({borderRadius:jg(t,i)});return Ml(e,e.borderRadius,n)}return null};K_.propTypes={};K_.filterProps=["borderRadius"];q_(n$,r$,i$,o$,s$,a$,l$,c$,u$,d$,K_,h$,f$);const X_=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Fg(e.theme,"spacing",8),n=i=>({gap:jg(t,i)});return Ml(e,e.gap,n)}return null};X_.propTypes={};X_.filterProps=["gap"];const J_=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Fg(e.theme,"spacing",8),n=i=>({columnGap:jg(t,i)});return Ml(e,e.columnGap,n)}return null};J_.propTypes={};J_.filterProps=["columnGap"];const Y_=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Fg(e.theme,"spacing",8),n=i=>({rowGap:jg(t,i)});return Ml(e,e.rowGap,n)}return null};Y_.propTypes={};Y_.filterProps=["rowGap"];const p$=vi({prop:"gridColumn"}),m$=vi({prop:"gridRow"}),g$=vi({prop:"gridAutoFlow"}),y$=vi({prop:"gridAutoColumns"}),v$=vi({prop:"gridAutoRows"}),_$=vi({prop:"gridTemplateColumns"}),x$=vi({prop:"gridTemplateRows"}),b$=vi({prop:"gridTemplateAreas"}),w$=vi({prop:"gridArea"});q_(X_,J_,Y_,p$,m$,g$,y$,v$,_$,x$,b$,w$);function tf(e,t){return t==="grey"?t:e}const S$=vi({prop:"color",themeKey:"palette",transform:tf}),E$=vi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:tf}),T$=vi({prop:"backgroundColor",themeKey:"palette",transform:tf});q_(S$,E$,T$);function os(e){return e<=1&&e!==0?`${e*100}%`:e}const C$=vi({prop:"width",transform:os}),zS=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var c,d,p,s,_;const i=((p=(d=(c=e.theme)==null?void 0:c.breakpoints)==null?void 0:d.values)==null?void 0:p[n])||H_[n];return i?((_=(s=e.theme)==null?void 0:s.breakpoints)==null?void 0:_.unit)!=="px"?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:os(n)}};return Ml(e,e.maxWidth,t)}return null};zS.filterProps=["maxWidth"];const A$=vi({prop:"minWidth",transform:os}),k$=vi({prop:"height",transform:os}),I$=vi({prop:"maxHeight",transform:os}),P$=vi({prop:"minHeight",transform:os});vi({prop:"size",cssProperty:"width",transform:os});vi({prop:"size",cssProperty:"height",transform:os});const M$=vi({prop:"boxSizing"});q_(C$,zS,A$,k$,I$,P$,M$);const D$={border:{themeKey:"borders",transform:Ms},borderTop:{themeKey:"borders",transform:Ms},borderRight:{themeKey:"borders",transform:Ms},borderBottom:{themeKey:"borders",transform:Ms},borderLeft:{themeKey:"borders",transform:Ms},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ms},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:K_},color:{themeKey:"palette",transform:tf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:tf},backgroundColor:{themeKey:"palette",transform:tf},p:{style:li},pt:{style:li},pr:{style:li},pb:{style:li},pl:{style:li},px:{style:li},py:{style:li},padding:{style:li},paddingTop:{style:li},paddingRight:{style:li},paddingBottom:{style:li},paddingLeft:{style:li},paddingX:{style:li},paddingY:{style:li},paddingInline:{style:li},paddingInlineStart:{style:li},paddingInlineEnd:{style:li},paddingBlock:{style:li},paddingBlockStart:{style:li},paddingBlockEnd:{style:li},m:{style:ai},mt:{style:ai},mr:{style:ai},mb:{style:ai},ml:{style:ai},mx:{style:ai},my:{style:ai},margin:{style:ai},marginTop:{style:ai},marginRight:{style:ai},marginBottom:{style:ai},marginLeft:{style:ai},marginX:{style:ai},marginY:{style:ai},marginInline:{style:ai},marginInlineStart:{style:ai},marginInlineEnd:{style:ai},marginBlock:{style:ai},marginBlockStart:{style:ai},marginBlockEnd:{style:ai},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:X_},rowGap:{style:Y_},columnGap:{style:J_},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:os},maxWidth:{style:zS},minWidth:{transform:os},height:{transform:os},maxHeight:{transform:os},minHeight:{transform:os},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},Q_=D$;function z$(...e){const t=e.reduce((i,c)=>i.concat(Object.keys(c)),[]),n=new Set(t);return e.every(i=>n.size===Object.keys(i).length)}function L$(e,t){return typeof e=="function"?e(t):e}function R$(){function e(n,i,c,d){const p={[n]:i,theme:c},s=d[n];if(!s)return{[n]:i};const{cssProperty:_=n,themeKey:S,transform:E,style:A}=s;if(i==null)return null;if(S==="typography"&&i==="inherit")return{[n]:i};const I=Z_(c,S)||{};return A?A(p):Ml(p,i,N=>{let $=jv(I,E,N);return N===$&&typeof N=="string"&&($=jv(I,E,`${n}${N==="default"?"":Pn(N)}`,N)),_===!1?$:{[_]:$}})}function t(n){const{sx:i,theme:c={}}=n||{};if(!i)return null;const d=c.unstable_sxConfig??Q_;function p(s){let _=s;if(typeof s=="function")_=s(c);else if(typeof s!="object")return s;if(!_)return null;const S=qN(c.breakpoints),E=Object.keys(S);let A=S;return Object.keys(_).forEach(I=>{const O=L$(_[I],c);if(O!=null)if(typeof O=="object")if(d[I])A=zm(A,e(I,O,c,d));else{const N=Ml({theme:c},O,$=>({[I]:$}));z$(N,O)?A[I]=t({sx:O,theme:c}):A=zm(A,N)}else A=zm(A,e(I,O,c,d))}),VN(c,KN(E,A))}return Array.isArray(i)?i.map(p):p(i)}return t}const N3=R$();N3.filterProps=["sx"];const LS=N3;function $3(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const O$=["breakpoints","palette","spacing","shape"];function V3(e={},...t){const{breakpoints:n={},palette:i={},spacing:c,shape:d={}}=e,p=gn(e,O$),s=O3(n),_=j3(c);let S=Na({breakpoints:s,direction:"ltr",components:{},palette:we({mode:"light"},i),spacing:_,shape:we({},HN,d)},p);return S=B3(S),S.applyStyles=$3,S=t.reduce((E,A)=>Na(E,A),S),S.unstable_sxConfig=we({},Q_,p==null?void 0:p.unstable_sxConfig),S.unstable_sx=function(A){return LS({sx:A,theme:this})},S}function B$(e){return Object.keys(e).length===0}function U3(e=null){const t=q.useContext(Pf);return!t||B$(t)?e:t}const F$=V3();function W3(e=F$){return U3(e)}const j$=["sx"],N$=e=>{var i;const t={systemProps:{},otherProps:{}},n=((i=e==null?void 0:e.theme)==null?void 0:i.unstable_sxConfig)??Q_;return Object.keys(e).forEach(c=>{n[c]?t.systemProps[c]=e[c]:t.otherProps[c]=e[c]}),t};function G3(e){const{sx:t}=e,n=gn(e,j$),{systemProps:i,otherProps:c}=N$(n);let d;return Array.isArray(t)?d=[i,...t]:typeof t=="function"?d=(...p)=>{const s=t(...p);return Sc(s)?we({},i,s):i}:d=we({},i,t),we({},c,{sx:d})}const Gk=e=>e,$$=()=>{let e=Gk;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Gk}}},V$=$$(),U$=V$,H3={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Z3(e,t,n="Mui"){const i=H3[t];return i?`${n}-${i}`:`${U$.generate(e)}-${t}`}function W$(e,t,n="Mui"){const i={};return t.forEach(c=>{i[c]=Z3(e,c,n)}),i}var q3={exports:{}},wr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS=Symbol.for("react.element"),OS=Symbol.for("react.portal"),ex=Symbol.for("react.fragment"),tx=Symbol.for("react.strict_mode"),nx=Symbol.for("react.profiler"),rx=Symbol.for("react.provider"),ix=Symbol.for("react.context"),G$=Symbol.for("react.server_context"),ox=Symbol.for("react.forward_ref"),sx=Symbol.for("react.suspense"),ax=Symbol.for("react.suspense_list"),lx=Symbol.for("react.memo"),cx=Symbol.for("react.lazy"),H$=Symbol.for("react.offscreen"),K3;K3=Symbol.for("react.module.reference");function Hs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case RS:switch(e=e.type,e){case ex:case nx:case tx:case sx:case ax:return e;default:switch(e=e&&e.$$typeof,e){case G$:case ix:case ox:case cx:case lx:case rx:return e;default:return t}}case OS:return t}}}wr.ContextConsumer=ix;wr.ContextProvider=rx;wr.Element=RS;wr.ForwardRef=ox;wr.Fragment=ex;wr.Lazy=cx;wr.Memo=lx;wr.Portal=OS;wr.Profiler=nx;wr.StrictMode=tx;wr.Suspense=sx;wr.SuspenseList=ax;wr.isAsyncMode=function(){return!1};wr.isConcurrentMode=function(){return!1};wr.isContextConsumer=function(e){return Hs(e)===ix};wr.isContextProvider=function(e){return Hs(e)===rx};wr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===RS};wr.isForwardRef=function(e){return Hs(e)===ox};wr.isFragment=function(e){return Hs(e)===ex};wr.isLazy=function(e){return Hs(e)===cx};wr.isMemo=function(e){return Hs(e)===lx};wr.isPortal=function(e){return Hs(e)===OS};wr.isProfiler=function(e){return Hs(e)===nx};wr.isStrictMode=function(e){return Hs(e)===tx};wr.isSuspense=function(e){return Hs(e)===sx};wr.isSuspenseList=function(e){return Hs(e)===ax};wr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ex||e===nx||e===tx||e===sx||e===ax||e===H$||typeof e=="object"&&e!==null&&(e.$$typeof===cx||e.$$typeof===lx||e.$$typeof===rx||e.$$typeof===ix||e.$$typeof===ox||e.$$typeof===K3||e.getModuleId!==void 0)};wr.typeOf=Hs;q3.exports=wr;var Hk=q3.exports;const Z$=["ownerState"],q$=["variants"],K$=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function X$(e){return Object.keys(e).length===0}function J$(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Ob(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Y$=V3(),Q$=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function F0({defaultTheme:e,theme:t,themeId:n}){return X$(t)?e:t[n]||t}function eV(e){return e?(t,n)=>n[e]:null}function yv(e,t){let{ownerState:n}=t,i=gn(t,Z$);const c=typeof e=="function"?e(we({ownerState:n},i)):e;if(Array.isArray(c))return c.flatMap(d=>yv(d,we({ownerState:n},i)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:d=[]}=c;let s=gn(c,q$);return d.forEach(_=>{let S=!0;typeof _.props=="function"?S=_.props(we({ownerState:n},i,n)):Object.keys(_.props).forEach(E=>{(n==null?void 0:n[E])!==_.props[E]&&i[E]!==_.props[E]&&(S=!1)}),S&&(Array.isArray(s)||(s=[s]),s.push(typeof _.style=="function"?_.style(we({ownerState:n},i,n)):_.style))}),s}return c}function tV(e={}){const{themeId:t,defaultTheme:n=Y$,rootShouldForwardProp:i=Ob,slotShouldForwardProp:c=Ob}=e,d=p=>LS(we({},p,{theme:F0(we({},p,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,(p,s={})=>{jN(p,ee=>ee.filter(ye=>!(ye!=null&&ye.__mui_systemSx)));const{name:_,slot:S,skipVariantsResolver:E,skipSx:A,overridesResolver:I=eV(Q$(S))}=s,O=gn(s,K$),N=E!==void 0?E:S&&S!=="Root"&&S!=="root"||!1,$=A||!1;let K,W=Ob;S==="Root"||S==="root"?W=i:S?W=c:J$(p)&&(W=void 0);const B=FN(p,we({shouldForwardProp:W,label:K},O)),U=ee=>typeof ee=="function"&&ee.__emotion_real!==ee||Sc(ee)?ye=>yv(ee,we({},ye,{theme:F0({theme:ye.theme,defaultTheme:n,themeId:t})})):ee,J=(ee,...ye)=>{let Q=U(ee);const be=ye?ye.map(U):[];_&&I&&be.push(Be=>{const le=F0(we({},Be,{defaultTheme:n,themeId:t}));if(!le.components||!le.components[_]||!le.components[_].styleOverrides)return null;const xe=le.components[_].styleOverrides,Se={};return Object.entries(xe).forEach(([oe,te])=>{Se[oe]=yv(te,we({},Be,{theme:le}))}),I(Be,Se)}),_&&!N&&be.push(Be=>{var Se,oe;const le=F0(we({},Be,{defaultTheme:n,themeId:t})),xe=(oe=(Se=le==null?void 0:le.components)==null?void 0:Se[_])==null?void 0:oe.variants;return yv({variants:xe},we({},Be,{theme:le}))}),$||be.push(d);const re=be.length-ye.length;if(Array.isArray(ee)&&re>0){const Be=new Array(re).fill("");Q=[...ee,...Be],Q.raw=[...ee.raw,...Be]}const Ie=B(Q,...be);return p.muiName&&(Ie.muiName=p.muiName),Ie};return B.withConfig&&(J.withConfig=B.withConfig),J}}function X3(e,t){const n=we({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=we({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const c=e[i]||{},d=t[i];n[i]={},!d||!Object.keys(d)?n[i]=c:!c||!Object.keys(c)?n[i]=d:(n[i]=we({},d),Object.keys(c).forEach(p=>{n[i][p]=X3(c[p],d[p])}))}else n[i]===void 0&&(n[i]=e[i])}),n}function nV(e){const{theme:t,name:n,props:i}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?i:X3(t.components[n].defaultProps,i)}function rV({props:e,name:t,defaultTheme:n,themeId:i}){let c=W3(n);return i&&(c=c[i]||c),nV({theme:c,name:t,props:e})}const iV=typeof window<"u"?q.useLayoutEffect:q.useEffect,og=iV;function oV(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,c)=>c<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function J3(e){if(e.type)return e;if(e.charAt(0)==="#")return J3(oV(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(tg(9,e));let i=e.substring(t+1,e.length-1),c;if(n==="color"){if(i=i.split(" "),c=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(tg(10,c))}else i=i.split(",");return i=i.map(d=>parseFloat(d)),{type:n,values:i,colorSpace:c}}const ju=e=>{const t=J3(e);return t.values.slice(0,3).map((n,i)=>t.type.indexOf("hsl")!==-1&&i!==0?`${n}%`:n).join(" ")};function Zk(...e){return e.reduce((t,n)=>n==null?t:function(...c){t.apply(this,c),n.apply(this,c)},()=>{})}function ux(e,t){var n,i,c;return q.isValidElement(e)&&t.indexOf(e.type.muiName??((c=(i=(n=e.type)==null?void 0:n._payload)==null?void 0:i.value)==null?void 0:c.muiName))!==-1}function $a(e){return e&&e.ownerDocument||document}function BS(e){return $a(e).defaultView||window}function Nv(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let qk=0;function sV(e){const[t,n]=q.useState(e),i=e||t;return q.useEffect(()=>{t==null&&(qk+=1,n(`mui-${qk}`))},[t]),i}const Kk=Ov["useId".toString()];function df(e){if(Kk!==void 0){const t=Kk();return e??t}return sV(e)}function Bb({controlled:e,default:t,name:n,state:i="value"}){const{current:c}=q.useRef(e!==void 0),[d,p]=q.useState(t),s=c?e:d,_=q.useCallback(S=>{c||p(S)},[]);return[s,_]}function zh(e){const t=q.useRef(e);return og(()=>{t.current=e}),q.useRef((...n)=>(0,t.current)(...n)).current}function ko(...e){return q.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{Nv(n,t)})},e)}class FS{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new FS}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}let dx=!0,Uw=!1;const aV=new FS,lV={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function cV(e){const{type:t,tagName:n}=e;return!!(n==="INPUT"&&lV[t]&&!e.readOnly||n==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function uV(e){e.metaKey||e.altKey||e.ctrlKey||(dx=!0)}function Fb(){dx=!1}function dV(){this.visibilityState==="hidden"&&Uw&&(dx=!0)}function hV(e){e.addEventListener("keydown",uV,!0),e.addEventListener("mousedown",Fb,!0),e.addEventListener("pointerdown",Fb,!0),e.addEventListener("touchstart",Fb,!0),e.addEventListener("visibilitychange",dV,!0)}function fV(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return dx||cV(t)}function Y3(){const e=q.useCallback(c=>{c!=null&&hV(c.ownerDocument)},[]),t=q.useRef(!1);function n(){return t.current?(Uw=!0,aV.start(100,()=>{Uw=!1}),t.current=!1,!0):!1}function i(c){return fV(c)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:i,onBlur:n,ref:e}}function pV(e){const t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}const mV=e=>{const t=q.useRef({});return q.useEffect(()=>{t.current=e}),t.current},gV=mV;function _i(e,t,n=void 0){const i={};return Object.keys(e).forEach(c=>{i[c]=e[c].reduce((d,p)=>{if(p){const s=t(p);s!==""&&d.push(s),n&&n[p]&&d.push(n[p])}return d},[]).join(" ")}),i}const yV=q.createContext(null),Q3=yV;function jS(){return q.useContext(Q3)}const vV=typeof Symbol=="function"&&Symbol.for,_V=vV?Symbol.for("mui.nested"):"__THEME_NESTED__";function xV(e,t){return typeof t=="function"?t(e):we({},e,t)}function bV(e){const{children:t,theme:n}=e,i=jS(),c=q.useMemo(()=>{const d=i===null?n:xV(i,n);return d!=null&&(d[_V]=i!==null),d},[n,i]);return z.jsx(Q3.Provider,{value:c,children:t})}const wV=["value"],SV=q.createContext();function EV(e){let{value:t}=e,n=gn(e,wV);return z.jsx(SV.Provider,we({value:t??!0},n))}const Xk={};function Jk(e,t,n,i=!1){return q.useMemo(()=>{const c=e&&t[e]||t;if(typeof n=="function"){const d=n(c),p=e?we({},t,{[e]:d}):d;return i?()=>p:p}return e?we({},t,{[e]:n}):we({},t,n)},[e,t,n,i])}function ez(e){const{children:t,theme:n,themeId:i}=e,c=U3(Xk),d=jS()||Xk,p=Jk(i,c,n),s=Jk(i,d,n,!0),_=p.direction==="rtl";return z.jsx(bV,{theme:s,children:z.jsx(Pf.Provider,{value:p,children:z.jsx(EV,{value:_,children:t})})})}const NS="mode",$S="color-scheme",tz="data-color-scheme";function TV(e){const{defaultMode:t="light",defaultLightColorScheme:n="light",defaultDarkColorScheme:i="dark",modeStorageKey:c=NS,colorSchemeStorageKey:d=$S,attribute:p=tz,colorSchemeNode:s="document.documentElement"}=e||{};return z.jsx("script",{dangerouslySetInnerHTML:{__html:`(function() {
try {
  var mode = localStorage.getItem('${c}') || '${t}';
  var colorScheme = '';
  if (mode === 'system') {
    // handle system mode
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = localStorage.getItem('${d}-dark') || '${i}';
    } else {
      colorScheme = localStorage.getItem('${d}-light') || '${n}';
    }
  }
  if (mode === 'light') {
    colorScheme = localStorage.getItem('${d}-light') || '${n}';
  }
  if (mode === 'dark') {
    colorScheme = localStorage.getItem('${d}-dark') || '${i}';
  }
  if (colorScheme) {
    ${s}.setAttribute('${p}', colorScheme);
  }
} catch(e){}})();`}},"mui-color-scheme-init")}function Yk(e){if(typeof window<"u"&&e==="system")return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function nz(e,t){if(e.mode==="light"||e.mode==="system"&&e.systemMode==="light")return t("light");if(e.mode==="dark"||e.mode==="system"&&e.systemMode==="dark")return t("dark")}function CV(e){return nz(e,t=>{if(t==="light")return e.lightColorScheme;if(t==="dark")return e.darkColorScheme})}function jb(e,t){if(typeof window>"u")return;let n;try{n=localStorage.getItem(e)||void 0,n||localStorage.setItem(e,t)}catch{}return n||t}function AV(e){const{defaultMode:t="light",defaultLightColorScheme:n,defaultDarkColorScheme:i,supportedColorSchemes:c=[],modeStorageKey:d=NS,colorSchemeStorageKey:p=$S,storageWindow:s=typeof window>"u"?void 0:window}=e,_=c.join(","),[S,E]=q.useState(()=>{const K=jb(d,t),W=jb(`${p}-light`,n),B=jb(`${p}-dark`,i);return{mode:K,systemMode:Yk(K),lightColorScheme:W,darkColorScheme:B}}),A=CV(S),I=q.useCallback(K=>{E(W=>{if(K===W.mode)return W;const B=K??t;try{localStorage.setItem(d,B)}catch{}return we({},W,{mode:B,systemMode:Yk(B)})})},[d,t]),O=q.useCallback(K=>{K?typeof K=="string"?K&&!_.includes(K)?console.error(`\`${K}\` does not exist in \`theme.colorSchemes\`.`):E(W=>{const B=we({},W);return nz(W,U=>{try{localStorage.setItem(`${p}-${U}`,K)}catch{}U==="light"&&(B.lightColorScheme=K),U==="dark"&&(B.darkColorScheme=K)}),B}):E(W=>{const B=we({},W),U=K.light===null?n:K.light,J=K.dark===null?i:K.dark;if(U)if(!_.includes(U))console.error(`\`${U}\` does not exist in \`theme.colorSchemes\`.`);else{B.lightColorScheme=U;try{localStorage.setItem(`${p}-light`,U)}catch{}}if(J)if(!_.includes(J))console.error(`\`${J}\` does not exist in \`theme.colorSchemes\`.`);else{B.darkColorScheme=J;try{localStorage.setItem(`${p}-dark`,J)}catch{}}return B}):E(W=>{try{localStorage.setItem(`${p}-light`,n),localStorage.setItem(`${p}-dark`,i)}catch{}return we({},W,{lightColorScheme:n,darkColorScheme:i})})},[_,p,n,i]),N=q.useCallback(K=>{S.mode==="system"&&E(W=>{const B=K!=null&&K.matches?"dark":"light";return W.systemMode===B?W:we({},W,{systemMode:B})})},[S.mode]),$=q.useRef(N);return $.current=N,q.useEffect(()=>{const K=(...B)=>$.current(...B),W=window.matchMedia("(prefers-color-scheme: dark)");return W.addListener(K),K(W),()=>{W.removeListener(K)}},[]),q.useEffect(()=>{if(s){const K=W=>{const B=W.newValue;typeof W.key=="string"&&W.key.startsWith(p)&&(!B||_.match(B))&&(W.key.endsWith("light")&&O({light:B}),W.key.endsWith("dark")&&O({dark:B})),W.key===d&&(!B||["light","dark","system"].includes(B))&&I(B||t)};return s.addEventListener("storage",K),()=>{s.removeEventListener("storage",K)}}},[O,I,d,p,_,t,s]),we({},S,{colorScheme:A,setMode:I,setColorScheme:O})}const kV=["colorSchemes","components","cssVarPrefix"],IV="*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function PV(e){const{themeId:t,theme:n={},attribute:i=tz,modeStorageKey:c=NS,colorSchemeStorageKey:d=$S,defaultMode:p="light",defaultColorScheme:s,disableTransitionOnChange:_=!1,resolveTheme:S}=e;(!n.colorSchemes||typeof s=="string"&&!n.colorSchemes[s]||typeof s=="object"&&!n.colorSchemes[s==null?void 0:s.light]||typeof s=="object"&&!n.colorSchemes[s==null?void 0:s.dark])&&console.error(`MUI: \`${s}\` does not exist in \`theme.colorSchemes\`.`);const E=q.createContext(void 0),A=()=>{const K=q.useContext(E);if(!K)throw new Error(tg(19));return K};function I(K){var vn,Rn;const{children:W,theme:B=n,modeStorageKey:U=c,colorSchemeStorageKey:J=d,attribute:ee=i,defaultMode:ye=p,defaultColorScheme:Q=s,disableTransitionOnChange:be=_,storageWindow:re=typeof window>"u"?void 0:window,documentNode:Ie=typeof document>"u"?void 0:document,colorSchemeNode:Be=typeof document>"u"?void 0:document.documentElement,colorSchemeSelector:le=":root",disableNestedContext:xe=!1,disableStyleSheetGeneration:Se=!1}=K,oe=q.useRef(!1),te=jS(),Ce=q.useContext(E),ve=!!Ce&&!xe,Fe=B[t],Ge=Fe||B,{colorSchemes:rt={},components:Ct={},cssVarPrefix:It}=Ge,Pt=gn(Ge,kV),Kt=Object.keys(rt),nn=typeof Q=="string"?Q:Q.light,an=typeof Q=="string"?Q:Q.dark,{mode:ct,setMode:Vt,systemMode:ln,lightColorScheme:zt,darkColorScheme:pn,colorScheme:Kn,setColorScheme:Fr}=AV({supportedColorSchemes:Kt,defaultLightColorScheme:nn,defaultDarkColorScheme:an,modeStorageKey:U,colorSchemeStorageKey:J,defaultMode:ye,storageWindow:re});let mn=ct,Ut=Kn;ve&&(mn=Ce.mode,Ut=Ce.colorScheme);const Vi=(()=>mn||(ye==="system"?p:ye))(),Le=(()=>Ut||(Vi==="dark"?an:nn))(),Ke=((vn=Pt.generateThemeVars)==null?void 0:vn.call(Pt))||Pt.vars,et=we({},Pt,{components:Ct,colorSchemes:rt,cssVarPrefix:It,vars:Ke});typeof et.generateSpacing=="function"&&(et.spacing=et.generateSpacing()),Object.entries(rt).forEach(([bn,_n])=>{bn===Le&&(Object.keys(_n).forEach(Mn=>{_n[Mn]&&typeof _n[Mn]=="object"?et[Mn]=we({},et[Mn],_n[Mn]):et[Mn]=_n[Mn]}),et.palette&&(et.palette.colorScheme=bn))});const Ot=(()=>typeof Q=="string"?Q:ye==="dark"?Q.dark:Q.light)();B.defaultColorScheme=Ot,B.colorSchemeSelector=le,B.attribute=ee,et.getColorSchemeSelector||(et.getColorSchemeSelector=bn=>`[${ee}="${bn}"] &`),q.useEffect(()=>{Ut&&Be&&Be.setAttribute(ee,Ut)},[Ut,ee,Be]),q.useEffect(()=>{let bn;if(be&&oe.current&&Ie){const _n=Ie.createElement("style");_n.appendChild(Ie.createTextNode(IV)),Ie.head.appendChild(_n),window.getComputedStyle(Ie.body),bn=setTimeout(()=>{Ie.head.removeChild(_n)},1)}return()=>{clearTimeout(bn)}},[Ut,be,Ie]),q.useEffect(()=>(oe.current=!0,()=>{oe.current=!1}),[]);const kt=q.useMemo(()=>({allColorSchemes:Kt,colorScheme:Ut,darkColorScheme:pn,lightColorScheme:zt,mode:mn,setColorScheme:Fr,setMode:Vt,systemMode:ln}),[Kt,Ut,pn,zt,mn,Fr,Vt,ln]);let yt=!0;(Se||ve&&(te==null?void 0:te.cssVarPrefix)===It)&&(yt=!1);const Zt=z.jsxs(q.Fragment,{children:[yt&&z.jsx(q.Fragment,{children:(((Rn=et.generateStyleSheets)==null?void 0:Rn.call(et))||[]).map((bn,_n)=>z.jsx(BN,{styles:bn},_n))}),z.jsx(ez,{themeId:Fe?t:void 0,theme:S?S(et):et,children:W})]});return ve?Zt:z.jsx(E.Provider,{value:kt,children:Zt})}const O=typeof s=="string"?s:s.light,N=typeof s=="string"?s:s.dark;return{CssVarsProvider:I,useColorScheme:A,getInitColorSchemeScript:K=>TV(we({attribute:i,colorSchemeStorageKey:d,defaultMode:p,defaultLightColorScheme:O,defaultDarkColorScheme:N,modeStorageKey:c},K))}}function VS(e=""){function t(...i){if(!i.length)return"";const c=i[0];return typeof c=="string"&&!c.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${c}${t(...i.slice(1))})`:`, ${c}`}return(i,...c)=>`var(--${e?`${e}-`:""}${i}${t(...c)})`}const Qk=(e,t,n,i=[])=>{let c=e;t.forEach((d,p)=>{p===t.length-1?Array.isArray(c)?c[Number(d)]=n:c&&typeof c=="object"&&(c[d]=n):c&&typeof c=="object"&&(c[d]||(c[d]=i.includes(d)?[]:{}),c=c[d])})},MV=(e,t,n)=>{function i(c,d=[],p=[]){Object.entries(c).forEach(([s,_])=>{(!n||n&&!n([...d,s]))&&_!=null&&(typeof _=="object"&&Object.keys(_).length>0?i(_,[...d,s],Array.isArray(_)?[...p,s]:p):t([...d,s],_,p))})}i(e)},DV=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>e.includes(i))||e[e.length-1].toLowerCase().indexOf("opacity")>=0?t:`${t}px`:t;function Nb(e,t){const{prefix:n,shouldSkipGeneratingVar:i}=t||{},c={},d={},p={};return MV(e,(s,_,S)=>{if((typeof _=="string"||typeof _=="number")&&(!i||!i(s,_))){const E=`--${n?`${n}-`:""}${s.join("-")}`,A=DV(s,_);Object.assign(c,{[E]:A}),Qk(d,s,`var(${E})`,S),Qk(p,s,`var(${E}, ${A})`,S)}},s=>s[0]==="vars"),{css:c,vars:d,varsWithDefaults:p}}function sg(e){"@babel/helpers - typeof";return sg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(e)}function zV(e,t){if(sg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(sg(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eI(e){var t=zV(e,"string");return sg(t)=="symbol"?t:t+""}const LV=["getSelector"],RV=["colorSchemes","components","defaultColorScheme"];function OV(e,t={}){let{getSelector:n}=t,i=gn(t,LV);const{colorSchemes:c={},defaultColorScheme:d="light"}=e,p=gn(e,RV),{vars:s,css:_,varsWithDefaults:S}=Nb(p,i);let E=S;const A={},{[d]:I}=c,O=gn(c,[d].map(eI));if(Object.entries(O||{}).forEach(([K,W])=>{const{vars:B,css:U,varsWithDefaults:J}=Nb(W,i);E=Na(E,J),A[K]={css:U,vars:B}}),I){const{css:K,vars:W,varsWithDefaults:B}=Nb(I,i);E=Na(E,B),A[d]={css:K,vars:W}}return{vars:E,generateThemeVars:()=>{let K=we({},s);return Object.entries(A).forEach(([,{vars:W}])=>{K=Na(K,W)}),K},generateStyleSheets:()=>{const K=[],W=e.defaultColorScheme||"light";function B(ee,ye){Object.keys(ye).length&&K.push(typeof ee=="string"?{[ee]:we({},ye)}:ee)}B((n==null?void 0:n(void 0,we({},_)))||":root",_);const{[W]:U}=A,J=gn(A,[W].map(eI));if(U){const{css:ee}=U;B((n==null?void 0:n(W,we({},ee)))||`[${e.attribute||"data-color-scheme"}="${W}"]`,ee)}return Object.entries(J).forEach(([ee,{css:ye}])=>{B((n==null?void 0:n(ee,we({},ye)))||`[${e.attribute||"data-color-scheme"}="${ee}"]`,ye)}),K}}}const BV=we({},Q_,{borderRadius:{themeKey:"radius"},boxShadow:{themeKey:"shadow"},fontFamily:{themeKey:"fontFamily"},fontSize:{themeKey:"fontSize"},fontWeight:{themeKey:"fontWeight"},letterSpacing:{themeKey:"letterSpacing"},lineHeight:{themeKey:"lineHeight"}}),FV=BV;function jV(e){var t;return!!e[0].match(/^(typography|variants|breakpoints)$/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/^(mode)$/))||e[0]==="focus"&&e[1]!=="thickness"}const xi=(e,t)=>Z3(e,t,"Mui"),fi=(e,t)=>W$(e,t,"Mui"),NV=e=>e&&typeof e=="object"&&Object.keys(e).some(t=>{var n;return(n=t.match)==null?void 0:n.call(t,/^(plain(Hover|Active|Disabled)?(Color|Bg)|outlined(Hover|Active|Disabled)?(Color|Border|Bg)|soft(Hover|Active|Disabled)?(Color|Bg)|solid(Hover|Active|Disabled)?(Color|Bg))$/)}),tI=(e,t,n)=>{t.includes("Color")&&(e.color=n),t.includes("Bg")&&(e.backgroundColor=n),t.includes("Border")&&(e.borderColor=n)},nI=(e,t,n)=>{const i={};return Object.entries(t||{}).forEach(([c,d])=>{if(c.match(new RegExp(`${e}(color|bg|border)`,"i"))&&d){const p=n?n(c):d;c.includes("Disabled")&&(i.pointerEvents="none",i.cursor="default",i["--Icon-color"]="currentColor"),c.match(/(Hover|Active|Disabled)/)||(i["--variant-borderWidth"]||(i["--variant-borderWidth"]="0px"),c.includes("Border")&&(i["--variant-borderWidth"]="1px",i.border="var(--variant-borderWidth) solid")),tI(i,c,p)}}),i},po=(e,t)=>{let n={};if(t){const{getCssVar:i,palette:c}=t;Object.entries(c).forEach(d=>{const[p,s]=d;NV(s)&&typeof s=="object"&&(n=we({},n,{[p]:nI(e,s,_=>`var(--variant-${_}, ${i(`palette-${p}-${_}`,c[p][_])})`)}))})}return n.context=nI(e,{plainColor:"var(--variant-plainColor)",plainHoverColor:"var(--variant-plainHoverColor)",plainHoverBg:"var(--variant-plainHoverBg)",plainActiveBg:"var(--variant-plainActiveBg)",plainDisabledColor:"var(--variant-plainDisabledColor)",outlinedColor:"var(--variant-outlinedColor)",outlinedBorder:"var(--variant-outlinedBorder)",outlinedHoverColor:"var(--variant-outlinedHoverColor)",outlinedHoverBorder:"var(--variant-outlinedHoverBorder)",outlinedHoverBg:"var(--variant-outlinedHoverBg)",outlinedActiveBg:"var(--variant-outlinedActiveBg)",outlinedDisabledColor:"var(--variant-outlinedDisabledColor)",outlinedDisabledBorder:"var(--variant-outlinedDisabledBorder)",softColor:"var(--variant-softColor)",softBg:"var(--variant-softBg)",softHoverColor:"var(--variant-softHoverColor)",softHoverBg:"var(--variant-softHoverBg)",softActiveBg:"var(--variant-softActiveBg)",softDisabledColor:"var(--variant-softDisabledColor)",softDisabledBg:"var(--variant-softDisabledBg)",solidColor:"var(--variant-solidColor)",solidBg:"var(--variant-solidBg)",solidHoverBg:"var(--variant-solidHoverBg)",solidActiveBg:"var(--variant-solidActiveBg)",solidDisabledColor:"var(--variant-solidDisabledColor)",solidDisabledBg:"var(--variant-solidDisabledBg)"}),n},$V=["cssVarPrefix","breakpoints","spacing","components","variants","shouldSkipGeneratingVar","getSelector"],VV=["colorSchemes"];function rz(e){return typeof e=="number"?`${e}px`:typeof e=="string"?e:typeof e=="function"?rz(e(1)):Array.isArray(e)?e:"8px"}const UV=(e="joy")=>VS(e);function US(e){var Ge,rt,Ct,It,Pt,Kt,nn,an;const t=e||{},{cssVarPrefix:n="joy",breakpoints:i,spacing:c,components:d,variants:p,shouldSkipGeneratingVar:s=jV,getSelector:_}=t,S=gn(t,$V),E=UV(n),A={primary:um.blue,neutral:um.grey,danger:um.red,success:um.green,warning:um.yellow,common:{white:"#FFF",black:"#000"}},I=ct=>{var pn;const Vt=ct.split("-"),ln=Vt[1],zt=Vt[2];return E(ct,(pn=A[ln])==null?void 0:pn[zt])},O=ct=>({plainColor:I(`palette-${ct}-500`),plainHoverBg:I(`palette-${ct}-100`),plainActiveBg:I(`palette-${ct}-200`),plainDisabledColor:I("palette-neutral-400"),outlinedColor:I(`palette-${ct}-500`),outlinedBorder:I(`palette-${ct}-300`),outlinedHoverBg:I(`palette-${ct}-100`),outlinedActiveBg:I(`palette-${ct}-200`),outlinedDisabledColor:I("palette-neutral-400"),outlinedDisabledBorder:I("palette-neutral-200"),softColor:I(`palette-${ct}-700`),softBg:I(`palette-${ct}-100`),softHoverBg:I(`palette-${ct}-200`),softActiveColor:I(`palette-${ct}-800`),softActiveBg:I(`palette-${ct}-300`),softDisabledColor:I("palette-neutral-400"),softDisabledBg:I("palette-neutral-50"),solidColor:I("palette-common-white"),solidBg:I(`palette-${ct}-500`),solidHoverBg:I(`palette-${ct}-600`),solidActiveBg:I(`palette-${ct}-700`),solidDisabledColor:I("palette-neutral-400"),solidDisabledBg:I("palette-neutral-100")}),N=ct=>({plainColor:I(`palette-${ct}-300`),plainHoverBg:I(`palette-${ct}-800`),plainActiveBg:I(`palette-${ct}-700`),plainDisabledColor:I("palette-neutral-500"),outlinedColor:I(`palette-${ct}-200`),outlinedBorder:I(`palette-${ct}-700`),outlinedHoverBg:I(`palette-${ct}-800`),outlinedActiveBg:I(`palette-${ct}-700`),outlinedDisabledColor:I("palette-neutral-500"),outlinedDisabledBorder:I("palette-neutral-800"),softColor:I(`palette-${ct}-200`),softBg:I(`palette-${ct}-800`),softHoverBg:I(`palette-${ct}-700`),softActiveColor:I(`palette-${ct}-100`),softActiveBg:I(`palette-${ct}-600`),softDisabledColor:I("palette-neutral-500"),softDisabledBg:I("palette-neutral-800"),solidColor:I("palette-common-white"),solidBg:I(`palette-${ct}-500`),solidHoverBg:I(`palette-${ct}-600`),solidActiveBg:I(`palette-${ct}-700`),solidDisabledColor:I("palette-neutral-500"),solidDisabledBg:I("palette-neutral-800")}),$={palette:{mode:"light",primary:we({},A.primary,O("primary")),neutral:we({},A.neutral,O("neutral"),{plainColor:I("palette-neutral-700"),plainHoverColor:I("palette-neutral-900"),outlinedColor:I("palette-neutral-700")}),danger:we({},A.danger,O("danger")),success:we({},A.success,O("success")),warning:we({},A.warning,O("warning")),common:{white:"#FFF",black:"#000"},text:{primary:I("palette-neutral-800"),secondary:I("palette-neutral-700"),tertiary:I("palette-neutral-600"),icon:I("palette-neutral-500")},background:{body:I("palette-common-white"),surface:I("palette-neutral-50"),popup:I("palette-common-white"),level1:I("palette-neutral-100"),level2:I("palette-neutral-200"),level3:I("palette-neutral-300"),tooltip:I("palette-neutral-500"),backdrop:`rgba(${E("palette-neutral-darkChannel",ju(A.neutral[900]))} / 0.25)`},divider:`rgba(${E("palette-neutral-mainChannel",ju(A.neutral[500]))} / 0.2)`,focusVisible:I("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"21 21 21",shadowOpacity:"0.08"},K={palette:{mode:"dark",primary:we({},A.primary,N("primary")),neutral:we({},A.neutral,N("neutral"),{plainColor:I("palette-neutral-300"),plainHoverColor:I("palette-neutral-300")}),danger:we({},A.danger,N("danger")),success:we({},A.success,N("success")),warning:we({},A.warning,N("warning")),common:{white:"#FFF",black:"#000"},text:{primary:I("palette-neutral-100"),secondary:I("palette-neutral-300"),tertiary:I("palette-neutral-400"),icon:I("palette-neutral-400")},background:{body:I("palette-common-black"),surface:I("palette-neutral-900"),popup:I("palette-common-black"),level1:I("palette-neutral-800"),level2:I("palette-neutral-700"),level3:I("palette-neutral-600"),tooltip:I("palette-neutral-600"),backdrop:`rgba(${E("palette-neutral-darkChannel",ju(A.neutral[50]))} / 0.25)`},divider:`rgba(${E("palette-neutral-mainChannel",ju(A.neutral[500]))} / 0.16)`,focusVisible:I("palette-primary-500")},shadowRing:"0 0 #000",shadowChannel:"0 0 0",shadowOpacity:"0.6"},W='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',B=we({body:`"Inter", ${E(`fontFamily-fallback, ${W}`)}`,display:`"Inter", ${E(`fontFamily-fallback, ${W}`)}`,code:"Source Code Pro,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace",fallback:W},S.fontFamily),U=we({sm:300,md:500,lg:600,xl:700},S.fontWeight),J=we({xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem",xl2:"1.5rem",xl3:"1.875rem",xl4:"2.25rem"},S.fontSize),ee=we({xs:"1.33334",sm:"1.42858",md:"1.5",lg:"1.55556",xl:"1.66667"},S.lineHeight),ye=((rt=(Ge=S.colorSchemes)==null?void 0:Ge.light)==null?void 0:rt.shadowRing)??$.shadowRing,Q=((It=(Ct=S.colorSchemes)==null?void 0:Ct.light)==null?void 0:It.shadowChannel)??$.shadowChannel,be=((Kt=(Pt=S.colorSchemes)==null?void 0:Pt.light)==null?void 0:Kt.shadowOpacity)??$.shadowOpacity,re={colorSchemes:{light:$,dark:K},fontSize:J,fontFamily:B,fontWeight:U,focus:{thickness:"2px",selector:`&.${xi("","focusVisible")}, &:focus-visible`,default:{outlineOffset:`var(--focus-outline-offset, ${E("focus-thickness",((nn=S.focus)==null?void 0:nn.thickness)??"2px")})`,outline:`${E("focus-thickness",((an=S.focus)==null?void 0:an.thickness)??"2px")} solid ${E("palette-focusVisible",A.primary[500])}`}},lineHeight:ee,radius:{xs:"2px",sm:"6px",md:"8px",lg:"12px",xl:"16px"},shadow:{xs:`${E("shadowRing",ye)}, 0px 1px 2px 0px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)})`,sm:`${E("shadowRing",ye)}, 0px 1px 2px 0px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)}), 0px 2px 4px 0px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)})`,md:`${E("shadowRing",ye)}, 0px 2px 8px -2px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)}), 0px 6px 12px -2px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)})`,lg:`${E("shadowRing",ye)}, 0px 2px 8px -2px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)}), 0px 12px 16px -4px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)})`,xl:`${E("shadowRing",ye)}, 0px 2px 8px -2px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)}), 0px 20px 24px -4px rgba(${E("shadowChannel",Q)} / ${E("shadowOpacity",be)})`},zIndex:{badge:1,table:10,popup:1e3,modal:1300,snackbar:1400,tooltip:1500},typography:{h1:{fontFamily:E(`fontFamily-display, ${B.display}`),fontWeight:E(`fontWeight-xl, ${U.xl}`),fontSize:E(`fontSize-xl4, ${J.xl4}`),lineHeight:E(`lineHeight-xs, ${ee.xs}`),letterSpacing:"-0.025em",color:E(`palette-text-primary, ${$.palette.text.primary}`)},h2:{fontFamily:E(`fontFamily-display, ${B.display}`),fontWeight:E(`fontWeight-xl, ${U.xl}`),fontSize:E(`fontSize-xl3, ${J.xl3}`),lineHeight:E(`lineHeight-xs, ${ee.xs}`),letterSpacing:"-0.025em",color:E(`palette-text-primary, ${$.palette.text.primary}`)},h3:{fontFamily:E(`fontFamily-display, ${B.display}`),fontWeight:E(`fontWeight-lg, ${U.lg}`),fontSize:E(`fontSize-xl2, ${J.xl2}`),lineHeight:E(`lineHeight-xs, ${ee.xs}`),letterSpacing:"-0.025em",color:E(`palette-text-primary, ${$.palette.text.primary}`)},h4:{fontFamily:E(`fontFamily-display, ${B.display}`),fontWeight:E(`fontWeight-lg, ${U.lg}`),fontSize:E(`fontSize-xl, ${J.xl}`),lineHeight:E(`lineHeight-md, ${ee.md}`),letterSpacing:"-0.025em",color:E(`palette-text-primary, ${$.palette.text.primary}`)},"title-lg":{fontFamily:E(`fontFamily-body, ${B.body}`),fontWeight:E(`fontWeight-lg, ${U.lg}`),fontSize:E(`fontSize-lg, ${J.lg}`),lineHeight:E(`lineHeight-xs, ${ee.xs}`),color:E(`palette-text-primary, ${$.palette.text.primary}`)},"title-md":{fontFamily:E(`fontFamily-body, ${B.body}`),fontWeight:E(`fontWeight-md, ${U.md}`),fontSize:E(`fontSize-md, ${J.md}`),lineHeight:E(`lineHeight-md, ${ee.md}`),color:E(`palette-text-primary, ${$.palette.text.primary}`)},"title-sm":{fontFamily:E(`fontFamily-body, ${B.body}`),fontWeight:E(`fontWeight-md, ${U.md}`),fontSize:E(`fontSize-sm, ${J.sm}`),lineHeight:E(`lineHeight-sm, ${ee.sm}`),color:E(`palette-text-primary, ${$.palette.text.primary}`)},"body-lg":{fontFamily:E(`fontFamily-body, ${B.body}`),fontSize:E(`fontSize-lg, ${J.lg}`),lineHeight:E(`lineHeight-md, ${ee.md}`),color:E(`palette-text-secondary, ${$.palette.text.secondary}`)},"body-md":{fontFamily:E(`fontFamily-body, ${B.body}`),fontSize:E(`fontSize-md, ${J.md}`),lineHeight:E(`lineHeight-md, ${ee.md}`),color:E(`palette-text-secondary, ${$.palette.text.secondary}`)},"body-sm":{fontFamily:E(`fontFamily-body, ${B.body}`),fontSize:E(`fontSize-sm, ${J.sm}`),lineHeight:E(`lineHeight-md, ${ee.md}`),color:E(`palette-text-tertiary, ${$.palette.text.tertiary}`)},"body-xs":{fontFamily:E(`fontFamily-body, ${B.body}`),fontWeight:E(`fontWeight-md, ${U.md}`),fontSize:E(`fontSize-xs, ${J.xs}`),lineHeight:E(`lineHeight-md, ${ee.md}`),color:E(`palette-text-tertiary, ${$.palette.text.tertiary}`)}}},Ie=S?Na(re,S):re,{colorSchemes:Be}=Ie,le=gn(Ie,VV);let xe=we({colorSchemes:Be,defaultColorScheme:"light"},le,{breakpoints:O3(i??{}),components:Na({MuiSvgIcon:{defaultProps:{fontSize:"xl2"},styleOverrides:{root:({ownerState:ct,theme:Vt})=>{var zt;const ln=ct.instanceFontSize;return we({margin:"var(--Icon-margin)"},ct.fontSize&&ct.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${Vt.vars.fontSize[ct.fontSize]})`},!ct.htmlColor&&we({color:`var(--Icon-color, ${xe.vars.palette.text.icon})`},ct.color&&ct.color!=="inherit"&&Vt.vars.palette[ct.color]&&{color:`rgba(${(zt=Vt.vars.palette[ct.color])==null?void 0:zt.mainChannel} / 1)`}),ln&&ln!=="inherit"&&{"--Icon-fontSize":Vt.vars.fontSize[ln]})}}}},d),cssVarPrefix:n,getCssVar:E,spacing:rz(c)});xe=B3(xe);function Se(ct,Vt){Object.keys(Vt).forEach(ln=>{const zt={main:"500",light:"200",dark:"700"};ct==="dark"&&(zt.main=400),!Vt[ln].mainChannel&&Vt[ln][zt.main]&&(Vt[ln].mainChannel=ju(Vt[ln][zt.main])),!Vt[ln].lightChannel&&Vt[ln][zt.light]&&(Vt[ln].lightChannel=ju(Vt[ln][zt.light])),!Vt[ln].darkChannel&&Vt[ln][zt.dark]&&(Vt[ln].darkChannel=ju(Vt[ln][zt.dark]))})}Object.entries(xe.colorSchemes).forEach(([ct,Vt])=>{Se(ct,Vt.palette)});const oe={prefix:n,shouldSkipGeneratingVar:s,getSelector:_||(ct=>xe.defaultColorScheme===ct?`${xe.colorSchemeSelector}, [${xe.attribute}="${ct}"]`:ct?`[${xe.attribute}="${ct}"]`:xe.colorSchemeSelector)},{vars:te,generateThemeVars:Ce,generateStyleSheets:ve}=OV(xe,oe);xe.attribute="data-joy-color-scheme",xe.colorSchemeSelector=":root",xe.vars=te,xe.generateThemeVars=Ce,xe.generateStyleSheets=ve,xe.generateSpacing=function(){return j3(c,DS(this))},xe.spacing=xe.generateSpacing(),xe.unstable_sxConfig=we({},FV,e==null?void 0:e.unstable_sxConfig),xe.unstable_sx=function(Vt){return LS({sx:Vt,theme:this})},xe.getColorSchemeSelector=ct=>`[${xe.attribute}="${ct}"] &`;const Fe={getCssVar:E,palette:xe.colorSchemes.light.palette};return xe.variants=Na({plain:po("plain",Fe),plainHover:po("plainHover",Fe),plainActive:po("plainActive",Fe),plainDisabled:po("plainDisabled",Fe),outlined:po("outlined",Fe),outlinedHover:po("outlinedHover",Fe),outlinedActive:po("outlinedActive",Fe),outlinedDisabled:po("outlinedDisabled",Fe),soft:po("soft",Fe),softHover:po("softHover",Fe),softActive:po("softActive",Fe),softDisabled:po("softDisabled",Fe),solid:po("solid",Fe),solidHover:po("solidHover",Fe),solidActive:po("solidActive",Fe),solidDisabled:po("solidDisabled",Fe)},p),Object.entries(xe.colorSchemes[xe.defaultColorScheme]).forEach(([ct,Vt])=>{xe[ct]=Vt}),xe.palette=we({},xe.colorSchemes.light.palette,{colorScheme:"light"}),xe.shouldSkipGeneratingVar=s,xe.applyStyles=$3,xe}const WV=US(),Ng=WV,{CssVarsProvider:GV,useColorScheme:_se,getInitColorSchemeScript:xse}=PV({themeId:kc,theme:Ng,attribute:"data-joy-color-scheme",modeStorageKey:"joy-mode",colorSchemeStorageKey:"joy-color-scheme",defaultColorScheme:{light:"light",dark:"dark"}}),HV=tV({defaultTheme:Ng,themeId:kc}),Yt=HV,iz=()=>{const e=W3(Ng);return e[kc]||e};function ZV({children:e,theme:t}){let n=Ng;return t&&(n=US(kc in t?t[kc]:t)),z.jsx(ez,{theme:n,themeId:t&&kc in t?kc:void 0,children:e})}function zi({props:e,name:t}){return rV({props:e,name:t,defaultTheme:we({},Ng,{components:{}}),themeId:kc})}function qV(e){return typeof e=="string"}function oz(e,t,n){return e===void 0||qV(e)?t:we({},t,{ownerState:we({},t.ownerState,n)})}const KV={disableDefaultClasses:!1},XV=q.createContext(KV);function JV(e){const{disableDefaultClasses:t}=q.useContext(XV);return n=>t?"":e(n)}function td(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{n[i]=e[i]}),n}function sz(e,t,n){return typeof e=="function"?e(t,n):e}function YV(e){const{rootElementName:t="",componentName:n}=e,[i,c]=q.useState(t.toUpperCase()),d=q.useCallback(p=>{c((p==null?void 0:p.tagName)??"")},[]);return[i,d]}function az(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=az(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function rI(){for(var e,t,n=0,i="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=az(e))&&(i&&(i+=" "),i+=t);return i}function iI(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function lz(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:c,className:d}=e;if(!t){const O=rI(n==null?void 0:n.className,d,c==null?void 0:c.className,i==null?void 0:i.className),N=we({},n==null?void 0:n.style,c==null?void 0:c.style,i==null?void 0:i.style),$=we({},n,c,i);return O.length>0&&($.className=O),Object.keys(N).length>0&&($.style=N),{props:$,internalRef:void 0}}const p=td(we({},c,i)),s=iI(i),_=iI(c),S=t(p),E=rI(S==null?void 0:S.className,n==null?void 0:n.className,d,c==null?void 0:c.className,i==null?void 0:i.className),A=we({},S==null?void 0:S.style,n==null?void 0:n.style,c==null?void 0:c.style,i==null?void 0:i.style),I=we({},S,n,_,s);return E.length>0&&(I.className=E),Object.keys(A).length>0&&(I.style=A),{props:I,internalRef:S.ref}}const QV=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function e8(e){var A;const{elementType:t,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:c=!1}=e,d=gn(e,QV),p=c?{}:sz(n,i),{props:s,internalRef:_}=lz(we({},d,{externalSlotProps:p})),S=ko(_,p==null?void 0:p.ref,(A=e.additionalProps)==null?void 0:A.ref);return oz(t,we({},s,{ref:S}),i)}const cz="base";function t8(e){return`${cz}--${e}`}function n8(e,t){return`${cz}-${e}-${t}`}function uz(e,t){const n=H3[t];return n?t8(n):n8(e,t)}function r8(e,t){const n={};return t.forEach(i=>{n[i]=uz(e,i)}),n}function $g(e={}){const{disabled:t=!1,focusableWhenDisabled:n,href:i,rootRef:c,tabIndex:d,to:p,type:s,rootElementName:_}=e,S=q.useRef(),[E,A]=q.useState(!1),{isFocusVisibleRef:I,onFocus:O,onBlur:N,ref:$}=Y3(),[K,W]=q.useState(!1);t&&!n&&K&&W(!1),q.useEffect(()=>{I.current=K},[K,I]);const[B,U]=YV({rootElementName:_??(i||p?"a":void 0),componentName:"Button"}),J=oe=>te=>{var Ce;K&&te.preventDefault(),(Ce=oe.onMouseLeave)==null||Ce.call(oe,te)},ee=oe=>te=>{var Ce;N(te),I.current===!1&&W(!1),(Ce=oe.onBlur)==null||Ce.call(oe,te)},ye=oe=>te=>{var Ce,ve;S.current||(S.current=te.currentTarget),O(te),I.current===!0&&(W(!0),(Ce=oe.onFocusVisible)==null||Ce.call(oe,te)),(ve=oe.onFocus)==null||ve.call(oe,te)},Q=()=>{const oe=S.current;return B==="BUTTON"||B==="INPUT"&&["button","submit","reset"].includes(oe==null?void 0:oe.type)||B==="A"&&(oe==null?void 0:oe.href)},be=oe=>te=>{var Ce;t||(Ce=oe.onClick)==null||Ce.call(oe,te)},re=oe=>te=>{var Ce;t||(A(!0),document.addEventListener("mouseup",()=>{A(!1)},{once:!0})),(Ce=oe.onMouseDown)==null||Ce.call(oe,te)},Ie=oe=>te=>{var Ce,ve;(Ce=oe.onKeyDown)==null||Ce.call(oe,te),!te.defaultMuiPrevented&&(te.target===te.currentTarget&&!Q()&&te.key===" "&&te.preventDefault(),te.target===te.currentTarget&&te.key===" "&&!t&&A(!0),te.target===te.currentTarget&&!Q()&&te.key==="Enter"&&!t&&((ve=oe.onClick)==null||ve.call(oe,te),te.preventDefault()))},Be=oe=>te=>{var Ce,ve;te.target===te.currentTarget&&A(!1),(Ce=oe.onKeyUp)==null||Ce.call(oe,te),te.target===te.currentTarget&&!Q()&&!t&&te.key===" "&&!te.defaultMuiPrevented&&((ve=oe.onClick)==null||ve.call(oe,te))},le=ko(U,c,$,S),xe={};return d!==void 0&&(xe.tabIndex=d),B==="BUTTON"?(xe.type=s??"button",n?xe["aria-disabled"]=t:xe.disabled=t):B==="INPUT"?s&&["button","submit","reset"].includes(s)&&(n?xe["aria-disabled"]=t:xe.disabled=t):B!==""&&(!i&&!p&&(xe.role="button",xe.tabIndex=d??0),t&&(xe["aria-disabled"]=t,xe.tabIndex=n?d??0:-1)),{getRootProps:(oe={})=>{const te=we({},td(e),td(oe)),Ce=we({type:s},te,xe,oe,{onBlur:ee(te),onClick:be(te),onFocus:ye(te),onKeyDown:Ie(te),onKeyUp:Be(te),onMouseDown:re(te),onMouseLeave:J(te),ref:le});return delete Ce.onFocusVisible,Ce},focusVisible:K,setFocusVisible:W,active:E,rootRef:le}}const i8=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function o8(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function s8(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function a8(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||s8(e))}function l8(e){const t=[],n=[];return Array.from(e.querySelectorAll(i8)).forEach((i,c)=>{const d=o8(i);d===-1||!a8(i)||(d===0?t.push(i):n.push({documentOrder:c,tabIndex:d,node:i}))}),n.sort((i,c)=>i.tabIndex===c.tabIndex?i.documentOrder-c.documentOrder:i.tabIndex-c.tabIndex).map(i=>i.node).concat(t)}function c8(){return!0}function u8(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:c=!1,getTabbable:d=l8,isEnabled:p=c8,open:s}=e,_=q.useRef(!1),S=q.useRef(null),E=q.useRef(null),A=q.useRef(null),I=q.useRef(null),O=q.useRef(!1),N=q.useRef(null),$=ko(t.ref,N),K=q.useRef(null);q.useEffect(()=>{!s||!N.current||(O.current=!n)},[n,s]),q.useEffect(()=>{if(!s||!N.current)return;const U=$a(N.current);return N.current.contains(U.activeElement)||(N.current.hasAttribute("tabIndex")||N.current.setAttribute("tabIndex","-1"),O.current&&N.current.focus()),()=>{c||(A.current&&A.current.focus&&(_.current=!0,A.current.focus()),A.current=null)}},[s]),q.useEffect(()=>{if(!s||!N.current)return;const U=$a(N.current),J=Q=>{K.current=Q,!(i||!p()||Q.key!=="Tab")&&U.activeElement===N.current&&Q.shiftKey&&(_.current=!0,E.current&&E.current.focus())},ee=()=>{var re,Ie;const Q=N.current;if(Q===null)return;if(!U.hasFocus()||!p()||_.current){_.current=!1;return}if(Q.contains(U.activeElement)||i&&U.activeElement!==S.current&&U.activeElement!==E.current)return;if(U.activeElement!==I.current)I.current=null;else if(I.current!==null)return;if(!O.current)return;let be=[];if((U.activeElement===S.current||U.activeElement===E.current)&&(be=d(N.current)),be.length>0){const Be=!!((re=K.current)!=null&&re.shiftKey&&((Ie=K.current)==null?void 0:Ie.key)==="Tab"),le=be[0],xe=be[be.length-1];typeof le!="string"&&typeof xe!="string"&&(Be?xe.focus():le.focus())}else Q.focus()};U.addEventListener("focusin",ee),U.addEventListener("keydown",J,!0);const ye=setInterval(()=>{U.activeElement&&U.activeElement.tagName==="BODY"&&ee()},50);return()=>{clearInterval(ye),U.removeEventListener("focusin",ee),U.removeEventListener("keydown",J,!0)}},[n,i,c,p,s,d]);const W=U=>{A.current===null&&(A.current=U.relatedTarget),O.current=!0,I.current=U.target;const J=t.props.onFocus;J&&J(U)},B=U=>{A.current===null&&(A.current=U.relatedTarget),O.current=!0};return z.jsxs(q.Fragment,{children:[z.jsx("div",{tabIndex:s?0:-1,onFocus:B,ref:S,"data-testid":"sentinelStart"}),q.cloneElement(t,{ref:$,onFocus:W}),z.jsx("div",{tabIndex:s?0:-1,onFocus:B,ref:E,"data-testid":"sentinelEnd"})]})}const d8=q.createContext(void 0);function h8(){return q.useContext(d8)}function f8(e={}){const{defaultValue:t,disabled:n=!1,error:i=!1,onBlur:c,onChange:d,onFocus:p,required:s=!1,value:_,inputRef:S}=e,E=h8();let A,I,O,N,$;E?(A=void 0,I=E.disabled??!1,O=E.error??!1,N=E.required??!1,$=E.value):(A=t,I=n,O=i,N=s,$=_);const{current:K}=q.useRef($!=null),W=q.useCallback(le=>{},[]),B=q.useRef(null),U=ko(B,S,W),[J,ee]=q.useState(!1);q.useEffect(()=>{!E&&I&&J&&(ee(!1),c==null||c())},[E,I,J,c]);const ye=le=>xe=>{var Se,oe;if(E!=null&&E.disabled){xe.stopPropagation();return}(Se=le.onFocus)==null||Se.call(le,xe),E&&E.onFocus?(oe=E==null?void 0:E.onFocus)==null||oe.call(E):ee(!0)},Q=le=>xe=>{var Se;(Se=le.onBlur)==null||Se.call(le,xe),E&&E.onBlur?E.onBlur():ee(!1)},be=le=>(xe,...Se)=>{var oe,te;if(!K&&(xe.target||B.current)==null)throw new Error(tg(17));(oe=E==null?void 0:E.onChange)==null||oe.call(E,xe),(te=le.onChange)==null||te.call(le,xe,...Se)},re=le=>xe=>{var Se;B.current&&xe.currentTarget===xe.target&&B.current.focus(),(Se=le.onClick)==null||Se.call(le,xe)};return{disabled:I,error:O,focused:J,formControlContext:E,getInputProps:(le={})=>{const Se=we({},{onBlur:c,onChange:d,onFocus:p},td(le)),oe=we({},Se,{onBlur:Q(Se),onChange:be(Se),onFocus:ye(Se)});return we({},oe,{"aria-invalid":O||void 0,defaultValue:A,value:$,required:N,disabled:I},le,{ref:U},oe)},getRootProps:(le={})=>{const xe=td(e,["onBlur","onChange","onFocus"]),Se=we({},xe,td(le));return we({},le,Se,{onClick:re(Se)})},inputRef:U,required:N,value:$}}var dz={exports:{}},ps={},hz={exports:{}},fz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ve,Fe){var Ge=ve.length;ve.push(Fe);e:for(;0<Ge;){var rt=Ge-1>>>1,Ct=ve[rt];if(0<c(Ct,Fe))ve[rt]=Fe,ve[Ge]=Ct,Ge=rt;else break e}}function n(ve){return ve.length===0?null:ve[0]}function i(ve){if(ve.length===0)return null;var Fe=ve[0],Ge=ve.pop();if(Ge!==Fe){ve[0]=Ge;e:for(var rt=0,Ct=ve.length,It=Ct>>>1;rt<It;){var Pt=2*(rt+1)-1,Kt=ve[Pt],nn=Pt+1,an=ve[nn];if(0>c(Kt,Ge))nn<Ct&&0>c(an,Kt)?(ve[rt]=an,ve[nn]=Ge,rt=nn):(ve[rt]=Kt,ve[Pt]=Ge,rt=Pt);else if(nn<Ct&&0>c(an,Ge))ve[rt]=an,ve[nn]=Ge,rt=nn;else break e}}return Fe}function c(ve,Fe){var Ge=ve.sortIndex-Fe.sortIndex;return Ge!==0?Ge:ve.id-Fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var p=Date,s=p.now();e.unstable_now=function(){return p.now()-s}}var _=[],S=[],E=1,A=null,I=3,O=!1,N=!1,$=!1,K=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(ve){for(var Fe=n(S);Fe!==null;){if(Fe.callback===null)i(S);else if(Fe.startTime<=ve)i(S),Fe.sortIndex=Fe.expirationTime,t(_,Fe);else break;Fe=n(S)}}function J(ve){if($=!1,U(ve),!N)if(n(_)!==null)N=!0,te(ee);else{var Fe=n(S);Fe!==null&&Ce(J,Fe.startTime-ve)}}function ee(ve,Fe){N=!1,$&&($=!1,W(be),be=-1),O=!0;var Ge=I;try{for(U(Fe),A=n(_);A!==null&&(!(A.expirationTime>Fe)||ve&&!Be());){var rt=A.callback;if(typeof rt=="function"){A.callback=null,I=A.priorityLevel;var Ct=rt(A.expirationTime<=Fe);Fe=e.unstable_now(),typeof Ct=="function"?A.callback=Ct:A===n(_)&&i(_),U(Fe)}else i(_);A=n(_)}if(A!==null)var It=!0;else{var Pt=n(S);Pt!==null&&Ce(J,Pt.startTime-Fe),It=!1}return It}finally{A=null,I=Ge,O=!1}}var ye=!1,Q=null,be=-1,re=5,Ie=-1;function Be(){return!(e.unstable_now()-Ie<re)}function le(){if(Q!==null){var ve=e.unstable_now();Ie=ve;var Fe=!0;try{Fe=Q(!0,ve)}finally{Fe?xe():(ye=!1,Q=null)}}else ye=!1}var xe;if(typeof B=="function")xe=function(){B(le)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,oe=Se.port2;Se.port1.onmessage=le,xe=function(){oe.postMessage(null)}}else xe=function(){K(le,0)};function te(ve){Q=ve,ye||(ye=!0,xe())}function Ce(ve,Fe){be=K(function(){ve(e.unstable_now())},Fe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ve){ve.callback=null},e.unstable_continueExecution=function(){N||O||(N=!0,te(ee))},e.unstable_forceFrameRate=function(ve){0>ve||125<ve?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):re=0<ve?Math.floor(1e3/ve):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return n(_)},e.unstable_next=function(ve){switch(I){case 1:case 2:case 3:var Fe=3;break;default:Fe=I}var Ge=I;I=Fe;try{return ve()}finally{I=Ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ve,Fe){switch(ve){case 1:case 2:case 3:case 4:case 5:break;default:ve=3}var Ge=I;I=ve;try{return Fe()}finally{I=Ge}},e.unstable_scheduleCallback=function(ve,Fe,Ge){var rt=e.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?rt+Ge:rt):Ge=rt,ve){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=Ge+Ct,ve={id:E++,callback:Fe,priorityLevel:ve,startTime:Ge,expirationTime:Ct,sortIndex:-1},Ge>rt?(ve.sortIndex=Ge,t(S,ve),n(_)===null&&ve===n(S)&&($?(W(be),be=-1):$=!0,Ce(J,Ge-rt))):(ve.sortIndex=Ct,t(_,ve),N||O||(N=!0,te(ee))),ve},e.unstable_shouldYield=Be,e.unstable_wrapCallback=function(ve){var Fe=I;return function(){var Ge=I;I=Fe;try{return ve.apply(this,arguments)}finally{I=Ge}}}})(fz);hz.exports=fz;var p8=hz.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m8=q,us=p8;function Dt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pz=new Set,ag={};function vd(e,t){hf(e,t),hf(e+"Capture",t)}function hf(e,t){for(ag[e]=t,e=0;e<t.length;e++)pz.add(t[e])}var Dl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ww=Object.prototype.hasOwnProperty,g8=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oI={},sI={};function y8(e){return Ww.call(sI,e)?!0:Ww.call(oI,e)?!1:g8.test(e)?sI[e]=!0:(oI[e]=!0,!1)}function v8(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function _8(e,t,n,i){if(t===null||typeof t>"u"||v8(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Po(e,t,n,i,c,d,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=d,this.removeEmptyString=p}var no={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){no[e]=new Po(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];no[t]=new Po(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){no[e]=new Po(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){no[e]=new Po(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){no[e]=new Po(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){no[e]=new Po(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){no[e]=new Po(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){no[e]=new Po(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){no[e]=new Po(e,5,!1,e.toLowerCase(),null,!1,!1)});var WS=/[\-:]([a-z])/g;function GS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(WS,GS);no[t]=new Po(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(WS,GS);no[t]=new Po(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(WS,GS);no[t]=new Po(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){no[e]=new Po(e,1,!1,e.toLowerCase(),null,!1,!1)});no.xlinkHref=new Po("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){no[e]=new Po(e,1,!1,e.toLowerCase(),null,!0,!0)});function HS(e,t,n,i){var c=no.hasOwnProperty(t)?no[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(_8(t,n,c,i)&&(n=null),i||c===null?y8(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,i=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var jl=m8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j0=Symbol.for("react.element"),Lh=Symbol.for("react.portal"),Rh=Symbol.for("react.fragment"),ZS=Symbol.for("react.strict_mode"),Gw=Symbol.for("react.profiler"),mz=Symbol.for("react.provider"),gz=Symbol.for("react.context"),qS=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),Zw=Symbol.for("react.suspense_list"),KS=Symbol.for("react.memo"),xc=Symbol.for("react.lazy"),yz=Symbol.for("react.offscreen"),aI=Symbol.iterator;function hm(e){return e===null||typeof e!="object"?null:(e=aI&&e[aI]||e["@@iterator"],typeof e=="function"?e:null)}var oi=Object.assign,$b;function km(e){if($b===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$b=t&&t[1]||""}return`
`+$b+e}var Vb=!1;function Ub(e,t){if(!e||Vb)return"";Vb=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(S){var i=S}Reflect.construct(e,[],t)}else{try{t.call()}catch(S){i=S}e.call(t.prototype)}else{try{throw Error()}catch(S){i=S}e()}}catch(S){if(S&&i&&typeof S.stack=="string"){for(var c=S.stack.split(`
`),d=i.stack.split(`
`),p=c.length-1,s=d.length-1;1<=p&&0<=s&&c[p]!==d[s];)s--;for(;1<=p&&0<=s;p--,s--)if(c[p]!==d[s]){if(p!==1||s!==1)do if(p--,s--,0>s||c[p]!==d[s]){var _=`
`+c[p].replace(" at new "," at ");return e.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",e.displayName)),_}while(1<=p&&0<=s);break}}}finally{Vb=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?km(e):""}function x8(e){switch(e.tag){case 5:return km(e.type);case 16:return km("Lazy");case 13:return km("Suspense");case 19:return km("SuspenseList");case 0:case 2:case 15:return e=Ub(e.type,!1),e;case 11:return e=Ub(e.type.render,!1),e;case 1:return e=Ub(e.type,!0),e;default:return""}}function qw(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rh:return"Fragment";case Lh:return"Portal";case Gw:return"Profiler";case ZS:return"StrictMode";case Hw:return"Suspense";case Zw:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case gz:return(e.displayName||"Context")+".Consumer";case mz:return(e._context.displayName||"Context")+".Provider";case qS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case KS:return t=e.displayName||null,t!==null?t:qw(e.type)||"Memo";case xc:t=e._payload,e=e._init;try{return qw(e(t))}catch{}}return null}function b8(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qw(t);case 8:return t===ZS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Uc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vz(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function w8(e){var t=vz(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,d=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){i=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function N0(e){e._valueTracker||(e._valueTracker=w8(e))}function _z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=vz(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function $v(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Kw(e,t){var n=t.checked;return oi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function lI(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=Uc(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function xz(e,t){t=t.checked,t!=null&&HS(e,"checked",t,!1)}function Xw(e,t){xz(e,t);var n=Uc(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jw(e,t.type,n):t.hasOwnProperty("defaultValue")&&Jw(e,t.type,Uc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cI(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Jw(e,t,n){(t!=="number"||$v(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Im=Array.isArray;function nf(e,t,n,i){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Uc(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Yw(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Dt(91));return oi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uI(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Dt(92));if(Im(n)){if(1<n.length)throw Error(Dt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Uc(n)}}function bz(e,t){var n=Uc(t.value),i=Uc(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function dI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wz(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qw(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wz(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $0,Sz=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($0=$0||document.createElement("div"),$0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function lg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Lm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},S8=["Webkit","ms","Moz","O"];Object.keys(Lm).forEach(function(e){S8.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lm[t]=Lm[e]})});function Ez(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Lm.hasOwnProperty(e)&&Lm[e]?(""+t).trim():t+"px"}function Tz(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,c=Ez(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,c):e[n]=c}}var E8=oi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function e2(e,t){if(t){if(E8[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Dt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Dt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Dt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Dt(62))}}function t2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var n2=null;function XS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var r2=null,rf=null,of=null;function hI(e){if(e=Wg(e)){if(typeof r2!="function")throw Error(Dt(280));var t=e.stateNode;t&&(t=gx(t),r2(e.stateNode,e.type,t))}}function Cz(e){rf?of?of.push(e):of=[e]:rf=e}function Az(){if(rf){var e=rf,t=of;if(of=rf=null,hI(e),t)for(e=0;e<t.length;e++)hI(t[e])}}function kz(e,t){return e(t)}function Iz(){}var Wb=!1;function Pz(e,t,n){if(Wb)return e(t,n);Wb=!0;try{return kz(e,t,n)}finally{Wb=!1,(rf!==null||of!==null)&&(Iz(),Az())}}function cg(e,t){var n=e.stateNode;if(n===null)return null;var i=gx(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Dt(231,t,typeof n));return n}var i2=!1;if(Dl)try{var fm={};Object.defineProperty(fm,"passive",{get:function(){i2=!0}}),window.addEventListener("test",fm,fm),window.removeEventListener("test",fm,fm)}catch{i2=!1}function T8(e,t,n,i,c,d,p,s,_){var S=Array.prototype.slice.call(arguments,3);try{t.apply(n,S)}catch(E){this.onError(E)}}var Rm=!1,Vv=null,Uv=!1,o2=null,C8={onError:function(e){Rm=!0,Vv=e}};function A8(e,t,n,i,c,d,p,s,_){Rm=!1,Vv=null,T8.apply(C8,arguments)}function k8(e,t,n,i,c,d,p,s,_){if(A8.apply(this,arguments),Rm){if(Rm){var S=Vv;Rm=!1,Vv=null}else throw Error(Dt(198));Uv||(Uv=!0,o2=S)}}function _d(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Mz(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fI(e){if(_d(e)!==e)throw Error(Dt(188))}function I8(e){var t=e.alternate;if(!t){if(t=_d(e),t===null)throw Error(Dt(188));return t!==e?null:e}for(var n=e,i=t;;){var c=n.return;if(c===null)break;var d=c.alternate;if(d===null){if(i=c.return,i!==null){n=i;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===n)return fI(c),e;if(d===i)return fI(c),t;d=d.sibling}throw Error(Dt(188))}if(n.return!==i.return)n=c,i=d;else{for(var p=!1,s=c.child;s;){if(s===n){p=!0,n=c,i=d;break}if(s===i){p=!0,i=c,n=d;break}s=s.sibling}if(!p){for(s=d.child;s;){if(s===n){p=!0,n=d,i=c;break}if(s===i){p=!0,i=d,n=c;break}s=s.sibling}if(!p)throw Error(Dt(189))}}if(n.alternate!==i)throw Error(Dt(190))}if(n.tag!==3)throw Error(Dt(188));return n.stateNode.current===n?e:t}function Dz(e){return e=I8(e),e!==null?zz(e):null}function zz(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zz(e);if(t!==null)return t;e=e.sibling}return null}var Lz=us.unstable_scheduleCallback,pI=us.unstable_cancelCallback,P8=us.unstable_shouldYield,M8=us.unstable_requestPaint,gi=us.unstable_now,D8=us.unstable_getCurrentPriorityLevel,JS=us.unstable_ImmediatePriority,Rz=us.unstable_UserBlockingPriority,Wv=us.unstable_NormalPriority,z8=us.unstable_LowPriority,Oz=us.unstable_IdlePriority,hx=null,Va=null;function L8(e){if(Va&&typeof Va.onCommitFiberRoot=="function")try{Va.onCommitFiberRoot(hx,e,void 0,(e.current.flags&128)===128)}catch{}}var va=Math.clz32?Math.clz32:B8,R8=Math.log,O8=Math.LN2;function B8(e){return e>>>=0,e===0?32:31-(R8(e)/O8|0)|0}var V0=64,U0=4194304;function Pm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Gv(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,c=e.suspendedLanes,d=e.pingedLanes,p=n&268435455;if(p!==0){var s=p&~c;s!==0?i=Pm(s):(d&=p,d!==0&&(i=Pm(d)))}else p=n&~c,p!==0?i=Pm(p):d!==0&&(i=Pm(d));if(i===0)return 0;if(t!==0&&t!==i&&!(t&c)&&(c=i&-i,d=t&-t,c>=d||c===16&&(d&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-va(t),c=1<<n,i|=e[n],t&=~c;return i}function F8(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function j8(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes;0<d;){var p=31-va(d),s=1<<p,_=c[p];_===-1?(!(s&n)||s&i)&&(c[p]=F8(s,t)):_<=t&&(e.expiredLanes|=s),d&=~s}}function s2(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Bz(){var e=V0;return V0<<=1,!(V0&4194240)&&(V0=64),e}function Gb(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Vg(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-va(t),e[t]=n}function N8(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var c=31-va(n),d=1<<c;t[c]=0,i[c]=-1,e[c]=-1,n&=~d}}function YS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-va(n),c=1<<i;c&t|e[i]&t&&(e[i]|=t),n&=~c}}var xr=0;function Fz(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jz,QS,Nz,$z,Vz,a2=!1,W0=[],Dc=null,zc=null,Lc=null,ug=new Map,dg=new Map,Ec=[],$8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mI(e,t){switch(e){case"focusin":case"focusout":Dc=null;break;case"dragenter":case"dragleave":zc=null;break;case"mouseover":case"mouseout":Lc=null;break;case"pointerover":case"pointerout":ug.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dg.delete(t.pointerId)}}function pm(e,t,n,i,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Wg(t),t!==null&&QS(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function V8(e,t,n,i,c){switch(t){case"focusin":return Dc=pm(Dc,e,t,n,i,c),!0;case"dragenter":return zc=pm(zc,e,t,n,i,c),!0;case"mouseover":return Lc=pm(Lc,e,t,n,i,c),!0;case"pointerover":var d=c.pointerId;return ug.set(d,pm(ug.get(d)||null,e,t,n,i,c)),!0;case"gotpointercapture":return d=c.pointerId,dg.set(d,pm(dg.get(d)||null,e,t,n,i,c)),!0}return!1}function Uz(e){var t=Zu(e.target);if(t!==null){var n=_d(t);if(n!==null){if(t=n.tag,t===13){if(t=Mz(n),t!==null){e.blockedOn=t,Vz(e.priority,function(){Nz(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=l2(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);n2=i,n.target.dispatchEvent(i),n2=null}else return t=Wg(n),t!==null&&QS(t),e.blockedOn=n,!1;t.shift()}return!0}function gI(e,t,n){vv(e)&&n.delete(t)}function U8(){a2=!1,Dc!==null&&vv(Dc)&&(Dc=null),zc!==null&&vv(zc)&&(zc=null),Lc!==null&&vv(Lc)&&(Lc=null),ug.forEach(gI),dg.forEach(gI)}function mm(e,t){e.blockedOn===t&&(e.blockedOn=null,a2||(a2=!0,us.unstable_scheduleCallback(us.unstable_NormalPriority,U8)))}function hg(e){function t(c){return mm(c,e)}if(0<W0.length){mm(W0[0],e);for(var n=1;n<W0.length;n++){var i=W0[n];i.blockedOn===e&&(i.blockedOn=null)}}for(Dc!==null&&mm(Dc,e),zc!==null&&mm(zc,e),Lc!==null&&mm(Lc,e),ug.forEach(t),dg.forEach(t),n=0;n<Ec.length;n++)i=Ec[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Ec.length&&(n=Ec[0],n.blockedOn===null);)Uz(n),n.blockedOn===null&&Ec.shift()}var sf=jl.ReactCurrentBatchConfig,Hv=!0;function W8(e,t,n,i){var c=xr,d=sf.transition;sf.transition=null;try{xr=1,eE(e,t,n,i)}finally{xr=c,sf.transition=d}}function G8(e,t,n,i){var c=xr,d=sf.transition;sf.transition=null;try{xr=4,eE(e,t,n,i)}finally{xr=c,sf.transition=d}}function eE(e,t,n,i){if(Hv){var c=l2(e,t,n,i);if(c===null)tw(e,t,i,Zv,n),mI(e,i);else if(V8(c,e,t,n,i))i.stopPropagation();else if(mI(e,i),t&4&&-1<$8.indexOf(e)){for(;c!==null;){var d=Wg(c);if(d!==null&&jz(d),d=l2(e,t,n,i),d===null&&tw(e,t,i,Zv,n),d===c)break;c=d}c!==null&&i.stopPropagation()}else tw(e,t,i,null,n)}}var Zv=null;function l2(e,t,n,i){if(Zv=null,e=XS(i),e=Zu(e),e!==null)if(t=_d(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Mz(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zv=e,null}function Wz(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(D8()){case JS:return 1;case Rz:return 4;case Wv:case z8:return 16;case Oz:return 536870912;default:return 16}default:return 16}}var Ic=null,tE=null,_v=null;function Gz(){if(_v)return _v;var e,t=tE,n=t.length,i,c="value"in Ic?Ic.value:Ic.textContent,d=c.length;for(e=0;e<n&&t[e]===c[e];e++);var p=n-e;for(i=1;i<=p&&t[n-i]===c[d-i];i++);return _v=c.slice(e,1<i?1-i:void 0)}function xv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function G0(){return!0}function yI(){return!1}function ms(e){function t(n,i,c,d,p){this._reactName=n,this._targetInst=c,this.type=i,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(d):d[s]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?G0:yI,this.isPropagationStopped=yI,this}return oi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=G0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=G0)},persist:function(){},isPersistent:G0}),t}var Mf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nE=ms(Mf),Ug=oi({},Mf,{view:0,detail:0}),H8=ms(Ug),Hb,Zb,gm,fx=oi({},Ug,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==gm&&(gm&&e.type==="mousemove"?(Hb=e.screenX-gm.screenX,Zb=e.screenY-gm.screenY):Zb=Hb=0,gm=e),Hb)},movementY:function(e){return"movementY"in e?e.movementY:Zb}}),vI=ms(fx),Z8=oi({},fx,{dataTransfer:0}),q8=ms(Z8),K8=oi({},Ug,{relatedTarget:0}),qb=ms(K8),X8=oi({},Mf,{animationName:0,elapsedTime:0,pseudoElement:0}),J8=ms(X8),Y8=oi({},Mf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Q8=ms(Y8),eU=oi({},Mf,{data:0}),_I=ms(eU),tU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iU(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=rU[e])?!!t[e]:!1}function rE(){return iU}var oU=oi({},Ug,{key:function(e){if(e.key){var t=tU[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?nU[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rE,charCode:function(e){return e.type==="keypress"?xv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sU=ms(oU),aU=oi({},fx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xI=ms(aU),lU=oi({},Ug,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rE}),cU=ms(lU),uU=oi({},Mf,{propertyName:0,elapsedTime:0,pseudoElement:0}),dU=ms(uU),hU=oi({},fx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),fU=ms(hU),pU=[9,13,27,32],iE=Dl&&"CompositionEvent"in window,Om=null;Dl&&"documentMode"in document&&(Om=document.documentMode);var mU=Dl&&"TextEvent"in window&&!Om,Hz=Dl&&(!iE||Om&&8<Om&&11>=Om),bI=String.fromCharCode(32),wI=!1;function Zz(e,t){switch(e){case"keyup":return pU.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Oh=!1;function gU(e,t){switch(e){case"compositionend":return qz(t);case"keypress":return t.which!==32?null:(wI=!0,bI);case"textInput":return e=t.data,e===bI&&wI?null:e;default:return null}}function yU(e,t){if(Oh)return e==="compositionend"||!iE&&Zz(e,t)?(e=Gz(),_v=tE=Ic=null,Oh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Hz&&t.locale!=="ko"?null:t.data;default:return null}}var vU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vU[e.type]:t==="textarea"}function Kz(e,t,n,i){Cz(i),t=qv(t,"onChange"),0<t.length&&(n=new nE("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Bm=null,fg=null;function _U(e){sL(e,0)}function px(e){var t=jh(e);if(_z(t))return e}function xU(e,t){if(e==="change")return t}var Xz=!1;if(Dl){var Kb;if(Dl){var Xb="oninput"in document;if(!Xb){var EI=document.createElement("div");EI.setAttribute("oninput","return;"),Xb=typeof EI.oninput=="function"}Kb=Xb}else Kb=!1;Xz=Kb&&(!document.documentMode||9<document.documentMode)}function TI(){Bm&&(Bm.detachEvent("onpropertychange",Jz),fg=Bm=null)}function Jz(e){if(e.propertyName==="value"&&px(fg)){var t=[];Kz(t,fg,e,XS(e)),Pz(_U,t)}}function bU(e,t,n){e==="focusin"?(TI(),Bm=t,fg=n,Bm.attachEvent("onpropertychange",Jz)):e==="focusout"&&TI()}function wU(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return px(fg)}function SU(e,t){if(e==="click")return px(t)}function EU(e,t){if(e==="input"||e==="change")return px(t)}function TU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xa=typeof Object.is=="function"?Object.is:TU;function pg(e,t){if(xa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var c=n[i];if(!Ww.call(t,c)||!xa(e[c],t[c]))return!1}return!0}function CI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function AI(e,t){var n=CI(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=CI(n)}}function Yz(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Yz(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qz(){for(var e=window,t=$v();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$v(e.document)}return t}function oE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function CU(e){var t=Qz(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Yz(n.ownerDocument.documentElement,n)){if(i!==null&&oE(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=n.textContent.length,d=Math.min(i.start,c);i=i.end===void 0?d:Math.min(i.end,c),!e.extend&&d>i&&(c=i,i=d,d=c),c=AI(n,d);var p=AI(n,i);c&&p&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),d>i?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var AU=Dl&&"documentMode"in document&&11>=document.documentMode,Bh=null,c2=null,Fm=null,u2=!1;function kI(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;u2||Bh==null||Bh!==$v(i)||(i=Bh,"selectionStart"in i&&oE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Fm&&pg(Fm,i)||(Fm=i,i=qv(c2,"onSelect"),0<i.length&&(t=new nE("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Bh)))}function H0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fh={animationend:H0("Animation","AnimationEnd"),animationiteration:H0("Animation","AnimationIteration"),animationstart:H0("Animation","AnimationStart"),transitionend:H0("Transition","TransitionEnd")},Jb={},eL={};Dl&&(eL=document.createElement("div").style,"AnimationEvent"in window||(delete Fh.animationend.animation,delete Fh.animationiteration.animation,delete Fh.animationstart.animation),"TransitionEvent"in window||delete Fh.transitionend.transition);function mx(e){if(Jb[e])return Jb[e];if(!Fh[e])return e;var t=Fh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in eL)return Jb[e]=t[n];return e}var tL=mx("animationend"),nL=mx("animationiteration"),rL=mx("animationstart"),iL=mx("transitionend"),oL=new Map,II="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zc(e,t){oL.set(e,t),vd(t,[e])}for(var Yb=0;Yb<II.length;Yb++){var Qb=II[Yb],kU=Qb.toLowerCase(),IU=Qb[0].toUpperCase()+Qb.slice(1);Zc(kU,"on"+IU)}Zc(tL,"onAnimationEnd");Zc(nL,"onAnimationIteration");Zc(rL,"onAnimationStart");Zc("dblclick","onDoubleClick");Zc("focusin","onFocus");Zc("focusout","onBlur");Zc(iL,"onTransitionEnd");hf("onMouseEnter",["mouseout","mouseover"]);hf("onMouseLeave",["mouseout","mouseover"]);hf("onPointerEnter",["pointerout","pointerover"]);hf("onPointerLeave",["pointerout","pointerover"]);vd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vd("onBeforeInput",["compositionend","keypress","textInput","paste"]);vd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mm));function PI(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,k8(i,t,void 0,e),e.currentTarget=null}function sL(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],c=i.event;i=i.listeners;e:{var d=void 0;if(t)for(var p=i.length-1;0<=p;p--){var s=i[p],_=s.instance,S=s.currentTarget;if(s=s.listener,_!==d&&c.isPropagationStopped())break e;PI(c,s,S),d=_}else for(p=0;p<i.length;p++){if(s=i[p],_=s.instance,S=s.currentTarget,s=s.listener,_!==d&&c.isPropagationStopped())break e;PI(c,s,S),d=_}}}if(Uv)throw e=o2,Uv=!1,o2=null,e}function Or(e,t){var n=t[m2];n===void 0&&(n=t[m2]=new Set);var i=e+"__bubble";n.has(i)||(aL(t,e,2,!1),n.add(i))}function ew(e,t,n){var i=0;t&&(i|=4),aL(n,e,i,t)}var Z0="_reactListening"+Math.random().toString(36).slice(2);function mg(e){if(!e[Z0]){e[Z0]=!0,pz.forEach(function(n){n!=="selectionchange"&&(PU.has(n)||ew(n,!1,e),ew(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Z0]||(t[Z0]=!0,ew("selectionchange",!1,t))}}function aL(e,t,n,i){switch(Wz(t)){case 1:var c=W8;break;case 4:c=G8;break;default:c=eE}n=c.bind(null,t,n,e),c=void 0,!i2||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function tw(e,t,n,i,c){var d=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var s=i.stateNode.containerInfo;if(s===c||s.nodeType===8&&s.parentNode===c)break;if(p===4)for(p=i.return;p!==null;){var _=p.tag;if((_===3||_===4)&&(_=p.stateNode.containerInfo,_===c||_.nodeType===8&&_.parentNode===c))return;p=p.return}for(;s!==null;){if(p=Zu(s),p===null)return;if(_=p.tag,_===5||_===6){i=d=p;continue e}s=s.parentNode}}i=i.return}Pz(function(){var S=d,E=XS(n),A=[];e:{var I=oL.get(e);if(I!==void 0){var O=nE,N=e;switch(e){case"keypress":if(xv(n)===0)break e;case"keydown":case"keyup":O=sU;break;case"focusin":N="focus",O=qb;break;case"focusout":N="blur",O=qb;break;case"beforeblur":case"afterblur":O=qb;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=vI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=q8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=cU;break;case tL:case nL:case rL:O=J8;break;case iL:O=dU;break;case"scroll":O=H8;break;case"wheel":O=fU;break;case"copy":case"cut":case"paste":O=Q8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=xI}var $=(t&4)!==0,K=!$&&e==="scroll",W=$?I!==null?I+"Capture":null:I;$=[];for(var B=S,U;B!==null;){U=B;var J=U.stateNode;if(U.tag===5&&J!==null&&(U=J,W!==null&&(J=cg(B,W),J!=null&&$.push(gg(B,J,U)))),K)break;B=B.return}0<$.length&&(I=new O(I,N,null,n,E),A.push({event:I,listeners:$}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",I&&n!==n2&&(N=n.relatedTarget||n.fromElement)&&(Zu(N)||N[zl]))break e;if((O||I)&&(I=E.window===E?E:(I=E.ownerDocument)?I.defaultView||I.parentWindow:window,O?(N=n.relatedTarget||n.toElement,O=S,N=N?Zu(N):null,N!==null&&(K=_d(N),N!==K||N.tag!==5&&N.tag!==6)&&(N=null)):(O=null,N=S),O!==N)){if($=vI,J="onMouseLeave",W="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&($=xI,J="onPointerLeave",W="onPointerEnter",B="pointer"),K=O==null?I:jh(O),U=N==null?I:jh(N),I=new $(J,B+"leave",O,n,E),I.target=K,I.relatedTarget=U,J=null,Zu(E)===S&&($=new $(W,B+"enter",N,n,E),$.target=U,$.relatedTarget=K,J=$),K=J,O&&N)t:{for($=O,W=N,B=0,U=$;U;U=Sh(U))B++;for(U=0,J=W;J;J=Sh(J))U++;for(;0<B-U;)$=Sh($),B--;for(;0<U-B;)W=Sh(W),U--;for(;B--;){if($===W||W!==null&&$===W.alternate)break t;$=Sh($),W=Sh(W)}$=null}else $=null;O!==null&&MI(A,I,O,$,!1),N!==null&&K!==null&&MI(A,K,N,$,!0)}}e:{if(I=S?jh(S):window,O=I.nodeName&&I.nodeName.toLowerCase(),O==="select"||O==="input"&&I.type==="file")var ee=xU;else if(SI(I))if(Xz)ee=EU;else{ee=wU;var ye=bU}else(O=I.nodeName)&&O.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(ee=SU);if(ee&&(ee=ee(e,S))){Kz(A,ee,n,E);break e}ye&&ye(e,I,S),e==="focusout"&&(ye=I._wrapperState)&&ye.controlled&&I.type==="number"&&Jw(I,"number",I.value)}switch(ye=S?jh(S):window,e){case"focusin":(SI(ye)||ye.contentEditable==="true")&&(Bh=ye,c2=S,Fm=null);break;case"focusout":Fm=c2=Bh=null;break;case"mousedown":u2=!0;break;case"contextmenu":case"mouseup":case"dragend":u2=!1,kI(A,n,E);break;case"selectionchange":if(AU)break;case"keydown":case"keyup":kI(A,n,E)}var Q;if(iE)e:{switch(e){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Oh?Zz(e,n)&&(be="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(be="onCompositionStart");be&&(Hz&&n.locale!=="ko"&&(Oh||be!=="onCompositionStart"?be==="onCompositionEnd"&&Oh&&(Q=Gz()):(Ic=E,tE="value"in Ic?Ic.value:Ic.textContent,Oh=!0)),ye=qv(S,be),0<ye.length&&(be=new _I(be,e,null,n,E),A.push({event:be,listeners:ye}),Q?be.data=Q:(Q=qz(n),Q!==null&&(be.data=Q)))),(Q=mU?gU(e,n):yU(e,n))&&(S=qv(S,"onBeforeInput"),0<S.length&&(E=new _I("onBeforeInput","beforeinput",null,n,E),A.push({event:E,listeners:S}),E.data=Q))}sL(A,t)})}function gg(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qv(e,t){for(var n=t+"Capture",i=[];e!==null;){var c=e,d=c.stateNode;c.tag===5&&d!==null&&(c=d,d=cg(e,n),d!=null&&i.unshift(gg(e,d,c)),d=cg(e,t),d!=null&&i.push(gg(e,d,c))),e=e.return}return i}function Sh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function MI(e,t,n,i,c){for(var d=t._reactName,p=[];n!==null&&n!==i;){var s=n,_=s.alternate,S=s.stateNode;if(_!==null&&_===i)break;s.tag===5&&S!==null&&(s=S,c?(_=cg(n,d),_!=null&&p.unshift(gg(n,_,s))):c||(_=cg(n,d),_!=null&&p.push(gg(n,_,s)))),n=n.return}p.length!==0&&e.push({event:t,listeners:p})}var MU=/\r\n?/g,DU=/\u0000|\uFFFD/g;function DI(e){return(typeof e=="string"?e:""+e).replace(MU,`
`).replace(DU,"")}function q0(e,t,n){if(t=DI(t),DI(e)!==t&&n)throw Error(Dt(425))}function Kv(){}var d2=null,h2=null;function f2(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var p2=typeof setTimeout=="function"?setTimeout:void 0,zU=typeof clearTimeout=="function"?clearTimeout:void 0,zI=typeof Promise=="function"?Promise:void 0,LU=typeof queueMicrotask=="function"?queueMicrotask:typeof zI<"u"?function(e){return zI.resolve(null).then(e).catch(RU)}:p2;function RU(e){setTimeout(function(){throw e})}function nw(e,t){var n=t,i=0;do{var c=n.nextSibling;if(e.removeChild(n),c&&c.nodeType===8)if(n=c.data,n==="/$"){if(i===0){e.removeChild(c),hg(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=c}while(n);hg(t)}function Rc(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function LI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Df=Math.random().toString(36).slice(2),Ba="__reactFiber$"+Df,yg="__reactProps$"+Df,zl="__reactContainer$"+Df,m2="__reactEvents$"+Df,OU="__reactListeners$"+Df,BU="__reactHandles$"+Df;function Zu(e){var t=e[Ba];if(t)return t;for(var n=e.parentNode;n;){if(t=n[zl]||n[Ba]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=LI(e);e!==null;){if(n=e[Ba])return n;e=LI(e)}return t}e=n,n=e.parentNode}return null}function Wg(e){return e=e[Ba]||e[zl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Dt(33))}function gx(e){return e[yg]||null}var g2=[],Nh=-1;function qc(e){return{current:e}}function Br(e){0>Nh||(e.current=g2[Nh],g2[Nh]=null,Nh--)}function Mr(e,t){Nh++,g2[Nh]=e.current,e.current=t}var Wc={},_o=qc(Wc),Wo=qc(!1),ad=Wc;function ff(e,t){var n=e.type.contextTypes;if(!n)return Wc;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},d;for(d in n)c[d]=t[d];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Go(e){return e=e.childContextTypes,e!=null}function Xv(){Br(Wo),Br(_o)}function RI(e,t,n){if(_o.current!==Wc)throw Error(Dt(168));Mr(_o,t),Mr(Wo,n)}function lL(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(Dt(108,b8(e)||"Unknown",c));return oi({},n,i)}function Jv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Wc,ad=_o.current,Mr(_o,e),Mr(Wo,Wo.current),!0}function OI(e,t,n){var i=e.stateNode;if(!i)throw Error(Dt(169));n?(e=lL(e,t,ad),i.__reactInternalMemoizedMergedChildContext=e,Br(Wo),Br(_o),Mr(_o,e)):Br(Wo),Mr(Wo,n)}var bl=null,yx=!1,rw=!1;function cL(e){bl===null?bl=[e]:bl.push(e)}function FU(e){yx=!0,cL(e)}function Kc(){if(!rw&&bl!==null){rw=!0;var e=0,t=xr;try{var n=bl;for(xr=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}bl=null,yx=!1}catch(c){throw bl!==null&&(bl=bl.slice(e+1)),Lz(JS,Kc),c}finally{xr=t,rw=!1}}return null}var $h=[],Vh=0,Yv=null,Qv=0,Ds=[],zs=0,ld=null,Tl=1,Cl="";function $u(e,t){$h[Vh++]=Qv,$h[Vh++]=Yv,Yv=e,Qv=t}function uL(e,t,n){Ds[zs++]=Tl,Ds[zs++]=Cl,Ds[zs++]=ld,ld=e;var i=Tl;e=Cl;var c=32-va(i)-1;i&=~(1<<c),n+=1;var d=32-va(t)+c;if(30<d){var p=c-c%5;d=(i&(1<<p)-1).toString(32),i>>=p,c-=p,Tl=1<<32-va(t)+c|n<<c|i,Cl=d+e}else Tl=1<<d|n<<c|i,Cl=e}function sE(e){e.return!==null&&($u(e,1),uL(e,1,0))}function aE(e){for(;e===Yv;)Yv=$h[--Vh],$h[Vh]=null,Qv=$h[--Vh],$h[Vh]=null;for(;e===ld;)ld=Ds[--zs],Ds[zs]=null,Cl=Ds[--zs],Ds[zs]=null,Tl=Ds[--zs],Ds[zs]=null}var cs=null,as=null,Gr=!1,ga=null;function dL(e,t){var n=Os(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function BI(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,cs=e,as=Rc(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,cs=e,as=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ld!==null?{id:Tl,overflow:Cl}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Os(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,cs=e,as=null,!0):!1;default:return!1}}function y2(e){return(e.mode&1)!==0&&(e.flags&128)===0}function v2(e){if(Gr){var t=as;if(t){var n=t;if(!BI(e,t)){if(y2(e))throw Error(Dt(418));t=Rc(n.nextSibling);var i=cs;t&&BI(e,t)?dL(i,n):(e.flags=e.flags&-4097|2,Gr=!1,cs=e)}}else{if(y2(e))throw Error(Dt(418));e.flags=e.flags&-4097|2,Gr=!1,cs=e}}}function FI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;cs=e}function K0(e){if(e!==cs)return!1;if(!Gr)return FI(e),Gr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!f2(e.type,e.memoizedProps)),t&&(t=as)){if(y2(e))throw hL(),Error(Dt(418));for(;t;)dL(e,t),t=Rc(t.nextSibling)}if(FI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Dt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){as=Rc(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}as=null}}else as=cs?Rc(e.stateNode.nextSibling):null;return!0}function hL(){for(var e=as;e;)e=Rc(e.nextSibling)}function pf(){as=cs=null,Gr=!1}function lE(e){ga===null?ga=[e]:ga.push(e)}var jU=jl.ReactCurrentBatchConfig;function ym(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Dt(309));var i=n.stateNode}if(!i)throw Error(Dt(147,e));var c=i,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(p){var s=c.refs;p===null?delete s[d]:s[d]=p},t._stringRef=d,t)}if(typeof e!="string")throw Error(Dt(284));if(!n._owner)throw Error(Dt(290,e))}return e}function X0(e,t){throw e=Object.prototype.toString.call(t),Error(Dt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jI(e){var t=e._init;return t(e._payload)}function fL(e){function t(W,B){if(e){var U=W.deletions;U===null?(W.deletions=[B],W.flags|=16):U.push(B)}}function n(W,B){if(!e)return null;for(;B!==null;)t(W,B),B=B.sibling;return null}function i(W,B){for(W=new Map;B!==null;)B.key!==null?W.set(B.key,B):W.set(B.index,B),B=B.sibling;return W}function c(W,B){return W=jc(W,B),W.index=0,W.sibling=null,W}function d(W,B,U){return W.index=U,e?(U=W.alternate,U!==null?(U=U.index,U<B?(W.flags|=2,B):U):(W.flags|=2,B)):(W.flags|=1048576,B)}function p(W){return e&&W.alternate===null&&(W.flags|=2),W}function s(W,B,U,J){return B===null||B.tag!==6?(B=uw(U,W.mode,J),B.return=W,B):(B=c(B,U),B.return=W,B)}function _(W,B,U,J){var ee=U.type;return ee===Rh?E(W,B,U.props.children,J,U.key):B!==null&&(B.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===xc&&jI(ee)===B.type)?(J=c(B,U.props),J.ref=ym(W,B,U),J.return=W,J):(J=Av(U.type,U.key,U.props,null,W.mode,J),J.ref=ym(W,B,U),J.return=W,J)}function S(W,B,U,J){return B===null||B.tag!==4||B.stateNode.containerInfo!==U.containerInfo||B.stateNode.implementation!==U.implementation?(B=dw(U,W.mode,J),B.return=W,B):(B=c(B,U.children||[]),B.return=W,B)}function E(W,B,U,J,ee){return B===null||B.tag!==7?(B=rd(U,W.mode,J,ee),B.return=W,B):(B=c(B,U),B.return=W,B)}function A(W,B,U){if(typeof B=="string"&&B!==""||typeof B=="number")return B=uw(""+B,W.mode,U),B.return=W,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case j0:return U=Av(B.type,B.key,B.props,null,W.mode,U),U.ref=ym(W,null,B),U.return=W,U;case Lh:return B=dw(B,W.mode,U),B.return=W,B;case xc:var J=B._init;return A(W,J(B._payload),U)}if(Im(B)||hm(B))return B=rd(B,W.mode,U,null),B.return=W,B;X0(W,B)}return null}function I(W,B,U,J){var ee=B!==null?B.key:null;if(typeof U=="string"&&U!==""||typeof U=="number")return ee!==null?null:s(W,B,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case j0:return U.key===ee?_(W,B,U,J):null;case Lh:return U.key===ee?S(W,B,U,J):null;case xc:return ee=U._init,I(W,B,ee(U._payload),J)}if(Im(U)||hm(U))return ee!==null?null:E(W,B,U,J,null);X0(W,U)}return null}function O(W,B,U,J,ee){if(typeof J=="string"&&J!==""||typeof J=="number")return W=W.get(U)||null,s(B,W,""+J,ee);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case j0:return W=W.get(J.key===null?U:J.key)||null,_(B,W,J,ee);case Lh:return W=W.get(J.key===null?U:J.key)||null,S(B,W,J,ee);case xc:var ye=J._init;return O(W,B,U,ye(J._payload),ee)}if(Im(J)||hm(J))return W=W.get(U)||null,E(B,W,J,ee,null);X0(B,J)}return null}function N(W,B,U,J){for(var ee=null,ye=null,Q=B,be=B=0,re=null;Q!==null&&be<U.length;be++){Q.index>be?(re=Q,Q=null):re=Q.sibling;var Ie=I(W,Q,U[be],J);if(Ie===null){Q===null&&(Q=re);break}e&&Q&&Ie.alternate===null&&t(W,Q),B=d(Ie,B,be),ye===null?ee=Ie:ye.sibling=Ie,ye=Ie,Q=re}if(be===U.length)return n(W,Q),Gr&&$u(W,be),ee;if(Q===null){for(;be<U.length;be++)Q=A(W,U[be],J),Q!==null&&(B=d(Q,B,be),ye===null?ee=Q:ye.sibling=Q,ye=Q);return Gr&&$u(W,be),ee}for(Q=i(W,Q);be<U.length;be++)re=O(Q,W,be,U[be],J),re!==null&&(e&&re.alternate!==null&&Q.delete(re.key===null?be:re.key),B=d(re,B,be),ye===null?ee=re:ye.sibling=re,ye=re);return e&&Q.forEach(function(Be){return t(W,Be)}),Gr&&$u(W,be),ee}function $(W,B,U,J){var ee=hm(U);if(typeof ee!="function")throw Error(Dt(150));if(U=ee.call(U),U==null)throw Error(Dt(151));for(var ye=ee=null,Q=B,be=B=0,re=null,Ie=U.next();Q!==null&&!Ie.done;be++,Ie=U.next()){Q.index>be?(re=Q,Q=null):re=Q.sibling;var Be=I(W,Q,Ie.value,J);if(Be===null){Q===null&&(Q=re);break}e&&Q&&Be.alternate===null&&t(W,Q),B=d(Be,B,be),ye===null?ee=Be:ye.sibling=Be,ye=Be,Q=re}if(Ie.done)return n(W,Q),Gr&&$u(W,be),ee;if(Q===null){for(;!Ie.done;be++,Ie=U.next())Ie=A(W,Ie.value,J),Ie!==null&&(B=d(Ie,B,be),ye===null?ee=Ie:ye.sibling=Ie,ye=Ie);return Gr&&$u(W,be),ee}for(Q=i(W,Q);!Ie.done;be++,Ie=U.next())Ie=O(Q,W,be,Ie.value,J),Ie!==null&&(e&&Ie.alternate!==null&&Q.delete(Ie.key===null?be:Ie.key),B=d(Ie,B,be),ye===null?ee=Ie:ye.sibling=Ie,ye=Ie);return e&&Q.forEach(function(le){return t(W,le)}),Gr&&$u(W,be),ee}function K(W,B,U,J){if(typeof U=="object"&&U!==null&&U.type===Rh&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case j0:e:{for(var ee=U.key,ye=B;ye!==null;){if(ye.key===ee){if(ee=U.type,ee===Rh){if(ye.tag===7){n(W,ye.sibling),B=c(ye,U.props.children),B.return=W,W=B;break e}}else if(ye.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===xc&&jI(ee)===ye.type){n(W,ye.sibling),B=c(ye,U.props),B.ref=ym(W,ye,U),B.return=W,W=B;break e}n(W,ye);break}else t(W,ye);ye=ye.sibling}U.type===Rh?(B=rd(U.props.children,W.mode,J,U.key),B.return=W,W=B):(J=Av(U.type,U.key,U.props,null,W.mode,J),J.ref=ym(W,B,U),J.return=W,W=J)}return p(W);case Lh:e:{for(ye=U.key;B!==null;){if(B.key===ye)if(B.tag===4&&B.stateNode.containerInfo===U.containerInfo&&B.stateNode.implementation===U.implementation){n(W,B.sibling),B=c(B,U.children||[]),B.return=W,W=B;break e}else{n(W,B);break}else t(W,B);B=B.sibling}B=dw(U,W.mode,J),B.return=W,W=B}return p(W);case xc:return ye=U._init,K(W,B,ye(U._payload),J)}if(Im(U))return N(W,B,U,J);if(hm(U))return $(W,B,U,J);X0(W,U)}return typeof U=="string"&&U!==""||typeof U=="number"?(U=""+U,B!==null&&B.tag===6?(n(W,B.sibling),B=c(B,U),B.return=W,W=B):(n(W,B),B=uw(U,W.mode,J),B.return=W,W=B),p(W)):n(W,B)}return K}var mf=fL(!0),pL=fL(!1),e_=qc(null),t_=null,Uh=null,cE=null;function uE(){cE=Uh=t_=null}function dE(e){var t=e_.current;Br(e_),e._currentValue=t}function _2(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function af(e,t){t_=e,cE=Uh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Uo=!0),e.firstContext=null)}function js(e){var t=e._currentValue;if(cE!==e)if(e={context:e,memoizedValue:t,next:null},Uh===null){if(t_===null)throw Error(Dt(308));Uh=e,t_.dependencies={lanes:0,firstContext:e}}else Uh=Uh.next=e;return t}var qu=null;function hE(e){qu===null?qu=[e]:qu.push(e)}function mL(e,t,n,i){var c=t.interleaved;return c===null?(n.next=n,hE(t)):(n.next=c.next,c.next=n),t.interleaved=n,Ll(e,i)}function Ll(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var bc=!1;function fE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oc(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,tr&2){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,Ll(e,n)}return c=i.interleaved,c===null?(t.next=t,hE(i)):(t.next=c.next,c.next=t),i.interleaved=t,Ll(e,n)}function bv(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,YS(e,n)}}function NI(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var c=null,d=null;if(n=n.firstBaseUpdate,n!==null){do{var p={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};d===null?c=d=p:d=d.next=p,n=n.next}while(n!==null);d===null?c=d=t:d=d.next=t}else c=d=t;n={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function n_(e,t,n,i){var c=e.updateQueue;bc=!1;var d=c.firstBaseUpdate,p=c.lastBaseUpdate,s=c.shared.pending;if(s!==null){c.shared.pending=null;var _=s,S=_.next;_.next=null,p===null?d=S:p.next=S,p=_;var E=e.alternate;E!==null&&(E=E.updateQueue,s=E.lastBaseUpdate,s!==p&&(s===null?E.firstBaseUpdate=S:s.next=S,E.lastBaseUpdate=_))}if(d!==null){var A=c.baseState;p=0,E=S=_=null,s=d;do{var I=s.lane,O=s.eventTime;if((i&I)===I){E!==null&&(E=E.next={eventTime:O,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var N=e,$=s;switch(I=t,O=n,$.tag){case 1:if(N=$.payload,typeof N=="function"){A=N.call(O,A,I);break e}A=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=$.payload,I=typeof N=="function"?N.call(O,A,I):N,I==null)break e;A=oi({},A,I);break e;case 2:bc=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,I=c.effects,I===null?c.effects=[s]:I.push(s))}else O={eventTime:O,lane:I,tag:s.tag,payload:s.payload,callback:s.callback,next:null},E===null?(S=E=O,_=A):E=E.next=O,p|=I;if(s=s.next,s===null){if(s=c.shared.pending,s===null)break;I=s,s=I.next,I.next=null,c.lastBaseUpdate=I,c.shared.pending=null}}while(1);if(E===null&&(_=A),c.baseState=_,c.firstBaseUpdate=S,c.lastBaseUpdate=E,t=c.shared.interleaved,t!==null){c=t;do p|=c.lane,c=c.next;while(c!==t)}else d===null&&(c.shared.lanes=0);ud|=p,e.lanes=p,e.memoizedState=A}}function $I(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=n,typeof c!="function")throw Error(Dt(191,c));c.call(i)}}}var Gg={},Ua=qc(Gg),vg=qc(Gg),_g=qc(Gg);function Ku(e){if(e===Gg)throw Error(Dt(174));return e}function pE(e,t){switch(Mr(_g,t),Mr(vg,e),Mr(Ua,Gg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qw(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qw(t,e)}Br(Ua),Mr(Ua,t)}function gf(){Br(Ua),Br(vg),Br(_g)}function yL(e){Ku(_g.current);var t=Ku(Ua.current),n=Qw(t,e.type);t!==n&&(Mr(vg,e),Mr(Ua,n))}function mE(e){vg.current===e&&(Br(Ua),Br(vg))}var ti=qc(0);function r_(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var iw=[];function gE(){for(var e=0;e<iw.length;e++)iw[e]._workInProgressVersionPrimary=null;iw.length=0}var wv=jl.ReactCurrentDispatcher,ow=jl.ReactCurrentBatchConfig,cd=0,ii=null,ji=null,Ki=null,i_=!1,jm=!1,xg=0,NU=0;function mo(){throw Error(Dt(321))}function yE(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!xa(e[n],t[n]))return!1;return!0}function vE(e,t,n,i,c,d){if(cd=d,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wv.current=e===null||e.memoizedState===null?WU:GU,e=n(i,c),jm){d=0;do{if(jm=!1,xg=0,25<=d)throw Error(Dt(301));d+=1,Ki=ji=null,t.updateQueue=null,wv.current=HU,e=n(i,c)}while(jm)}if(wv.current=o_,t=ji!==null&&ji.next!==null,cd=0,Ki=ji=ii=null,i_=!1,t)throw Error(Dt(300));return e}function _E(){var e=xg!==0;return xg=0,e}function za(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ki===null?ii.memoizedState=Ki=e:Ki=Ki.next=e,Ki}function Ns(){if(ji===null){var e=ii.alternate;e=e!==null?e.memoizedState:null}else e=ji.next;var t=Ki===null?ii.memoizedState:Ki.next;if(t!==null)Ki=t,ji=e;else{if(e===null)throw Error(Dt(310));ji=e,e={memoizedState:ji.memoizedState,baseState:ji.baseState,baseQueue:ji.baseQueue,queue:ji.queue,next:null},Ki===null?ii.memoizedState=Ki=e:Ki=Ki.next=e}return Ki}function bg(e,t){return typeof t=="function"?t(e):t}function sw(e){var t=Ns(),n=t.queue;if(n===null)throw Error(Dt(311));n.lastRenderedReducer=e;var i=ji,c=i.baseQueue,d=n.pending;if(d!==null){if(c!==null){var p=c.next;c.next=d.next,d.next=p}i.baseQueue=c=d,n.pending=null}if(c!==null){d=c.next,i=i.baseState;var s=p=null,_=null,S=d;do{var E=S.lane;if((cd&E)===E)_!==null&&(_=_.next={lane:0,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null}),i=S.hasEagerState?S.eagerState:e(i,S.action);else{var A={lane:E,action:S.action,hasEagerState:S.hasEagerState,eagerState:S.eagerState,next:null};_===null?(s=_=A,p=i):_=_.next=A,ii.lanes|=E,ud|=E}S=S.next}while(S!==null&&S!==d);_===null?p=i:_.next=s,xa(i,t.memoizedState)||(Uo=!0),t.memoizedState=i,t.baseState=p,t.baseQueue=_,n.lastRenderedState=i}if(e=n.interleaved,e!==null){c=e;do d=c.lane,ii.lanes|=d,ud|=d,c=c.next;while(c!==e)}else c===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function aw(e){var t=Ns(),n=t.queue;if(n===null)throw Error(Dt(311));n.lastRenderedReducer=e;var i=n.dispatch,c=n.pending,d=t.memoizedState;if(c!==null){n.pending=null;var p=c=c.next;do d=e(d,p.action),p=p.next;while(p!==c);xa(d,t.memoizedState)||(Uo=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),n.lastRenderedState=d}return[d,i]}function vL(){}function _L(e,t){var n=ii,i=Ns(),c=t(),d=!xa(i.memoizedState,c);if(d&&(i.memoizedState=c,Uo=!0),i=i.queue,xE(wL.bind(null,n,i,e),[e]),i.getSnapshot!==t||d||Ki!==null&&Ki.memoizedState.tag&1){if(n.flags|=2048,wg(9,bL.bind(null,n,i,c,t),void 0,null),Xi===null)throw Error(Dt(349));cd&30||xL(n,t,c)}return c}function xL(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ii.updateQueue,t===null?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function bL(e,t,n,i){t.value=n,t.getSnapshot=i,SL(t)&&EL(e)}function wL(e,t,n){return n(function(){SL(t)&&EL(e)})}function SL(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!xa(e,n)}catch{return!0}}function EL(e){var t=Ll(e,1);t!==null&&_a(t,e,1,-1)}function VI(e){var t=za();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bg,lastRenderedState:e},t.queue=e,e=e.dispatch=UU.bind(null,ii,e),[t.memoizedState,e]}function wg(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=ii.updateQueue,t===null?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function TL(){return Ns().memoizedState}function Sv(e,t,n,i){var c=za();ii.flags|=e,c.memoizedState=wg(1|t,n,void 0,i===void 0?null:i)}function vx(e,t,n,i){var c=Ns();i=i===void 0?null:i;var d=void 0;if(ji!==null){var p=ji.memoizedState;if(d=p.destroy,i!==null&&yE(i,p.deps)){c.memoizedState=wg(t,n,d,i);return}}ii.flags|=e,c.memoizedState=wg(1|t,n,d,i)}function UI(e,t){return Sv(8390656,8,e,t)}function xE(e,t){return vx(2048,8,e,t)}function CL(e,t){return vx(4,2,e,t)}function AL(e,t){return vx(4,4,e,t)}function kL(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function IL(e,t,n){return n=n!=null?n.concat([e]):null,vx(4,4,kL.bind(null,t,e),n)}function bE(){}function PL(e,t){var n=Ns();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&yE(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function ML(e,t){var n=Ns();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&yE(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function DL(e,t,n){return cd&21?(xa(n,t)||(n=Bz(),ii.lanes|=n,ud|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Uo=!0),e.memoizedState=n)}function $U(e,t){var n=xr;xr=n!==0&&4>n?n:4,e(!0);var i=ow.transition;ow.transition={};try{e(!1),t()}finally{xr=n,ow.transition=i}}function zL(){return Ns().memoizedState}function VU(e,t,n){var i=Fc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},LL(e))RL(t,n);else if(n=mL(e,t,n,i),n!==null){var c=Ao();_a(n,e,i,c),OL(n,t,i)}}function UU(e,t,n){var i=Fc(e),c={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(LL(e))RL(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,s=d(p,n);if(c.hasEagerState=!0,c.eagerState=s,xa(s,p)){var _=t.interleaved;_===null?(c.next=c,hE(t)):(c.next=_.next,_.next=c),t.interleaved=c;return}}catch{}finally{}n=mL(e,t,c,i),n!==null&&(c=Ao(),_a(n,e,i,c),OL(n,t,i))}}function LL(e){var t=e.alternate;return e===ii||t!==null&&t===ii}function RL(e,t){jm=i_=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function OL(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,YS(e,n)}}var o_={readContext:js,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},WU={readContext:js,useCallback:function(e,t){return za().memoizedState=[e,t===void 0?null:t],e},useContext:js,useEffect:UI,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Sv(4194308,4,kL.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sv(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sv(4,2,e,t)},useMemo:function(e,t){var n=za();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=za();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=VU.bind(null,ii,e),[i.memoizedState,e]},useRef:function(e){var t=za();return e={current:e},t.memoizedState=e},useState:VI,useDebugValue:bE,useDeferredValue:function(e){return za().memoizedState=e},useTransition:function(){var e=VI(!1),t=e[0];return e=$U.bind(null,e[1]),za().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=ii,c=za();if(Gr){if(n===void 0)throw Error(Dt(407));n=n()}else{if(n=t(),Xi===null)throw Error(Dt(349));cd&30||xL(i,t,n)}c.memoizedState=n;var d={value:n,getSnapshot:t};return c.queue=d,UI(wL.bind(null,i,d,e),[e]),i.flags|=2048,wg(9,bL.bind(null,i,d,n,t),void 0,null),n},useId:function(){var e=za(),t=Xi.identifierPrefix;if(Gr){var n=Cl,i=Tl;n=(i&~(1<<32-va(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=xg++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=NU++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},GU={readContext:js,useCallback:PL,useContext:js,useEffect:xE,useImperativeHandle:IL,useInsertionEffect:CL,useLayoutEffect:AL,useMemo:ML,useReducer:sw,useRef:TL,useState:function(){return sw(bg)},useDebugValue:bE,useDeferredValue:function(e){var t=Ns();return DL(t,ji.memoizedState,e)},useTransition:function(){var e=sw(bg)[0],t=Ns().memoizedState;return[e,t]},useMutableSource:vL,useSyncExternalStore:_L,useId:zL,unstable_isNewReconciler:!1},HU={readContext:js,useCallback:PL,useContext:js,useEffect:xE,useImperativeHandle:IL,useInsertionEffect:CL,useLayoutEffect:AL,useMemo:ML,useReducer:aw,useRef:TL,useState:function(){return aw(bg)},useDebugValue:bE,useDeferredValue:function(e){var t=Ns();return ji===null?t.memoizedState=e:DL(t,ji.memoizedState,e)},useTransition:function(){var e=aw(bg)[0],t=Ns().memoizedState;return[e,t]},useMutableSource:vL,useSyncExternalStore:_L,useId:zL,unstable_isNewReconciler:!1};function fa(e,t){if(e&&e.defaultProps){t=oi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function x2(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:oi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var _x={isMounted:function(e){return(e=e._reactInternals)?_d(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Ao(),c=Fc(e),d=kl(i,c);d.payload=t,n!=null&&(d.callback=n),t=Oc(e,d,c),t!==null&&(_a(t,e,c,i),bv(t,e,c))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Ao(),c=Fc(e),d=kl(i,c);d.tag=1,d.payload=t,n!=null&&(d.callback=n),t=Oc(e,d,c),t!==null&&(_a(t,e,c,i),bv(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ao(),i=Fc(e),c=kl(n,i);c.tag=2,t!=null&&(c.callback=t),t=Oc(e,c,i),t!==null&&(_a(t,e,i,n),bv(t,e,i))}};function WI(e,t,n,i,c,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,d,p):t.prototype&&t.prototype.isPureReactComponent?!pg(n,i)||!pg(c,d):!0}function BL(e,t,n){var i=!1,c=Wc,d=t.contextType;return typeof d=="object"&&d!==null?d=js(d):(c=Go(t)?ad:_o.current,i=t.contextTypes,d=(i=i!=null)?ff(e,c):Wc),t=new t(n,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=_x,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=d),t}function GI(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&_x.enqueueReplaceState(t,t.state,null)}function b2(e,t,n,i){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs={},fE(e);var d=t.contextType;typeof d=="object"&&d!==null?c.context=js(d):(d=Go(t)?ad:_o.current,c.context=ff(e,d)),c.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(x2(e,t,d,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&_x.enqueueReplaceState(c,c.state,null),n_(e,n,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function yf(e,t){try{var n="",i=t;do n+=x8(i),i=i.return;while(i);var c=n}catch(d){c=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:c,digest:null}}function lw(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function w2(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ZU=typeof WeakMap=="function"?WeakMap:Map;function FL(e,t,n){n=kl(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){a_||(a_=!0,D2=i),w2(e,t)},n}function jL(e,t,n){n=kl(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;n.payload=function(){return i(c)},n.callback=function(){w2(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(n.callback=function(){w2(e,t),typeof i!="function"&&(Bc===null?Bc=new Set([this]):Bc.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),n}function HI(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new ZU;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(n)||(c.add(n),e=a7.bind(null,e,t,n),t.then(e,e))}function ZI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qI(e,t,n,i,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kl(-1,1),t.tag=2,Oc(n,t,1))),n.lanes|=1),e)}var qU=jl.ReactCurrentOwner,Uo=!1;function To(e,t,n,i){t.child=e===null?pL(t,null,n,i):mf(t,e.child,n,i)}function KI(e,t,n,i,c){n=n.render;var d=t.ref;return af(t,c),i=vE(e,t,n,i,d,c),n=_E(),e!==null&&!Uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Rl(e,t,c)):(Gr&&n&&sE(t),t.flags|=1,To(e,t,i,c),t.child)}function XI(e,t,n,i,c){if(e===null){var d=n.type;return typeof d=="function"&&!IE(d)&&d.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=d,NL(e,t,d,i,c)):(e=Av(n.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&c)){var p=d.memoizedProps;if(n=n.compare,n=n!==null?n:pg,n(p,i)&&e.ref===t.ref)return Rl(e,t,c)}return t.flags|=1,e=jc(d,i),e.ref=t.ref,e.return=t,t.child=e}function NL(e,t,n,i,c){if(e!==null){var d=e.memoizedProps;if(pg(d,i)&&e.ref===t.ref)if(Uo=!1,t.pendingProps=i=d,(e.lanes&c)!==0)e.flags&131072&&(Uo=!0);else return t.lanes=e.lanes,Rl(e,t,c)}return S2(e,t,n,i,c)}function $L(e,t,n){var i=t.pendingProps,c=i.children,d=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mr(Gh,is),is|=n;else{if(!(n&1073741824))return e=d!==null?d.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mr(Gh,is),is|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=d!==null?d.baseLanes:n,Mr(Gh,is),is|=i}else d!==null?(i=d.baseLanes|n,t.memoizedState=null):i=n,Mr(Gh,is),is|=i;return To(e,t,c,n),t.child}function VL(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function S2(e,t,n,i,c){var d=Go(n)?ad:_o.current;return d=ff(t,d),af(t,c),n=vE(e,t,n,i,d,c),i=_E(),e!==null&&!Uo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Rl(e,t,c)):(Gr&&i&&sE(t),t.flags|=1,To(e,t,n,c),t.child)}function JI(e,t,n,i,c){if(Go(n)){var d=!0;Jv(t)}else d=!1;if(af(t,c),t.stateNode===null)Ev(e,t),BL(t,n,i),b2(t,n,i,c),i=!0;else if(e===null){var p=t.stateNode,s=t.memoizedProps;p.props=s;var _=p.context,S=n.contextType;typeof S=="object"&&S!==null?S=js(S):(S=Go(n)?ad:_o.current,S=ff(t,S));var E=n.getDerivedStateFromProps,A=typeof E=="function"||typeof p.getSnapshotBeforeUpdate=="function";A||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(s!==i||_!==S)&&GI(t,p,i,S),bc=!1;var I=t.memoizedState;p.state=I,n_(t,i,p,c),_=t.memoizedState,s!==i||I!==_||Wo.current||bc?(typeof E=="function"&&(x2(t,n,E,i),_=t.memoizedState),(s=bc||WI(t,n,s,i,I,_,S))?(A||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=_),p.props=i,p.state=_,p.context=S,i=s):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{p=t.stateNode,gL(e,t),s=t.memoizedProps,S=t.type===t.elementType?s:fa(t.type,s),p.props=S,A=t.pendingProps,I=p.context,_=n.contextType,typeof _=="object"&&_!==null?_=js(_):(_=Go(n)?ad:_o.current,_=ff(t,_));var O=n.getDerivedStateFromProps;(E=typeof O=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(s!==A||I!==_)&&GI(t,p,i,_),bc=!1,I=t.memoizedState,p.state=I,n_(t,i,p,c);var N=t.memoizedState;s!==A||I!==N||Wo.current||bc?(typeof O=="function"&&(x2(t,n,O,i),N=t.memoizedState),(S=bc||WI(t,n,S,i,I,N,_)||!1)?(E||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(i,N,_),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(i,N,_)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=N),p.props=i,p.state=N,p.context=_,i=S):(typeof p.componentDidUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),i=!1)}return E2(e,t,n,i,d,c)}function E2(e,t,n,i,c,d){VL(e,t);var p=(t.flags&128)!==0;if(!i&&!p)return c&&OI(t,n,!1),Rl(e,t,d);i=t.stateNode,qU.current=t;var s=p&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&p?(t.child=mf(t,e.child,null,d),t.child=mf(t,null,s,d)):To(e,t,s,d),t.memoizedState=i.state,c&&OI(t,n,!0),t.child}function UL(e){var t=e.stateNode;t.pendingContext?RI(e,t.pendingContext,t.pendingContext!==t.context):t.context&&RI(e,t.context,!1),pE(e,t.containerInfo)}function YI(e,t,n,i,c){return pf(),lE(c),t.flags|=256,To(e,t,n,i),t.child}var T2={dehydrated:null,treeContext:null,retryLane:0};function C2(e){return{baseLanes:e,cachePool:null,transitions:null}}function WL(e,t,n){var i=t.pendingProps,c=ti.current,d=!1,p=(t.flags&128)!==0,s;if((s=p)||(s=e!==null&&e.memoizedState===null?!1:(c&2)!==0),s?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Mr(ti,c&1),e===null)return v2(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=i.children,e=i.fallback,d?(i=t.mode,d=t.child,p={mode:"hidden",children:p},!(i&1)&&d!==null?(d.childLanes=0,d.pendingProps=p):d=wx(p,i,0,null),e=rd(e,i,n,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=C2(n),t.memoizedState=T2,e):wE(t,p));if(c=e.memoizedState,c!==null&&(s=c.dehydrated,s!==null))return KU(e,t,p,i,s,c,n);if(d){d=i.fallback,p=t.mode,c=e.child,s=c.sibling;var _={mode:"hidden",children:i.children};return!(p&1)&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=_,t.deletions=null):(i=jc(c,_),i.subtreeFlags=c.subtreeFlags&14680064),s!==null?d=jc(s,d):(d=rd(d,p,n,null),d.flags|=2),d.return=t,i.return=t,i.sibling=d,t.child=i,i=d,d=t.child,p=e.child.memoizedState,p=p===null?C2(n):{baseLanes:p.baseLanes|n,cachePool:null,transitions:p.transitions},d.memoizedState=p,d.childLanes=e.childLanes&~n,t.memoizedState=T2,i}return d=e.child,e=d.sibling,i=jc(d,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function wE(e,t){return t=wx({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function J0(e,t,n,i){return i!==null&&lE(i),mf(t,e.child,null,n),e=wE(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function KU(e,t,n,i,c,d,p){if(n)return t.flags&256?(t.flags&=-257,i=lw(Error(Dt(422))),J0(e,t,p,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=i.fallback,c=t.mode,i=wx({mode:"visible",children:i.children},c,0,null),d=rd(d,c,p,null),d.flags|=2,i.return=t,d.return=t,i.sibling=d,t.child=i,t.mode&1&&mf(t,e.child,null,p),t.child.memoizedState=C2(p),t.memoizedState=T2,d);if(!(t.mode&1))return J0(e,t,p,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var s=i.dgst;return i=s,d=Error(Dt(419)),i=lw(d,i,void 0),J0(e,t,p,i)}if(s=(p&e.childLanes)!==0,Uo||s){if(i=Xi,i!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(i.suspendedLanes|p)?0:c,c!==0&&c!==d.retryLane&&(d.retryLane=c,Ll(e,c),_a(i,e,c,-1))}return kE(),i=lw(Error(Dt(421))),J0(e,t,p,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=l7.bind(null,e),c._reactRetry=t,null):(e=d.treeContext,as=Rc(c.nextSibling),cs=t,Gr=!0,ga=null,e!==null&&(Ds[zs++]=Tl,Ds[zs++]=Cl,Ds[zs++]=ld,Tl=e.id,Cl=e.overflow,ld=t),t=wE(t,i.children),t.flags|=4096,t)}function QI(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),_2(e.return,t,n)}function cw(e,t,n,i,c){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:c}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=i,d.tail=n,d.tailMode=c)}function GL(e,t,n){var i=t.pendingProps,c=i.revealOrder,d=i.tail;if(To(e,t,i.children,n),i=ti.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&QI(e,n,t);else if(e.tag===19)QI(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Mr(ti,i),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&r_(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),cw(t,!1,c,n,d);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&r_(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}cw(t,!0,n,null,d);break;case"together":cw(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ev(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Rl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ud|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Dt(153));if(t.child!==null){for(e=t.child,n=jc(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jc(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function XU(e,t,n){switch(t.tag){case 3:UL(t),pf();break;case 5:yL(t);break;case 1:Go(t.type)&&Jv(t);break;case 4:pE(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;Mr(e_,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Mr(ti,ti.current&1),t.flags|=128,null):n&t.child.childLanes?WL(e,t,n):(Mr(ti,ti.current&1),e=Rl(e,t,n),e!==null?e.sibling:null);Mr(ti,ti.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return GL(e,t,n);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Mr(ti,ti.current),i)break;return null;case 22:case 23:return t.lanes=0,$L(e,t,n)}return Rl(e,t,n)}var HL,A2,ZL,qL;HL=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};A2=function(){};ZL=function(e,t,n,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,Ku(Ua.current);var d=null;switch(n){case"input":c=Kw(e,c),i=Kw(e,i),d=[];break;case"select":c=oi({},c,{value:void 0}),i=oi({},i,{value:void 0}),d=[];break;case"textarea":c=Yw(e,c),i=Yw(e,i),d=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Kv)}e2(n,i);var p;n=null;for(S in c)if(!i.hasOwnProperty(S)&&c.hasOwnProperty(S)&&c[S]!=null)if(S==="style"){var s=c[S];for(p in s)s.hasOwnProperty(p)&&(n||(n={}),n[p]="")}else S!=="dangerouslySetInnerHTML"&&S!=="children"&&S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(ag.hasOwnProperty(S)?d||(d=[]):(d=d||[]).push(S,null));for(S in i){var _=i[S];if(s=c!=null?c[S]:void 0,i.hasOwnProperty(S)&&_!==s&&(_!=null||s!=null))if(S==="style")if(s){for(p in s)!s.hasOwnProperty(p)||_&&_.hasOwnProperty(p)||(n||(n={}),n[p]="");for(p in _)_.hasOwnProperty(p)&&s[p]!==_[p]&&(n||(n={}),n[p]=_[p])}else n||(d||(d=[]),d.push(S,n)),n=_;else S==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,s=s?s.__html:void 0,_!=null&&s!==_&&(d=d||[]).push(S,_)):S==="children"?typeof _!="string"&&typeof _!="number"||(d=d||[]).push(S,""+_):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&(ag.hasOwnProperty(S)?(_!=null&&S==="onScroll"&&Or("scroll",e),d||s===_||(d=[])):(d=d||[]).push(S,_))}n&&(d=d||[]).push("style",n);var S=d;(t.updateQueue=S)&&(t.flags|=4)}};qL=function(e,t,n,i){n!==i&&(t.flags|=4)};function vm(e,t){if(!Gr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function go(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)n|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function JU(e,t,n){var i=t.pendingProps;switch(aE(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return go(t),null;case 1:return Go(t.type)&&Xv(),go(t),null;case 3:return i=t.stateNode,gf(),Br(Wo),Br(_o),gE(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(K0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ga!==null&&(R2(ga),ga=null))),A2(e,t),go(t),null;case 5:mE(t);var c=Ku(_g.current);if(n=t.type,e!==null&&t.stateNode!=null)ZL(e,t,n,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Dt(166));return go(t),null}if(e=Ku(Ua.current),K0(t)){i=t.stateNode,n=t.type;var d=t.memoizedProps;switch(i[Ba]=t,i[yg]=d,e=(t.mode&1)!==0,n){case"dialog":Or("cancel",i),Or("close",i);break;case"iframe":case"object":case"embed":Or("load",i);break;case"video":case"audio":for(c=0;c<Mm.length;c++)Or(Mm[c],i);break;case"source":Or("error",i);break;case"img":case"image":case"link":Or("error",i),Or("load",i);break;case"details":Or("toggle",i);break;case"input":lI(i,d),Or("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!d.multiple},Or("invalid",i);break;case"textarea":uI(i,d),Or("invalid",i)}e2(n,d),c=null;for(var p in d)if(d.hasOwnProperty(p)){var s=d[p];p==="children"?typeof s=="string"?i.textContent!==s&&(d.suppressHydrationWarning!==!0&&q0(i.textContent,s,e),c=["children",s]):typeof s=="number"&&i.textContent!==""+s&&(d.suppressHydrationWarning!==!0&&q0(i.textContent,s,e),c=["children",""+s]):ag.hasOwnProperty(p)&&s!=null&&p==="onScroll"&&Or("scroll",i)}switch(n){case"input":N0(i),cI(i,d,!0);break;case"textarea":N0(i),dI(i);break;case"select":case"option":break;default:typeof d.onClick=="function"&&(i.onclick=Kv)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wz(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=p.createElement(n,{is:i.is}):(e=p.createElement(n),n==="select"&&(p=e,i.multiple?p.multiple=!0:i.size&&(p.size=i.size))):e=p.createElementNS(e,n),e[Ba]=t,e[yg]=i,HL(e,t,!1,!1),t.stateNode=e;e:{switch(p=t2(n,i),n){case"dialog":Or("cancel",e),Or("close",e),c=i;break;case"iframe":case"object":case"embed":Or("load",e),c=i;break;case"video":case"audio":for(c=0;c<Mm.length;c++)Or(Mm[c],e);c=i;break;case"source":Or("error",e),c=i;break;case"img":case"image":case"link":Or("error",e),Or("load",e),c=i;break;case"details":Or("toggle",e),c=i;break;case"input":lI(e,i),c=Kw(e,i),Or("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=oi({},i,{value:void 0}),Or("invalid",e);break;case"textarea":uI(e,i),c=Yw(e,i),Or("invalid",e);break;default:c=i}e2(n,c),s=c;for(d in s)if(s.hasOwnProperty(d)){var _=s[d];d==="style"?Tz(e,_):d==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Sz(e,_)):d==="children"?typeof _=="string"?(n!=="textarea"||_!=="")&&lg(e,_):typeof _=="number"&&lg(e,""+_):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ag.hasOwnProperty(d)?_!=null&&d==="onScroll"&&Or("scroll",e):_!=null&&HS(e,d,_,p))}switch(n){case"input":N0(e),cI(e,i,!1);break;case"textarea":N0(e),dI(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Uc(i.value));break;case"select":e.multiple=!!i.multiple,d=i.value,d!=null?nf(e,!!i.multiple,d,!1):i.defaultValue!=null&&nf(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Kv)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return go(t),null;case 6:if(e&&t.stateNode!=null)qL(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Dt(166));if(n=Ku(_g.current),Ku(Ua.current),K0(t)){if(i=t.stateNode,n=t.memoizedProps,i[Ba]=t,(d=i.nodeValue!==n)&&(e=cs,e!==null))switch(e.tag){case 3:q0(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&q0(i.nodeValue,n,(e.mode&1)!==0)}d&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ba]=t,t.stateNode=i}return go(t),null;case 13:if(Br(ti),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Gr&&as!==null&&t.mode&1&&!(t.flags&128))hL(),pf(),t.flags|=98560,d=!1;else if(d=K0(t),i!==null&&i.dehydrated!==null){if(e===null){if(!d)throw Error(Dt(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(Dt(317));d[Ba]=t}else pf(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;go(t),d=!1}else ga!==null&&(R2(ga),ga=null),d=!0;if(!d)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ti.current&1?Ni===0&&(Ni=3):kE())),t.updateQueue!==null&&(t.flags|=4),go(t),null);case 4:return gf(),A2(e,t),e===null&&mg(t.stateNode.containerInfo),go(t),null;case 10:return dE(t.type._context),go(t),null;case 17:return Go(t.type)&&Xv(),go(t),null;case 19:if(Br(ti),d=t.memoizedState,d===null)return go(t),null;if(i=(t.flags&128)!==0,p=d.rendering,p===null)if(i)vm(d,!1);else{if(Ni!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=r_(e),p!==null){for(t.flags|=128,vm(d,!1),i=p.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)d=n,e=i,d.flags&=14680066,p=d.alternate,p===null?(d.childLanes=0,d.lanes=e,d.child=null,d.subtreeFlags=0,d.memoizedProps=null,d.memoizedState=null,d.updateQueue=null,d.dependencies=null,d.stateNode=null):(d.childLanes=p.childLanes,d.lanes=p.lanes,d.child=p.child,d.subtreeFlags=0,d.deletions=null,d.memoizedProps=p.memoizedProps,d.memoizedState=p.memoizedState,d.updateQueue=p.updateQueue,d.type=p.type,e=p.dependencies,d.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mr(ti,ti.current&1|2),t.child}e=e.sibling}d.tail!==null&&gi()>vf&&(t.flags|=128,i=!0,vm(d,!1),t.lanes=4194304)}else{if(!i)if(e=r_(p),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),vm(d,!0),d.tail===null&&d.tailMode==="hidden"&&!p.alternate&&!Gr)return go(t),null}else 2*gi()-d.renderingStartTime>vf&&n!==1073741824&&(t.flags|=128,i=!0,vm(d,!1),t.lanes=4194304);d.isBackwards?(p.sibling=t.child,t.child=p):(n=d.last,n!==null?n.sibling=p:t.child=p,d.last=p)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=gi(),t.sibling=null,n=ti.current,Mr(ti,i?n&1|2:n&1),t):(go(t),null);case 22:case 23:return AE(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?is&1073741824&&(go(t),t.subtreeFlags&6&&(t.flags|=8192)):go(t),null;case 24:return null;case 25:return null}throw Error(Dt(156,t.tag))}function YU(e,t){switch(aE(t),t.tag){case 1:return Go(t.type)&&Xv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gf(),Br(Wo),Br(_o),gE(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mE(t),null;case 13:if(Br(ti),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Dt(340));pf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Br(ti),null;case 4:return gf(),null;case 10:return dE(t.type._context),null;case 22:case 23:return AE(),null;case 24:return null;default:return null}}var Y0=!1,vo=!1,QU=typeof WeakSet=="function"?WeakSet:Set,rn=null;function Wh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){di(e,t,i)}else n.current=null}function k2(e,t,n){try{n()}catch(i){di(e,t,i)}}var eP=!1;function e7(e,t){if(d2=Hv,e=Qz(),oE(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var c=i.anchorOffset,d=i.focusNode;i=i.focusOffset;try{n.nodeType,d.nodeType}catch{n=null;break e}var p=0,s=-1,_=-1,S=0,E=0,A=e,I=null;t:for(;;){for(var O;A!==n||c!==0&&A.nodeType!==3||(s=p+c),A!==d||i!==0&&A.nodeType!==3||(_=p+i),A.nodeType===3&&(p+=A.nodeValue.length),(O=A.firstChild)!==null;)I=A,A=O;for(;;){if(A===e)break t;if(I===n&&++S===c&&(s=p),I===d&&++E===i&&(_=p),(O=A.nextSibling)!==null)break;A=I,I=A.parentNode}A=O}n=s===-1||_===-1?null:{start:s,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(h2={focusedElem:e,selectionRange:n},Hv=!1,rn=t;rn!==null;)if(t=rn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,rn=e;else for(;rn!==null;){t=rn;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var $=N.memoizedProps,K=N.memoizedState,W=t.stateNode,B=W.getSnapshotBeforeUpdate(t.elementType===t.type?$:fa(t.type,$),K);W.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var U=t.stateNode.containerInfo;U.nodeType===1?U.textContent="":U.nodeType===9&&U.documentElement&&U.removeChild(U.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Dt(163))}}catch(J){di(t,t.return,J)}if(e=t.sibling,e!==null){e.return=t.return,rn=e;break}rn=t.return}return N=eP,eP=!1,N}function Nm(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var d=c.destroy;c.destroy=void 0,d!==void 0&&k2(t,n,d)}c=c.next}while(c!==i)}}function xx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function I2(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function KL(e){var t=e.alternate;t!==null&&(e.alternate=null,KL(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ba],delete t[yg],delete t[m2],delete t[OU],delete t[BU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function XL(e){return e.tag===5||e.tag===3||e.tag===4}function tP(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||XL(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function P2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kv));else if(i!==4&&(e=e.child,e!==null))for(P2(e,t,n),e=e.sibling;e!==null;)P2(e,t,n),e=e.sibling}function M2(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(M2(e,t,n),e=e.sibling;e!==null;)M2(e,t,n),e=e.sibling}var Qi=null,pa=!1;function yc(e,t,n){for(n=n.child;n!==null;)JL(e,t,n),n=n.sibling}function JL(e,t,n){if(Va&&typeof Va.onCommitFiberUnmount=="function")try{Va.onCommitFiberUnmount(hx,n)}catch{}switch(n.tag){case 5:vo||Wh(n,t);case 6:var i=Qi,c=pa;Qi=null,yc(e,t,n),Qi=i,pa=c,Qi!==null&&(pa?(e=Qi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qi.removeChild(n.stateNode));break;case 18:Qi!==null&&(pa?(e=Qi,n=n.stateNode,e.nodeType===8?nw(e.parentNode,n):e.nodeType===1&&nw(e,n),hg(e)):nw(Qi,n.stateNode));break;case 4:i=Qi,c=pa,Qi=n.stateNode.containerInfo,pa=!0,yc(e,t,n),Qi=i,pa=c;break;case 0:case 11:case 14:case 15:if(!vo&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var d=c,p=d.destroy;d=d.tag,p!==void 0&&(d&2||d&4)&&k2(n,t,p),c=c.next}while(c!==i)}yc(e,t,n);break;case 1:if(!vo&&(Wh(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(s){di(n,t,s)}yc(e,t,n);break;case 21:yc(e,t,n);break;case 22:n.mode&1?(vo=(i=vo)||n.memoizedState!==null,yc(e,t,n),vo=i):yc(e,t,n);break;default:yc(e,t,n)}}function nP(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new QU),t.forEach(function(i){var c=c7.bind(null,e,i);n.has(i)||(n.add(i),i.then(c,c))})}}function ha(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var c=n[i];try{var d=e,p=t,s=p;e:for(;s!==null;){switch(s.tag){case 5:Qi=s.stateNode,pa=!1;break e;case 3:Qi=s.stateNode.containerInfo,pa=!0;break e;case 4:Qi=s.stateNode.containerInfo,pa=!0;break e}s=s.return}if(Qi===null)throw Error(Dt(160));JL(d,p,c),Qi=null,pa=!1;var _=c.alternate;_!==null&&(_.return=null),c.return=null}catch(S){di(c,t,S)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)YL(t,e),t=t.sibling}function YL(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ha(t,e),Da(e),i&4){try{Nm(3,e,e.return),xx(3,e)}catch($){di(e,e.return,$)}try{Nm(5,e,e.return)}catch($){di(e,e.return,$)}}break;case 1:ha(t,e),Da(e),i&512&&n!==null&&Wh(n,n.return);break;case 5:if(ha(t,e),Da(e),i&512&&n!==null&&Wh(n,n.return),e.flags&32){var c=e.stateNode;try{lg(c,"")}catch($){di(e,e.return,$)}}if(i&4&&(c=e.stateNode,c!=null)){var d=e.memoizedProps,p=n!==null?n.memoizedProps:d,s=e.type,_=e.updateQueue;if(e.updateQueue=null,_!==null)try{s==="input"&&d.type==="radio"&&d.name!=null&&xz(c,d),t2(s,p);var S=t2(s,d);for(p=0;p<_.length;p+=2){var E=_[p],A=_[p+1];E==="style"?Tz(c,A):E==="dangerouslySetInnerHTML"?Sz(c,A):E==="children"?lg(c,A):HS(c,E,A,S)}switch(s){case"input":Xw(c,d);break;case"textarea":bz(c,d);break;case"select":var I=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!d.multiple;var O=d.value;O!=null?nf(c,!!d.multiple,O,!1):I!==!!d.multiple&&(d.defaultValue!=null?nf(c,!!d.multiple,d.defaultValue,!0):nf(c,!!d.multiple,d.multiple?[]:"",!1))}c[yg]=d}catch($){di(e,e.return,$)}}break;case 6:if(ha(t,e),Da(e),i&4){if(e.stateNode===null)throw Error(Dt(162));c=e.stateNode,d=e.memoizedProps;try{c.nodeValue=d}catch($){di(e,e.return,$)}}break;case 3:if(ha(t,e),Da(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{hg(t.containerInfo)}catch($){di(e,e.return,$)}break;case 4:ha(t,e),Da(e);break;case 13:ha(t,e),Da(e),c=e.child,c.flags&8192&&(d=c.memoizedState!==null,c.stateNode.isHidden=d,!d||c.alternate!==null&&c.alternate.memoizedState!==null||(TE=gi())),i&4&&nP(e);break;case 22:if(E=n!==null&&n.memoizedState!==null,e.mode&1?(vo=(S=vo)||E,ha(t,e),vo=S):ha(t,e),Da(e),i&8192){if(S=e.memoizedState!==null,(e.stateNode.isHidden=S)&&!E&&e.mode&1)for(rn=e,E=e.child;E!==null;){for(A=rn=E;rn!==null;){switch(I=rn,O=I.child,I.tag){case 0:case 11:case 14:case 15:Nm(4,I,I.return);break;case 1:Wh(I,I.return);var N=I.stateNode;if(typeof N.componentWillUnmount=="function"){i=I,n=I.return;try{t=i,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch($){di(i,n,$)}}break;case 5:Wh(I,I.return);break;case 22:if(I.memoizedState!==null){iP(A);continue}}O!==null?(O.return=I,rn=O):iP(A)}E=E.sibling}e:for(E=null,A=e;;){if(A.tag===5){if(E===null){E=A;try{c=A.stateNode,S?(d=c.style,typeof d.setProperty=="function"?d.setProperty("display","none","important"):d.display="none"):(s=A.stateNode,_=A.memoizedProps.style,p=_!=null&&_.hasOwnProperty("display")?_.display:null,s.style.display=Ez("display",p))}catch($){di(e,e.return,$)}}}else if(A.tag===6){if(E===null)try{A.stateNode.nodeValue=S?"":A.memoizedProps}catch($){di(e,e.return,$)}}else if((A.tag!==22&&A.tag!==23||A.memoizedState===null||A===e)&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===e)break e;for(;A.sibling===null;){if(A.return===null||A.return===e)break e;E===A&&(E=null),A=A.return}E===A&&(E=null),A.sibling.return=A.return,A=A.sibling}}break;case 19:ha(t,e),Da(e),i&4&&nP(e);break;case 21:break;default:ha(t,e),Da(e)}}function Da(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(XL(n)){var i=n;break e}n=n.return}throw Error(Dt(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(lg(c,""),i.flags&=-33);var d=tP(e);M2(e,d,c);break;case 3:case 4:var p=i.stateNode.containerInfo,s=tP(e);P2(e,s,p);break;default:throw Error(Dt(161))}}catch(_){di(e,e.return,_)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function t7(e,t,n){rn=e,QL(e)}function QL(e,t,n){for(var i=(e.mode&1)!==0;rn!==null;){var c=rn,d=c.child;if(c.tag===22&&i){var p=c.memoizedState!==null||Y0;if(!p){var s=c.alternate,_=s!==null&&s.memoizedState!==null||vo;s=Y0;var S=vo;if(Y0=p,(vo=_)&&!S)for(rn=c;rn!==null;)p=rn,_=p.child,p.tag===22&&p.memoizedState!==null?oP(c):_!==null?(_.return=p,rn=_):oP(c);for(;d!==null;)rn=d,QL(d),d=d.sibling;rn=c,Y0=s,vo=S}rP(e)}else c.subtreeFlags&8772&&d!==null?(d.return=c,rn=d):rP(e)}}function rP(e){for(;rn!==null;){var t=rn;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vo||xx(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!vo)if(n===null)i.componentDidMount();else{var c=t.elementType===t.type?n.memoizedProps:fa(t.type,n.memoizedProps);i.componentDidUpdate(c,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&$I(t,d,i);break;case 3:var p=t.updateQueue;if(p!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$I(t,p,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var _=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&n.focus();break;case"img":_.src&&(n.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var S=t.alternate;if(S!==null){var E=S.memoizedState;if(E!==null){var A=E.dehydrated;A!==null&&hg(A)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Dt(163))}vo||t.flags&512&&I2(t)}catch(I){di(t,t.return,I)}}if(t===e){rn=null;break}if(n=t.sibling,n!==null){n.return=t.return,rn=n;break}rn=t.return}}function iP(e){for(;rn!==null;){var t=rn;if(t===e){rn=null;break}var n=t.sibling;if(n!==null){n.return=t.return,rn=n;break}rn=t.return}}function oP(e){for(;rn!==null;){var t=rn;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{xx(4,t)}catch(_){di(t,n,_)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(_){di(t,c,_)}}var d=t.return;try{I2(t)}catch(_){di(t,d,_)}break;case 5:var p=t.return;try{I2(t)}catch(_){di(t,p,_)}}}catch(_){di(t,t.return,_)}if(t===e){rn=null;break}var s=t.sibling;if(s!==null){s.return=t.return,rn=s;break}rn=t.return}}var n7=Math.ceil,s_=jl.ReactCurrentDispatcher,SE=jl.ReactCurrentOwner,Bs=jl.ReactCurrentBatchConfig,tr=0,Xi=null,Di=null,to=0,is=0,Gh=qc(0),Ni=0,Sg=null,ud=0,bx=0,EE=0,$m=null,$o=null,TE=0,vf=1/0,xl=null,a_=!1,D2=null,Bc=null,Q0=!1,Pc=null,l_=0,Vm=0,z2=null,Tv=-1,Cv=0;function Ao(){return tr&6?gi():Tv!==-1?Tv:Tv=gi()}function Fc(e){return e.mode&1?tr&2&&to!==0?to&-to:jU.transition!==null?(Cv===0&&(Cv=Bz()),Cv):(e=xr,e!==0||(e=window.event,e=e===void 0?16:Wz(e.type)),e):1}function _a(e,t,n,i){if(50<Vm)throw Vm=0,z2=null,Error(Dt(185));Vg(e,n,i),(!(tr&2)||e!==Xi)&&(e===Xi&&(!(tr&2)&&(bx|=n),Ni===4&&Tc(e,to)),Ho(e,i),n===1&&tr===0&&!(t.mode&1)&&(vf=gi()+500,yx&&Kc()))}function Ho(e,t){var n=e.callbackNode;j8(e,t);var i=Gv(e,e===Xi?to:0);if(i===0)n!==null&&pI(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&pI(n),t===1)e.tag===0?FU(sP.bind(null,e)):cL(sP.bind(null,e)),LU(function(){!(tr&6)&&Kc()}),n=null;else{switch(Fz(i)){case 1:n=JS;break;case 4:n=Rz;break;case 16:n=Wv;break;case 536870912:n=Oz;break;default:n=Wv}n=a5(n,e5.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function e5(e,t){if(Tv=-1,Cv=0,tr&6)throw Error(Dt(327));var n=e.callbackNode;if(lf()&&e.callbackNode!==n)return null;var i=Gv(e,e===Xi?to:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=c_(e,i);else{t=i;var c=tr;tr|=2;var d=n5();(Xi!==e||to!==t)&&(xl=null,vf=gi()+500,nd(e,t));do try{o7();break}catch(s){t5(e,s)}while(1);uE(),s_.current=d,tr=c,Di!==null?t=0:(Xi=null,to=0,t=Ni)}if(t!==0){if(t===2&&(c=s2(e),c!==0&&(i=c,t=L2(e,c))),t===1)throw n=Sg,nd(e,0),Tc(e,i),Ho(e,gi()),n;if(t===6)Tc(e,i);else{if(c=e.current.alternate,!(i&30)&&!r7(c)&&(t=c_(e,i),t===2&&(d=s2(e),d!==0&&(i=d,t=L2(e,d))),t===1))throw n=Sg,nd(e,0),Tc(e,i),Ho(e,gi()),n;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(Dt(345));case 2:Vu(e,$o,xl);break;case 3:if(Tc(e,i),(i&130023424)===i&&(t=TE+500-gi(),10<t)){if(Gv(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){Ao(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=p2(Vu.bind(null,e,$o,xl),t);break}Vu(e,$o,xl);break;case 4:if(Tc(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var p=31-va(i);d=1<<p,p=t[p],p>c&&(c=p),i&=~d}if(i=c,i=gi()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*n7(i/1960))-i,10<i){e.timeoutHandle=p2(Vu.bind(null,e,$o,xl),i);break}Vu(e,$o,xl);break;case 5:Vu(e,$o,xl);break;default:throw Error(Dt(329))}}}return Ho(e,gi()),e.callbackNode===n?e5.bind(null,e):null}function L2(e,t){var n=$m;return e.current.memoizedState.isDehydrated&&(nd(e,t).flags|=256),e=c_(e,t),e!==2&&(t=$o,$o=n,t!==null&&R2(t)),e}function R2(e){$o===null?$o=e:$o.push.apply($o,e)}function r7(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var c=n[i],d=c.getSnapshot;c=c.value;try{if(!xa(d(),c))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tc(e,t){for(t&=~EE,t&=~bx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-va(t),i=1<<n;e[n]=-1,t&=~i}}function sP(e){if(tr&6)throw Error(Dt(327));lf();var t=Gv(e,0);if(!(t&1))return Ho(e,gi()),null;var n=c_(e,t);if(e.tag!==0&&n===2){var i=s2(e);i!==0&&(t=i,n=L2(e,i))}if(n===1)throw n=Sg,nd(e,0),Tc(e,t),Ho(e,gi()),n;if(n===6)throw Error(Dt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vu(e,$o,xl),Ho(e,gi()),null}function CE(e,t){var n=tr;tr|=1;try{return e(t)}finally{tr=n,tr===0&&(vf=gi()+500,yx&&Kc())}}function dd(e){Pc!==null&&Pc.tag===0&&!(tr&6)&&lf();var t=tr;tr|=1;var n=Bs.transition,i=xr;try{if(Bs.transition=null,xr=1,e)return e()}finally{xr=i,Bs.transition=n,tr=t,!(tr&6)&&Kc()}}function AE(){is=Gh.current,Br(Gh)}function nd(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zU(n)),Di!==null)for(n=Di.return;n!==null;){var i=n;switch(aE(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xv();break;case 3:gf(),Br(Wo),Br(_o),gE();break;case 5:mE(i);break;case 4:gf();break;case 13:Br(ti);break;case 19:Br(ti);break;case 10:dE(i.type._context);break;case 22:case 23:AE()}n=n.return}if(Xi=e,Di=e=jc(e.current,null),to=is=t,Ni=0,Sg=null,EE=bx=ud=0,$o=$m=null,qu!==null){for(t=0;t<qu.length;t++)if(n=qu[t],i=n.interleaved,i!==null){n.interleaved=null;var c=i.next,d=n.pending;if(d!==null){var p=d.next;d.next=c,i.next=p}n.pending=i}qu=null}return e}function t5(e,t){do{var n=Di;try{if(uE(),wv.current=o_,i_){for(var i=ii.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}i_=!1}if(cd=0,Ki=ji=ii=null,jm=!1,xg=0,SE.current=null,n===null||n.return===null){Ni=1,Sg=t,Di=null;break}e:{var d=e,p=n.return,s=n,_=t;if(t=to,s.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var S=_,E=s,A=E.tag;if(!(E.mode&1)&&(A===0||A===11||A===15)){var I=E.alternate;I?(E.updateQueue=I.updateQueue,E.memoizedState=I.memoizedState,E.lanes=I.lanes):(E.updateQueue=null,E.memoizedState=null)}var O=ZI(p);if(O!==null){O.flags&=-257,qI(O,p,s,d,t),O.mode&1&&HI(d,S,t),t=O,_=S;var N=t.updateQueue;if(N===null){var $=new Set;$.add(_),t.updateQueue=$}else N.add(_);break e}else{if(!(t&1)){HI(d,S,t),kE();break e}_=Error(Dt(426))}}else if(Gr&&s.mode&1){var K=ZI(p);if(K!==null){!(K.flags&65536)&&(K.flags|=256),qI(K,p,s,d,t),lE(yf(_,s));break e}}d=_=yf(_,s),Ni!==4&&(Ni=2),$m===null?$m=[d]:$m.push(d),d=p;do{switch(d.tag){case 3:d.flags|=65536,t&=-t,d.lanes|=t;var W=FL(d,_,t);NI(d,W);break e;case 1:s=_;var B=d.type,U=d.stateNode;if(!(d.flags&128)&&(typeof B.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Bc===null||!Bc.has(U)))){d.flags|=65536,t&=-t,d.lanes|=t;var J=jL(d,s,t);NI(d,J);break e}}d=d.return}while(d!==null)}i5(n)}catch(ee){t=ee,Di===n&&n!==null&&(Di=n=n.return);continue}break}while(1)}function n5(){var e=s_.current;return s_.current=o_,e===null?o_:e}function kE(){(Ni===0||Ni===3||Ni===2)&&(Ni=4),Xi===null||!(ud&268435455)&&!(bx&268435455)||Tc(Xi,to)}function c_(e,t){var n=tr;tr|=2;var i=n5();(Xi!==e||to!==t)&&(xl=null,nd(e,t));do try{i7();break}catch(c){t5(e,c)}while(1);if(uE(),tr=n,s_.current=i,Di!==null)throw Error(Dt(261));return Xi=null,to=0,Ni}function i7(){for(;Di!==null;)r5(Di)}function o7(){for(;Di!==null&&!P8();)r5(Di)}function r5(e){var t=s5(e.alternate,e,is);e.memoizedProps=e.pendingProps,t===null?i5(e):Di=t,SE.current=null}function i5(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=YU(n,t),n!==null){n.flags&=32767,Di=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ni=6,Di=null;return}}else if(n=JU(n,t,is),n!==null){Di=n;return}if(t=t.sibling,t!==null){Di=t;return}Di=t=e}while(t!==null);Ni===0&&(Ni=5)}function Vu(e,t,n){var i=xr,c=Bs.transition;try{Bs.transition=null,xr=1,s7(e,t,n,i)}finally{Bs.transition=c,xr=i}return null}function s7(e,t,n,i){do lf();while(Pc!==null);if(tr&6)throw Error(Dt(327));n=e.finishedWork;var c=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Dt(177));e.callbackNode=null,e.callbackPriority=0;var d=n.lanes|n.childLanes;if(N8(e,d),e===Xi&&(Di=Xi=null,to=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Q0||(Q0=!0,a5(Wv,function(){return lf(),null})),d=(n.flags&15990)!==0,n.subtreeFlags&15990||d){d=Bs.transition,Bs.transition=null;var p=xr;xr=1;var s=tr;tr|=4,SE.current=null,e7(e,n),YL(n,e),CU(h2),Hv=!!d2,h2=d2=null,e.current=n,t7(n),M8(),tr=s,xr=p,Bs.transition=d}else e.current=n;if(Q0&&(Q0=!1,Pc=e,l_=c),d=e.pendingLanes,d===0&&(Bc=null),L8(n.stateNode),Ho(e,gi()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)c=t[n],i(c.value,{componentStack:c.stack,digest:c.digest});if(a_)throw a_=!1,e=D2,D2=null,e;return l_&1&&e.tag!==0&&lf(),d=e.pendingLanes,d&1?e===z2?Vm++:(Vm=0,z2=e):Vm=0,Kc(),null}function lf(){if(Pc!==null){var e=Fz(l_),t=Bs.transition,n=xr;try{if(Bs.transition=null,xr=16>e?16:e,Pc===null)var i=!1;else{if(e=Pc,Pc=null,l_=0,tr&6)throw Error(Dt(331));var c=tr;for(tr|=4,rn=e.current;rn!==null;){var d=rn,p=d.child;if(rn.flags&16){var s=d.deletions;if(s!==null){for(var _=0;_<s.length;_++){var S=s[_];for(rn=S;rn!==null;){var E=rn;switch(E.tag){case 0:case 11:case 15:Nm(8,E,d)}var A=E.child;if(A!==null)A.return=E,rn=A;else for(;rn!==null;){E=rn;var I=E.sibling,O=E.return;if(KL(E),E===S){rn=null;break}if(I!==null){I.return=O,rn=I;break}rn=O}}}var N=d.alternate;if(N!==null){var $=N.child;if($!==null){N.child=null;do{var K=$.sibling;$.sibling=null,$=K}while($!==null)}}rn=d}}if(d.subtreeFlags&2064&&p!==null)p.return=d,rn=p;else e:for(;rn!==null;){if(d=rn,d.flags&2048)switch(d.tag){case 0:case 11:case 15:Nm(9,d,d.return)}var W=d.sibling;if(W!==null){W.return=d.return,rn=W;break e}rn=d.return}}var B=e.current;for(rn=B;rn!==null;){p=rn;var U=p.child;if(p.subtreeFlags&2064&&U!==null)U.return=p,rn=U;else e:for(p=B;rn!==null;){if(s=rn,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:xx(9,s)}}catch(ee){di(s,s.return,ee)}if(s===p){rn=null;break e}var J=s.sibling;if(J!==null){J.return=s.return,rn=J;break e}rn=s.return}}if(tr=c,Kc(),Va&&typeof Va.onPostCommitFiberRoot=="function")try{Va.onPostCommitFiberRoot(hx,e)}catch{}i=!0}return i}finally{xr=n,Bs.transition=t}}return!1}function aP(e,t,n){t=yf(n,t),t=FL(e,t,1),e=Oc(e,t,1),t=Ao(),e!==null&&(Vg(e,1,t),Ho(e,t))}function di(e,t,n){if(e.tag===3)aP(e,e,n);else for(;t!==null;){if(t.tag===3){aP(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Bc===null||!Bc.has(i))){e=yf(n,e),e=jL(t,e,1),t=Oc(t,e,1),e=Ao(),t!==null&&(Vg(t,1,e),Ho(t,e));break}}t=t.return}}function a7(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=Ao(),e.pingedLanes|=e.suspendedLanes&n,Xi===e&&(to&n)===n&&(Ni===4||Ni===3&&(to&130023424)===to&&500>gi()-TE?nd(e,0):EE|=n),Ho(e,t)}function o5(e,t){t===0&&(e.mode&1?(t=U0,U0<<=1,!(U0&130023424)&&(U0=4194304)):t=1);var n=Ao();e=Ll(e,t),e!==null&&(Vg(e,t,n),Ho(e,n))}function l7(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),o5(e,n)}function c7(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(n=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Dt(314))}i!==null&&i.delete(t),o5(e,n)}var s5;s5=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Wo.current)Uo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Uo=!1,XU(e,t,n);Uo=!!(e.flags&131072)}else Uo=!1,Gr&&t.flags&1048576&&uL(t,Qv,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ev(e,t),e=t.pendingProps;var c=ff(t,_o.current);af(t,n),c=vE(null,t,i,e,c,n);var d=_E();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Go(i)?(d=!0,Jv(t)):d=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,fE(t),c.updater=_x,t.stateNode=c,c._reactInternals=t,b2(t,i,e,n),t=E2(null,t,i,!0,d,n)):(t.tag=0,Gr&&d&&sE(t),To(null,t,c,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ev(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=d7(i),e=fa(i,e),c){case 0:t=S2(null,t,i,e,n);break e;case 1:t=JI(null,t,i,e,n);break e;case 11:t=KI(null,t,i,e,n);break e;case 14:t=XI(null,t,i,fa(i.type,e),n);break e}throw Error(Dt(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:fa(i,c),S2(e,t,i,c,n);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:fa(i,c),JI(e,t,i,c,n);case 3:e:{if(UL(t),e===null)throw Error(Dt(387));i=t.pendingProps,d=t.memoizedState,c=d.element,gL(e,t),n_(t,i,null,n);var p=t.memoizedState;if(i=p.element,d.isDehydrated)if(d={element:i,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){c=yf(Error(Dt(423)),t),t=YI(e,t,i,n,c);break e}else if(i!==c){c=yf(Error(Dt(424)),t),t=YI(e,t,i,n,c);break e}else for(as=Rc(t.stateNode.containerInfo.firstChild),cs=t,Gr=!0,ga=null,n=pL(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pf(),i===c){t=Rl(e,t,n);break e}To(e,t,i,n)}t=t.child}return t;case 5:return yL(t),e===null&&v2(t),i=t.type,c=t.pendingProps,d=e!==null?e.memoizedProps:null,p=c.children,f2(i,c)?p=null:d!==null&&f2(i,d)&&(t.flags|=32),VL(e,t),To(e,t,p,n),t.child;case 6:return e===null&&v2(t),null;case 13:return WL(e,t,n);case 4:return pE(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=mf(t,null,i,n):To(e,t,i,n),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:fa(i,c),KI(e,t,i,c,n);case 7:return To(e,t,t.pendingProps,n),t.child;case 8:return To(e,t,t.pendingProps.children,n),t.child;case 12:return To(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,d=t.memoizedProps,p=c.value,Mr(e_,i._currentValue),i._currentValue=p,d!==null)if(xa(d.value,p)){if(d.children===c.children&&!Wo.current){t=Rl(e,t,n);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var s=d.dependencies;if(s!==null){p=d.child;for(var _=s.firstContext;_!==null;){if(_.context===i){if(d.tag===1){_=kl(-1,n&-n),_.tag=2;var S=d.updateQueue;if(S!==null){S=S.shared;var E=S.pending;E===null?_.next=_:(_.next=E.next,E.next=_),S.pending=_}}d.lanes|=n,_=d.alternate,_!==null&&(_.lanes|=n),_2(d.return,n,t),s.lanes|=n;break}_=_.next}}else if(d.tag===10)p=d.type===t.type?null:d.child;else if(d.tag===18){if(p=d.return,p===null)throw Error(Dt(341));p.lanes|=n,s=p.alternate,s!==null&&(s.lanes|=n),_2(p,n,t),p=d.sibling}else p=d.child;if(p!==null)p.return=d;else for(p=d;p!==null;){if(p===t){p=null;break}if(d=p.sibling,d!==null){d.return=p.return,p=d;break}p=p.return}d=p}To(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,af(t,n),c=js(c),i=i(c),t.flags|=1,To(e,t,i,n),t.child;case 14:return i=t.type,c=fa(i,t.pendingProps),c=fa(i.type,c),XI(e,t,i,c,n);case 15:return NL(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:fa(i,c),Ev(e,t),t.tag=1,Go(i)?(e=!0,Jv(t)):e=!1,af(t,n),BL(t,i,c),b2(t,i,c,n),E2(null,t,i,!0,e,n);case 19:return GL(e,t,n);case 22:return $L(e,t,n)}throw Error(Dt(156,t.tag))};function a5(e,t){return Lz(e,t)}function u7(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(e,t,n,i){return new u7(e,t,n,i)}function IE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function d7(e){if(typeof e=="function")return IE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===qS)return 11;if(e===KS)return 14}return 2}function jc(e,t){var n=e.alternate;return n===null?(n=Os(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Av(e,t,n,i,c,d){var p=2;if(i=e,typeof e=="function")IE(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case Rh:return rd(n.children,c,d,t);case ZS:p=8,c|=8;break;case Gw:return e=Os(12,n,t,c|2),e.elementType=Gw,e.lanes=d,e;case Hw:return e=Os(13,n,t,c),e.elementType=Hw,e.lanes=d,e;case Zw:return e=Os(19,n,t,c),e.elementType=Zw,e.lanes=d,e;case yz:return wx(n,c,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mz:p=10;break e;case gz:p=9;break e;case qS:p=11;break e;case KS:p=14;break e;case xc:p=16,i=null;break e}throw Error(Dt(130,e==null?e:typeof e,""))}return t=Os(p,n,t,c),t.elementType=e,t.type=i,t.lanes=d,t}function rd(e,t,n,i){return e=Os(7,e,i,t),e.lanes=n,e}function wx(e,t,n,i){return e=Os(22,e,i,t),e.elementType=yz,e.lanes=n,e.stateNode={isHidden:!1},e}function uw(e,t,n){return e=Os(6,e,null,t),e.lanes=n,e}function dw(e,t,n){return t=Os(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function h7(e,t,n,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Gb(0),this.expirationTimes=Gb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Gb(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function PE(e,t,n,i,c,d,p,s,_){return e=new h7(e,t,n,s,_),t===1?(t=1,d===!0&&(t|=8)):t=0,d=Os(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fE(d),e}function f7(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function l5(e){if(!e)return Wc;e=e._reactInternals;e:{if(_d(e)!==e||e.tag!==1)throw Error(Dt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Go(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Dt(171))}if(e.tag===1){var n=e.type;if(Go(n))return lL(e,n,t)}return t}function c5(e,t,n,i,c,d,p,s,_){return e=PE(n,i,!0,e,c,d,p,s,_),e.context=l5(null),n=e.current,i=Ao(),c=Fc(n),d=kl(i,c),d.callback=t??null,Oc(n,d,c),e.current.lanes=c,Vg(e,c,i),Ho(e,i),e}function Sx(e,t,n,i){var c=t.current,d=Ao(),p=Fc(c);return n=l5(n),t.context===null?t.context=n:t.pendingContext=n,t=kl(d,p),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Oc(c,t,p),e!==null&&(_a(e,c,p,d),bv(e,c,p)),p}function u_(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lP(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ME(e,t){lP(e,t),(e=e.alternate)&&lP(e,t)}function p7(){return null}var u5=typeof reportError=="function"?reportError:function(e){console.error(e)};function DE(e){this._internalRoot=e}Ex.prototype.render=DE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Dt(409));Sx(e,t,null,null)};Ex.prototype.unmount=DE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dd(function(){Sx(null,e,null,null)}),t[zl]=null}};function Ex(e){this._internalRoot=e}Ex.prototype.unstable_scheduleHydration=function(e){if(e){var t=$z();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ec.length&&t!==0&&t<Ec[n].priority;n++);Ec.splice(n,0,e),n===0&&Uz(e)}};function zE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Tx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cP(){}function m7(e,t,n,i,c){if(c){if(typeof i=="function"){var d=i;i=function(){var S=u_(p);d.call(S)}}var p=c5(t,i,e,0,null,!1,!1,"",cP);return e._reactRootContainer=p,e[zl]=p.current,mg(e.nodeType===8?e.parentNode:e),dd(),p}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var s=i;i=function(){var S=u_(_);s.call(S)}}var _=PE(e,0,!1,null,null,!1,!1,"",cP);return e._reactRootContainer=_,e[zl]=_.current,mg(e.nodeType===8?e.parentNode:e),dd(function(){Sx(t,_,n,i)}),_}function Cx(e,t,n,i,c){var d=n._reactRootContainer;if(d){var p=d;if(typeof c=="function"){var s=c;c=function(){var _=u_(p);s.call(_)}}Sx(t,p,e,c)}else p=m7(n,t,e,c,i);return u_(p)}jz=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Pm(t.pendingLanes);n!==0&&(YS(t,n|1),Ho(t,gi()),!(tr&6)&&(vf=gi()+500,Kc()))}break;case 13:dd(function(){var i=Ll(e,1);if(i!==null){var c=Ao();_a(i,e,1,c)}}),ME(e,1)}};QS=function(e){if(e.tag===13){var t=Ll(e,134217728);if(t!==null){var n=Ao();_a(t,e,134217728,n)}ME(e,134217728)}};Nz=function(e){if(e.tag===13){var t=Fc(e),n=Ll(e,t);if(n!==null){var i=Ao();_a(n,e,t,i)}ME(e,t)}};$z=function(){return xr};Vz=function(e,t){var n=xr;try{return xr=e,t()}finally{xr=n}};r2=function(e,t,n){switch(t){case"input":if(Xw(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var c=gx(i);if(!c)throw Error(Dt(90));_z(i),Xw(i,c)}}}break;case"textarea":bz(e,n);break;case"select":t=n.value,t!=null&&nf(e,!!n.multiple,t,!1)}};kz=CE;Iz=dd;var g7={usingClientEntryPoint:!1,Events:[Wg,jh,gx,Cz,Az,CE]},_m={findFiberByHostInstance:Zu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y7={bundleType:_m.bundleType,version:_m.version,rendererPackageName:_m.rendererPackageName,rendererConfig:_m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dz(e),e===null?null:e.stateNode},findFiberByHostInstance:_m.findFiberByHostInstance||p7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ev.isDisabled&&ev.supportsFiber)try{hx=ev.inject(y7),Va=ev}catch{}}ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g7;ps.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zE(t))throw Error(Dt(200));return f7(e,t,null,n)};ps.createRoot=function(e,t){if(!zE(e))throw Error(Dt(299));var n=!1,i="",c=u5;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=PE(e,1,!1,null,null,n,!1,i,c),e[zl]=t.current,mg(e.nodeType===8?e.parentNode:e),new DE(t)};ps.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Dt(188)):(e=Object.keys(e).join(","),Error(Dt(268,e)));return e=Dz(t),e=e===null?null:e.stateNode,e};ps.flushSync=function(e){return dd(e)};ps.hydrate=function(e,t,n){if(!Tx(t))throw Error(Dt(200));return Cx(null,e,t,!0,n)};ps.hydrateRoot=function(e,t,n){if(!zE(e))throw Error(Dt(405));var i=n!=null&&n.hydratedSources||null,c=!1,d="",p=u5;if(n!=null&&(n.unstable_strictMode===!0&&(c=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(p=n.onRecoverableError)),t=c5(t,null,e,1,n??null,c,!1,d,p),e[zl]=t.current,mg(e),i)for(e=0;e<i.length;e++)n=i[e],c=n._getVersion,c=c(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,c]:t.mutableSourceEagerHydrationData.push(n,c);return new Ex(t)};ps.render=function(e,t,n){if(!Tx(t))throw Error(Dt(200));return Cx(null,e,t,!1,n)};ps.unmountComponentAtNode=function(e){if(!Tx(e))throw Error(Dt(40));return e._reactRootContainer?(dd(function(){Cx(null,null,e,!1,function(){e._reactRootContainer=null,e[zl]=null})}),!0):!1};ps.unstable_batchedUpdates=CE;ps.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Tx(n))throw Error(Dt(200));if(e==null||e._reactInternals===void 0)throw Error(Dt(38));return Cx(e,t,n,!1,i)};ps.version="18.3.1-next-f1338f8080-20240426";function d5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d5)}catch(e){console.error(e)}}d5(),dz.exports=ps;var zf=dz.exports;const v7=Ya(zf),_7=yS({__proto__:null,default:v7},[zf]);function x7(e){return typeof e=="function"?e():e}const h5=q.forwardRef(function(t,n){const{children:i,container:c,disablePortal:d=!1}=t,[p,s]=q.useState(null),_=ko(q.isValidElement(i)?i.ref:null,n);if(og(()=>{d||s(x7(c)||document.body)},[c,d]),og(()=>{if(p&&!d)return Nv(n,p),()=>{Nv(n,null)}},[n,p,d]),d){if(q.isValidElement(i)){const S={ref:_};return q.cloneElement(i,S)}return z.jsx(q.Fragment,{children:i})}return z.jsx(q.Fragment,{children:p&&zf.createPortal(i,p)})});function b7(e){const t=$a(e);return t.body===e?BS(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Um(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function uP(e){return parseInt(BS(e).getComputedStyle(e).paddingRight,10)||0}function w7(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName)!==-1,i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||i}function dP(e,t,n,i,c){const d=[t,n,...i];[].forEach.call(e.children,p=>{const s=d.indexOf(p)===-1,_=!w7(p);s&&_&&Um(p,c)})}function hw(e,t){let n=-1;return e.some((i,c)=>t(i)?(n=c,!0):!1),n}function S7(e,t){const n=[],i=e.container;if(!t.disableScrollLock){if(b7(i)){const p=pV($a(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${uP(i)+p}px`;const s=$a(i).querySelectorAll(".mui-fixed");[].forEach.call(s,_=>{n.push({value:_.style.paddingRight,property:"padding-right",el:_}),_.style.paddingRight=`${uP(_)+p}px`})}let d;if(i.parentNode instanceof DocumentFragment)d=$a(i).body;else{const p=i.parentElement,s=BS(i);d=(p==null?void 0:p.nodeName)==="HTML"&&s.getComputedStyle(p).overflowY==="scroll"?p:i}n.push({value:d.style.overflow,property:"overflow",el:d},{value:d.style.overflowX,property:"overflow-x",el:d},{value:d.style.overflowY,property:"overflow-y",el:d}),d.style.overflow="hidden"}return()=>{n.forEach(({value:d,el:p,property:s})=>{d?p.style.setProperty(s,d):p.style.removeProperty(s)})}}function E7(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class T7{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(t,n){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&Um(t.modalRef,!1);const c=E7(n);dP(n,t.mount,t.modalRef,c,!0);const d=hw(this.containers,p=>p.container===n);return d!==-1?(this.containers[d].modals.push(t),i):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:c}),i)}mount(t,n){const i=hw(this.containers,d=>d.modals.indexOf(t)!==-1),c=this.containers[i];c.restore||(c.restore=S7(c,n))}remove(t,n=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const c=hw(this.containers,p=>p.modals.indexOf(t)!==-1),d=this.containers[c];if(d.modals.splice(d.modals.indexOf(t),1),this.modals.splice(i,1),d.modals.length===0)d.restore&&d.restore(),t.modalRef&&Um(t.modalRef,n),dP(d.container,t.mount,t.modalRef,d.hiddenSiblings,!1),this.containers.splice(c,1);else{const p=d.modals[d.modals.length-1];p.modalRef&&Um(p.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}function C7(e){return typeof e=="function"?e():e}function A7(e){return e?e.props.hasOwnProperty("in"):!1}const k7=new T7;function I7(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,manager:c=k7,closeAfterTransition:d=!1,onTransitionEnter:p,onTransitionExited:s,children:_,onClose:S,open:E,rootRef:A}=e,I=q.useRef({}),O=q.useRef(null),N=q.useRef(null),$=ko(N,A),[K,W]=q.useState(!E),B=A7(_);let U=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(U=!1);const J=()=>$a(O.current),ee=()=>(I.current.modalRef=N.current,I.current.mount=O.current,I.current),ye=()=>{c.mount(ee(),{disableScrollLock:i}),N.current&&(N.current.scrollTop=0)},Q=zh(()=>{const te=C7(t)||J().body;c.add(ee(),te),N.current&&ye()}),be=q.useCallback(()=>c.isTopModal(ee()),[c]),re=zh(te=>{O.current=te,te&&(E&&be()?ye():N.current&&Um(N.current,U))}),Ie=q.useCallback(()=>{c.remove(ee(),U)},[U,c]);q.useEffect(()=>()=>{Ie()},[Ie]),q.useEffect(()=>{E?Q():(!B||!d)&&Ie()},[E,Ie,B,d,Q]);const Be=te=>Ce=>{var ve;(ve=te.onKeyDown)==null||ve.call(te,Ce),!(Ce.key!=="Escape"||Ce.which===229||!be())&&(n||(Ce.stopPropagation(),S&&S(Ce,"escapeKeyDown")))},le=te=>Ce=>{var ve;(ve=te.onClick)==null||ve.call(te,Ce),Ce.target===Ce.currentTarget&&S&&S(Ce,"backdropClick")};return{getRootProps:(te={})=>{const Ce=td(e);delete Ce.onTransitionEnter,delete Ce.onTransitionExited;const ve=we({},Ce,te);return we({role:"presentation"},ve,{onKeyDown:Be(ve),ref:$})},getBackdropProps:(te={})=>{const Ce=te;return we({"aria-hidden":!0},Ce,{onClick:le(Ce),open:E})},getTransitionProps:()=>{const te=()=>{W(!1),p&&p()},Ce=()=>{W(!0),s&&s(),d&&Ie()};return{onEnter:Zk(te,_==null?void 0:_.props.onEnter),onExited:Zk(Ce,_==null?void 0:_.props.onExited)}},rootRef:$,portalRef:re,isTopModal:be,exited:K,hasTransition:B}}var Zo="top",$s="bottom",Vs="right",qo="left",LE="auto",Hg=[Zo,$s,Vs,qo],_f="start",Eg="end",P7="clippingParents",f5="viewport",xm="popper",M7="reference",hP=Hg.reduce(function(e,t){return e.concat([t+"-"+_f,t+"-"+Eg])},[]),p5=[].concat(Hg,[LE]).reduce(function(e,t){return e.concat([t,t+"-"+_f,t+"-"+Eg])},[]),D7="beforeRead",z7="read",L7="afterRead",R7="beforeMain",O7="main",B7="afterMain",F7="beforeWrite",j7="write",N7="afterWrite",$7=[D7,z7,L7,R7,O7,B7,F7,j7,N7];function qa(e){return e?(e.nodeName||"").toLowerCase():null}function ds(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function hd(e){var t=ds(e).Element;return e instanceof t||e instanceof Element}function Fs(e){var t=ds(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function RE(e){if(typeof ShadowRoot>"u")return!1;var t=ds(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function V7(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},c=t.attributes[n]||{},d=t.elements[n];!Fs(d)||!qa(d)||(Object.assign(d.style,i),Object.keys(c).forEach(function(p){var s=c[p];s===!1?d.removeAttribute(p):d.setAttribute(p,s===!0?"":s)}))})}function U7(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var c=t.elements[i],d=t.attributes[i]||{},p=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),s=p.reduce(function(_,S){return _[S]="",_},{});!Fs(c)||!qa(c)||(Object.assign(c.style,s),Object.keys(d).forEach(function(_){c.removeAttribute(_)}))})}}const W7={name:"applyStyles",enabled:!0,phase:"write",fn:V7,effect:U7,requires:["computeStyles"]};function Wa(e){return e.split("-")[0]}var id=Math.max,d_=Math.min,xf=Math.round;function O2(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function m5(){return!/^((?!chrome|android).)*safari/i.test(O2())}function bf(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),c=1,d=1;t&&Fs(e)&&(c=e.offsetWidth>0&&xf(i.width)/e.offsetWidth||1,d=e.offsetHeight>0&&xf(i.height)/e.offsetHeight||1);var p=hd(e)?ds(e):window,s=p.visualViewport,_=!m5()&&n,S=(i.left+(_&&s?s.offsetLeft:0))/c,E=(i.top+(_&&s?s.offsetTop:0))/d,A=i.width/c,I=i.height/d;return{width:A,height:I,top:E,right:S+A,bottom:E+I,left:S,x:S,y:E}}function OE(e){var t=bf(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function g5(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&RE(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ol(e){return ds(e).getComputedStyle(e)}function G7(e){return["table","td","th"].indexOf(qa(e))>=0}function Xc(e){return((hd(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ax(e){return qa(e)==="html"?e:e.assignedSlot||e.parentNode||(RE(e)?e.host:null)||Xc(e)}function fP(e){return!Fs(e)||Ol(e).position==="fixed"?null:e.offsetParent}function H7(e){var t=/firefox/i.test(O2()),n=/Trident/i.test(O2());if(n&&Fs(e)){var i=Ol(e);if(i.position==="fixed")return null}var c=Ax(e);for(RE(c)&&(c=c.host);Fs(c)&&["html","body"].indexOf(qa(c))<0;){var d=Ol(c);if(d.transform!=="none"||d.perspective!=="none"||d.contain==="paint"||["transform","perspective"].indexOf(d.willChange)!==-1||t&&d.willChange==="filter"||t&&d.filter&&d.filter!=="none")return c;c=c.parentNode}return null}function Zg(e){for(var t=ds(e),n=fP(e);n&&G7(n)&&Ol(n).position==="static";)n=fP(n);return n&&(qa(n)==="html"||qa(n)==="body"&&Ol(n).position==="static")?t:n||H7(e)||t}function BE(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Wm(e,t,n){return id(e,d_(t,n))}function Z7(e,t,n){var i=Wm(e,t,n);return i>n?n:i}function y5(){return{top:0,right:0,bottom:0,left:0}}function v5(e){return Object.assign({},y5(),e)}function _5(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var q7=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,v5(typeof t!="number"?t:_5(t,Hg))};function K7(e){var t,n=e.state,i=e.name,c=e.options,d=n.elements.arrow,p=n.modifiersData.popperOffsets,s=Wa(n.placement),_=BE(s),S=[qo,Vs].indexOf(s)>=0,E=S?"height":"width";if(!(!d||!p)){var A=q7(c.padding,n),I=OE(d),O=_==="y"?Zo:qo,N=_==="y"?$s:Vs,$=n.rects.reference[E]+n.rects.reference[_]-p[_]-n.rects.popper[E],K=p[_]-n.rects.reference[_],W=Zg(d),B=W?_==="y"?W.clientHeight||0:W.clientWidth||0:0,U=$/2-K/2,J=A[O],ee=B-I[E]-A[N],ye=B/2-I[E]/2+U,Q=Wm(J,ye,ee),be=_;n.modifiersData[i]=(t={},t[be]=Q,t.centerOffset=Q-ye,t)}}function X7(e){var t=e.state,n=e.options,i=n.element,c=i===void 0?"[data-popper-arrow]":i;c!=null&&(typeof c=="string"&&(c=t.elements.popper.querySelector(c),!c)||g5(t.elements.popper,c)&&(t.elements.arrow=c))}const J7={name:"arrow",enabled:!0,phase:"main",fn:K7,effect:X7,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function wf(e){return e.split("-")[1]}var Y7={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Q7(e,t){var n=e.x,i=e.y,c=t.devicePixelRatio||1;return{x:xf(n*c)/c||0,y:xf(i*c)/c||0}}function pP(e){var t,n=e.popper,i=e.popperRect,c=e.placement,d=e.variation,p=e.offsets,s=e.position,_=e.gpuAcceleration,S=e.adaptive,E=e.roundOffsets,A=e.isFixed,I=p.x,O=I===void 0?0:I,N=p.y,$=N===void 0?0:N,K=typeof E=="function"?E({x:O,y:$}):{x:O,y:$};O=K.x,$=K.y;var W=p.hasOwnProperty("x"),B=p.hasOwnProperty("y"),U=qo,J=Zo,ee=window;if(S){var ye=Zg(n),Q="clientHeight",be="clientWidth";if(ye===ds(n)&&(ye=Xc(n),Ol(ye).position!=="static"&&s==="absolute"&&(Q="scrollHeight",be="scrollWidth")),ye=ye,c===Zo||(c===qo||c===Vs)&&d===Eg){J=$s;var re=A&&ye===ee&&ee.visualViewport?ee.visualViewport.height:ye[Q];$-=re-i.height,$*=_?1:-1}if(c===qo||(c===Zo||c===$s)&&d===Eg){U=Vs;var Ie=A&&ye===ee&&ee.visualViewport?ee.visualViewport.width:ye[be];O-=Ie-i.width,O*=_?1:-1}}var Be=Object.assign({position:s},S&&Y7),le=E===!0?Q7({x:O,y:$},ds(n)):{x:O,y:$};if(O=le.x,$=le.y,_){var xe;return Object.assign({},Be,(xe={},xe[J]=B?"0":"",xe[U]=W?"0":"",xe.transform=(ee.devicePixelRatio||1)<=1?"translate("+O+"px, "+$+"px)":"translate3d("+O+"px, "+$+"px, 0)",xe))}return Object.assign({},Be,(t={},t[J]=B?$+"px":"",t[U]=W?O+"px":"",t.transform="",t))}function e9(e){var t=e.state,n=e.options,i=n.gpuAcceleration,c=i===void 0?!0:i,d=n.adaptive,p=d===void 0?!0:d,s=n.roundOffsets,_=s===void 0?!0:s,S={placement:Wa(t.placement),variation:wf(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:c,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,pP(Object.assign({},S,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:p,roundOffsets:_})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,pP(Object.assign({},S,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:_})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const t9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:e9,data:{}};var tv={passive:!0};function n9(e){var t=e.state,n=e.instance,i=e.options,c=i.scroll,d=c===void 0?!0:c,p=i.resize,s=p===void 0?!0:p,_=ds(t.elements.popper),S=[].concat(t.scrollParents.reference,t.scrollParents.popper);return d&&S.forEach(function(E){E.addEventListener("scroll",n.update,tv)}),s&&_.addEventListener("resize",n.update,tv),function(){d&&S.forEach(function(E){E.removeEventListener("scroll",n.update,tv)}),s&&_.removeEventListener("resize",n.update,tv)}}const r9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:n9,data:{}};var i9={left:"right",right:"left",bottom:"top",top:"bottom"};function kv(e){return e.replace(/left|right|bottom|top/g,function(t){return i9[t]})}var o9={start:"end",end:"start"};function mP(e){return e.replace(/start|end/g,function(t){return o9[t]})}function FE(e){var t=ds(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function jE(e){return bf(Xc(e)).left+FE(e).scrollLeft}function s9(e,t){var n=ds(e),i=Xc(e),c=n.visualViewport,d=i.clientWidth,p=i.clientHeight,s=0,_=0;if(c){d=c.width,p=c.height;var S=m5();(S||!S&&t==="fixed")&&(s=c.offsetLeft,_=c.offsetTop)}return{width:d,height:p,x:s+jE(e),y:_}}function a9(e){var t,n=Xc(e),i=FE(e),c=(t=e.ownerDocument)==null?void 0:t.body,d=id(n.scrollWidth,n.clientWidth,c?c.scrollWidth:0,c?c.clientWidth:0),p=id(n.scrollHeight,n.clientHeight,c?c.scrollHeight:0,c?c.clientHeight:0),s=-i.scrollLeft+jE(e),_=-i.scrollTop;return Ol(c||n).direction==="rtl"&&(s+=id(n.clientWidth,c?c.clientWidth:0)-d),{width:d,height:p,x:s,y:_}}function NE(e){var t=Ol(e),n=t.overflow,i=t.overflowX,c=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+c+i)}function x5(e){return["html","body","#document"].indexOf(qa(e))>=0?e.ownerDocument.body:Fs(e)&&NE(e)?e:x5(Ax(e))}function Gm(e,t){var n;t===void 0&&(t=[]);var i=x5(e),c=i===((n=e.ownerDocument)==null?void 0:n.body),d=ds(i),p=c?[d].concat(d.visualViewport||[],NE(i)?i:[]):i,s=t.concat(p);return c?s:s.concat(Gm(Ax(p)))}function B2(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function l9(e,t){var n=bf(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function gP(e,t,n){return t===f5?B2(s9(e,n)):hd(t)?l9(t,n):B2(a9(Xc(e)))}function c9(e){var t=Gm(Ax(e)),n=["absolute","fixed"].indexOf(Ol(e).position)>=0,i=n&&Fs(e)?Zg(e):e;return hd(i)?t.filter(function(c){return hd(c)&&g5(c,i)&&qa(c)!=="body"}):[]}function u9(e,t,n,i){var c=t==="clippingParents"?c9(e):[].concat(t),d=[].concat(c,[n]),p=d[0],s=d.reduce(function(_,S){var E=gP(e,S,i);return _.top=id(E.top,_.top),_.right=d_(E.right,_.right),_.bottom=d_(E.bottom,_.bottom),_.left=id(E.left,_.left),_},gP(e,p,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function b5(e){var t=e.reference,n=e.element,i=e.placement,c=i?Wa(i):null,d=i?wf(i):null,p=t.x+t.width/2-n.width/2,s=t.y+t.height/2-n.height/2,_;switch(c){case Zo:_={x:p,y:t.y-n.height};break;case $s:_={x:p,y:t.y+t.height};break;case Vs:_={x:t.x+t.width,y:s};break;case qo:_={x:t.x-n.width,y:s};break;default:_={x:t.x,y:t.y}}var S=c?BE(c):null;if(S!=null){var E=S==="y"?"height":"width";switch(d){case _f:_[S]=_[S]-(t[E]/2-n[E]/2);break;case Eg:_[S]=_[S]+(t[E]/2-n[E]/2);break}}return _}function Tg(e,t){t===void 0&&(t={});var n=t,i=n.placement,c=i===void 0?e.placement:i,d=n.strategy,p=d===void 0?e.strategy:d,s=n.boundary,_=s===void 0?P7:s,S=n.rootBoundary,E=S===void 0?f5:S,A=n.elementContext,I=A===void 0?xm:A,O=n.altBoundary,N=O===void 0?!1:O,$=n.padding,K=$===void 0?0:$,W=v5(typeof K!="number"?K:_5(K,Hg)),B=I===xm?M7:xm,U=e.rects.popper,J=e.elements[N?B:I],ee=u9(hd(J)?J:J.contextElement||Xc(e.elements.popper),_,E,p),ye=bf(e.elements.reference),Q=b5({reference:ye,element:U,strategy:"absolute",placement:c}),be=B2(Object.assign({},U,Q)),re=I===xm?be:ye,Ie={top:ee.top-re.top+W.top,bottom:re.bottom-ee.bottom+W.bottom,left:ee.left-re.left+W.left,right:re.right-ee.right+W.right},Be=e.modifiersData.offset;if(I===xm&&Be){var le=Be[c];Object.keys(Ie).forEach(function(xe){var Se=[Vs,$s].indexOf(xe)>=0?1:-1,oe=[Zo,$s].indexOf(xe)>=0?"y":"x";Ie[xe]+=le[oe]*Se})}return Ie}function d9(e,t){t===void 0&&(t={});var n=t,i=n.placement,c=n.boundary,d=n.rootBoundary,p=n.padding,s=n.flipVariations,_=n.allowedAutoPlacements,S=_===void 0?p5:_,E=wf(i),A=E?s?hP:hP.filter(function(N){return wf(N)===E}):Hg,I=A.filter(function(N){return S.indexOf(N)>=0});I.length===0&&(I=A);var O=I.reduce(function(N,$){return N[$]=Tg(e,{placement:$,boundary:c,rootBoundary:d,padding:p})[Wa($)],N},{});return Object.keys(O).sort(function(N,$){return O[N]-O[$]})}function h9(e){if(Wa(e)===LE)return[];var t=kv(e);return[mP(e),t,mP(t)]}function f9(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var c=n.mainAxis,d=c===void 0?!0:c,p=n.altAxis,s=p===void 0?!0:p,_=n.fallbackPlacements,S=n.padding,E=n.boundary,A=n.rootBoundary,I=n.altBoundary,O=n.flipVariations,N=O===void 0?!0:O,$=n.allowedAutoPlacements,K=t.options.placement,W=Wa(K),B=W===K,U=_||(B||!N?[kv(K)]:h9(K)),J=[K].concat(U).reduce(function(Pt,Kt){return Pt.concat(Wa(Kt)===LE?d9(t,{placement:Kt,boundary:E,rootBoundary:A,padding:S,flipVariations:N,allowedAutoPlacements:$}):Kt)},[]),ee=t.rects.reference,ye=t.rects.popper,Q=new Map,be=!0,re=J[0],Ie=0;Ie<J.length;Ie++){var Be=J[Ie],le=Wa(Be),xe=wf(Be)===_f,Se=[Zo,$s].indexOf(le)>=0,oe=Se?"width":"height",te=Tg(t,{placement:Be,boundary:E,rootBoundary:A,altBoundary:I,padding:S}),Ce=Se?xe?Vs:qo:xe?$s:Zo;ee[oe]>ye[oe]&&(Ce=kv(Ce));var ve=kv(Ce),Fe=[];if(d&&Fe.push(te[le]<=0),s&&Fe.push(te[Ce]<=0,te[ve]<=0),Fe.every(function(Pt){return Pt})){re=Be,be=!1;break}Q.set(Be,Fe)}if(be)for(var Ge=N?3:1,rt=function(Kt){var nn=J.find(function(an){var ct=Q.get(an);if(ct)return ct.slice(0,Kt).every(function(Vt){return Vt})});if(nn)return re=nn,"break"},Ct=Ge;Ct>0;Ct--){var It=rt(Ct);if(It==="break")break}t.placement!==re&&(t.modifiersData[i]._skip=!0,t.placement=re,t.reset=!0)}}const p9={name:"flip",enabled:!0,phase:"main",fn:f9,requiresIfExists:["offset"],data:{_skip:!1}};function yP(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function vP(e){return[Zo,Vs,$s,qo].some(function(t){return e[t]>=0})}function m9(e){var t=e.state,n=e.name,i=t.rects.reference,c=t.rects.popper,d=t.modifiersData.preventOverflow,p=Tg(t,{elementContext:"reference"}),s=Tg(t,{altBoundary:!0}),_=yP(p,i),S=yP(s,c,d),E=vP(_),A=vP(S);t.modifiersData[n]={referenceClippingOffsets:_,popperEscapeOffsets:S,isReferenceHidden:E,hasPopperEscaped:A},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":E,"data-popper-escaped":A})}const g9={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:m9};function y9(e,t,n){var i=Wa(e),c=[qo,Zo].indexOf(i)>=0?-1:1,d=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,p=d[0],s=d[1];return p=p||0,s=(s||0)*c,[qo,Vs].indexOf(i)>=0?{x:s,y:p}:{x:p,y:s}}function v9(e){var t=e.state,n=e.options,i=e.name,c=n.offset,d=c===void 0?[0,0]:c,p=p5.reduce(function(E,A){return E[A]=y9(A,t.rects,d),E},{}),s=p[t.placement],_=s.x,S=s.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=_,t.modifiersData.popperOffsets.y+=S),t.modifiersData[i]=p}const _9={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:v9};function x9(e){var t=e.state,n=e.name;t.modifiersData[n]=b5({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const b9={name:"popperOffsets",enabled:!0,phase:"read",fn:x9,data:{}};function w9(e){return e==="x"?"y":"x"}function S9(e){var t=e.state,n=e.options,i=e.name,c=n.mainAxis,d=c===void 0?!0:c,p=n.altAxis,s=p===void 0?!1:p,_=n.boundary,S=n.rootBoundary,E=n.altBoundary,A=n.padding,I=n.tether,O=I===void 0?!0:I,N=n.tetherOffset,$=N===void 0?0:N,K=Tg(t,{boundary:_,rootBoundary:S,padding:A,altBoundary:E}),W=Wa(t.placement),B=wf(t.placement),U=!B,J=BE(W),ee=w9(J),ye=t.modifiersData.popperOffsets,Q=t.rects.reference,be=t.rects.popper,re=typeof $=="function"?$(Object.assign({},t.rects,{placement:t.placement})):$,Ie=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),Be=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,le={x:0,y:0};if(ye){if(d){var xe,Se=J==="y"?Zo:qo,oe=J==="y"?$s:Vs,te=J==="y"?"height":"width",Ce=ye[J],ve=Ce+K[Se],Fe=Ce-K[oe],Ge=O?-be[te]/2:0,rt=B===_f?Q[te]:be[te],Ct=B===_f?-be[te]:-Q[te],It=t.elements.arrow,Pt=O&&It?OE(It):{width:0,height:0},Kt=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:y5(),nn=Kt[Se],an=Kt[oe],ct=Wm(0,Q[te],Pt[te]),Vt=U?Q[te]/2-Ge-ct-nn-Ie.mainAxis:rt-ct-nn-Ie.mainAxis,ln=U?-Q[te]/2+Ge+ct+an+Ie.mainAxis:Ct+ct+an+Ie.mainAxis,zt=t.elements.arrow&&Zg(t.elements.arrow),pn=zt?J==="y"?zt.clientTop||0:zt.clientLeft||0:0,Kn=(xe=Be==null?void 0:Be[J])!=null?xe:0,Fr=Ce+Vt-Kn-pn,mn=Ce+ln-Kn,Ut=Wm(O?d_(ve,Fr):ve,Ce,O?id(Fe,mn):Fe);ye[J]=Ut,le[J]=Ut-Ce}if(s){var Vi,Le=J==="x"?Zo:qo,Ke=J==="x"?$s:Vs,et=ye[ee],Ot=ee==="y"?"height":"width",kt=et+K[Le],yt=et-K[Ke],Zt=[Zo,qo].indexOf(W)!==-1,vn=(Vi=Be==null?void 0:Be[ee])!=null?Vi:0,Rn=Zt?kt:et-Q[Ot]-be[Ot]-vn+Ie.altAxis,bn=Zt?et+Q[Ot]+be[Ot]-vn-Ie.altAxis:yt,_n=O&&Zt?Z7(Rn,et,bn):Wm(O?Rn:kt,et,O?bn:yt);ye[ee]=_n,le[ee]=_n-et}t.modifiersData[i]=le}}const E9={name:"preventOverflow",enabled:!0,phase:"main",fn:S9,requiresIfExists:["offset"]};function T9(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function C9(e){return e===ds(e)||!Fs(e)?FE(e):T9(e)}function A9(e){var t=e.getBoundingClientRect(),n=xf(t.width)/e.offsetWidth||1,i=xf(t.height)/e.offsetHeight||1;return n!==1||i!==1}function k9(e,t,n){n===void 0&&(n=!1);var i=Fs(t),c=Fs(t)&&A9(t),d=Xc(t),p=bf(e,c,n),s={scrollLeft:0,scrollTop:0},_={x:0,y:0};return(i||!i&&!n)&&((qa(t)!=="body"||NE(d))&&(s=C9(t)),Fs(t)?(_=bf(t,!0),_.x+=t.clientLeft,_.y+=t.clientTop):d&&(_.x=jE(d))),{x:p.left+s.scrollLeft-_.x,y:p.top+s.scrollTop-_.y,width:p.width,height:p.height}}function I9(e){var t=new Map,n=new Set,i=[];e.forEach(function(d){t.set(d.name,d)});function c(d){n.add(d.name);var p=[].concat(d.requires||[],d.requiresIfExists||[]);p.forEach(function(s){if(!n.has(s)){var _=t.get(s);_&&c(_)}}),i.push(d)}return e.forEach(function(d){n.has(d.name)||c(d)}),i}function P9(e){var t=I9(e);return $7.reduce(function(n,i){return n.concat(t.filter(function(c){return c.phase===i}))},[])}function M9(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function D9(e){var t=e.reduce(function(n,i){var c=n[i.name];return n[i.name]=c?Object.assign({},c,i,{options:Object.assign({},c.options,i.options),data:Object.assign({},c.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var _P={placement:"bottom",modifiers:[],strategy:"absolute"};function xP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function z9(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,c=t.defaultOptions,d=c===void 0?_P:c;return function(s,_,S){S===void 0&&(S=d);var E={placement:"bottom",orderedModifiers:[],options:Object.assign({},_P,d),modifiersData:{},elements:{reference:s,popper:_},attributes:{},styles:{}},A=[],I=!1,O={state:E,setOptions:function(W){var B=typeof W=="function"?W(E.options):W;$(),E.options=Object.assign({},d,E.options,B),E.scrollParents={reference:hd(s)?Gm(s):s.contextElement?Gm(s.contextElement):[],popper:Gm(_)};var U=P9(D9([].concat(i,E.options.modifiers)));return E.orderedModifiers=U.filter(function(J){return J.enabled}),N(),O.update()},forceUpdate:function(){if(!I){var W=E.elements,B=W.reference,U=W.popper;if(xP(B,U)){E.rects={reference:k9(B,Zg(U),E.options.strategy==="fixed"),popper:OE(U)},E.reset=!1,E.placement=E.options.placement,E.orderedModifiers.forEach(function(Ie){return E.modifiersData[Ie.name]=Object.assign({},Ie.data)});for(var J=0;J<E.orderedModifiers.length;J++){if(E.reset===!0){E.reset=!1,J=-1;continue}var ee=E.orderedModifiers[J],ye=ee.fn,Q=ee.options,be=Q===void 0?{}:Q,re=ee.name;typeof ye=="function"&&(E=ye({state:E,options:be,name:re,instance:O})||E)}}}},update:M9(function(){return new Promise(function(K){O.forceUpdate(),K(E)})}),destroy:function(){$(),I=!0}};if(!xP(s,_))return O;O.setOptions(S).then(function(K){!I&&S.onFirstUpdate&&S.onFirstUpdate(K)});function N(){E.orderedModifiers.forEach(function(K){var W=K.name,B=K.options,U=B===void 0?{}:B,J=K.effect;if(typeof J=="function"){var ee=J({state:E,name:W,instance:O,options:U}),ye=function(){};A.push(ee||ye)}})}function $(){A.forEach(function(K){return K()}),A=[]}return O}}var L9=[r9,b9,t9,W7,_9,p9,E9,J7,g9],R9=z9({defaultModifiers:L9});const w5="Popper";function O9(e){return uz(w5,e)}r8(w5,["root"]);const B9=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],F9=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function j9(e,t){if(t==="ltr")return e;switch(e){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return e}}function F2(e){return typeof e=="function"?e():e}function N9(e){return e.nodeType!==void 0}const $9=()=>_i({root:["root"]},JV(O9)),V9={},U9=q.forwardRef(function(t,n){const{anchorEl:i,children:c,direction:d,disablePortal:p,modifiers:s,open:_,placement:S,popperOptions:E,popperRef:A,slotProps:I={},slots:O={},TransitionProps:N}=t,$=gn(t,B9),K=q.useRef(null),W=ko(K,n),B=q.useRef(null),U=ko(B,A),J=q.useRef(U);og(()=>{J.current=U},[U]),q.useImperativeHandle(A,()=>B.current,[]);const ee=j9(S,d),[ye,Q]=q.useState(ee),[be,re]=q.useState(F2(i));q.useEffect(()=>{B.current&&B.current.forceUpdate()}),q.useEffect(()=>{i&&re(F2(i))},[i]),og(()=>{if(!be||!_)return;const Se=Ce=>{Q(Ce.placement)};let oe=[{name:"preventOverflow",options:{altBoundary:p}},{name:"flip",options:{altBoundary:p}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:Ce})=>{Se(Ce)}}];s!=null&&(oe=oe.concat(s)),E&&E.modifiers!=null&&(oe=oe.concat(E.modifiers));const te=R9(be,K.current,we({placement:ee},E,{modifiers:oe}));return J.current(te),()=>{te.destroy(),J.current(null)}},[be,p,s,_,E,ee]);const Ie={placement:ye};N!==null&&(Ie.TransitionProps=N);const Be=$9(),le=O.root??"div",xe=e8({elementType:le,externalSlotProps:I.root,externalForwardedProps:$,additionalProps:{role:"tooltip",ref:W},ownerState:t,className:Be.root});return z.jsx(le,we({},xe,{children:typeof c=="function"?c(Ie):c}))}),W9=q.forwardRef(function(t,n){const{anchorEl:i,children:c,container:d,direction:p="ltr",disablePortal:s=!1,keepMounted:_=!1,modifiers:S,open:E,placement:A="bottom",popperOptions:I=V9,popperRef:O,style:N,transition:$=!1,slotProps:K={},slots:W={}}=t,B=gn(t,F9),[U,J]=q.useState(!0),ee=()=>{J(!1)},ye=()=>{J(!0)};if(!_&&!E&&(!$||U))return null;let Q;if(d)Q=d;else if(i){const Ie=F2(i);Q=Ie&&N9(Ie)?$a(Ie).body:$a(null).body}const be=!E&&_&&(!$||U)?"none":void 0,re=$?{in:E,onEnter:ee,onExited:ye}:void 0;return z.jsx(h5,{disablePortal:s,container:Q,children:z.jsx(U9,we({anchorEl:i,direction:p,disablePortal:s,modifiers:S,ref:n,open:$?!U:E,placement:A,popperOptions:I,popperRef:O,slotProps:K,slots:W},B,{style:we({position:"fixed",top:0,left:0,display:be},N),TransitionProps:re,children:c}))})});function bP(e){return typeof e.normalize<"u"?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e}function G9(e={}){const{ignoreAccents:t=!0,ignoreCase:n=!0,limit:i,matchFrom:c="any",stringify:d,trim:p=!1}=e;return(s,{inputValue:_,getOptionLabel:S})=>{let E=p?_.trim():_;n&&(E=E.toLowerCase()),t&&(E=bP(E));const A=E?s.filter(I=>{let O=(d||S)(I);return n&&(O=O.toLowerCase()),t&&(O=bP(O)),c==="start"?O.indexOf(E)===0:O.indexOf(E)>-1}):s;return typeof i=="number"?A.slice(0,i):A}}function nv(e,t){for(let n=0;n<e.length;n+=1)if(t(e[n]))return n;return-1}const H9=G9(),wP=5,Z9=e=>{var t;return e.current!==null&&((t=e.current.parentElement)==null?void 0:t.contains(document.activeElement))};function q9(e){const{unstable_isActiveElementInListbox:t=Z9,unstable_classNamePrefix:n="Mui",autoComplete:i=!1,autoHighlight:c=!1,autoSelect:d=!1,blurOnSelect:p=!1,clearOnBlur:s=!e.freeSolo,clearOnEscape:_=!1,componentName:S="useAutocomplete",defaultValue:E=e.multiple?[]:null,disableClearable:A=!1,disableCloseOnSelect:I=!1,disabled:O,disabledItemsFocusable:N=!1,disableListWrap:$=!1,filterOptions:K=H9,filterSelectedOptions:W=!1,freeSolo:B=!1,getOptionDisabled:U,getOptionKey:J,getOptionLabel:ee=ut=>ut.label??ut,groupBy:ye,handleHomeEndKeys:Q=!e.freeSolo,id:be,includeInputInList:re=!1,inputValue:Ie,isOptionEqualToValue:Be=(ut,it)=>ut===it,multiple:le=!1,onChange:xe,onClose:Se,onHighlightChange:oe,onInputChange:te,onOpen:Ce,open:ve,openOnFocus:Fe=!1,options:Ge,readOnly:rt=!1,selectOnFocus:Ct=!e.freeSolo,value:It}=e,Pt=df(be);let Kt=ee;Kt=ut=>{const it=ee(ut);return typeof it!="string"?String(it):it};const nn=q.useRef(!1),an=q.useRef(!0),ct=q.useRef(null),Vt=q.useRef(null),[ln,zt]=q.useState(null),[pn,Kn]=q.useState(-1),Fr=c?0:-1,mn=q.useRef(Fr),[Ut,Vi]=Bb({controlled:It,default:E,name:S}),[Le,Ke]=Bb({controlled:Ie,default:"",name:S,state:"inputValue"}),[et,Ot]=q.useState(!1),kt=q.useCallback((ut,it)=>{if(!(le?Ut.length<it.length:it!==null)&&!s)return;let hn;if(le)hn="";else if(it==null)hn="";else{const kn=Kt(it);hn=typeof kn=="string"?kn:""}Le!==hn&&(Ke(hn),te&&te(ut,hn,"reset"))},[Kt,Le,le,te,Ke,s,Ut]),[yt,Zt]=Bb({controlled:ve,default:!1,name:S,state:"open"}),[vn,Rn]=q.useState(!0),bn=!le&&Ut!=null&&Le===Kt(Ut),_n=yt&&!rt,Mn=_n?K(Ge.filter(ut=>!(W&&(le?Ut:[Ut]).some(it=>it!==null&&Be(ut,it)))),{inputValue:bn&&vn?"":Le,getOptionLabel:Kt}):[],Sr=gV({filteredOptions:Mn,value:Ut,inputValue:Le});q.useEffect(()=>{const ut=Ut!==Sr.value;et&&!ut||B&&!ut||kt(null,Ut)},[Ut,kt,et,Sr.value,B]);const Er=yt&&Mn.length>0&&!rt,Si=zh(ut=>{ut===-1?ct.current.focus():ln.querySelector(`[data-tag-index="${ut}"]`).focus()});q.useEffect(()=>{le&&pn>Ut.length-1&&(Kn(-1),Si(-1))},[Ut,le,pn,Si]);function Qn(ut,it){if(!Vt.current||ut<0||ut>=Mn.length)return-1;let Bt=ut;for(;;){const hn=Vt.current.querySelector(`[data-option-index="${Bt}"]`),kn=N?!1:!hn||hn.disabled||hn.getAttribute("aria-disabled")==="true";if(hn&&hn.hasAttribute("tabindex")&&!kn)return Bt;if(it==="next"?Bt=(Bt+1)%Mn.length:Bt=(Bt-1+Mn.length)%Mn.length,Bt===ut)return-1}}const Xn=zh(({event:ut,index:it,reason:Bt="auto"})=>{if(mn.current=it,it===-1?ct.current.removeAttribute("aria-activedescendant"):ct.current.setAttribute("aria-activedescendant",`${Pt}-option-${it}`),oe&&oe(ut,it===-1?null:Mn[it],Bt),!Vt.current)return;const hn=Vt.current.querySelector(`[role="option"].${n}-focused`);hn&&(hn.classList.remove(`${n}-focused`),hn.classList.remove(`${n}-focusVisible`));let kn=Vt.current;if(Vt.current.getAttribute("role")!=="listbox"&&(kn=Vt.current.parentElement.querySelector('[role="listbox"]')),!kn)return;if(it===-1){kn.scrollTop=0;return}const yr=Vt.current.querySelector(`[data-option-index="${it}"]`);if(yr&&(yr.classList.add(`${n}-focused`),Bt==="keyboard"&&yr.classList.add(`${n}-focusVisible`),kn.scrollHeight>kn.clientHeight&&Bt!=="mouse"&&Bt!=="touch")){const un=yr,Nr=kn.clientHeight+kn.scrollTop,Dn=un.offsetTop+un.offsetHeight;Dn>Nr?kn.scrollTop=Dn-kn.clientHeight:un.offsetTop-un.offsetHeight*(ye?1.3:0)<kn.scrollTop&&(kn.scrollTop=un.offsetTop-un.offsetHeight*(ye?1.3:0))}}),Gn=zh(({event:ut,diff:it,direction:Bt="next",reason:hn="auto"})=>{if(!_n)return;const yr=Qn((()=>{const un=Mn.length-1;if(it==="reset")return Fr;if(it==="start")return 0;if(it==="end")return un;const Nr=mn.current+it;return Nr<0?Nr===-1&&re?-1:$&&mn.current!==-1||Math.abs(it)>1?0:un:Nr>un?Nr===un+1&&re?-1:$||Math.abs(it)>1?un:0:Nr})(),Bt);if(Xn({index:yr,reason:hn,event:ut}),i&&it!=="reset")if(yr===-1)ct.current.value=Le;else{const un=Kt(Mn[yr]);ct.current.value=un,un.toLowerCase().indexOf(Le.toLowerCase())===0&&Le.length>0&&ct.current.setSelectionRange(Le.length,un.length)}}),jr=()=>{const ut=(it,Bt)=>{const hn=it?Kt(it):"",kn=Bt?Kt(Bt):"";return hn===kn};if(mn.current!==-1&&Sr.filteredOptions&&Sr.filteredOptions.length!==Mn.length&&Sr.inputValue===Le&&(le?Ut.length===Sr.value.length&&Sr.value.every((it,Bt)=>Kt(Ut[Bt])===Kt(it)):ut(Sr.value,Ut))){const it=Sr.filteredOptions[mn.current];if(it)return nv(Mn,Bt=>Kt(Bt)===Kt(it))}return-1},Li=q.useCallback(()=>{if(!_n)return;const ut=jr();if(ut!==-1){mn.current=ut;return}const it=le?Ut[0]:Ut;if(Mn.length===0||it==null){Gn({diff:"reset"});return}if(Vt.current){if(it!=null){const Bt=Mn[mn.current];if(le&&Bt&&nv(Ut,kn=>Be(Bt,kn))!==-1)return;const hn=nv(Mn,kn=>Be(kn,it));hn===-1?Gn({diff:"reset"}):Xn({index:hn});return}if(mn.current>=Mn.length-1){Xn({index:Mn.length-1});return}Xn({index:mn.current})}},[Mn.length,le?!1:Ut,W,Gn,Xn,_n,Le,le]),Xo=zh(ut=>{Nv(Vt,ut),ut&&Li()});q.useEffect(()=>{Li()},[Li]);const ke=ut=>{yt||(Zt(!0),Rn(!0),Ce&&Ce(ut))},Y=(ut,it)=>{yt&&(Zt(!1),Se&&Se(ut,it))},ne=(ut,it,Bt,hn)=>{if(le){if(Ut.length===it.length&&Ut.every((kn,yr)=>kn===it[yr]))return}else if(Ut===it)return;xe&&xe(ut,it,Bt,hn),Vi(it)},Te=q.useRef(!1),ze=(ut,it,Bt="selectOption",hn="options")=>{let kn=Bt,yr=it;if(le){yr=Array.isArray(Ut)?Ut.slice():[];const un=nv(yr,Nr=>Be(it,Nr));un===-1?yr.push(it):hn!=="freeSolo"&&(yr.splice(un,1),kn="removeOption")}kt(ut,yr),ne(ut,yr,kn,{option:it}),!I&&(!ut||!ut.ctrlKey&&!ut.metaKey)&&Y(ut,kn),(p===!0||p==="touch"&&Te.current||p==="mouse"&&!Te.current)&&ct.current.blur()};function Ve(ut,it){if(ut===-1)return-1;let Bt=ut;for(;;){if(it==="next"&&Bt===Ut.length||it==="previous"&&Bt===-1)return-1;const hn=ln.querySelector(`[data-tag-index="${Bt}"]`);if(!hn||!hn.hasAttribute("tabindex")||hn.disabled||hn.getAttribute("aria-disabled")==="true")Bt+=it==="next"?1:-1;else return Bt}}const ae=(ut,it)=>{if(!le)return;Le===""&&Y(ut,"toggleInput");let Bt=pn;pn===-1?Le===""&&it==="previous"&&(Bt=Ut.length-1):(Bt+=it==="next"?1:-1,Bt<0&&(Bt=0),Bt===Ut.length&&(Bt=-1)),Bt=Ve(Bt,it),Kn(Bt),Si(Bt)},fe=ut=>{nn.current=!0,Ke(""),te&&te(ut,"","clear"),ne(ut,le?[]:null,"clear")},de=ut=>it=>{if(ut.onKeyDown&&ut.onKeyDown(it),!it.defaultMuiPrevented&&(pn!==-1&&["ArrowLeft","ArrowRight"].indexOf(it.key)===-1&&(Kn(-1),Si(-1)),it.which!==229))switch(it.key){case"Home":_n&&Q&&(it.preventDefault(),Gn({diff:"start",direction:"next",reason:"keyboard",event:it}));break;case"End":_n&&Q&&(it.preventDefault(),Gn({diff:"end",direction:"previous",reason:"keyboard",event:it}));break;case"PageUp":it.preventDefault(),Gn({diff:-wP,direction:"previous",reason:"keyboard",event:it}),ke(it);break;case"PageDown":it.preventDefault(),Gn({diff:wP,direction:"next",reason:"keyboard",event:it}),ke(it);break;case"ArrowDown":it.preventDefault(),Gn({diff:1,direction:"next",reason:"keyboard",event:it}),ke(it);break;case"ArrowUp":it.preventDefault(),Gn({diff:-1,direction:"previous",reason:"keyboard",event:it}),ke(it);break;case"ArrowLeft":ae(it,"previous");break;case"ArrowRight":ae(it,"next");break;case"Enter":if(mn.current!==-1&&_n){const Bt=Mn[mn.current],hn=U?U(Bt):!1;if(it.preventDefault(),hn)return;ze(it,Bt,"selectOption"),i&&ct.current.setSelectionRange(ct.current.value.length,ct.current.value.length)}else B&&Le!==""&&bn===!1&&(le&&it.preventDefault(),ze(it,Le,"createOption","freeSolo"));break;case"Escape":_n?(it.preventDefault(),it.stopPropagation(),Y(it,"escape")):_&&(Le!==""||le&&Ut.length>0)&&(it.preventDefault(),it.stopPropagation(),fe(it));break;case"Backspace":if(le&&!rt&&Le===""&&Ut.length>0){const Bt=pn===-1?Ut.length-1:pn,hn=Ut.slice();hn.splice(Bt,1),ne(it,hn,"removeOption",{option:Ut[Bt]})}break;case"Delete":if(le&&!rt&&Le===""&&Ut.length>0&&pn!==-1){const Bt=pn,hn=Ut.slice();hn.splice(Bt,1),ne(it,hn,"removeOption",{option:Ut[Bt]})}break}},De=ut=>{Ot(!0),Fe&&!nn.current&&ke(ut)},He=ut=>{if(t(Vt)){ct.current.focus();return}Ot(!1),an.current=!0,nn.current=!1,d&&mn.current!==-1&&_n?ze(ut,Mn[mn.current],"blur"):d&&B&&Le!==""?ze(ut,Le,"blur","freeSolo"):s&&kt(ut,Ut),Y(ut,"blur")},at=ut=>{const it=ut.target.value;Le!==it&&(Ke(it),Rn(!1),te&&te(ut,it,"input")),it===""?!A&&!le&&ne(ut,null,"clear"):ke(ut)},Qe=ut=>{const it=Number(ut.currentTarget.getAttribute("data-option-index"));mn.current!==it&&Xn({event:ut,index:it,reason:"mouse"})},vt=ut=>{Xn({event:ut,index:Number(ut.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Te.current=!0},Lt=ut=>{const it=Number(ut.currentTarget.getAttribute("data-option-index"));ze(ut,Mn[it],"selectOption"),Te.current=!1},Mt=ut=>it=>{const Bt=Ut.slice();Bt.splice(ut,1),ne(it,Bt,"removeOption",{option:Ut[ut]})},Xt=ut=>{yt?Y(ut,"toggleInput"):ke(ut)},cn=ut=>{ut.currentTarget.contains(ut.target)&&ut.target.getAttribute("id")!==Pt&&ut.preventDefault()},qt=ut=>{ut.currentTarget.contains(ut.target)&&(ct.current.focus(),Ct&&an.current&&ct.current.selectionEnd-ct.current.selectionStart===0&&ct.current.select(),an.current=!1)},wn=ut=>{!O&&(Le===""||!yt)&&Xt(ut)};let jn=B&&Le.length>0;jn=jn||(le?Ut.length>0:Ut!==null);let er=Mn;return ye&&(er=Mn.reduce((ut,it,Bt)=>{const hn=ye(it);return ut.length>0&&ut[ut.length-1].group===hn?ut[ut.length-1].options.push(it):ut.push({key:Bt,index:Bt,group:hn,options:[it]}),ut},[])),O&&et&&He(),{getRootProps:(ut={})=>we({"aria-owns":Er?`${Pt}-listbox`:null},ut,{onKeyDown:de(ut),onMouseDown:cn,onClick:qt}),getInputLabelProps:()=>({id:`${Pt}-label`,htmlFor:Pt}),getInputProps:()=>({id:Pt,value:Le,onBlur:He,onFocus:De,onChange:at,onMouseDown:wn,"aria-activedescendant":_n?"":null,"aria-autocomplete":i?"both":"list","aria-controls":Er?`${Pt}-listbox`:void 0,"aria-expanded":Er,autoComplete:"off",ref:ct,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:O}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:fe}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Xt}),getTagProps:({index:ut})=>we({key:ut,"data-tag-index":ut,tabIndex:-1},!rt&&{onDelete:Mt(ut)}),getListboxProps:()=>({role:"listbox",id:`${Pt}-listbox`,"aria-labelledby":`${Pt}-label`,ref:Xo,onMouseDown:ut=>{ut.preventDefault()}}),getOptionProps:({index:ut,option:it})=>{const Bt=(le?Ut:[Ut]).some(kn=>kn!=null&&Be(it,kn)),hn=U?U(it):!1;return{key:(J==null?void 0:J(it))??Kt(it),tabIndex:-1,role:"option",id:`${Pt}-option-${ut}`,onMouseMove:Qe,onClick:Lt,onTouchStart:vt,"data-option-index":ut,"aria-disabled":hn,"aria-selected":Bt}},id:Pt,inputValue:Le,value:Ut,dirty:jn,expanded:_n&&ln,popupOpen:_n,focused:et||pn!==-1,anchorEl:ln,setAnchorEl:zt,focusedTag:pn,groupedOptions:er}}const K9=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],X9=["component","slots","slotProps"],J9=["component"];function xn(e,t){const{className:n,elementType:i,ownerState:c,externalForwardedProps:d,getSlotOwnerState:p,internalForwardedProps:s}=t,_=gn(t,K9),{component:S,slots:E={[e]:void 0},slotProps:A={[e]:void 0}}=d,I=gn(d,X9),O=E[e]||i,N=sz(A[e],c),$=lz(we({className:n},_,{externalForwardedProps:e==="root"?I:void 0,externalSlotProps:N})),{props:{component:K},internalRef:W}=$,B=gn($.props,J9),U=ko(W,N==null?void 0:N.ref,t.ref),J=p?p(B):{},ee=we({},c,J),ye=e==="root"?K||S:K,Q=oz(O,we({},e==="root"&&!S&&!E[e]&&s,e!=="root"&&!E[e]&&s,B,ye&&{as:ye},{ref:U}),ee);return Object.keys(J).forEach(be=>{delete Q[be]}),[O,Q]}function S5(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=S5(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Qa(){for(var e,t,n=0,i="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=S5(e))&&(i&&(i+=" "),i+=t);return i}function Y9(e){return xi("MuiListItem",e)}const Q9=fi("MuiListItem",["root","startAction","endAction","nested","nesting","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]),h_=Q9,eW=q.createContext(!1),f_=eW,tW=q.createContext(!1),E5=tW,nW=q.createContext(!1),T5=nW,rW=q.createContext(void 0),C5=rW,iW=q.createContext(void 0),A5=iW,oW=q.createContext(void 0),k5=oW,sW=["component","className","children","nested","sticky","variant","color","startAction","endAction","role","slots","slotProps"],aW=e=>{const{sticky:t,nested:n,nesting:i,variant:c,color:d}=e,p={root:["root",n&&"nested",i&&"nesting",t&&"sticky",d&&`color${Pn(d)}`,c&&`variant${Pn(c)}`],startAction:["startAction"],endAction:["endAction"]};return _i(p,Y9,{})},lW=Yt("li")(({theme:e,ownerState:t})=>{var n;return[!t.nested&&{"--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItemButton-marginBlock":"calc(-1 * var(--ListItem-paddingY))",alignItems:"center",gap:"var(--ListItem-gap)",marginInline:"var(--ListItem-marginInline)"},t.nested&&{"--NestedList-marginRight":"calc(-1 * var(--ListItem-paddingRight))","--NestedList-marginLeft":"calc(-1 * var(--ListItem-paddingLeft))","--NestedListItem-paddingLeft":"calc(var(--ListItem-paddingLeft) + var(--List-nestedInsetStart))","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))","--ListItem-marginInline":"calc(-1 * var(--ListItem-paddingLeft)) calc(-1 * var(--ListItem-paddingRight))",flexDirection:"column"},we({"--unstable_actionRadius":"calc(var(--ListItem-radius) - var(--variant-borderWidth, 0px))"},t.startAction&&{"--unstable_startActionWidth":"2rem"},t.endAction&&{"--unstable_endActionWidth":"2.5rem"},{boxSizing:"border-box",borderRadius:"var(--ListItem-radius)",display:"var(--_ListItem-display)","&:not([hidden])":{"--_ListItem-display":"var(--_List-markerDisplay, flex)"},flex:"none",listStyleType:"var(--_List-markerType, disc)",position:"relative",paddingBlockStart:t.nested?0:"var(--ListItem-paddingY)",paddingBlockEnd:t.nested?0:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)"},t["data-first-child"]===void 0&&we({},t.row?{marginInlineStart:"var(--List-gap)"}:{marginBlockStart:"var(--List-gap)"}),t.row&&t.wrap&&{marginInlineStart:"var(--List-gap)",marginBlockStart:"var(--List-gap)"},{minBlockSize:"var(--ListItem-minHeight)"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:`var(--ListItem-stickyBackground, ${e.vars.palette.background.body})`},{[`.${h_.nested} > &`]:{"--_ListItem-display":"flex"}}),(n=e.variants[t.variant])==null?void 0:n[t.color]]}),cW=Yt(lW,{name:"JoyListItem",slot:"Root",overridesResolver:(e,t)=>t.root})({}),uW=Yt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",left:0,transform:"translate(var(--ListItem-startActionTranslateX), -50%)",zIndex:1})),dW=Yt("div",{name:"JoyListItem",slot:"StartAction",overridesResolver:(e,t)=>t.startAction})(({ownerState:e})=>({display:"inherit",position:"absolute",top:e.nested?"calc(var(--ListItem-minHeight) / 2)":"50%",right:0,transform:"translate(var(--ListItem-endActionTranslateX), -50%)"})),I5=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyListItem"}),c=q.useContext(k5),d=q.useContext(C5),p=q.useContext(E5),s=q.useContext(T5),_=q.useContext(f_),{component:S,className:E,children:A,nested:I=!1,sticky:O=!1,variant:N="plain",color:$="neutral",startAction:K,endAction:W,role:B,slots:U={},slotProps:J={}}=i,ee=gn(i,sW),[ye,Q]=q.useState(""),[be,re]=(d==null?void 0:d.split(":"))||["",""],Ie=S||(be&&!be.match(/^(ul|ol|menu)$/)?"div":void 0);let Be=c==="menu"?"none":void 0;d&&(Be={menu:"none",menubar:"none",group:"presentation"}[re]),B&&(Be=B);const le=we({},i,{sticky:O,startAction:K,endAction:W,row:p,wrap:s,variant:N,color:$,nesting:_,nested:I,component:Ie,role:Be}),xe=aW(le),Se=we({},ee,{component:Ie,slots:U,slotProps:J}),[oe,te]=xn("root",{additionalProps:{role:Be},ref:n,className:Qa(xe.root,E),elementType:cW,externalForwardedProps:Se,ownerState:le}),[Ce,ve]=xn("startAction",{className:xe.startAction,elementType:uW,externalForwardedProps:Se,ownerState:le}),[Fe,Ge]=xn("endAction",{className:xe.endAction,elementType:dW,externalForwardedProps:Se,ownerState:le});return z.jsx(A5.Provider,{value:Q,children:z.jsx(f_.Provider,{value:I?ye||!0:!1,children:z.jsxs(oe,we({},te,{children:[K&&z.jsx(Ce,we({},ve,{children:K})),q.Children.map(A,(rt,Ct)=>q.isValidElement(rt)?q.cloneElement(rt,we({},Ct===0&&{"data-first-child":""},ux(rt,["ListItem"])&&{component:rt.props.component||"div"})):rt),W&&z.jsx(Fe,we({},Ge,{children:W}))]}))})})});I5.muiName="ListItem";const $E=I5,hW={"--NestedList-marginRight":"0px","--NestedList-marginLeft":"0px","--NestedListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px"};function P5(e){const{children:t,nested:n,row:i=!1,wrap:c=!1}=e,d=z.jsx(E5.Provider,{value:i,children:z.jsx(T5.Provider,{value:c,children:q.Children.map(t,(p,s)=>q.isValidElement(p)?q.cloneElement(p,we({},s===0&&{"data-first-child":""},s===q.Children.count(t)-1&&{"data-last-child":""})):p)})});return n===void 0?d:z.jsx(f_.Provider,{value:n,children:d})}const VE=({theme:e,ownerState:t},n)=>{let i={};function c(d){if(typeof d=="function"){const p=d(e);c(p)}else Array.isArray(d)?d.forEach(p=>{typeof p!="boolean"&&c(p)}):typeof d=="object"&&(i=we({},i,d))}return t.sx&&(c(t.sx),n.forEach(d=>{var s;const p=i[d];typeof p=="string"||typeof p=="number"?d==="borderRadius"?typeof p=="number"?i[d]=`${p}px`:i[d]=((s=e.vars)==null?void 0:s.radius[p])||p:["p","padding","m","margin"].indexOf(d)!==-1&&typeof p=="number"?i[d]=e.spacing(p):i[d]=p:typeof p=="function"?i[d]=p(e):i[d]=void 0})),i};function fW(e){return xi("MuiList",e)}const pW=fi("MuiList",["root","nesting","scoped","sizeSm","sizeMd","sizeLg","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","horizontal","vertical"]),mW=pW,gW=q.createContext(void 0),yW=gW,vW=["component","className","children","size","orientation","wrap","variant","color","role","slots","slotProps"],_W=e=>{const{variant:t,color:n,size:i,nesting:c,orientation:d,instanceSize:p}=e,s={root:["root",d,t&&`variant${Pn(t)}`,n&&`color${Pn(n)}`,!p&&!c&&i&&`size${Pn(i)}`,p&&`size${Pn(p)}`,c&&"nesting"]};return _i(s,fW,{})},M5=Yt("ul")(({theme:e,ownerState:t})=>{var p;const{p:n,padding:i,borderRadius:c}=VE({theme:e,ownerState:t},["p","padding","borderRadius"]);function d(s){return s==="sm"?{"--ListDivider-gap":"0.25rem","--ListItem-minHeight":"2rem","--ListItem-paddingY":"3px","--ListItem-paddingX":t.marker?"3px":"0.5rem","--ListItem-gap":"0.5rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.5rem":"2rem","--Icon-fontSize":e.vars.fontSize.lg}:s==="md"?{"--ListDivider-gap":"0.375rem","--ListItem-minHeight":"2.25rem","--ListItem-paddingY":"0.25rem","--ListItem-paddingX":t.marker?"0.25rem":"0.75rem","--ListItem-gap":"0.625rem","--ListItemDecorator-size":t.orientation==="horizontal"?"1.75rem":"2.5rem","--Icon-fontSize":e.vars.fontSize.xl}:s==="lg"?{"--ListDivider-gap":"0.5rem","--ListItem-minHeight":"2.75rem","--ListItem-paddingY":"0.375rem","--ListItem-paddingX":t.marker?"0.5rem":"1rem","--ListItem-gap":"0.75rem","--ListItemDecorator-size":t.orientation==="horizontal"?"2.25rem":"3rem","--Icon-fontSize":e.vars.fontSize.xl2}:{}}return[t.nesting&&we({},d(t.instanceSize),{"--ListItem-paddingRight":"var(--ListItem-paddingX)","--ListItem-paddingLeft":"var(--NestedListItem-paddingLeft)","--ListItemButton-marginBlock":"0px","--ListItemButton-marginInline":"0px","--ListItem-marginBlock":"0px","--ListItem-marginInline":"0px",padding:0},t.marker&&{paddingInlineStart:"calc(3ch - var(--_List-markerDeduct, 0px))"},{marginInlineStart:"var(--NestedList-marginLeft)",marginInlineEnd:"var(--NestedList-marginRight)",marginBlockStart:"var(--List-gap)",marginBlockEnd:"initial"}),!t.nesting&&we({},d(t.size),{"--List-gap":"0px","--List-nestedInsetStart":"0px","--ListItem-paddingLeft":"var(--ListItem-paddingX)","--ListItem-paddingRight":"var(--ListItem-paddingX)"},t.marker&&{"--_List-markerDeduct":"1ch"},{"--unstable_List-childRadius":"calc(max(var(--List-radius) - var(--List-padding), min(var(--List-padding) / 2, var(--List-radius) / 2)) - var(--variant-borderWidth, 0px))","--ListItem-radius":"var(--unstable_List-childRadius)","--ListItem-startActionTranslateX":"calc(0.5 * var(--ListItem-paddingLeft))","--ListItem-endActionTranslateX":"calc(-0.5 * var(--ListItem-paddingRight))",margin:"initial"},e.typography[`body-${t.size}`],t.orientation==="horizontal"?we({},t.wrap?{padding:"var(--List-padding)",marginInlineStart:"calc(-1 * var(--List-gap))",marginBlockStart:"calc(-1 * var(--List-gap))"}:{paddingInline:"var(--List-padding, var(--ListDivider-gap))",paddingBlock:"var(--List-padding)"}):{paddingBlock:"var(--List-padding, var(--ListDivider-gap))",paddingInline:"var(--List-padding)"},t.marker&&{paddingInlineStart:"3ch"}),we({boxSizing:"border-box",borderRadius:"var(--List-radius)",listStyle:"none",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},t.wrap&&{flexWrap:"wrap"},t.marker&&{"--_List-markerDisplay":"list-item","--_List-markerType":t.marker,lineHeight:"calc(var(--ListItem-minHeight) - 2 * var(--ListItem-paddingY))"},{flexGrow:1,position:"relative"},(p=e.variants[t.variant])==null?void 0:p[t.color],{"--unstable_List-borderWidth":"var(--variant-borderWidth, 0px)"},c!==void 0&&{"--List-radius":c},n!==void 0&&{"--List-padding":n},i!==void 0&&{"--List-padding":i})]}),xW=Yt(M5,{name:"JoyList",slot:"Root",overridesResolver:(e,t)=>t.root})({}),bW=q.forwardRef(function(t,n){const i=q.useContext(f_),c=q.useContext(k5),d=q.useContext(yW),p=zi({props:t,name:"JoyList"}),{component:s,className:_,children:S,size:E,orientation:A="vertical",wrap:I=!1,variant:O="plain",color:N="neutral",role:$,slots:K={},slotProps:W={}}=p,B=gn(p,vW),U=E||(t.size??"md");let J;c&&(J="group"),d&&(J="presentation"),$&&(J=$);const ee=we({},p,{instanceSize:t.size,size:U,nesting:i,orientation:A,wrap:I,variant:O,color:N,role:J}),ye=_W(ee),Q=we({},B,{component:s,slots:K,slotProps:W}),[be,re]=xn("root",{ref:n,className:Qa(ye.root,_),elementType:xW,externalForwardedProps:Q,ownerState:ee,additionalProps:{as:s,role:J,"aria-labelledby":typeof i=="string"?i:void 0}});return z.jsx(be,we({},re,{children:z.jsx(C5.Provider,{value:`${typeof s=="string"?s:""}:${J||""}`,children:z.jsx(P5,{row:A==="horizontal",wrap:I,children:S})})}))}),wW=fi("MuiListItemButton",["root","horizontal","vertical","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","disabled","selected","variantPlain","variantSoft","variantOutlined","variantSolid"]),Iv=wW,D5=Yt("div")(({theme:e,ownerState:t})=>{var n,i,c,d,p,s;return we({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,WebkitTapHighlightColor:"transparent",boxSizing:"border-box",position:"relative",font:"inherit",display:"flex",flexDirection:"row",alignItems:"center",alignSelf:"stretch",gap:"var(--ListItem-gap)"},t.orientation==="vertical"&&{flexDirection:"column",justifyContent:"center"},{textAlign:"initial",textDecoration:"initial",backgroundColor:"initial",cursor:"pointer",marginInline:"var(--ListItemButton-marginInline)",marginBlock:"var(--ListItemButton-marginBlock)"},t["data-first-child"]===void 0&&{marginInlineStart:t.row?"var(--List-gap)":void 0,marginBlockStart:t.row?void 0:"var(--List-gap)"},{paddingBlock:"calc(var(--ListItem-paddingY) - var(--variant-borderWidth, 0px))",paddingInlineStart:"calc(var(--ListItem-paddingLeft) + var(--ListItem-startActionWidth, var(--unstable_startActionWidth, 0px)))",paddingInlineEnd:"calc(var(--ListItem-paddingRight) + var(--ListItem-endActionWidth, var(--unstable_endActionWidth, 0px)))",minBlockSize:"var(--ListItem-minHeight)",border:"1px solid transparent",borderRadius:"var(--ListItem-radius)",flex:"var(--unstable_ListItem-flex, none)",fontSize:"inherit",lineHeight:"inherit",minInlineSize:0,[e.focus.selector]:we({},e.focus.default,{zIndex:1})},(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:active":(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color],[`.${h_.root} > &`]:{"--unstable_ListItem-flex":"1 0 0%"},[`&.${Iv.selected}`]:we({},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],{"--Icon-color":"currentColor"}),[`&:not(.${Iv.selected}, [aria-selected="true"])`]:{"&:hover":(d=e.variants[`${t.variant}Hover`])==null?void 0:d[t.color],"&:active":(p=e.variants[`${t.variant}Active`])==null?void 0:p[t.color]},[`&.${Iv.disabled}`]:we({},(s=e.variants[`${t.variant}Disabled`])==null?void 0:s[t.color])})});Yt(D5,{name:"JoyListItemButton",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>we({},!e.row&&{[`&.${Iv.selected}`]:{fontWeight:t.vars.fontWeight.md}}));function SW(e){return xi("MuiSvgIcon",e)}fi("MuiSvgIcon",["root","colorInherit","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","fontSizeInherit","fontSizeXs","fontSizeSm","fontSizeMd","fontSizeLg","fontSizeXl","fontSizeXl2","fontSizeXl3","fontSizeXl4","sizeSm","sizeMd","sizeLg"]);const EW=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox","size","slots","slotProps"],TW=e=>{const{color:t,size:n,fontSize:i}=e,c={root:["root",t&&t!=="inherit"&&`color${Pn(t)}`,n&&`size${Pn(n)}`,i&&`fontSize${Pn(i)}`]};return _i(c,SW,{})},SP={sm:"xl",md:"xl2",lg:"xl3"},CW=Yt("svg",{name:"JoySvgIcon",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n;return we({},t.instanceSize&&{"--Icon-fontSize":e.vars.fontSize[SP[t.instanceSize]]},t.instanceFontSize&&t.instanceFontSize!=="inherit"&&{"--Icon-fontSize":e.vars.fontSize[t.instanceFontSize]},{userSelect:"none",margin:"var(--Icon-margin)",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,fontSize:`var(--Icon-fontSize, ${e.vars.fontSize[SP[t.size]]||"unset"})`},t.fontSize&&t.fontSize!=="inherit"&&{fontSize:`var(--Icon-fontSize, ${e.fontSize[t.fontSize]})`},!t.htmlColor&&we({color:`var(--Icon-color, ${e.vars.palette.text.icon})`},t.color==="inherit"&&{color:"inherit"},t.color!=="inherit"&&e.vars.palette[t.color]&&{color:`rgba(${(n=e.vars.palette[t.color])==null?void 0:n.mainChannel} / 1)`}))}),AW=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoySvgIcon"}),{children:c,className:d,color:p,component:s="svg",fontSize:_,htmlColor:S,inheritViewBox:E=!1,titleAccess:A,viewBox:I="0 0 24 24",size:O="md",slots:N={},slotProps:$={}}=i,K=gn(i,EW),W=q.isValidElement(c)&&c.type==="svg",B=we({},i,{color:p,component:s,size:O,instanceSize:t.size,fontSize:_,instanceFontSize:t.fontSize,inheritViewBox:E,viewBox:I,hasSvgAsChild:W}),U=TW(B),J=we({},K,{component:s,slots:N,slotProps:$}),[ee,ye]=xn("root",{ref:n,className:Qa(U.root,d),elementType:CW,externalForwardedProps:J,ownerState:B,additionalProps:we({color:S,focusable:!1},A&&{role:"img"},!A&&{"aria-hidden":!0},!E&&{viewBox:I},W&&c.props)});return z.jsxs(ee,we({},ye,{children:[W?c.props.children:c,A?z.jsx("title",{children:A}):null]}))}),EP=AW;function UE(e,t){function n(i,c){return z.jsx(EP,we({"data-testid":`${t}Icon`,ref:c},i,{children:e}))}return n.muiName=EP.muiName,q.memo(q.forwardRef(n))}const WE=e=>t=>`--${e?`${e}-`:""}${t.replace(/^--/,"")}`,Sf="data-skip-inverted-colors",z5=`& :not([${Sf}], [${Sf}] *)`,L5=e=>{var n,i,c,d,p,s,_,S,E,A,I,O,N,$,K,W,B,U,J,ee,ye,Q;const t=WE(e.cssVarPrefix);return{"--variant-plainColor":"var(--variant-plainColor) !important","--variant-plainHoverColor":"var(--variant-plainHoverColor) !important","--variant-plainHoverBg":"var(--variant-plainHoverBg) !important","--variant-plainActiveBg":"var(--variant-plainActiveBg) !important","--variant-plainDisabledColor":"var(--variant-plainDisabledColor) !important","--variant-outlinedColor":"var(--variant-outlinedColor) !important","--variant-outlinedBorder":"var(--variant-outlinedBorder) !important","--variant-outlinedHoverColor":"var(--variant-outlinedHoverColor) !important","--variant-outlinedHoverBorder":"var(--variant-outlinedHoverBorder) !important","--variant-outlinedHoverBg":"var(--variant-outlinedHoverBg) !important","--variant-outlinedActiveBg":"var(--variant-outlinedActiveBg) !important","--variant-outlinedDisabledColor":"var(--variant-outlinedDisabledColor) !important","--variant-outlinedDisabledBorder":"var(--variant-outlinedDisabledBorder) !important","--variant-softColor":"var(--variant-softColor) !important","--variant-softHoverColor":"var(--variant-softHoverColor) !important","--variant-softBg":"var(--variant-softBg) !important","--variant-softHoverBg":"var(--variant-softHoverBg) !important","--variant-softActiveBg":"var(--variant-softActiveBg) !important","--variant-softActiveColor":"var(--variant-softActiveColor) !important","--variant-softDisabledColor":"var(--variant-softDisabledColor) !important","--variant-softDisabledBg":"var(--variant-softDisabledBg) !important","--variant-solidColor":"var(--variant-solidColor) !important","--variant-solidBg":"var(--variant-solidBg) !important","--variant-solidHoverBg":"var(--variant-solidHoverBg) !important","--variant-solidActiveBg":"var(--variant-solidActiveBg) !important","--variant-solidDisabledColor":"var(--variant-solidDisabledColor) !important","--variant-solidDisabledBg":"var(--variant-solidDisabledBg) !important","--Badge-ringColor":"var(--Badge-ringColor) !important",colorScheme:"unset",[e.getColorSchemeSelector("light")]:{[t("--palette-focusVisible")]:`${(n=e.colorSchemes.light)==null?void 0:n.palette.focusVisible} !important`,[t("--palette-background-body")]:`${(i=e.colorSchemes.light)==null?void 0:i.palette.background.body} !important`,[t("--palette-background-surface")]:`${(c=e.colorSchemes.light)==null?void 0:c.palette.background.surface} !important`,[t("--palette-background-popup")]:`${(d=e.colorSchemes.light)==null?void 0:d.palette.background.popup} !important`,[t("--palette-background-level1")]:`${(p=e.colorSchemes.light)==null?void 0:p.palette.background.level1} !important`,[t("--palette-background-level2")]:`${(s=e.colorSchemes.light)==null?void 0:s.palette.background.level2} !important`,[t("--palette-background-level3")]:`${(_=e.colorSchemes.light)==null?void 0:_.palette.background.level3} !important`,[t("--palette-text-primary")]:`${(S=e.colorSchemes.light)==null?void 0:S.palette.text.primary} !important`,[t("--palette-text-secondary")]:`${(E=e.colorSchemes.light)==null?void 0:E.palette.text.secondary} !important`,[t("--palette-text-tertiary")]:`${(A=e.colorSchemes.light)==null?void 0:A.palette.text.tertiary} !important`,[t("--palette-divider")]:`${(I=e.colorSchemes.light)==null?void 0:I.palette.divider} !important`},[e.getColorSchemeSelector("dark")]:{[t("--palette-focusVisible")]:`${(O=e.colorSchemes.dark)==null?void 0:O.palette.focusVisible} !important`,[t("--palette-background-body")]:`${(N=e.colorSchemes.dark)==null?void 0:N.palette.background.body} !important`,[t("--palette-background-surface")]:`${($=e.colorSchemes.dark)==null?void 0:$.palette.background.surface} !important`,[t("--palette-background-popup")]:`${(K=e.colorSchemes.dark)==null?void 0:K.palette.background.popup} !important`,[t("--palette-background-level1")]:`${(W=e.colorSchemes.dark)==null?void 0:W.palette.background.level1} !important`,[t("--palette-background-level2")]:`${(B=e.colorSchemes.dark)==null?void 0:B.palette.background.level2} !important`,[t("--palette-background-level3")]:`${(U=e.colorSchemes.dark)==null?void 0:U.palette.background.level3} !important`,[t("--palette-text-primary")]:`${(J=e.colorSchemes.dark)==null?void 0:J.palette.text.primary} !important`,[t("--palette-text-secondary")]:`${(ee=e.colorSchemes.dark)==null?void 0:ee.palette.text.secondary} !important`,[t("--palette-text-tertiary")]:`${(ye=e.colorSchemes.dark)==null?void 0:ye.palette.text.tertiary} !important`,[t("--palette-divider")]:`${(Q=e.colorSchemes.dark)==null?void 0:Q.palette.divider} !important`}}};function kW(e){return e.theme!==void 0}const IW=e=>t=>{const n=kW(t)?t.theme:t,i=VS(n.cssVarPrefix),c=WE(n.cssVarPrefix),d=p=>{const s=p.split("-");return i(p,n.palette[s[1]][s[2]])};return{[z5]:{"--Badge-ringColor":d(`palette-${e}-solidBg`),"--Icon-color":"currentColor",[`${n.getColorSchemeSelector("light")}, ${n.getColorSchemeSelector("dark")}`]:{colorScheme:"dark",[c("--palette-focusVisible")]:d(`palette-${e}-200`),[c("--palette-background-body")]:"rgba(0 0 0 / 0.1)",[c("--palette-background-surface")]:"rgba(0 0 0 / 0.06)",[c("--palette-background-popup")]:d(`palette-${e}-700`),[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.36)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.6)`,[c("--palette-text-primary")]:d("palette-common-white"),[c("--palette-text-secondary")]:d(`palette-${e}-200`),[c("--palette-text-tertiary")]:d(`palette-${e}-300`),[c("--palette-text-icon")]:d(`palette-${e}-200`),[c("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainColor":d(`palette-${e}-50`),"--variant-plainHoverColor":"#fff","--variant-plainHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedColor":d(`palette-${e}-50`),"--variant-outlinedBorder":`rgba(${d(`palette-${e}-lightChannel`)} / 0.5)`,"--variant-outlinedHoverColor":"#fff","--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":"rgba(255 255 255 / 0.2)","--variant-softColor":d("palette-common-white"),"--variant-softHoverColor":d("palette-common-white"),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.24)`,"--variant-softHoverBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.36)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.16)`,"--variant-softActiveColor":"#fff","--variant-softDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`,"--variant-solidColor":d(`palette-${e}-${e==="neutral"?"600":"500"}`),"--variant-solidBg":d("palette-common-white"),"--variant-solidHoverBg":d("palette-common-white"),"--variant-solidActiveBg":d(`palette-${e}-100`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.1)`}},[`&, & [${Sf}]`]:L5(n)}},PW=e=>t=>{const{theme:n=t}=t,i=VS(n.cssVarPrefix),c=WE(n.cssVarPrefix),d=p=>{const s=p.split("-");return i(p,n.palette[s[1]][s[2]])};return{[z5]:{"--Badge-ringColor":d(`palette-${e}-softBg`),"--Icon-color":"currentColor",[n.getColorSchemeSelector("dark")]:{[c("--palette-focusVisible")]:d(`palette-${e}-300`),[c("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,[c("--palette-text-primary")]:d(`palette-${e}-100`),[c("--palette-text-secondary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.72)`,[c("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-text-icon")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.6)`,[c("--palette-divider")]:`rgba(${d(`palette-${e}-lightChannel`)} / 0.2)`,"--variant-plainColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-plainHoverColor":d(`palette-${e}-50`),"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-lightChannel`)} / 1)`,"--variant-outlinedHoverColor":d(`palette-${e}-50`),"--variant-outlinedBg":"initial","--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverBorder":d(`palette-${e}-600`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.16)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,"--variant-softColor":d(`palette-${e}-200`),"--variant-softBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-softHoverColor":"#fff","--variant-softHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-softActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-solidColor":"#fff","--variant-solidBg":d(`palette-${e}-500`),"--variant-solidHoverColor":"#fff","--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.72)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`},[n.getColorSchemeSelector("light")]:{[c("--palette-focusVisible")]:d(`palette-${e}-500`),[c("--palette-background-body")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.1)`,[c("--palette-background-surface")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,[c("--palette-background-level1")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.2)`,[c("--palette-background-level2")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,[c("--palette-background-level3")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.48)`,[c("--palette-text-primary")]:d(`palette-${e}-700`),[c("--palette-text-secondary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,[c("--palette-text-tertiary")]:`rgba(${d(`palette-${e}-darkChannel`)} / 0.68)`,[c("--palette-text-icon")]:d(`palette-${e}-500`),[c("--palette-divider")]:`rgba(${d(`palette-${e}-mainChannel`)} / 0.32)`,"--variant-plainColor":`rgba(${d(`palette-${e}-darkChannel`)} / 0.8)`,"--variant-plainHoverColor":`rgba(${d(`palette-${e}-darkChannel`)} / 1)`,"--variant-plainHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-plainActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-plainDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedColor":`rgba(${d(`palette-${e}-mainChannel`)} / 1)`,"--variant-outlinedBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.4)`,"--variant-outlinedHoverColor":d(`palette-${e}-600`),"--variant-outlinedHoverBorder":d(`palette-${e}-300`),"--variant-outlinedHoverBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-outlinedActiveBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.24)`,"--variant-outlinedDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-outlinedDisabledBorder":`rgba(${d(`palette-${e}-mainChannel`)} / 0.12)`,"--variant-softColor":d(`palette-${e}-600`),"--variant-softBg":`rgba(${d(`palette-${e}-lightChannel`)} / 0.8)`,"--variant-softHoverColor":d(`palette-${e}-700`),"--variant-softHoverBg":d(`palette-${e}-200`),"--variant-softActiveBg":d(`palette-${e}-300`),"--variant-softDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-softDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`,"--variant-solidColor":d("palette-common-white"),"--variant-solidBg":d(`palette-${e}-${e==="neutral"?"700":"500"}`),"--variant-solidHoverColor":d("palette-common-white"),"--variant-solidHoverBg":d(`palette-${e}-600`),"--variant-solidActiveBg":d(`palette-${e}-600`),"--variant-solidDisabledColor":`rgba(${d(`palette-${e}-mainChannel`)} / 0.6)`,"--variant-solidDisabledBg":`rgba(${d(`palette-${e}-mainChannel`)} / 0.08)`}},[`&, & [${Sf}]`]:L5(n)}},R5=UE(z.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),MW=UE(z.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),O5=q.createContext(void 0);function Uu(e,t){let n=t,i=e;return e==="outlined"&&(n="neutral",i="plain"),e==="plain"&&(n="neutral"),{variant:i,color:n}}function DW(e,t,n=!1){const i=q.useContext(O5),[c,d]=typeof i=="string"?i.split(":"):[],p=Uu(c||void 0,d||void 0);return p.variant=e||p.variant,p.color=t||(n?d:p.color),p}function B5({children:e,color:t,variant:n}){return z.jsx(O5.Provider,{value:`${n||""}:${t||""}`,children:e})}function zW(e){return xi("MuiIconButton",e)}fi("MuiIconButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","loading","loadingIndicator"]);const LW=q.createContext({}),F5=LW,RW=q.createContext(void 0),j5=RW;function OW(e){return xi("MuiCircularProgress",e)}fi("MuiCircularProgress",["root","determinate","svg","track","progress","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]);const BW=["color","backgroundColor"],FW=["children","className","color","size","variant","thickness","determinate","value","component","slots","slotProps"],jW=L3({"0%":{transform:"rotate(-90deg)"},"100%":{transform:"rotate(270deg)"}}),NW=e=>{const{determinate:t,color:n,variant:i,size:c}=e,d={root:["root",t&&"determinate",n&&`color${Pn(n)}`,i&&`variant${Pn(i)}`,c&&`size${Pn(c)}`],svg:["svg"],track:["track"],progress:["progress"]};return _i(d,OW,{})};function Eh(e,t){return`var(--CircularProgress-${e}Thickness, var(--CircularProgress-thickness, ${t}))`}const $W=Yt("span",{name:"JoyCircularProgress",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var p,s,_,S;const n=((p=t.variants[e.variant])==null?void 0:p[e.color])||{},{color:i,backgroundColor:c}=n,d=gn(n,BW);return we({"--Icon-fontSize":"calc(0.4 * var(--_root-size))","--CircularProgress-trackColor":c,"--CircularProgress-progressColor":i,"--CircularProgress-percent":e.value,"--CircularProgress-linecap":"round"},e.size==="sm"&&{"--_root-size":"var(--CircularProgress-size, 24px)","--_track-thickness":Eh("track","3px"),"--_progress-thickness":Eh("progress","3px")},e.instanceSize==="sm"&&{"--CircularProgress-size":"24px"},e.size==="md"&&{"--_track-thickness":Eh("track","6px"),"--_progress-thickness":Eh("progress","6px"),"--_root-size":"var(--CircularProgress-size, 40px)"},e.instanceSize==="md"&&{"--CircularProgress-size":"40px"},e.size==="lg"&&{"--_track-thickness":Eh("track","8px"),"--_progress-thickness":Eh("progress","8px"),"--_root-size":"var(--CircularProgress-size, 64px)"},e.instanceSize==="lg"&&{"--CircularProgress-size":"64px"},e.thickness&&{"--_track-thickness":`${e.thickness}px`,"--_progress-thickness":`${e.thickness}px`},{"--_thickness-diff":"calc(var(--_track-thickness) - var(--_progress-thickness))","--_inner-size":"calc(var(--_root-size) - 2 * var(--variant-borderWidth, 0px))","--_outlined-inset":"max(var(--_track-thickness), var(--_progress-thickness))",width:"var(--_root-size)",height:"var(--_root-size)",borderRadius:"var(--_root-size)",margin:"var(--CircularProgress-margin)",boxSizing:"border-box",display:"inline-flex",justifyContent:"center",alignItems:"center",flexShrink:0,position:"relative",color:i},e.children&&{fontFamily:t.vars.fontFamily.body,fontWeight:t.vars.fontWeight.md,fontSize:"calc(0.2 * var(--_root-size))"},d,e.variant==="outlined"&&{"&::before":we({content:'""',display:"block",position:"absolute",borderRadius:"inherit",top:"var(--_outlined-inset)",left:"var(--_outlined-inset)",right:"var(--_outlined-inset)",bottom:"var(--_outlined-inset)"},d)},e.variant==="soft"&&{"--CircularProgress-trackColor":t.variants.soft.neutral.backgroundColor,"--CircularProgress-progressColor":(s=t.variants.solid)==null?void 0:s[e.color].backgroundColor},e.variant==="solid"&&{"--CircularProgress-trackColor":(_=t.variants.softHover)==null?void 0:_[e.color].backgroundColor,"--CircularProgress-progressColor":(S=t.variants.solid)==null?void 0:S[e.color].backgroundColor})}),VW=Yt("svg",{name:"JoyCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({width:"inherit",height:"inherit",display:"inherit",boxSizing:"inherit",position:"absolute",top:"calc(-1 * var(--variant-borderWidth, 0px))",left:"calc(-1 * var(--variant-borderWidth, 0px))"}),UW=Yt("circle",{name:"JoyCircularProgress",slot:"track",overridesResolver:(e,t)=>t.track})({cx:"50%",cy:"50%",r:"calc(var(--_inner-size) / 2 - var(--_track-thickness) / 2 + min(0px, var(--_thickness-diff) / 2))",fill:"transparent",strokeWidth:"var(--_track-thickness)",stroke:"var(--CircularProgress-trackColor)"}),WW=Yt("circle",{name:"JoyCircularProgress",slot:"progress",overridesResolver:(e,t)=>t.progress})({"--_progress-radius":"calc(var(--_inner-size) / 2 - var(--_progress-thickness) / 2 - max(0px, var(--_thickness-diff) / 2))","--_progress-length":"calc(2 * 3.1415926535 * var(--_progress-radius))",cx:"50%",cy:"50%",r:"var(--_progress-radius)",fill:"transparent",strokeWidth:"var(--_progress-thickness)",stroke:"var(--CircularProgress-progressColor)",strokeLinecap:"var(--CircularProgress-linecap, round)",strokeDasharray:"var(--_progress-length)",strokeDashoffset:"calc(var(--_progress-length) - var(--CircularProgress-percent) * var(--_progress-length) / 100)",transformOrigin:"center",transform:"rotate(-90deg)"},({ownerState:e})=>!e.determinate&&IS`
      animation: var(--CircularProgress-circulation, 0.8s linear 0s infinite normal none running)
        ${jW};
    `),GW=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyCircularProgress"}),{children:c,className:d,color:p="primary",size:s="md",variant:_="soft",thickness:S,determinate:E=!1,value:A=E?0:25,component:I,slots:O={},slotProps:N={}}=i,$=gn(i,FW),K=we({},i,{color:p,size:s,variant:_,thickness:S,value:A,determinate:E,instanceSize:t.size}),W=NW(K),B=we({},$,{component:I,slots:O,slotProps:N}),[U,J]=xn("root",{ref:n,className:Qa(W.root,d),elementType:$W,externalForwardedProps:B,ownerState:K,additionalProps:we({role:"progressbar",style:{"--CircularProgress-percent":A}},A&&E&&{"aria-valuenow":Math.round(typeof A=="number"?A:Number(A||0))})}),[ee,ye]=xn("svg",{className:W.svg,elementType:VW,externalForwardedProps:B,ownerState:K}),[Q,be]=xn("track",{className:W.track,elementType:UW,externalForwardedProps:B,ownerState:K}),[re,Ie]=xn("progress",{className:W.progress,elementType:WW,externalForwardedProps:B,ownerState:K});return z.jsxs(U,we({},J,{children:[z.jsxs(ee,we({},ye,{children:[z.jsx(Q,we({},be)),z.jsx(re,we({},Ie))]})),c]}))}),Cg=GW,HW=["children","action","component","color","disabled","variant","loading","loadingIndicator","size","slots","slotProps"],ZW=e=>{const{color:t,disabled:n,focusVisible:i,focusVisibleClassName:c,size:d,variant:p,loading:s}=e,_={root:["root",n&&"disabled",i&&"focusVisible",p&&`variant${Pn(p)}`,t&&`color${Pn(t)}`,d&&`size${Pn(d)}`,s&&"loading"],loadingIndicator:["loadingIndicator"]},S=_i(_,zW,{});return i&&c&&(S.root+=` ${c}`),S},qg=Yt("button")(({theme:e,ownerState:t})=>{var n,i,c,d;return[we({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.instanceSize&&{"--IconButton-size":{sm:"2rem",md:"2.25rem",lg:"2.75rem"}[t.instanceSize]},t.size==="sm"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.6)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px"},t.size==="md"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.25rem) / 1.5)","--CircularProgress-size":"20px","--CircularProgress-thickness":"2px",minWidth:"var(--IconButton-size, 2.25rem)",minHeight:"var(--IconButton-size, 2.25rem)",fontSize:e.vars.fontSize.md,paddingInline:"0.25rem"},t.size==="lg"&&{"--Icon-fontSize":"calc(var(--IconButton-size, 2.75rem) / 1.571)","--CircularProgress-size":"28px","--CircularProgress-thickness":"4px",minWidth:"var(--IconButton-size, 2.75rem)",minHeight:"var(--IconButton-size, 2.75rem)",fontSize:e.vars.fontSize.lg,paddingInline:"0.375rem"},{WebkitTapHighlightColor:"transparent",paddingBlock:0,fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.md,margin:"var(--IconButton-margin)",borderRadius:`var(--IconButton-radius, ${e.vars.radius.sm})`,border:"none",boxSizing:"border-box",backgroundColor:"transparent",cursor:"pointer",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",[e.focus.selector]:we({"--Icon-color":"currentColor"},e.focus.default)}),we({},(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:hover":{"@media (hover: hover)":we({"--Icon-color":"currentColor"},(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color])},'&:active, &[aria-pressed="true"]':we({"--Icon-color":"currentColor"},(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]),"&:disabled":(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]})]}),qW=Yt(qg,{name:"JoyIconButton",slot:"Root",overridesResolver:(e,t)=>t.root})({}),KW=Yt("span",{name:"JoyIconButton",slot:"LoadingIndicator",overridesResolver:(e,t)=>t.loadingIndicator})(({theme:e,ownerState:t})=>{var n,i,c,d;return we({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(i=(n=e.variants[t.variant])==null?void 0:n[t.color])==null?void 0:i.color},t.disabled&&{color:(d=(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color])==null?void 0:d.color})}),N5=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyIconButton"}),{children:c,action:d,component:p="button",color:s="neutral",disabled:_,variant:S="plain",loading:E=!1,loadingIndicator:A,size:I="md",slots:O={},slotProps:N={}}=i,$=gn(i,HW),K=q.useContext(F5),W=q.useContext(j5),B=t.variant||K.variant||S,U=t.size||K.size||I,J=t.color||K.color||s,ee=(t.loading||t.disabled)??(K.disabled||E||_),ye=q.useRef(null),Q=ko(ye,n),{focusVisible:be,setFocusVisible:re,getRootProps:Ie}=$g(we({},i,{disabled:ee,rootRef:Q})),Be=A??z.jsx(Cg,{color:J,thickness:{sm:2,md:3,lg:4}[U]||3});q.useImperativeHandle(d,()=>({focusVisible:()=>{var rt;re(!0),(rt=ye.current)==null||rt.focus()}}),[re]);const le=we({},i,{component:p,color:J,disabled:ee,variant:B,loading:E,size:U,focusVisible:be,instanceSize:t.size}),xe=ZW(le),Se=rt=>{var It;let Ct=i.onClick;typeof N.root=="function"?Ct=N.root(le).onClick:N.root&&(Ct=N.root.onClick),Ct==null||Ct(rt),W&&((It=W.onClick)==null||It.call(W,rt,i.value))};let oe=i["aria-pressed"];typeof N.root=="function"?oe=N.root(le)["aria-pressed"]:N.root&&(oe=N.root["aria-pressed"]),W!=null&&W.value&&(Array.isArray(W.value)?oe=W.value.indexOf(i.value)!==-1:oe=W.value===i.value);const te=we({},$,{component:p,slots:O,slotProps:N}),[Ce,ve]=xn("root",{ref:n,className:xe.root,elementType:qW,getSlotProps:Ie,externalForwardedProps:te,ownerState:le,additionalProps:{onClick:Se,"aria-pressed":oe}}),[Fe,Ge]=xn("loadingIndicator",{className:xe.loadingIndicator,elementType:KW,externalForwardedProps:te,ownerState:le});return z.jsx(Ce,we({},ve,{children:E?z.jsx(Fe,we({},Ge,{children:Be})):c}))});N5.muiName="IconButton";function XW(e){return xi("MuiChip",e)}const JW=fi("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),j2=JW,YW=q.createContext({disabled:void 0,variant:void 0,color:void 0}),$5=YW,QW=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],eG=e=>{const{disabled:t,size:n,color:i,clickable:c,variant:d,focusVisible:p}=e,s={root:["root",t&&"disabled",i&&`color${Pn(i)}`,n&&`size${Pn(n)}`,d&&`variant${Pn(d)}`,c&&"clickable"],action:["action",t&&"disabled",p&&"focusVisible"],label:["label",n&&`label${Pn(n)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return _i(s,XW,{})},tG=Yt("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var c,d,p,s;const n=(c=e.variants[t.variant])==null?void 0:c[t.color],{borderRadius:i}=VE({theme:e,ownerState:t},["borderRadius"]);return[we({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--Icon-color":"currentColor","--unstable_actionRadius":"var(--_Chip-radius)"},t.size==="sm"&&{"--Chip-paddingInline":"0.375rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.sm,"--_Chip-minHeight":"var(--Chip-minHeight, 1.25rem)",gap:"3px"},t.size==="md"&&{"--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.25rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.md,"--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",gap:"0.25rem"},t.size==="lg"&&{"--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"calc(var(--_Chip-minHeight) - 0.375rem - 2 * var(--variant-borderWidth))","--Icon-fontSize":e.vars.fontSize.lg,"--_Chip-minHeight":"var(--Chip-minHeight, 1.75rem)",gap:"0.375rem"},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box"},e.typography[`body-${{sm:"xs",md:"sm",lg:"md"}[t.size]}`],{fontWeight:e.vars.fontWeight.md,[`&.${j2.disabled}`]:{color:(p=(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color])==null?void 0:p.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:n==null?void 0:n.color}]:[we({backgroundColor:e.vars.palette.background.surface},n,{[`&.${j2.disabled}`]:(s=e.variants[`${t.variant}Disabled`])==null?void 0:s[t.color]})],i!==void 0&&{"--_Chip-radius":i}]}),nG=Yt("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>we({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),rG=Yt("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var n,i,c,d;return[{"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},we({backgroundColor:e.vars.palette.background.surface},(n=e.variants[t.variant])==null?void 0:n[t.color]),{"&:hover":{"@media (hover: hover)":(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color]}},{"&:active":(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color]},{[`&.${j2.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]}]}),iG=Yt("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--IconButton-margin":"0 calc(-1 * var(--Chip-paddingInline) / 3) 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",order:0,zIndex:1,pointerEvents:"none"}),oG=Yt("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--IconButton-margin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 calc(-1 * var(--Chip-paddingInline) / 3)","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",order:2,zIndex:1,pointerEvents:"none"}),sG=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyChip"}),{children:c,className:d,color:p="neutral",onClick:s,disabled:_=!1,size:S="md",variant:E="soft",startDecorator:A,endDecorator:I,component:O,slots:N={},slotProps:$={}}=i,K=gn(i,QW),W=!!s||!!$.action,B=we({},i,{disabled:_,size:S,color:p,variant:E,clickable:W,focusVisible:!1}),U=typeof $.action=="function"?$.action(B):$.action,J=q.useRef(null),{focusVisible:ee,getRootProps:ye}=$g(we({},U,{disabled:_,rootRef:J}));B.focusVisible=ee;const Q=eG(B),be=we({},K,{component:O,slots:N,slotProps:$}),[re,Ie]=xn("root",{ref:n,className:Qa(Q.root,d),elementType:tG,externalForwardedProps:be,ownerState:B}),[Be,le]=xn("label",{className:Q.label,elementType:nG,externalForwardedProps:be,ownerState:B}),xe=df(le.id),[Se,oe]=xn("action",{className:Q.action,elementType:rG,externalForwardedProps:be,ownerState:B,getSlotProps:ye,additionalProps:{"aria-labelledby":xe,as:U==null?void 0:U.component,onClick:s}}),[te,Ce]=xn("startDecorator",{className:Q.startDecorator,elementType:iG,externalForwardedProps:be,ownerState:B}),[ve,Fe]=xn("endDecorator",{className:Q.endDecorator,elementType:oG,externalForwardedProps:be,ownerState:B}),Ge=q.useMemo(()=>({disabled:_}),[_]);return z.jsx($5.Provider,{value:Ge,children:z.jsx(B5,{variant:E,color:p,children:z.jsxs(re,we({},Ie,{children:[W&&z.jsx(Se,we({},oe)),z.jsx(Be,we({},le,{id:xe,children:c})),A&&z.jsx(te,we({},Ce,{children:A})),I&&z.jsx(ve,we({},Fe,{children:I}))]}))})})}),GE=sG,aG=UE(z.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Cancel");function lG(e){return xi("MuiChipDelete",e)}fi("MuiChipDelete",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSolid","variantSoft","variantOutlined"]);var TP;const cG=["children","variant","color","disabled","onKeyDown","onDelete","onClick","component","slots","slotProps"],uG=["onDelete"],dG=e=>{const{focusVisible:t,variant:n,color:i,disabled:c}=e,d={root:["root",c&&"disabled",t&&"focusVisible",n&&`variant${Pn(n)}`,i&&`color${Pn(i)}`]};return _i(d,lG,{})},hG=Yt(qg,{name:"JoyChipDelete",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--IconButton-size":"var(--Chip-deleteSize, 2rem)","--Icon-fontSize":"calc(var(--IconButton-size, 2rem) / 1.3)",minWidth:"var(--IconButton-size, 2rem)",minHeight:"var(--IconButton-size, 2rem)",fontSize:e.vars.fontSize.sm,paddingInline:"2px",pointerEvents:"visible",borderRadius:"var(--Chip-deleteRadius, 50%)",zIndex:1,padding:0})),fG=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyChipDelete"}),{children:c,variant:d="plain",color:p="neutral",disabled:s,onKeyDown:_,onDelete:S,onClick:E,component:A,slots:I={},slotProps:O={}}=i,N=gn(i,cG),$=q.useContext($5),{variant:K=d,color:W=p}=DW(t.variant,t.color,!0),B=t.color||W,U=s??$.disabled,J=q.useRef(null),ee=ko(J,n),{focusVisible:ye,getRootProps:Q}=$g(we({},i,{disabled:U,rootRef:ee})),be=we({},i,{disabled:U,variant:K,color:B,focusVisible:ye}),re=dG(be),Ie=we({},N,{component:A,slots:I,slotProps:O}),Be=te=>{!U&&S&&S(te),E&&E(te)},le=te=>{["Backspace","Enter","Delete"].includes(te.key)&&(te.preventDefault(),!U&&S&&S(te)),_&&_(te)},[xe,Se]=xn("root",{ref:n,elementType:hG,getSlotProps:Q,externalForwardedProps:Ie,ownerState:be,additionalProps:{as:A,onKeyDown:le,onClick:Be},className:re.root}),oe=gn(Se,uG);return z.jsx(xe,we({},oe,{children:c??(TP||(TP=z.jsx(aG,{})))}))}),pG=fG;function mG(e){return xi("MuiInput",e)}const gG=fi("MuiInput",["root","input","formControl","focused","disabled","error","adornedStart","adornedEnd","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid","fullWidth","startDecorator","endDecorator"]),V5=gG,yG=q.createContext(void 0),Kg=yG,vG=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoFocus","className","defaultValue","disabled","disabledInProp","error","id","name","onClick","onChange","onKeyDown","onKeyUp","onFocus","onBlur","placeholder","readOnly","required","type","value"];function _G(e,t){const n=q.useContext(Kg),{"aria-describedby":i,"aria-label":c,"aria-labelledby":d,autoComplete:p,autoFocus:s,className:_,defaultValue:S,disabled:E,disabledInProp:A,error:I,id:O,name:N,onClick:$,onChange:K,onKeyDown:W,onKeyUp:B,onFocus:U,onBlur:J,placeholder:ee,readOnly:ye,required:Q,type:be,value:re}=e,Ie=gn(e,vG),{getRootProps:Be,getInputProps:le,focused:xe,error:Se,disabled:oe}=f8({disabled:A??(n==null?void 0:n.disabled)??E,defaultValue:S,error:I,onBlur:J,onClick:$,onChange:K,onFocus:U,required:Q??(n==null?void 0:n.required),value:re}),te={[t.disabled]:oe,[t.error]:Se,[t.focused]:xe,[t.formControl]:!!n,[_]:_},Ce={[t.disabled]:oe};return we({formControl:n,propsToForward:{"aria-describedby":i,"aria-label":c,"aria-labelledby":d,autoComplete:p,autoFocus:s,disabled:oe,id:O,onKeyDown:W,onKeyUp:B,name:N,placeholder:ee,readOnly:ye,type:be},rootStateClasses:te,inputStateClasses:Ce,getRootProps:Be,getInputProps:le,focused:xe,error:Se,disabled:oe},Ie)}const xG=["propsToForward","rootStateClasses","inputStateClasses","getRootProps","getInputProps","formControl","focused","error","disabled","fullWidth","size","color","variant","startDecorator","endDecorator","component","slots","slotProps"],bG=e=>{const{disabled:t,fullWidth:n,variant:i,color:c,size:d}=e,p={root:["root",t&&"disabled",n&&"fullWidth",i&&`variant${Pn(i)}`,c&&`color${Pn(c)}`,d&&`size${Pn(d)}`],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return _i(p,mG,{})},U5=Yt("div")(({theme:e,ownerState:t})=>{var i,c,d,p,s;const n=(i=e.variants[`${t.variant}`])==null?void 0:i[t.color];return[we({"--Input-radius":e.vars.radius.sm,"--Input-gap":"0.5rem","--Input-placeholderColor":"inherit","--Input-placeholderOpacity":.64,"--Input-decoratorColor":e.vars.palette.text.icon,"--Input-focused":"0","--Input-focusedThickness":e.vars.focus.thickness,"--Input-focusedHighlight":(c=e.vars.palette[t.color==="neutral"?"primary":t.color])==null?void 0:c[500],[`&:not([${Sf}])`]:we({},t.instanceColor&&{"--_Input-focusedHighlight":(d=e.vars.palette[t.instanceColor==="neutral"?"primary":t.instanceColor])==null?void 0:d[500]},{"--Input-focusedHighlight":`var(--_Input-focusedHighlight, ${e.vars.palette.focusVisible})`})},t.size==="sm"&&{"--Input-minHeight":"2rem","--Input-paddingInline":"0.5rem","--Input-decoratorChildHeight":"min(1.5rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl},t.size==="md"&&{"--Input-minHeight":"2.25rem","--Input-paddingInline":"0.75rem","--Input-decoratorChildHeight":"min(1.75rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},t.size==="lg"&&{"--Input-minHeight":"2.75rem","--Input-paddingInline":"1rem","--Input-gap":"0.75rem","--Input-decoratorChildHeight":"min(2.25rem, var(--Input-minHeight))","--Icon-fontSize":e.vars.fontSize.xl2},{"--Input-decoratorChildOffset":"min(calc(var(--Input-paddingInline) - (var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2), var(--Input-paddingInline))","--_Input-paddingBlock":"max((var(--Input-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Input-decoratorChildHeight)) / 2, 0px)","--Input-decoratorChildRadius":"max(var(--Input-radius) - var(--variant-borderWidth, 0px) - var(--_Input-paddingBlock), min(var(--_Input-paddingBlock) + var(--variant-borderWidth, 0px), var(--Input-radius) / 2))","--Button-minHeight":"var(--Input-decoratorChildHeight)","--Button-paddingBlock":"0px","--IconButton-size":"var(--Input-decoratorChildHeight)","--Button-radius":"var(--Input-decoratorChildRadius)","--IconButton-radius":"var(--Input-decoratorChildRadius)",boxSizing:"border-box"},t.variant!=="plain"&&{boxShadow:e.shadow.xs},{minWidth:0,minHeight:"var(--Input-minHeight)"},t.fullWidth&&{width:"100%"},{cursor:"text",position:"relative",display:"flex",paddingInline:"var(--Input-paddingInline)",borderRadius:"var(--Input-radius)"},e.typography[`body-${t.size}`],n,{backgroundColor:(n==null?void 0:n.backgroundColor)??e.vars.palette.background.surface,"&::before":{boxSizing:"border-box",content:'""',display:"block",position:"absolute",pointerEvents:"none",top:0,left:0,right:0,bottom:0,zIndex:1,borderRadius:"inherit",margin:"calc(var(--variant-borderWidth, 0px) * -1)",boxShadow:"var(--Input-focusedInset, inset) 0 0 0 calc(var(--Input-focused) * var(--Input-focusedThickness)) var(--Input-focusedHighlight)"}}),{"&:hover":we({},(p=e.variants[`${t.variant}Hover`])==null?void 0:p[t.color],{backgroundColor:null}),[`&.${V5.disabled}`]:(s=e.variants[`${t.variant}Disabled`])==null?void 0:s[t.color],"&:focus-within::before":{"--Input-focused":"1"}}]}),W5=Yt("input")(({ownerState:e})=>({border:"none",minWidth:0,outline:0,padding:0,flex:1,color:"inherit",backgroundColor:"transparent",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontWeight:"inherit",lineHeight:"inherit",textOverflow:"ellipsis","&:-webkit-autofill":we({paddingInline:"var(--Input-paddingInline)"},!e.startDecorator&&{marginInlineStart:"calc(-1 * var(--Input-paddingInline))",paddingInlineStart:"var(--Input-paddingInline)",borderTopLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomLeftRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"},!e.endDecorator&&{marginInlineEnd:"calc(-1 * var(--Input-paddingInline))",paddingInlineEnd:"var(--Input-paddingInline)",borderTopRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))",borderBottomRightRadius:"calc(var(--Input-radius) - var(--variant-borderWidth, 0px))"}),"&::-webkit-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-moz-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&:-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"},"&::-ms-input-placeholder":{color:"var(--Input-placeholderColor)",opacity:"var(--Input-placeholderOpacity)"}})),G5=Yt("div")({"--Button-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--IconButton-margin":"0 0 0 calc(var(--Input-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Input-paddingInline) / -4)",display:"inherit",alignItems:"center",paddingBlock:"var(--unstable_InputPaddingBlock)",flexWrap:"wrap",marginInlineEnd:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),H5=Yt("div")({"--Button-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--IconButton-margin":"0 calc(var(--Input-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Input-paddingInline) / -4) 0 0",display:"inherit",alignItems:"center",marginInlineStart:"var(--Input-gap)",color:"var(--Input-decoratorColor)",cursor:"initial"}),wG=Yt(U5,{name:"JoyInput",slot:"Root",overridesResolver:(e,t)=>t.root})({}),SG=Yt(W5,{name:"JoyInput",slot:"Input",overridesResolver:(e,t)=>t.input})({}),EG=Yt(G5,{name:"JoyInput",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),TG=Yt(H5,{name:"JoyInput",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({}),CG=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyInput"}),c=_G(we({},i,{disabledInProp:t.disabled}),V5),{propsToForward:d,rootStateClasses:p,inputStateClasses:s,getRootProps:_,getInputProps:S,formControl:E,focused:A,error:I=!1,disabled:O,fullWidth:N=!1,size:$="md",color:K="neutral",variant:W="outlined",startDecorator:B,endDecorator:U,component:J,slots:ee={},slotProps:ye={}}=c,Q=gn(c,xG),be=t.error??(E==null?void 0:E.error)??I,re=t.size??(E==null?void 0:E.size)??$,Ie=t.color??(be?"danger":(E==null?void 0:E.color)??K),Be=we({instanceColor:be?"danger":t.color},i,{fullWidth:N,color:Ie,disabled:O,error:be,focused:A,size:re,variant:W}),le=bG(Be),xe=we({},Q,{component:J,slots:ee,slotProps:ye}),[Se,oe]=xn("root",{ref:n,className:[le.root,p],elementType:wG,getSlotProps:_,externalForwardedProps:xe,ownerState:Be}),[te,Ce]=xn("input",we({},E&&{additionalProps:{id:E.htmlFor,"aria-describedby":E["aria-describedby"]}},{className:[le.input,s],elementType:SG,getSlotProps:S,internalForwardedProps:d,externalForwardedProps:xe,ownerState:Be})),[ve,Fe]=xn("startDecorator",{className:le.startDecorator,elementType:EG,externalForwardedProps:xe,ownerState:Be}),[Ge,rt]=xn("endDecorator",{className:le.endDecorator,elementType:TG,externalForwardedProps:xe,ownerState:Be});return z.jsxs(Se,we({},oe,{children:[B&&z.jsx(ve,we({},Fe,{children:B})),z.jsx(te,we({},Ce)),U&&z.jsx(Ge,we({},rt,{children:U}))]}))}),AG=CG;function kG(e){return xi("MuiListSubheader",e)}fi("MuiListSubheader",["root","sticky","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantSoft","variantOutlined","variantSolid"]);const IG=["component","className","children","id","sticky","variant","color","slots","slotProps"],PG=e=>{const{variant:t,color:n,sticky:i}=e,c={root:["root",i&&"sticky",n&&`color${Pn(n)}`,t&&`variant${Pn(t)}`]};return _i(c,kG,{})},MG=Yt("div",{name:"JoyListSubheader",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i;return we({boxSizing:"border-box",display:"flex",alignItems:"center",marginInline:"var(--ListItem-marginInline)",paddingBlock:"var(--ListItem-paddingY)",paddingInlineStart:"var(--ListItem-paddingLeft)",paddingInlineEnd:"var(--ListItem-paddingRight)",minBlockSize:"var(--ListItem-minHeight)"},e.typography["body-xs"],{fontSize:"max(0.75em, 0.625rem)",textTransform:"uppercase",letterSpacing:"0.1em"},t.sticky&&{position:"sticky",top:"var(--ListItem-stickyTop, 0px)",zIndex:1,background:"var(--ListItem-stickyBackground)"},{color:t.color?`var(--_Link-color, rgba(${(n=e.vars.palette[t.color])==null?void 0:n.mainChannel} / 1))`:e.vars.palette.text.tertiary},t.instanceColor&&{[`&:not([${Sf}])`]:{"--_Link-color":e.vars.palette.text.secondary}},(i=e.variants[t.variant])==null?void 0:i[t.color])}),DG=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyListSubheader"}),{component:c,className:d,children:p,id:s,sticky:_=!1,variant:S,color:E,slots:A={},slotProps:I={}}=i,O=gn(i,IG),N=df(s),$=q.useContext(A5);q.useEffect(()=>{$&&$(N||"")},[$,N]);const K=we({instanceColor:t.color},i,{id:N,sticky:_,variant:S,color:S?E??"neutral":E}),W=PG(K),B=we({},O,{component:c,slots:A,slotProps:I}),[U,J]=xn("root",{ref:n,className:Qa(W.root,d),elementType:MG,externalForwardedProps:B,ownerState:K,additionalProps:{as:c,id:N}});return z.jsx(U,we({},J,{children:p}))}),zG=DG;function LG(e){return xi("MuiAutocomplete",e)}const RG=fi("MuiAutocomplete",["root","wrapper","input","startDecorator","endDecorator","formControl","focused","disabled","error","multiple","limitTag","hasPopupIcon","hasClearIcon","clearIndicator","popupIndicator","popupIndicatorOpen","listbox","option","loading","noOptions","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantPlain","variantOutlined","variantSoft","variantSolid"]),Cc=RG,Z5=Yt(M5)(({theme:e,ownerState:t})=>{var i;const n=(i=e.variants[t.variant])==null?void 0:i[t.color];return we({"--focus-outline-offset":`calc(${e.vars.focus.thickness} * -1)`,"--ListItem-stickyBackground":(n==null?void 0:n.backgroundColor)||(n==null?void 0:n.background)||e.vars.palette.background.popup,"--ListItem-stickyTop":"calc(var(--List-padding, var(--ListDivider-gap)) * -1)"},hW,{boxShadow:e.shadow.md,borderRadius:`var(--List-radius, ${e.vars.radius.sm})`},!(n!=null&&n.backgroundColor)&&{backgroundColor:e.vars.palette.background.popup},{zIndex:e.vars.zIndex.popup,overflow:"auto",maxHeight:"40vh",position:"relative","&:empty":{visibility:"hidden"},[`& .${h_.nested}, & .${h_.nested} .${mW.root}`]:{position:"initial"}})});Yt(Z5,{name:"JoyAutocompleteListbox",slot:"Root",overridesResolver:(e,t)=>t.root})({});const q5=Yt(D5)(({theme:e,ownerState:t})=>{var n,i;return{'&[aria-disabled="true"]':(n=e.variants[`${t.variant}Disabled`])==null?void 0:n[t.color],'&[aria-selected="true"]':we({},(i=e.variants[`${t.variant}Active`])==null?void 0:i[t.color],{fontWeight:e.vars.fontWeight.md})}});Yt(q5,{name:"JoyAutocompleteOption",slot:"Root",overridesResolver:(e,t)=>t.root})({});var CP,AP;const OG=["aria-describedby","aria-label","aria-labelledby","autoComplete","autoHighlight","autoSelect","autoFocus","blurOnSelect","clearIcon","clearOnBlur","clearOnEscape","clearText","closeText","defaultValue","disableCloseOnSelect","disabledItemsFocusable","disableListWrap","disableClearable","disabled","endDecorator","error","filterOptions","filterSelectedOptions","forcePopupIcon","freeSolo","getLimitTagsText","getOptionDisabled","getOptionKey","getOptionLabel","handleHomeEndKeys","includeInputInList","isOptionEqualToValue","groupBy","id","inputValue","limitTags","loading","loadingText","multiple","name","noOptionsText","onChange","onClose","onHighlightChange","onInputChange","onOpen","open","openOnFocus","openText","options","placeholder","popupIcon","readOnly","renderGroup","renderOption","renderTags","required","type","startDecorator","size","color","variant","value","component","selectOnFocus","slots","slotProps"],BG=["onDelete"],FG=["onBlur","onFocus","onMouseDown"],jG=e=>e.current!==null&&e.current.contains(document.activeElement),NG=e=>e.label??e,$G=e=>`+${e}`,VG=e=>z.jsxs($E,{nested:!0,children:[z.jsx(zG,{sticky:!0,children:e.group}),z.jsx(bW,{children:e.children})]},e.key),UG=e=>{const{disabled:t,focused:n,hasClearIcon:i,hasPopupIcon:c,popupOpen:d,variant:p,color:s,size:_,multiple:S}=e,E={root:["root",n&&"focused",i&&"hasClearIcon",c&&"hasPopupIcon",p&&`variant${Pn(p)}`,s&&`color${Pn(s)}`,_&&`size${Pn(_)}`],wrapper:["wrapper",S&&"multiple"],input:["input"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],clearIndicator:["clearIndicator"],popupIndicator:["popupIndicator",d&&"popupIndicatorOpen",t&&"disabled"],listbox:["listbox"],option:["option"],loading:["loading"],noOptions:["noOptions"],limitTag:["limitTag"]};return _i(E,LG,{})},WG=Yt(U5,{name:"JoyAutocomplete",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e})=>we({},e.size==="sm"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="md"&&{"--Autocomplete-wrapperGap":"3px"},e.size==="lg"&&{"--Autocomplete-wrapperGap":"4px"},{"@media (pointer: fine)":{[`&:hover .${Cc.clearIndicator}`]:{visibility:"visible"}}},e.multiple&&!e.startDecorator&&{paddingInlineStart:0})),GG=Yt("div",{name:"JoyAutocomplete",slot:"Wrapper",overridesResolver:(e,t)=>t.wrapper})(({ownerState:e})=>({flex:1,minWidth:0,display:"flex",alignItems:"center",flexWrap:"wrap",gap:"var(--Autocomplete-wrapperGap)",[`&.${Cc.multiple}`]:we({paddingBlock:"var(--Autocomplete-wrapperGap)"},!e.startDecorator&&{paddingInlineStart:"var(--Autocomplete-wrapperGap)"},!e.endDecorator&&{paddingInlineEnd:"var(--Autocomplete-wrapperGap)"})})),HG=Yt(W5,{name:"JoyAutocomplete",slot:"Input",overridesResolver:(e,t)=>t.input})(({ownerState:e})=>we({minWidth:30,minHeight:"var(--Chip-minHeight)"},e.multiple&&{marginInlineStart:"calc(var(--Autocomplete-wrapperGap) * 2.5)"})),ZG=Yt(G5,{name:"JoyAutocomplete",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({}),qG=Yt(H5,{name:"JoyAutocomplete",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>we({},(e.hasClearIcon||e.hasPopupIcon)&&{"--Button-margin":"0px","--IconButton-margin":"0px","--Icon-margin":"0px"})),KG=Yt(qg,{name:"JoyAutocomplete",slot:"ClearIndicator",overridesResolver:(e,t)=>t.clearIndicator})(({ownerState:e})=>we({alignSelf:"center"},!e.hasPopupIcon&&{marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)"},{marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",visibility:e.focused?"visible":"hidden"})),XG=Yt(qg,{name:"JoyAutocomplete",slot:"PopupIndicator",overridesResolver:(e,t)=>t.popupIndicator})({alignSelf:"center",marginInlineStart:"calc(var(--_Input-paddingBlock) / 2)",marginInlineEnd:"calc(var(--Input-decoratorChildOffset) * -1)",[`&.${Cc.popupIndicatorOpen}`]:{transform:"rotate(180deg)","--Icon-color":"currentColor"}}),JG=Yt(Z5,{name:"JoyAutocomplete",slot:"Listbox",overridesResolver:(e,t)=>t.listbox})(({theme:e})=>({zIndex:`var(--unstable_popup-zIndex, ${e.vars.zIndex.popup})`})),YG=Yt(q5,{name:"JoyAutocomplete",slot:"Option",overridesResolver:(e,t)=>t.option})({}),QG=Yt($E,{name:"JoyAutocomplete",slot:"Loading",overridesResolver:(e,t)=>t.loading})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),eH=Yt($E,{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})(({theme:e})=>({color:(e.vars||e).palette.text.secondary})),tH=Yt("div",{name:"JoyAutocomplete",slot:"NoOptions",overridesResolver:(e,t)=>t.noOptions})({marginInlineStart:"calc(var(--Input-paddingInline) / 2)",marginBlockStart:"var(--_Input-paddingBlock)"}),nH=q.forwardRef(function(t,n){var Dn;const i=zi({props:t,name:"JoyAutocomplete"}),{"aria-describedby":c,"aria-label":d,"aria-labelledby":p,autoFocus:s,clearIcon:_=CP||(CP=z.jsx(R5,{fontSize:"md"})),clearText:S="Clear",closeText:E="Close",disableClearable:A=!1,disabled:I,endDecorator:O,error:N=!1,forcePopupIcon:$="auto",freeSolo:K=!1,getLimitTagsText:W=$G,getOptionLabel:B=NG,groupBy:U,id:J,limitTags:ee=-1,loading:ye=!1,loadingText:Q="Loading…",multiple:be=!1,name:re,noOptionsText:Ie="No options",openText:Be="Open",placeholder:le,popupIcon:xe=AP||(AP=z.jsx(MW,{})),readOnly:Se=!1,renderGroup:oe=VG,renderOption:te,renderTags:Ce,required:ve,type:Fe,startDecorator:Ge,size:rt="md",color:Ct="neutral",variant:It="outlined",component:Pt,slots:Kt={},slotProps:nn={}}=i,an=gn(i,OG),ct=q.useContext(Kg),Vt=t.error??(ct==null?void 0:ct.error)??N,ln=t.size??(ct==null?void 0:ct.size)??rt,zt=t.color??(Vt?"danger":(ct==null?void 0:ct.color)??Ct),pn=I??(ct==null?void 0:ct.disabled)??!1,{getRootProps:Kn,getInputProps:Fr,getPopupIndicatorProps:mn,getClearProps:Ut,getTagProps:Vi,getListboxProps:Le,getOptionProps:Ke,value:et,dirty:Ot,popupOpen:kt,focused:yt,focusedTag:Zt,anchorEl:vn,setAnchorEl:Rn,inputValue:bn,groupedOptions:_n}=q9(we({},i,{id:J??(ct==null?void 0:ct.htmlFor),componentName:"Autocomplete",unstable_classNamePrefix:"Mui",unstable_isActiveElementInListbox:jG})),{onMouseDown:Mn}=Fr(),{onClick:Sr}=Kn(),Er=!A&&!pn&&Ot&&!Se,Si=(!K||$===!0)&&$!==!1,Qn=we({instanceColor:t.color},i,{value:et,disabled:pn,focused:yt,getOptionLabel:B,hasOptions:!!_n.length,hasClearIcon:Er,hasPopupIcon:Si,inputFocused:Zt===-1,popupOpen:kt,size:ln,color:zt,variant:It}),Xn=UG(Qn),Gn=we({},an,{component:Pt,slots:Kt,slotProps:nn});let jr;if(be&&et.length>0){const Qt=nr=>{const zn=Vi(nr),{onDelete:Dr}=zn,io=gn(zn,BG);return we({disabled:pn,size:ln,onClick:Dr},io)};Ce?jr=Ce(et,Qt,Qn):jr=et.map((nr,zn)=>z.jsx(GE,{size:ln,variant:"soft",color:"neutral",endDecorator:z.jsx(pG,we({},Qt({index:zn}))),sx:{minWidth:0},children:B(nr)},zn))}const Li=ko(n,Rn),Xo={[Cc.disabled]:pn,[Cc.error]:Vt,[Cc.focused]:yt,[Cc.formControl]:!!ct},[ke,Y]=xn("root",{ref:Li,className:[Xn.root,Xo],elementType:WG,externalForwardedProps:Gn,ownerState:Qn,getSlotProps:Kn,additionalProps:{onClick:Qt=>{Sr&&Sr(Qt),Qt.currentTarget===Qt.target&&Mn&&Mn(Qt)}}}),[ne,Te]=xn("wrapper",{className:Xn.wrapper,elementType:GG,externalForwardedProps:Gn,ownerState:Qn}),ze={[Cc.disabled]:pn},[Ve,ae]=xn("input",{className:[Xn.input,ze],elementType:HG,getSlotProps:Qt=>{const nr=Fr(),{onBlur:zn,onFocus:Dr,onMouseDown:io}=nr,el=gn(nr,FG);return we({},el,{onBlur:Ui=>{var Ei;zn==null||zn(Ui),(Ei=Qt.onBlur)==null||Ei.call(Qt,Ui)},onFocus:Ui=>{var Ei;Dr==null||Dr(Ui),(Ei=Qt.onFocus)==null||Ei.call(Qt,Ui)},onMouseDown:Ui=>{var Ei;io==null||io(Ui),(Ei=Qt.onMouseDown)==null||Ei.call(Qt,Ui)}})},externalForwardedProps:Gn,ownerState:Qn,additionalProps:{autoFocus:s,placeholder:le,name:re,readOnly:Se,disabled:pn,required:ve??(ct==null?void 0:ct.required),type:Fe,"aria-invalid":Vt||void 0,"aria-label":d,"aria-labelledby":p,"aria-describedby":c??(ct==null?void 0:ct["aria-describedby"])}}),[fe,de]=xn("startDecorator",{className:Xn.startDecorator,elementType:ZG,externalForwardedProps:Gn,ownerState:Qn}),[De,He]=xn("endDecorator",{className:Xn.endDecorator,elementType:qG,externalForwardedProps:Gn,ownerState:Qn}),[at,Qe]=xn("clearIndicator",{className:Xn.clearIndicator,elementType:KG,getSlotProps:Ut,externalForwardedProps:Gn,ownerState:Qn,getSlotOwnerState:Qt=>({size:Qt.size||ln,variant:Qt.variant||Uu(It,zt).variant||"plain",color:Qt.color||Uu(It,zt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{"aria-label":S,title:S}}),[vt,Lt]=xn("popupIndicator",{className:Xn.popupIndicator,elementType:XG,getSlotProps:mn,externalForwardedProps:Gn,ownerState:Qn,getSlotOwnerState:Qt=>({size:Qt.size||ln,variant:Qt.variant||Uu(It,zt).variant||"plain",color:Qt.color||Uu(It,zt).color||"neutral",disableColorInversion:!!t.color}),additionalProps:{disabled:pn,"aria-label":kt?E:Be,title:kt?E:Be,type:"button"}}),[Mt,Xt]=xn("listbox",{className:Xn.listbox,elementType:JG,getSlotProps:Le,externalForwardedProps:Gn,ownerState:Qn,getSlotOwnerState:Qt=>({size:Qt.size||ln,variant:Qt.variant||It,color:Qt.color||zt,disableColorInversion:!Qt.disablePortal}),additionalProps:{anchorEl:vn,open:kt,style:vn?{width:vn.clientWidth}:{}}}),[cn,qt]=xn("loading",{className:Xn.loading,elementType:QG,externalForwardedProps:Gn,ownerState:Qn}),[wn,jn]=xn("noOptions",{className:Xn.noOptions,elementType:eH,externalForwardedProps:Gn,ownerState:Qn,additionalProps:{role:"presentation",onMouseDown:Qt=>{Qt.preventDefault()}}}),[er,ut]=xn("limitTag",{className:Xn.limitTag,elementType:tH,externalForwardedProps:Gn,ownerState:Qn});if(ee>-1&&Array.isArray(jr)){const Qt=jr.length-ee;!yt&&Qt>0&&(jr=jr.splice(0,ee),jr.push(z.jsx(er,we({},ut,{children:W(Qt)}),jr.length)))}const[it,Bt]=xn("option",{className:Xn.option,elementType:YG,externalForwardedProps:Gn,ownerState:Qn,getSlotOwnerState:Qt=>({variant:Qt.variant||Uu(It,zt).variant||"plain",color:Qt.color||Uu(It,zt).color||"neutral",disableColorInversion:!Xt.disablePortal}),additionalProps:{as:"li"}}),kn=te||((Qt,nr)=>z.jsx(it,we({},Qt,{children:B(nr)}))),yr=(Qt,nr)=>{const zn=Ke({option:Qt,index:nr});return kn(we({},Bt,zn),Qt,{selected:!!zn["aria-selected"],inputValue:bn,ownerState:Qn})},un=q.useMemo(()=>[{name:"offset",options:{offset:[0,4]}},...Xt.modifiers||[]],[Xt.modifiers]);let Nr=null;return vn&&(Nr=z.jsx(B5,{variant:It,color:zt,children:z.jsx(P5,{nested:!0,children:z.jsxs(Mt,we({},Xt,{className:Qa(Xt.className),modifiers:un},!((Dn=i.slots)!=null&&Dn.listbox)&&{as:W9,slots:{root:Xt.as||"ul"}},{children:[_n.map((Qt,nr)=>{if(U){const zn=Qt;return oe({key:String(zn.key),group:zn.group,children:zn.options.map((Dr,io)=>yr(Dr,zn.index+io))})}return yr(Qt,nr)}),ye&&_n.length===0?z.jsx(cn,we({},qt,{children:Q})):null,_n.length===0&&!K&&!ye?z.jsx(wn,we({},jn,{children:Ie})):null]}))})})),z.jsxs(q.Fragment,{children:[z.jsxs(ke,we({},Y,{children:[Ge&&z.jsx(fe,we({},de,{children:Ge})),z.jsxs(ne,we({},Te,{children:[jr,z.jsx(Ve,we({},ae))]})),O&&z.jsx(De,we({},He,{children:O})),Er?z.jsx(at,we({},Qe,{children:_})):null,Si?z.jsx(vt,we({},Lt,{children:xe})):null]})),Nr]})}),rH=nH;function iH(e){return xi("MuiTypography",e)}fi("MuiTypography",["root","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","noWrap","gutterBottom","startDecorator","endDecorator","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid"]);const oH=["color","textColor"],sH=["component","gutterBottom","noWrap","level","levelMapping","children","endDecorator","startDecorator","variant","slots","slotProps"],p_=q.createContext(!1),K5=q.createContext(!1),aH=e=>{const{gutterBottom:t,noWrap:n,level:i,color:c,variant:d}=e,p={root:["root",i,t&&"gutterBottom",n&&"noWrap",c&&`color${Pn(c)}`,d&&`variant${Pn(d)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return _i(p,iH,{})},lH=Yt("span",{name:"JoyTypography",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),cH=Yt("span",{name:"JoyTypography",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Typography-gap, 0.375em), 0.75rem)"}),uH=Yt("span",{name:"JoyTypography",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i,c,d,p;const n=t.level!=="inherit"?(i=e.typography[t.level])==null?void 0:i.lineHeight:"1";return we({"--Icon-fontSize":`calc(1em * ${n})`},t.color&&{"--Icon-color":"currentColor"},{margin:"var(--Typography-margin, 0px)"},t.nesting?{display:"inline"}:we({display:"block"},t.unstable_hasSkeleton&&{position:"relative"}),(t.startDecorator||t.endDecorator)&&we({display:"flex",alignItems:"center"},t.nesting&&we({display:"inline-flex"},t.startDecorator&&{verticalAlign:"bottom"})),t.level&&t.level!=="inherit"&&e.typography[t.level],{fontSize:`var(--Typography-fontSize, ${t.level&&t.level!=="inherit"?((c=e.typography[t.level])==null?void 0:c.fontSize)??"inherit":"inherit"})`},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.color&&{color:`var(--variant-plainColor, rgba(${(d=e.vars.palette[t.color])==null?void 0:d.mainChannel} / 1))`},t.variant&&we({borderRadius:e.vars.radius.xs,paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"},(p=e.variants[t.variant])==null?void 0:p[t.color]))}),kP={h1:"h1",h2:"h2",h3:"h3",h4:"h4","title-lg":"p","title-md":"p","title-sm":"p","body-lg":"p","body-md":"p","body-sm":"p","body-xs":"span",inherit:"p"},dH=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyTypography"}),{color:c,textColor:d}=i,p=gn(i,oH),s=q.useContext(p_),_=q.useContext(K5),S=G3(we({},p,{color:d})),{component:E,gutterBottom:A=!1,noWrap:I=!1,level:O="body-md",levelMapping:N=kP,children:$,endDecorator:K,startDecorator:W,variant:B,slots:U={},slotProps:J={}}=S,ee=gn(S,sH),ye=t.color??(B?c??"neutral":c),Q=s||_?t.level||"inherit":O,be=ux($,["Skeleton"]),re=E||(s?"span":N[Q]||kP[Q]||"span"),Ie=we({},S,{level:Q,component:re,color:ye,gutterBottom:A,noWrap:I,nesting:s,variant:B,unstable_hasSkeleton:be}),Be=aH(Ie),le=we({},ee,{component:re,slots:U,slotProps:J}),[xe,Se]=xn("root",{ref:n,className:Be.root,elementType:uH,externalForwardedProps:le,ownerState:Ie}),[oe,te]=xn("startDecorator",{className:Be.startDecorator,elementType:lH,externalForwardedProps:le,ownerState:Ie}),[Ce,ve]=xn("endDecorator",{className:Be.endDecorator,elementType:cH,externalForwardedProps:le,ownerState:Ie});return z.jsx(p_.Provider,{value:!0,children:z.jsxs(xe,we({},Se,{children:[W&&z.jsx(oe,we({},te,{children:W})),be?q.cloneElement($,{variant:$.props.variant||"inline"}):$,K&&z.jsx(Ce,we({},ve,{children:K}))]}))})});dH.muiName="Typography";function hH(e){return xi("MuiButton",e)}const fH=fi("MuiButton",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","focusVisible","disabled","sizeSm","sizeMd","sizeLg","fullWidth","startDecorator","endDecorator","loading","loadingIndicatorCenter"]),IP=fH,pH=["children","action","color","variant","size","fullWidth","startDecorator","endDecorator","loading","loadingPosition","loadingIndicator","disabled","component","slots","slotProps"],mH=e=>{const{color:t,disabled:n,focusVisible:i,focusVisibleClassName:c,fullWidth:d,size:p,variant:s,loading:_}=e,S={root:["root",n&&"disabled",i&&"focusVisible",d&&"fullWidth",s&&`variant${Pn(s)}`,t&&`color${Pn(t)}`,p&&`size${Pn(p)}`,_&&"loading"],startDecorator:["startDecorator"],endDecorator:["endDecorator"],loadingIndicatorCenter:["loadingIndicatorCenter"]},E=_i(S,hH,{});return i&&c&&(E.root+=` ${c}`),E},gH=Yt("span",{name:"JoyButton",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Icon-margin":"0 0 0 calc(var(--Button-gap) / -2)","--CircularProgress-margin":"0 0 0 calc(var(--Button-gap) / -2)",display:"inherit",marginRight:"var(--Button-gap)"}),yH=Yt("span",{name:"JoyButton",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Icon-margin":"0 calc(var(--Button-gap) / -2) 0 0","--CircularProgress-margin":"0 calc(var(--Button-gap) / -2) 0 0",display:"inherit",marginLeft:"var(--Button-gap)"}),vH=Yt("span",{name:"JoyButton",slot:"LoadingCenter",overridesResolver:(e,t)=>t.loadingIndicatorCenter})(({theme:e,ownerState:t})=>{var n,i,c,d;return we({display:"inherit",position:"absolute",left:"50%",transform:"translateX(-50%)",color:(i=(n=e.variants[t.variant])==null?void 0:n[t.color])==null?void 0:i.color},t.disabled&&{color:(d=(c=e.variants[`${t.variant}Disabled`])==null?void 0:c[t.color])==null?void 0:d.color})}),_H=({theme:e,ownerState:t})=>{var n,i,c,d;return[we({"--Icon-margin":"initial","--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon},t.size==="sm"&&{"--Icon-fontSize":e.vars.fontSize.lg,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.375rem",minHeight:"var(--Button-minHeight, 2rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.25rem)",paddingInline:"0.75rem"},t.size==="md"&&{"--Icon-fontSize":e.vars.fontSize.xl,"--CircularProgress-size":"20px","--CircularProgress-thickness":"2px","--Button-gap":"0.5rem",minHeight:"var(--Button-minHeight, 2.25rem)",fontSize:e.vars.fontSize.sm,paddingBlock:"var(--Button-paddingBlock, 0.375rem)",paddingInline:"1rem"},t.size==="lg"&&{"--Icon-fontSize":e.vars.fontSize.xl2,"--CircularProgress-size":"28px","--CircularProgress-thickness":"4px","--Button-gap":"0.75rem",minHeight:"var(--Button-minHeight, 2.75rem)",fontSize:e.vars.fontSize.md,paddingBlock:"var(--Button-paddingBlock, 0.5rem)",paddingInline:"1.5rem"},{WebkitTapHighlightColor:"transparent",boxSizing:"border-box",borderRadius:`var(--Button-radius, ${e.vars.radius.sm})`,margin:"var(--Button-margin)",border:"none",backgroundColor:"transparent",cursor:"pointer",userSelect:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",textDecoration:"none",fontFamily:e.vars.fontFamily.body,fontWeight:e.vars.fontWeight.lg,lineHeight:e.vars.lineHeight.md},t.fullWidth&&{width:"100%"},{[e.focus.selector]:e.focus.default}),we({},(n=e.variants[t.variant])==null?void 0:n[t.color],{"&:hover":{"@media (hover: hover)":(i=e.variants[`${t.variant}Hover`])==null?void 0:i[t.color]},'&:active, &[aria-pressed="true"]':(c=e.variants[`${t.variant}Active`])==null?void 0:c[t.color],[`&.${IP.disabled}`]:(d=e.variants[`${t.variant}Disabled`])==null?void 0:d[t.color]},t.loadingPosition==="center"&&{[`&.${IP.loading}`]:{color:"transparent"}})]},xH=Yt("button",{name:"JoyButton",slot:"Root",overridesResolver:(e,t)=>t.root})(_H),X5=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyButton"}),{children:c,action:d,color:p="primary",variant:s="solid",size:_="md",fullWidth:S=!1,startDecorator:E,endDecorator:A,loading:I=!1,loadingPosition:O="center",loadingIndicator:N,disabled:$,component:K,slots:W={},slotProps:B={}}=i,U=gn(i,pH),J=q.useContext(F5),ee=q.useContext(j5),ye=t.variant||J.variant||s,Q=t.size||J.size||_,be=t.color||J.color||p,re=(t.loading||t.disabled)??(J.disabled||I||$),Ie=q.useRef(null),Be=ko(Ie,n),{focusVisible:le,setFocusVisible:xe,getRootProps:Se}=$g(we({},i,{disabled:re,rootRef:Be})),oe=N??z.jsx(Cg,{color:be,thickness:{sm:2,md:3,lg:4}[Q]||3});q.useImperativeHandle(d,()=>({focusVisible:()=>{var Vt;xe(!0),(Vt=Ie.current)==null||Vt.focus()}}),[xe]);const te=we({},i,{color:be,fullWidth:S,variant:ye,size:Q,focusVisible:le,loading:I,loadingPosition:O,disabled:re}),Ce=mH(te),ve=Vt=>{var zt;let ln=i.onClick;typeof B.root=="function"?ln=B.root(te).onClick:B.root&&(ln=B.root.onClick),ln==null||ln(Vt),ee&&((zt=ee.onClick)==null||zt.call(ee,Vt,i.value))};let Fe=i["aria-pressed"];typeof B.root=="function"?Fe=B.root(te)["aria-pressed"]:B.root&&(Fe=B.root["aria-pressed"]),ee!=null&&ee.value&&(Array.isArray(ee.value)?Fe=ee.value.indexOf(i.value)!==-1:Fe=ee.value===i.value);const Ge=we({},U,{component:K,slots:W,slotProps:B}),[rt,Ct]=xn("root",{ref:n,className:Ce.root,elementType:xH,externalForwardedProps:Ge,getSlotProps:Se,ownerState:te,additionalProps:{onClick:ve,"aria-pressed":Fe}}),[It,Pt]=xn("startDecorator",{className:Ce.startDecorator,elementType:gH,externalForwardedProps:Ge,ownerState:te}),[Kt,nn]=xn("endDecorator",{className:Ce.endDecorator,elementType:yH,externalForwardedProps:Ge,ownerState:te}),[an,ct]=xn("loadingIndicatorCenter",{className:Ce.loadingIndicatorCenter,elementType:vH,externalForwardedProps:Ge,ownerState:te});return z.jsxs(rt,we({},Ct,{children:[(E||I&&O==="start")&&z.jsx(It,we({},Pt,{children:I&&O==="start"?oe:E})),c,I&&O==="center"&&z.jsx(an,we({},ct,{children:oe})),(A||I&&O==="end")&&z.jsx(Kt,we({},nn,{children:I&&O==="end"?oe:A}))]}))});X5.muiName="Button";const ro=X5,J5=Yt("div")(({theme:e,ownerState:t})=>{var d;const{p:n,padding:i,borderRadius:c}=VE({theme:e,ownerState:t},["p","padding","borderRadius"]);return[we({"--Icon-color":t.color!=="neutral"||t.variant==="solid"?"currentColor":e.vars.palette.text.icon,"--Card-childRadius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--Card-padding), min(var(--Card-padding) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))","--AspectRatio-radius":"var(--Card-childRadius)","--unstable_actionMargin":"calc(-1 * var(--variant-borderWidth, 0px))","--unstable_actionRadius":"var(--Card-radius)","--CardCover-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--CardOverflow-offset":"calc(-1 * var(--Card-padding))","--CardOverflow-radius":"calc(var(--Card-radius) - var(--variant-borderWidth, 0px))","--Divider-inset":"calc(-1 * var(--Card-padding))"},t.size==="sm"&&{"--Card-radius":e.vars.radius.sm,"--Card-padding":"0.625rem",gap:"0.5rem"},t.size==="md"&&{"--Card-radius":e.vars.radius.md,"--Card-padding":"1rem",gap:"0.75rem 1rem"},t.size==="lg"&&{"--Card-radius":e.vars.radius.lg,"--Card-padding":"1.5rem",gap:"1rem 1.5rem"},{padding:"var(--Card-padding)",borderRadius:"var(--Card-radius)",backgroundColor:e.vars.palette.background.surface,position:"relative",display:"flex",flexDirection:t.orientation==="horizontal"?"row":"column"},e.typography[`body-${t.size}`],t.variant==="solid"&&t.color&&t.invertedColors&&IW(t.color)(e),t.variant==="soft"&&t.color&&t.invertedColors&&PW(t.color)(e),(d=e.variants[t.variant])==null?void 0:d[t.color]),n!==void 0&&{"--Card-padding":n},i!==void 0&&{"--Card-padding":i},c!==void 0&&{"--Card-radius":c}]});Yt(J5,{name:"JoyCard",slot:"Root",overridesResolver:(e,t)=>t.root})({});function bH(e){return xi("MuiDivider",e)}fi("MuiDivider",["root","horizontal","vertical","insetContext","insetNone"]);function wH(e){return xi("MuiModalDialog",e)}fi("MuiModalDialog",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg","layoutCenter","layoutFullscreen"]);const SH=q.createContext(void 0),Y5=SH,EH=q.createContext(void 0),Q5=EH,TH=["className","children","component","inset","orientation","role","slots","slotProps"],CH=e=>{const{orientation:t,inset:n}=e,i={root:["root",t,n&&`inset${Pn(n)}`]};return _i(i,bH,{})},AH=Yt("hr",{name:"JoyDivider",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>we({"--Divider-thickness":"1px","--Divider-lineColor":e.vars.palette.divider},t.inset==="none"&&{"--_Divider-inset":"0px"},t.inset==="context"&&{"--_Divider-inset":"var(--Divider-inset, 0px)"},{margin:"initial",marginInline:t.orientation==="vertical"?"initial":"var(--_Divider-inset)",marginBlock:t.orientation==="vertical"?"var(--_Divider-inset)":"initial",position:"relative",alignSelf:"stretch",flexShrink:0},t.children?we({"--Divider-gap":e.spacing(1),"--Divider-childPosition":"50%",display:"flex",flexDirection:t.orientation==="vertical"?"column":"row",alignItems:"center",whiteSpace:"nowrap",textAlign:"center",border:0},e.typography["body-sm"],{"&::before, &::after":{position:"relative",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)",backgroundColor:"var(--Divider-lineColor)",content:'""'},"&::before":{marginInlineEnd:t.orientation==="vertical"?"initial":"min(var(--Divider-childPosition) * 999, var(--Divider-gap))",marginBlockEnd:t.orientation==="vertical"?"min(var(--Divider-childPosition) * 999, var(--Divider-gap))":"initial",flexBasis:"var(--Divider-childPosition)"},"&::after":{marginInlineStart:t.orientation==="vertical"?"initial":"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))",marginBlockStart:t.orientation==="vertical"?"min((100% - var(--Divider-childPosition)) * 999, var(--Divider-gap))":"initial",flexBasis:"calc(100% - var(--Divider-childPosition))"}}):{border:"none",listStyle:"none",backgroundColor:"var(--Divider-lineColor)",inlineSize:t.orientation==="vertical"?"var(--Divider-thickness)":"initial",blockSize:t.orientation==="vertical"?"initial":"var(--Divider-thickness)"})),eR=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyDivider"}),{className:c,children:d,component:p=d!=null?"div":"hr",inset:s,orientation:_="horizontal",role:S=p!=="hr"?"separator":void 0,slots:E={},slotProps:A={}}=i,I=gn(i,TH),O=we({},i,{inset:s,role:S,orientation:_,component:p}),N=CH(O),$=we({},I,{component:p,slots:E,slotProps:A}),[K,W]=xn("root",{ref:n,className:Qa(N.root,c),elementType:AH,externalForwardedProps:$,ownerState:O,additionalProps:we({as:p,role:S},S==="separator"&&_==="vertical"&&{"aria-orientation":"vertical"})});return z.jsx(K,we({},W,{children:d}))});eR.muiName="Divider";const HE=eR;function kH(e){return xi("MuiModal",e)}fi("MuiModal",["root","hidden","backdrop"]);const IH=q.createContext(void 0),tR=IH,PH=["children","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onClose","onKeyDown","open","component","slots","slotProps"],MH=e=>{const{open:t}=e;return _i({root:["root",!t&&"hidden"],backdrop:["backdrop"]},kH,{})},DH=Yt("div")(({ownerState:e,theme:t})=>we({"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`,'& ~ [role="listbox"]':{"--unstable_popup-zIndex":`calc(${t.vars.zIndex.modal} + 1)`},position:"fixed",zIndex:t.vars.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&{visibility:"hidden"})),zH=Yt(DH,{name:"JoyModal",slot:"Root",overridesResolver:(e,t)=>t.root})({}),LH=Yt("div")(({theme:e})=>({zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:e.vars.palette.background.backdrop,WebkitTapHighlightColor:"transparent",backdropFilter:"blur(8px)"})),RH=Yt(LH,{name:"JoyModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({}),OH=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyModal"}),{children:c,container:d,disableAutoFocus:p=!1,disableEnforceFocus:s=!1,disableEscapeKeyDown:_=!1,disablePortal:S=!1,disableRestoreFocus:E=!1,disableScrollLock:A=!1,hideBackdrop:I=!1,keepMounted:O=!1,onClose:N,open:$,component:K,slots:W={},slotProps:B={}}=i,U=gn(i,PH),J=we({},i,{disableAutoFocus:p,disableEnforceFocus:s,disableEscapeKeyDown:_,disablePortal:S,disableRestoreFocus:E,disableScrollLock:A,hideBackdrop:I,keepMounted:O}),{getRootProps:ee,getBackdropProps:ye,rootRef:Q,portalRef:be,isTopModal:re}=I7(we({},J,{rootRef:n})),Ie=MH(J),Be=we({},U,{component:K,slots:W,slotProps:B}),[le,xe]=xn("root",{ref:Q,className:Ie.root,elementType:zH,externalForwardedProps:Be,getSlotProps:ee,ownerState:J}),[Se,oe]=xn("backdrop",{className:Ie.backdrop,elementType:RH,externalForwardedProps:Be,getSlotProps:ye,ownerState:J});return!O&&!$?null:z.jsx(tR.Provider,{value:N,children:z.jsx(h5,{ref:be,container:d,disablePortal:S,children:z.jsxs(le,we({},xe,{children:[I?null:z.jsx(Se,we({},oe)),z.jsx(u8,{disableEnforceFocus:s,disableAutoFocus:p,disableRestoreFocus:E,isEnabled:re,open:$,children:q.Children.only(c)&&q.cloneElement(c,we({},c.props.tabIndex===void 0&&{tabIndex:-1}))})]}))})})}),nR=OH;function BH(e){return xi("MuiFormControl",e)}const FH=fi("MuiFormControl",["root","error","disabled","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","sizeSm","sizeMd","sizeLg","horizontal","vertical"]),N2=FH,jH=fi("MuiSwitch",["root","checked","disabled","action","input","thumb","track","focusVisible","readOnly","colorPrimary","colorDanger","colorSuccess","colorWarning","colorContext","sizeSm","sizeMd","sizeLg","variantOutlined","variantSoft","variantSolid","startDecorator","endDecorator"]),NH=jH,$H=["id","className","component","disabled","required","error","color","size","orientation","slots","slotProps"],VH=e=>{const{disabled:t,error:n,size:i,color:c,orientation:d}=e,p={root:["root",d,t&&"disabled",n&&"error",c&&`color${Pn(c)}`,i&&`size${Pn(i)}`]};return _i(p,BH,{})},UH=Yt("div",{name:"JoyFormControl",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i,c,d,p;return we({"--unstable_RadioGroup-margin":"0.5rem 0","--FormLabel-alignSelf":t.orientation==="horizontal"?"align-items":"flex-start","--FormLabel-asteriskColor":e.vars.palette.danger[500]},t.size==="sm"&&{"--FormLabel-fontSize":e.vars.fontSize.xs,"--FormLabel-lineHeight":e.vars.lineHeight.xl,"--FormLabel-margin":t.orientation==="horizontal"?"0 0.5rem 0 0":"0 0 0.25rem 0","--FormHelperText-fontSize":e.vars.fontSize.xs,"--FormHelperText-lineHeight":e.vars.lineHeight.xl},t.size==="md"&&{"--FormLabel-fontSize":e.vars.fontSize.sm,"--FormLabel-lineHeight":e.vars.lineHeight.sm,"--FormLabel-margin":t.orientation==="horizontal"?"0 0.75rem 0 0":"0 0 0.375rem 0","--FormHelperText-fontSize":e.vars.fontSize.sm,"--FormHelperText-lineHeight":e.vars.lineHeight.sm},t.size==="lg"&&{"--FormLabel-fontSize":e.vars.fontSize.md,"--FormLabel-lineHeight":e.vars.lineHeight.md,"--FormLabel-margin":t.orientation==="horizontal"?"0 1rem 0 0":"0 0 0.5rem 0","--FormHelperText-fontSize":e.vars.fontSize.sm,"--FormHelperText-lineHeight":e.vars.lineHeight.sm},t.color&&{"--FormHelperText-color":(n=e.vars.palette[t.color])==null?void 0:n[500]},{"--FormHelperText-margin":"0.375rem 0 0 0",[`&.${N2.error}`]:{"--FormHelperText-color":e.vars.palette.danger[500]},[`&.${N2.disabled}`]:{"--FormLabel-color":(c=(i=e.variants.plainDisabled)==null?void 0:i[t.color||"neutral"])==null?void 0:c.color,"--FormHelperText-color":(p=(d=e.variants.plainDisabled)==null?void 0:d[t.color||"neutral"])==null?void 0:p.color},display:"flex",position:"relative",flexDirection:t.orientation==="horizontal"?"row":"column"},t.orientation==="horizontal"&&{[`& > label ~ .${NH.root}`]:{"--unstable_Switch-margin":"0 0 0 auto"}})}),WH=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyFormControl"}),{id:c,className:d,component:p="div",disabled:s=!1,required:_=!1,error:S=!1,color:E,size:A="md",orientation:I="vertical",slots:O={},slotProps:N={}}=i,$=gn(i,$H),K=df(c),[W,B]=q.useState(null),U=we({},i,{id:K,component:p,color:E,disabled:s,error:S,required:_,size:A,orientation:I});let J;const ee=VH(U),[ye,Q]=xn("root",{ref:n,className:Qa(ee.root,d),elementType:UH,externalForwardedProps:we({},$,{component:p,slots:O,slotProps:N}),ownerState:U}),be=q.useMemo(()=>({disabled:s,required:_,error:S,color:E,size:A,htmlFor:K,labelId:`${K}-label`,"aria-describedby":W?`${K}-helper-text`:void 0,setHelperText:B,registerEffect:J}),[E,s,S,W,K,J,_,A]);return z.jsx(Kg.Provider,{value:be,children:z.jsx(ye,we({},Q))})}),ZE=WH;function GH(e){return xi("MuiFormHelperText",e)}fi("MuiFormHelperText",["root"]);function HH(e){return xi("MuiFormLabel",e)}const ZH=fi("MuiFormLabel",["root","asterisk"]),qH=ZH,KH=["children","component","slots","slotProps"],XH=()=>_i({root:["root"]},GH,{}),JH=Yt("div",{name:"JoyFormHelperText",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--Icon-fontSize":"calc(var(--FormHelperText-lineHeight) * 1em)",display:"flex",alignItems:"center",gap:"2px",fontFamily:e.vars.fontFamily.body,fontSize:`var(--FormHelperText-fontSize, ${e.vars.fontSize.sm})`,lineHeight:`var(--FormHelperText-lineHeight, ${e.vars.lineHeight.sm})`,color:`var(--FormHelperText-color, ${e.vars.palette.text.tertiary})`,margin:"var(--FormHelperText-margin, 0px)",[`.${qH.root} + &`]:{"--FormHelperText-margin":"0px"},[`.${N2.error} &`]:{"--Icon-color":"currentColor"}})),YH=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyFormHelperText"}),{children:c,component:d,slots:p={},slotProps:s={}}=i,_=gn(i,KH),S=q.useRef(null),E=ko(S,n),A=q.useContext(Kg),I=A==null?void 0:A.setHelperText;q.useEffect(()=>(I==null||I(S.current),()=>{I==null||I(null)}),[I]);const O=XH(),N=we({},_,{component:d,slots:p,slotProps:s}),[$,K]=xn("root",{ref:E,elementType:JH,externalForwardedProps:N,ownerState:i,additionalProps:{as:d,id:A==null?void 0:A["aria-describedby"]},className:O.root});return z.jsx($,we({},K,{children:c}))}),rR=YH,QH=["children","component","htmlFor","id","slots","slotProps"],eZ=()=>_i({root:["root"],asterisk:["asterisk"]},HH,{}),tZ=Yt("label",{name:"JoyFormLabel",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({"--Icon-fontSize":"calc(var(--FormLabel-lineHeight) * 1em)",WebkitTapHighlightColor:"transparent",alignSelf:"var(--FormLabel-alignSelf)",display:"flex",gap:"2px",alignItems:"center",flexWrap:"wrap",userSelect:"none",fontFamily:e.vars.fontFamily.body,fontSize:`var(--FormLabel-fontSize, ${e.vars.fontSize.sm})`,fontWeight:e.vars.fontWeight.md,lineHeight:`var(--FormLabel-lineHeight, ${e.vars.lineHeight.sm})`,color:`var(--FormLabel-color, ${e.vars.palette.text.primary})`,margin:"var(--FormLabel-margin, 0px)"})),nZ=Yt("span",{name:"JoyFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})({color:"var(--FormLabel-asteriskColor)"}),rZ=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyFormLabel"}),{children:c,component:d="label",htmlFor:p,id:s,slots:_={},slotProps:S={}}=i,E=gn(i,QH),A=q.useContext(Kg),I=t.required??(A==null?void 0:A.required)??!1,O=we({},i,{required:I}),N=eZ(),$=we({},E,{component:d,slots:_,slotProps:S}),[K,W]=xn("root",{additionalProps:{htmlFor:p??(A==null?void 0:A.htmlFor),id:s??(A==null?void 0:A.labelId)},ref:n,className:N.root,elementType:tZ,externalForwardedProps:$,ownerState:O}),[B,U]=xn("asterisk",{additionalProps:{"aria-hidden":!0},className:N.asterisk,elementType:nZ,externalForwardedProps:$,ownerState:O});return z.jsxs(K,we({},W,{children:[c,I&&z.jsxs(B,we({},U,{children:[" ","*"]}))]}))}),qE=rZ;function iZ(e){return xi("MuiLink",e)}const oZ=fi("MuiLink",["root","disabled","focusVisible","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","focusVisible","variantPlain","variantOutlined","variantSoft","variantSolid","underlineNone","underlineHover","underlineAlways","h1","h2","h3","h4","title-lg","title-md","title-sm","body-lg","body-md","body-sm","body-xs","startDecorator","endDecorator"]),PP=oZ,sZ=["color","textColor","variant"],aZ=["children","disabled","onBlur","onFocus","level","overlay","underline","endDecorator","startDecorator","component","slots","slotProps"],lZ=e=>{const{level:t,color:n,variant:i,underline:c,focusVisible:d,disabled:p}=e,s={root:["root",n&&`color${Pn(n)}`,p&&"disabled",d&&"focusVisible",t,c&&`underline${Pn(c)}`,i&&`variant${Pn(i)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return _i(s,iZ,{})},cZ=Yt("span",{name:"JoyLink",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})(({ownerState:e})=>{var t;return we({display:"inline-flex",marginInlineEnd:"clamp(4px, var(--Link-gap, 0.375em), 0.75rem)"},typeof e.startDecorator!="string"&&(e.alignItems==="flex-start"||((t=e.sx)==null?void 0:t.alignItems)==="flex-start")&&{marginTop:"2px"})}),uZ=Yt("span",{name:"JoyLink",slot:"endDecorator",overridesResolver:(e,t)=>t.endDecorator})(({ownerState:e})=>{var t;return we({display:"inline-flex",marginInlineStart:"clamp(4px, var(--Link-gap, 0.25em), 0.5rem)"},typeof e.startDecorator!="string"&&(e.alignItems==="flex-start"||((t=e.sx)==null?void 0:t.alignItems)==="flex-start")&&{marginTop:"2px"})}),dZ=Yt("a",{name:"JoyLink",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var n,i,c,d,p,s,_;return[we({"--Icon-fontSize":"1.25em","--Icon-color":"currentColor","--CircularProgress-size":"1.25em","--CircularProgress-thickness":"3px"},t.level&&t.level!=="inherit"&&e.typography[t.level],t.level==="inherit"&&{font:"inherit"},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{"@media (hover: hover)":{textDecorationLine:"underline"}}},t.underline==="always"&&{textDecoration:"underline"},t.startDecorator&&{verticalAlign:"bottom"},{textDecorationThickness:"max(0.08em, 1px)",textUnderlineOffset:"0.15em",display:"inline-flex",alignItems:"center",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:e.vars.radius.xs,padding:0,cursor:"pointer",textDecorationColor:`var(--variant-outlinedBorder, rgba(${(n=e.vars.palette[t.color])==null?void 0:n.mainChannel} / var(--Link-underlineOpacity, 0.72)))`},t.variant?we({paddingBlock:"min(0.1em, 4px)",paddingInline:"0.25em"},!t.nesting&&{marginInline:"-0.25em"}):{color:`var(--variant-plainColor, rgba(${(i=e.vars.palette[t.color])==null?void 0:i.mainChannel} / 1))`,[`&.${PP.disabled}`]:{pointerEvents:"none",color:`var(--variant-plainDisabledColor, rgba(${(c=e.vars.palette[t.color])==null?void 0:c.mainChannel} / 0.6))`}},{userSelect:t.component==="button"?"none":void 0,MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},t.overlay?{position:"initial","&::after":{content:'""',display:"block",position:"absolute",top:0,left:0,bottom:0,right:0,borderRadius:"var(--unstable_actionRadius, inherit)",margin:"var(--unstable_actionMargin)"},[`${e.focus.selector}`]:{"&::after":e.focus.default}}:{position:"relative",[e.focus.selector]:e.focus.default}),t.variant&&we({},(d=e.variants[t.variant])==null?void 0:d[t.color],{"&:hover":{"@media (hover: hover)":(p=e.variants[`${t.variant}Hover`])==null?void 0:p[t.color]},"&:active":(s=e.variants[`${t.variant}Active`])==null?void 0:s[t.color],[`&.${PP.disabled}`]:(_=e.variants[`${t.variant}Disabled`])==null?void 0:_[t.color]})]}),hZ=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyLink"}),{color:c="primary",textColor:d,variant:p}=i,s=gn(i,sZ),_=q.useContext(p_),S=q.useContext(K5),E=G3(we({},s,{color:d})),{children:A,disabled:I=!1,onBlur:O,onFocus:N,level:$="body-md",overlay:K=!1,underline:W="hover",endDecorator:B,startDecorator:U,component:J,slots:ee={},slotProps:ye={}}=E,Q=gn(E,aZ),be=_||S?t.level||"inherit":$,{isFocusVisibleRef:re,onBlur:Ie,onFocus:Be,ref:le}=Y3(),[xe,Se]=q.useState(!1),oe=ko(n,le),te=an=>{Ie(an),re.current===!1&&Se(!1),O&&O(an)},Ce=an=>{Be(an),re.current===!0&&Se(!0),N&&N(an)},ve=we({},E,{color:c,disabled:I,focusVisible:xe,underline:W,variant:p,level:be,overlay:K,nesting:_}),Fe=lZ(ve),Ge=we({},Q,{component:J,slots:ee,slotProps:ye}),[rt,Ct]=xn("root",{additionalProps:{onBlur:te,onFocus:Ce},ref:oe,className:Fe.root,elementType:dZ,externalForwardedProps:Ge,ownerState:ve}),[It,Pt]=xn("startDecorator",{className:Fe.startDecorator,elementType:cZ,externalForwardedProps:Ge,ownerState:ve}),[Kt,nn]=xn("endDecorator",{className:Fe.endDecorator,elementType:uZ,externalForwardedProps:Ge,ownerState:ve});return z.jsx(p_.Provider,{value:!0,children:z.jsxs(rt,we({},Ct,{children:[U&&z.jsx(It,we({},Pt,{children:U})),ux(A,["Skeleton"])?q.cloneElement(A,{variant:A.props.variant||"inline"}):A,B&&z.jsx(Kt,we({},nn,{children:B}))]}))})}),kx=hZ;function fZ(e){return xi("MuiModalClose",e)}fi("MuiModalClose",["root","colorPrimary","colorNeutral","colorDanger","colorSuccess","colorWarning","colorContext","variantPlain","variantOutlined","variantSoft","variantSolid","sizeSm","sizeMd","sizeLg"]);var MP;const pZ=["component","color","variant","size","onClick","slots","slotProps"],mZ=e=>{const{variant:t,color:n,disabled:i,focusVisible:c,size:d}=e,p={root:["root",i&&"disabled",c&&"focusVisible",t&&`variant${Pn(t)}`,n&&`color${Pn(n)}`,d&&`size${Pn(d)}`]};return _i(p,fZ,{})},gZ=Yt(qg,{name:"JoyModalClose",slot:"Root",overridesResolver:(e,t)=>t.root})(({ownerState:e,theme:t})=>{var n,i;return we({},e.size==="sm"&&{"--IconButton-size":"1.75rem"},e.size==="md"&&{"--IconButton-size":"2rem"},e.size==="lg"&&{"--IconButton-size":"2.25rem"},{position:"absolute",zIndex:1,top:"var(--ModalClose-inset, 0.625rem)",right:"var(--ModalClose-inset, 0.625rem)",borderRadius:`var(--ModalClose-radius, ${t.vars.radius.sm})`},!((i=(n=t.variants[e.variant])==null?void 0:n[e.color])!=null&&i.backgroundColor)&&{color:t.vars.palette.text.secondary})}),yZ={plain:"plain",outlined:"plain",soft:"soft",solid:"solid"},vZ=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyModalClose"}),{component:c="button",color:d="neutral",variant:p="plain",size:s="md",onClick:_,slots:S={},slotProps:E={}}=i,A=gn(i,pZ),I=q.useContext(tR),O=q.useContext(Y5),N=t.variant??yZ[O==null?void 0:O.variant]??p,$=t.color??(O==null?void 0:O.color)??d,K=q.useContext(Q5),W=t.size??K??s,{focusVisible:B,getRootProps:U}=$g(we({},i,{rootRef:n})),J=we({},i,{color:$,component:c,variant:N,size:W,focusVisible:B}),ee=mZ(J),[ye,Q]=xn("root",{ref:n,elementType:gZ,getSlotProps:U,externalForwardedProps:we({onClick:be=>{I==null||I(be,"closeClick"),_==null||_(be)}},A,{component:c,slots:S,slotProps:E}),className:ee.root,ownerState:J});return z.jsx(ye,we({},Q,{children:MP||(MP=z.jsx(R5,{}))}))}),Ix=vZ,_Z=["className","children","invertedColors","orientation","color","component","variant","size","layout","maxWidth","minWidth","slots","slotProps"],xZ=e=>{const{variant:t,color:n,size:i,layout:c}=e,d={root:["root",t&&`variant${Pn(t)}`,n&&`color${Pn(n)}`,i&&`size${Pn(i)}`,c&&`layout${Pn(c)}`]};return _i(d,wH,{})};function DP(e,t){var n,i;return t&&((n=e.breakpoints)!=null&&n.values[t])?`${(i=e.breakpoints)==null?void 0:i.values[t]}px`:t}const bZ=Yt(J5,{name:"JoyModalDialog",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>we({"--ModalDialog-minWidth":typeof t.minWidth=="number"?`${t.minWidth}px`:DP(e,t.minWidth),"--ModalDialog-maxWidth":typeof t.maxWidth=="number"?`${t.maxWidth}px`:DP(e,t.maxWidth),"--ModalClose-radius":"max((var(--Card-radius) - var(--variant-borderWidth, 0px)) - var(--ModalClose-inset), min(var(--ModalClose-inset) / 2, (var(--Card-radius) - var(--variant-borderWidth, 0px)) / 2))"},t.variant==="solid"&&{"--DialogContent-color":"currentColor"},t.size==="sm"&&{"--Card-padding":"1rem","--ModalDialog-titleOffset":e.spacing(.25),"--ModalDialog-descriptionOffset":e.spacing(.25),"--ModalClose-inset":"0.375rem"},t.size==="md"&&{"--Card-padding":"1.25rem","--ModalDialog-titleOffset":e.spacing(.25),"--ModalDialog-descriptionOffset":e.spacing(.75),"--ModalClose-inset":"0.5rem"},t.size==="lg"&&{"--Card-padding":"1.5rem","--ModalDialog-titleOffset":e.spacing(.5),"--ModalDialog-descriptionOffset":e.spacing(1),"--ModalClose-inset":"0.625rem"},{boxSizing:"border-box",boxShadow:e.shadow.md,minWidth:"min(calc(100vw - 2 * var(--Card-padding)), var(--ModalDialog-minWidth, 300px))",outline:0,position:"absolute"},t.layout==="fullscreen"&&{top:0,left:0,right:0,bottom:0,border:0,borderRadius:0},t.layout==="center"&&{top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"min(calc(100vw - 2 * var(--Card-padding)), var(--ModalDialog-maxWidth, 100vw))",maxHeight:"calc(100% - 2 * var(--Card-padding))"},{[`& [id="${t["aria-labelledby"]}"]`]:{"--Typography-margin":"calc(-1 * var(--ModalDialog-titleOffset)) 0 var(--ModalDialog-gap) 0","--Typography-fontSize":"1.125em",[`& + [id="${t["aria-describedby"]}"]`]:{"--unstable_ModalDialog-descriptionOffset":"calc(-1 * var(--ModalDialog-descriptionOffset))"}},[`& [id="${t["aria-describedby"]}"]`]:{"--Typography-fontSize":"1em","--Typography-margin":"var(--unstable_ModalDialog-descriptionOffset, var(--ModalDialog-gap)) 0 0 0","&:not(:last-child)":{"--Typography-margin":"var(--unstable_ModalDialog-descriptionOffset, var(--ModalDialog-gap)) 0 var(--ModalDialog-gap) 0"}}})),wZ=q.forwardRef(function(t,n){const i=zi({props:t,name:"JoyModalDialog"}),{className:c,children:d,invertedColors:p=!1,orientation:s="vertical",color:_="neutral",component:S="div",variant:E="outlined",size:A="md",layout:I="center",maxWidth:O,minWidth:N,slots:$={},slotProps:K={}}=i,W=gn(i,_Z),B=we({},i,{color:_,component:S,maxWidth:O,minWidth:N,layout:I,size:A,variant:E,invertedColors:p}),U=xZ(B),J=we({},W,{component:S,slots:$,slotProps:K}),ee=df(),ye=df(),Q=q.useMemo(()=>({variant:E,color:_,labelledBy:ee,describedBy:ye}),[_,E,ee,ye]),[be,re]=xn("root",{ref:n,className:Qa(U.root,c),elementType:bZ,externalForwardedProps:J,ownerState:B,additionalProps:{as:S,role:"dialog","aria-modal":"true","aria-labelledby":ee,"aria-describedby":ye}});return z.jsx(Q5.Provider,{value:A,children:z.jsx(Y5.Provider,{value:Q,children:z.jsx(be,we({},re,{children:q.Children.map(d,(Ie,Be)=>{if(!q.isValidElement(Ie))return Ie;const le={};if(ux(Ie,["Divider"])){le.inset="inset"in Ie.props?Ie.props.inset:"context";const xe=s==="vertical"?"horizontal":"vertical";le.orientation="orientation"in Ie.props?Ie.props.orientation:xe}return Be===0&&(le["data-first-child"]=""),Be===q.Children.count(d)-1&&(le["data-last-child"]=""),q.cloneElement(Ie,le)})}))})})}),iR=wZ;var $2={},zP=zf;$2.createRoot=zP.createRoot,$2.hydrateRoot=zP.hydrateRoot;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ei.apply(this,arguments)}var pi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(pi||(pi={}));const LP="popstate";function SZ(e){e===void 0&&(e={});function t(i,c){let{pathname:d,search:p,hash:s}=i.location;return Ag("",{pathname:d,search:p,hash:s},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(i,c){return typeof c=="string"?c:fd(c)}return TZ(t,n,null,e)}function $n(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ef(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function EZ(){return Math.random().toString(36).substr(2,8)}function RP(e,t){return{usr:e.state,key:e.key,idx:t}}function Ag(e,t,n,i){return n===void 0&&(n=null),ei({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Nl(t):t,{state:n,key:t&&t.key||i||EZ()})}function fd(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Nl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function TZ(e,t,n,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:d=!1}=i,p=c.history,s=pi.Pop,_=null,S=E();S==null&&(S=0,p.replaceState(ei({},p.state,{idx:S}),""));function E(){return(p.state||{idx:null}).idx}function A(){s=pi.Pop;let K=E(),W=K==null?null:K-S;S=K,_&&_({action:s,location:$.location,delta:W})}function I(K,W){s=pi.Push;let B=Ag($.location,K,W);n&&n(B,K),S=E()+1;let U=RP(B,S),J=$.createHref(B);try{p.pushState(U,"",J)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;c.location.assign(J)}d&&_&&_({action:s,location:$.location,delta:1})}function O(K,W){s=pi.Replace;let B=Ag($.location,K,W);n&&n(B,K),S=E();let U=RP(B,S),J=$.createHref(B);p.replaceState(U,"",J),d&&_&&_({action:s,location:$.location,delta:0})}function N(K){let W=c.location.origin!=="null"?c.location.origin:c.location.href,B=typeof K=="string"?K:fd(K);return B=B.replace(/ $/,"%20"),$n(W,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,W)}let $={get action(){return s},get location(){return e(c,p)},listen(K){if(_)throw new Error("A history only accepts one active listener");return c.addEventListener(LP,A),_=K,()=>{c.removeEventListener(LP,A),_=null}},createHref(K){return t(c,K)},createURL:N,encodeLocation(K){let W=N(K);return{pathname:W.pathname,search:W.search,hash:W.hash}},push:I,replace:O,go(K){return p.go(K)}};return $}var Wr;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Wr||(Wr={}));const CZ=new Set(["lazy","caseSensitive","path","id","index","children"]);function AZ(e){return e.index===!0}function V2(e,t,n,i){return n===void 0&&(n=[]),i===void 0&&(i={}),e.map((c,d)=>{let p=[...n,d],s=typeof c.id=="string"?c.id:p.join("-");if($n(c.index!==!0||!c.children,"Cannot specify children on an index route"),$n(!i[s],'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),AZ(c)){let _=ei({},c,t(c),{id:s});return i[s]=_,_}else{let _=ei({},c,t(c),{id:s,children:void 0});return i[s]=_,c.children&&(_.children=V2(c.children,t,p,i)),_}})}function Hh(e,t,n){n===void 0&&(n="/");let i=typeof t=="string"?Nl(t):t,c=Ka(i.pathname||"/",n);if(c==null)return null;let d=sR(e);kZ(d);let p=null;for(let s=0;p==null&&s<d.length;++s){let _=jZ(c);p=BZ(d[s],_)}return p}function oR(e,t){let{route:n,pathname:i,params:c}=e;return{id:n.id,pathname:i,params:c,data:t[n.id],handle:n.handle}}function sR(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let c=(d,p,s)=>{let _={relativePath:s===void 0?d.path||"":s,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};_.relativePath.startsWith("/")&&($n(_.relativePath.startsWith(i),'Absolute route path "'+_.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),_.relativePath=_.relativePath.slice(i.length));let S=Il([i,_.relativePath]),E=n.concat(_);d.children&&d.children.length>0&&($n(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+S+'".')),sR(d.children,t,E,S)),!(d.path==null&&!d.index)&&t.push({path:S,score:RZ(S,d.index),routesMeta:E})};return e.forEach((d,p)=>{var s;if(d.path===""||!((s=d.path)!=null&&s.includes("?")))c(d,p);else for(let _ of aR(d.path))c(d,p,_)}),t}function aR(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,c=n.endsWith("?"),d=n.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let p=aR(i.join("/")),s=[];return s.push(...p.map(_=>_===""?d:[d,_].join("/"))),c&&s.push(...p),s.map(_=>e.startsWith("/")&&_===""?"/":_)}function kZ(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:OZ(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const IZ=/^:[\w-]+$/,PZ=3,MZ=2,DZ=1,zZ=10,LZ=-2,OP=e=>e==="*";function RZ(e,t){let n=e.split("/"),i=n.length;return n.some(OP)&&(i+=LZ),t&&(i+=MZ),n.filter(c=>!OP(c)).reduce((c,d)=>c+(IZ.test(d)?PZ:d===""?DZ:zZ),i)}function OZ(e,t){return e.length===t.length&&e.slice(0,-1).every((i,c)=>i===t[c])?e[e.length-1]-t[t.length-1]:0}function BZ(e,t){let{routesMeta:n}=e,i={},c="/",d=[];for(let p=0;p<n.length;++p){let s=n[p],_=p===n.length-1,S=c==="/"?t:t.slice(c.length)||"/",E=U2({path:s.relativePath,caseSensitive:s.caseSensitive,end:_},S);if(!E)return null;Object.assign(i,E.params);let A=s.route;d.push({params:i,pathname:Il([c,E.pathname]),pathnameBase:VZ(Il([c,E.pathnameBase])),route:A}),E.pathnameBase!=="/"&&(c=Il([c,E.pathnameBase]))}return d}function U2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=FZ(e.path,e.caseSensitive,e.end),c=t.match(n);if(!c)return null;let d=c[0],p=d.replace(/(.)\/+$/,"$1"),s=c.slice(1);return{params:i.reduce((S,E,A)=>{let{paramName:I,isOptional:O}=E;if(I==="*"){let $=s[A]||"";p=d.slice(0,d.length-$.length).replace(/(.)\/+$/,"$1")}const N=s[A];return O&&!N?S[I]=void 0:S[I]=(N||"").replace(/%2F/g,"/"),S},{}),pathname:d,pathnameBase:p,pattern:e}}function FZ(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Ef(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(p,s,_)=>(i.push({paramName:s,isOptional:_!=null}),_?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),i]}function jZ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ef(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ka(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function NZ(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:c=""}=typeof e=="string"?Nl(e):e;return{pathname:n?n.startsWith("/")?n:$Z(n,t):t,search:UZ(i),hash:WZ(c)}}function $Z(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?n.length>1&&n.pop():c!=="."&&n.push(c)}),n.length>1?n.join("/"):"/"}function fw(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lR(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function KE(e,t){let n=lR(e);return t?n.map((i,c)=>c===e.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function XE(e,t,n,i){i===void 0&&(i=!1);let c;typeof e=="string"?c=Nl(e):(c=ei({},e),$n(!c.pathname||!c.pathname.includes("?"),fw("?","pathname","search",c)),$n(!c.pathname||!c.pathname.includes("#"),fw("#","pathname","hash",c)),$n(!c.search||!c.search.includes("#"),fw("#","search","hash",c)));let d=e===""||c.pathname==="",p=d?"/":c.pathname,s;if(p==null)s=n;else{let A=t.length-1;if(!i&&p.startsWith("..")){let I=p.split("/");for(;I[0]==="..";)I.shift(),A-=1;c.pathname=I.join("/")}s=A>=0?t[A]:"/"}let _=NZ(c,s),S=p&&p!=="/"&&p.endsWith("/"),E=(d||p===".")&&n.endsWith("/");return!_.pathname.endsWith("/")&&(S||E)&&(_.pathname+="/"),_}const Il=e=>e.join("/").replace(/\/\/+/g,"/"),VZ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),UZ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,WZ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class JE{constructor(t,n,i,c){c===void 0&&(c=!1),this.status=t,this.statusText=n||"",this.internal=c,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function YE(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const cR=["post","put","patch","delete"],GZ=new Set(cR),HZ=["get",...cR],ZZ=new Set(HZ),qZ=new Set([301,302,303,307,308]),KZ=new Set([307,308]),pw={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},XZ={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bm={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},QE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JZ=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),uR="remix-router-transitions";function YZ(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",i=!n;$n(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let c;if(e.mapRouteProperties)c=e.mapRouteProperties;else if(e.detectErrorBoundary){let ae=e.detectErrorBoundary;c=fe=>({hasErrorBoundary:ae(fe)})}else c=JZ;let d={},p=V2(e.routes,c,void 0,d),s,_=e.basename||"/",S=e.unstable_dataStrategy||nq,E=ei({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},e.future),A=null,I=new Set,O=null,N=null,$=null,K=e.hydrationData!=null,W=Hh(p,e.history.location,_),B=null;if(W==null){let ae=Is(404,{pathname:e.history.location.pathname}),{matches:fe,route:de}=HP(p);W=fe,B={[de.id]:ae}}let U,J=W.some(ae=>ae.route.lazy),ee=W.some(ae=>ae.route.loader);if(J)U=!1;else if(!ee)U=!0;else if(E.v7_partialHydration){let ae=e.hydrationData?e.hydrationData.loaderData:null,fe=e.hydrationData?e.hydrationData.errors:null,de=De=>De.route.loader?typeof De.route.loader=="function"&&De.route.loader.hydrate===!0?!1:ae&&ae[De.route.id]!==void 0||fe&&fe[De.route.id]!==void 0:!0;if(fe){let De=W.findIndex(He=>fe[He.route.id]!==void 0);U=W.slice(0,De+1).every(de)}else U=W.every(de)}else U=e.hydrationData!=null;let ye,Q={historyAction:e.history.action,location:e.history.location,matches:W,initialized:U,navigation:pw,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||B,fetchers:new Map,blockers:new Map},be=pi.Pop,re=!1,Ie,Be=!1,le=new Map,xe=null,Se=!1,oe=!1,te=[],Ce=[],ve=new Map,Fe=0,Ge=-1,rt=new Map,Ct=new Set,It=new Map,Pt=new Map,Kt=new Set,nn=new Map,an=new Map,ct=!1;function Vt(){if(A=e.history.listen(ae=>{let{action:fe,location:de,delta:De}=ae;if(ct){ct=!1;return}Ef(an.size===0||De!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let He=Xo({currentLocation:Q.location,nextLocation:de,historyAction:fe});if(He&&De!=null){ct=!0,e.history.go(De*-1),Li(He,{state:"blocked",location:de,proceed(){Li(He,{state:"proceeding",proceed:void 0,reset:void 0,location:de}),e.history.go(De)},reset(){let at=new Map(Q.blockers);at.set(He,bm),pn({blockers:at})}});return}return Ut(fe,de)}),n){pq(t,le);let ae=()=>mq(t,le);t.addEventListener("pagehide",ae),xe=()=>t.removeEventListener("pagehide",ae)}return Q.initialized||Ut(pi.Pop,Q.location,{initialHydration:!0}),ye}function ln(){A&&A(),xe&&xe(),I.clear(),Ie&&Ie.abort(),Q.fetchers.forEach((ae,fe)=>Mn(fe)),Q.blockers.forEach((ae,fe)=>jr(fe))}function zt(ae){return I.add(ae),()=>I.delete(ae)}function pn(ae,fe){fe===void 0&&(fe={}),Q=ei({},Q,ae);let de=[],De=[];E.v7_fetcherPersist&&Q.fetchers.forEach((He,at)=>{He.state==="idle"&&(Kt.has(at)?De.push(at):de.push(at))}),[...I].forEach(He=>He(Q,{deletedFetchers:De,unstable_viewTransitionOpts:fe.viewTransitionOpts,unstable_flushSync:fe.flushSync===!0})),E.v7_fetcherPersist&&(de.forEach(He=>Q.fetchers.delete(He)),De.forEach(He=>Mn(He)))}function Kn(ae,fe,de){var De,He;let{flushSync:at}=de===void 0?{}:de,Qe=Q.actionData!=null&&Q.navigation.formMethod!=null&&ma(Q.navigation.formMethod)&&Q.navigation.state==="loading"&&((De=ae.state)==null?void 0:De._isRedirect)!==!0,vt;fe.actionData?Object.keys(fe.actionData).length>0?vt=fe.actionData:vt=null:Qe?vt=Q.actionData:vt=null;let Lt=fe.loaderData?WP(Q.loaderData,fe.loaderData,fe.matches||[],fe.errors):Q.loaderData,Mt=Q.blockers;Mt.size>0&&(Mt=new Map(Mt),Mt.forEach((qt,wn)=>Mt.set(wn,bm)));let Xt=re===!0||Q.navigation.formMethod!=null&&ma(Q.navigation.formMethod)&&((He=ae.state)==null?void 0:He._isRedirect)!==!0;s&&(p=s,s=void 0),Se||be===pi.Pop||(be===pi.Push?e.history.push(ae,ae.state):be===pi.Replace&&e.history.replace(ae,ae.state));let cn;if(be===pi.Pop){let qt=le.get(Q.location.pathname);qt&&qt.has(ae.pathname)?cn={currentLocation:Q.location,nextLocation:ae}:le.has(ae.pathname)&&(cn={currentLocation:ae,nextLocation:Q.location})}else if(Be){let qt=le.get(Q.location.pathname);qt?qt.add(ae.pathname):(qt=new Set([ae.pathname]),le.set(Q.location.pathname,qt)),cn={currentLocation:Q.location,nextLocation:ae}}pn(ei({},fe,{actionData:vt,loaderData:Lt,historyAction:be,location:ae,initialized:!0,navigation:pw,revalidation:"idle",restoreScrollPosition:ze(ae,fe.matches||Q.matches),preventScrollReset:Xt,blockers:Mt}),{viewTransitionOpts:cn,flushSync:at===!0}),be=pi.Pop,re=!1,Be=!1,Se=!1,oe=!1,te=[],Ce=[]}async function Fr(ae,fe){if(typeof ae=="number"){e.history.go(ae);return}let de=W2(Q.location,Q.matches,_,E.v7_prependBasename,ae,E.v7_relativeSplatPath,fe==null?void 0:fe.fromRouteId,fe==null?void 0:fe.relative),{path:De,submission:He,error:at}=BP(E.v7_normalizeFormMethod,!1,de,fe),Qe=Q.location,vt=Ag(Q.location,De,fe&&fe.state);vt=ei({},vt,e.history.encodeLocation(vt));let Lt=fe&&fe.replace!=null?fe.replace:void 0,Mt=pi.Push;Lt===!0?Mt=pi.Replace:Lt===!1||He!=null&&ma(He.formMethod)&&He.formAction===Q.location.pathname+Q.location.search&&(Mt=pi.Replace);let Xt=fe&&"preventScrollReset"in fe?fe.preventScrollReset===!0:void 0,cn=(fe&&fe.unstable_flushSync)===!0,qt=Xo({currentLocation:Qe,nextLocation:vt,historyAction:Mt});if(qt){Li(qt,{state:"blocked",location:vt,proceed(){Li(qt,{state:"proceeding",proceed:void 0,reset:void 0,location:vt}),Fr(ae,fe)},reset(){let wn=new Map(Q.blockers);wn.set(qt,bm),pn({blockers:wn})}});return}return await Ut(Mt,vt,{submission:He,pendingError:at,preventScrollReset:Xt,replace:fe&&fe.replace,enableViewTransition:fe&&fe.unstable_viewTransition,flushSync:cn})}function mn(){if(vn(),pn({revalidation:"loading"}),Q.navigation.state!=="submitting"){if(Q.navigation.state==="idle"){Ut(Q.historyAction,Q.location,{startUninterruptedRevalidation:!0});return}Ut(be||Q.historyAction,Q.navigation.location,{overrideNavigation:Q.navigation})}}async function Ut(ae,fe,de){Ie&&Ie.abort(),Ie=null,be=ae,Se=(de&&de.startUninterruptedRevalidation)===!0,Te(Q.location,Q.matches),re=(de&&de.preventScrollReset)===!0,Be=(de&&de.enableViewTransition)===!0;let De=s||p,He=de&&de.overrideNavigation,at=Hh(De,fe,_),Qe=(de&&de.flushSync)===!0;if(!at){let qt=Is(404,{pathname:fe.pathname}),{matches:wn,route:jn}=HP(De);ke(),Kn(fe,{matches:wn,loaderData:{},errors:{[jn.id]:qt}},{flushSync:Qe});return}if(Q.initialized&&!oe&&lq(Q.location,fe)&&!(de&&de.submission&&ma(de.submission.formMethod))){Kn(fe,{matches:at},{flushSync:Qe});return}Ie=new AbortController;let vt=Th(e.history,fe,Ie.signal,de&&de.submission),Lt;if(de&&de.pendingError)Lt=[Hm(at).route.id,{type:Wr.error,error:de.pendingError}];else if(de&&de.submission&&ma(de.submission.formMethod)){let qt=await Vi(vt,fe,de.submission,at,{replace:de.replace,flushSync:Qe});if(qt.shortCircuited)return;Lt=qt.pendingActionResult,He=mw(fe,de.submission),Qe=!1,vt=Th(e.history,vt.url,vt.signal)}let{shortCircuited:Mt,loaderData:Xt,errors:cn}=await Le(vt,fe,at,He,de&&de.submission,de&&de.fetcherSubmission,de&&de.replace,de&&de.initialHydration===!0,Qe,Lt);Mt||(Ie=null,Kn(fe,ei({matches:at},GP(Lt),{loaderData:Xt,errors:cn})))}async function Vi(ae,fe,de,De,He){He===void 0&&(He={}),vn();let at=hq(fe,de);pn({navigation:at},{flushSync:He.flushSync===!0});let Qe,vt=H2(De,fe);if(!vt.route.action&&!vt.route.lazy)Qe={type:Wr.error,error:Is(405,{method:ae.method,pathname:fe.pathname,routeId:vt.route.id})};else if(Qe=(await yt("action",ae,[vt],De))[0],ae.signal.aborted)return{shortCircuited:!0};if(Ju(Qe)){let Lt;return He&&He.replace!=null?Lt=He.replace:Lt=$P(Qe.response.headers.get("Location"),new URL(ae.url),_)===Q.location.pathname+Q.location.search,await kt(ae,Qe,{submission:de,replace:Lt}),{shortCircuited:!0}}if(Xu(Qe))throw Is(400,{type:"defer-action"});if(Ls(Qe)){let Lt=Hm(De,vt.route.id);return(He&&He.replace)!==!0&&(be=pi.Push),{pendingActionResult:[Lt.route.id,Qe]}}return{pendingActionResult:[vt.route.id,Qe]}}async function Le(ae,fe,de,De,He,at,Qe,vt,Lt,Mt){let Xt=De||mw(fe,He),cn=He||at||KP(Xt),qt=s||p,[wn,jn]=FP(e.history,Q,de,cn,fe,E.v7_partialHydration&&vt===!0,E.unstable_skipActionErrorRevalidation,oe,te,Ce,Kt,It,Ct,qt,_,Mt);if(ke(Dn=>!(de&&de.some(Qt=>Qt.route.id===Dn))||wn&&wn.some(Qt=>Qt.route.id===Dn)),Ge=++Fe,wn.length===0&&jn.length===0){let Dn=Qn();return Kn(fe,ei({matches:de,loaderData:{},errors:Mt&&Ls(Mt[1])?{[Mt[0]]:Mt[1].error}:null},GP(Mt),Dn?{fetchers:new Map(Q.fetchers)}:{}),{flushSync:Lt}),{shortCircuited:!0}}if(!Se&&(!E.v7_partialHydration||!vt)){jn.forEach(Qt=>{let nr=Q.fetchers.get(Qt.key),zn=wm(void 0,nr?nr.data:void 0);Q.fetchers.set(Qt.key,zn)});let Dn;Mt&&!Ls(Mt[1])?Dn={[Mt[0]]:Mt[1].data}:Q.actionData&&(Object.keys(Q.actionData).length===0?Dn=null:Dn=Q.actionData),pn(ei({navigation:Xt},Dn!==void 0?{actionData:Dn}:{},jn.length>0?{fetchers:new Map(Q.fetchers)}:{}),{flushSync:Lt})}jn.forEach(Dn=>{ve.has(Dn.key)&&Er(Dn.key),Dn.controller&&ve.set(Dn.key,Dn.controller)});let er=()=>jn.forEach(Dn=>Er(Dn.key));Ie&&Ie.signal.addEventListener("abort",er);let{loaderResults:ut,fetcherResults:it}=await Zt(Q.matches,de,wn,jn,ae);if(ae.signal.aborted)return{shortCircuited:!0};Ie&&Ie.signal.removeEventListener("abort",er),jn.forEach(Dn=>ve.delete(Dn.key));let Bt=ZP([...ut,...it]);if(Bt){if(Bt.idx>=wn.length){let Dn=jn[Bt.idx-wn.length].key;Ct.add(Dn)}return await kt(ae,Bt.result,{replace:Qe}),{shortCircuited:!0}}let{loaderData:hn,errors:kn}=UP(Q,de,wn,ut,Mt,jn,it,nn);nn.forEach((Dn,Qt)=>{Dn.subscribe(nr=>{(nr||Dn.done)&&nn.delete(Qt)})}),E.v7_partialHydration&&vt&&Q.errors&&Object.entries(Q.errors).filter(Dn=>{let[Qt]=Dn;return!wn.some(nr=>nr.route.id===Qt)}).forEach(Dn=>{let[Qt,nr]=Dn;kn=Object.assign(kn||{},{[Qt]:nr})});let yr=Qn(),un=Xn(Ge),Nr=yr||un||jn.length>0;return ei({loaderData:hn,errors:kn},Nr?{fetchers:new Map(Q.fetchers)}:{})}function Ke(ae,fe,de,De){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ve.has(ae)&&Er(ae);let He=(De&&De.unstable_flushSync)===!0,at=s||p,Qe=W2(Q.location,Q.matches,_,E.v7_prependBasename,de,E.v7_relativeSplatPath,fe,De==null?void 0:De.relative),vt=Hh(at,Qe,_);if(!vt){bn(ae,fe,Is(404,{pathname:Qe}),{flushSync:He});return}let{path:Lt,submission:Mt,error:Xt}=BP(E.v7_normalizeFormMethod,!0,Qe,De);if(Xt){bn(ae,fe,Xt,{flushSync:He});return}let cn=H2(vt,Lt);if(re=(De&&De.preventScrollReset)===!0,Mt&&ma(Mt.formMethod)){et(ae,fe,Lt,cn,vt,He,Mt);return}It.set(ae,{routeId:fe,path:Lt}),Ot(ae,fe,Lt,cn,vt,He,Mt)}async function et(ae,fe,de,De,He,at,Qe){if(vn(),It.delete(ae),!De.route.action&&!De.route.lazy){let zn=Is(405,{method:Qe.formMethod,pathname:de,routeId:fe});bn(ae,fe,zn,{flushSync:at});return}let vt=Q.fetchers.get(ae);Rn(ae,fq(Qe,vt),{flushSync:at});let Lt=new AbortController,Mt=Th(e.history,de,Lt.signal,Qe);ve.set(ae,Lt);let Xt=Fe,qt=(await yt("action",Mt,[De],He))[0];if(Mt.signal.aborted){ve.get(ae)===Lt&&ve.delete(ae);return}if(E.v7_fetcherPersist&&Kt.has(ae)){if(Ju(qt)||Ls(qt)){Rn(ae,vc(void 0));return}}else{if(Ju(qt))if(ve.delete(ae),Ge>Xt){Rn(ae,vc(void 0));return}else return Ct.add(ae),Rn(ae,wm(Qe)),kt(Mt,qt,{fetcherSubmission:Qe});if(Ls(qt)){bn(ae,fe,qt.error);return}}if(Xu(qt))throw Is(400,{type:"defer-action"});let wn=Q.navigation.location||Q.location,jn=Th(e.history,wn,Lt.signal),er=s||p,ut=Q.navigation.state!=="idle"?Hh(er,Q.navigation.location,_):Q.matches;$n(ut,"Didn't find any matches after fetcher action");let it=++Fe;rt.set(ae,it);let Bt=wm(Qe,qt.data);Q.fetchers.set(ae,Bt);let[hn,kn]=FP(e.history,Q,ut,Qe,wn,!1,E.unstable_skipActionErrorRevalidation,oe,te,Ce,Kt,It,Ct,er,_,[De.route.id,qt]);kn.filter(zn=>zn.key!==ae).forEach(zn=>{let Dr=zn.key,io=Q.fetchers.get(Dr),el=wm(void 0,io?io.data:void 0);Q.fetchers.set(Dr,el),ve.has(Dr)&&Er(Dr),zn.controller&&ve.set(Dr,zn.controller)}),pn({fetchers:new Map(Q.fetchers)});let yr=()=>kn.forEach(zn=>Er(zn.key));Lt.signal.addEventListener("abort",yr);let{loaderResults:un,fetcherResults:Nr}=await Zt(Q.matches,ut,hn,kn,jn);if(Lt.signal.aborted)return;Lt.signal.removeEventListener("abort",yr),rt.delete(ae),ve.delete(ae),kn.forEach(zn=>ve.delete(zn.key));let Dn=ZP([...un,...Nr]);if(Dn){if(Dn.idx>=hn.length){let zn=kn[Dn.idx-hn.length].key;Ct.add(zn)}return kt(jn,Dn.result)}let{loaderData:Qt,errors:nr}=UP(Q,Q.matches,hn,un,void 0,kn,Nr,nn);if(Q.fetchers.has(ae)){let zn=vc(qt.data);Q.fetchers.set(ae,zn)}Xn(it),Q.navigation.state==="loading"&&it>Ge?($n(be,"Expected pending action"),Ie&&Ie.abort(),Kn(Q.navigation.location,{matches:ut,loaderData:Qt,errors:nr,fetchers:new Map(Q.fetchers)})):(pn({errors:nr,loaderData:WP(Q.loaderData,Qt,ut,nr),fetchers:new Map(Q.fetchers)}),oe=!1)}async function Ot(ae,fe,de,De,He,at,Qe){let vt=Q.fetchers.get(ae);Rn(ae,wm(Qe,vt?vt.data:void 0),{flushSync:at});let Lt=new AbortController,Mt=Th(e.history,de,Lt.signal);ve.set(ae,Lt);let Xt=Fe,qt=(await yt("loader",Mt,[De],He))[0];if(Xu(qt)&&(qt=await pR(qt,Mt.signal,!0)||qt),ve.get(ae)===Lt&&ve.delete(ae),!Mt.signal.aborted){if(Kt.has(ae)){Rn(ae,vc(void 0));return}if(Ju(qt))if(Ge>Xt){Rn(ae,vc(void 0));return}else{Ct.add(ae),await kt(Mt,qt);return}if(Ls(qt)){bn(ae,fe,qt.error);return}$n(!Xu(qt),"Unhandled fetcher deferred data"),Rn(ae,vc(qt.data))}}async function kt(ae,fe,de){let{submission:De,fetcherSubmission:He,replace:at}=de===void 0?{}:de;fe.response.headers.has("X-Remix-Revalidate")&&(oe=!0);let Qe=fe.response.headers.get("Location");$n(Qe,"Expected a Location header on the redirect Response"),Qe=$P(Qe,new URL(ae.url),_);let vt=Ag(Q.location,Qe,{_isRedirect:!0});if(n){let wn=!1;if(fe.response.headers.has("X-Remix-Reload-Document"))wn=!0;else if(QE.test(Qe)){const jn=e.history.createURL(Qe);wn=jn.origin!==t.location.origin||Ka(jn.pathname,_)==null}if(wn){at?t.location.replace(Qe):t.location.assign(Qe);return}}Ie=null;let Lt=at===!0?pi.Replace:pi.Push,{formMethod:Mt,formAction:Xt,formEncType:cn}=Q.navigation;!De&&!He&&Mt&&Xt&&cn&&(De=KP(Q.navigation));let qt=De||He;if(KZ.has(fe.response.status)&&qt&&ma(qt.formMethod))await Ut(Lt,vt,{submission:ei({},qt,{formAction:Qe}),preventScrollReset:re});else{let wn=mw(vt,De);await Ut(Lt,vt,{overrideNavigation:wn,fetcherSubmission:He,preventScrollReset:re})}}async function yt(ae,fe,de,De){try{let He=await rq(S,ae,fe,de,De,d,c);return await Promise.all(He.map((at,Qe)=>{if(cq(at)){let vt=at.result;return{type:Wr.redirect,response:sq(vt,fe,de[Qe].route.id,De,_,E.v7_relativeSplatPath)}}return oq(at)}))}catch(He){return de.map(()=>({type:Wr.error,error:He}))}}async function Zt(ae,fe,de,De,He){let[at,...Qe]=await Promise.all([de.length?yt("loader",He,de,fe):[],...De.map(vt=>{if(vt.matches&&vt.match&&vt.controller){let Lt=Th(e.history,vt.path,vt.controller.signal);return yt("loader",Lt,[vt.match],vt.matches).then(Mt=>Mt[0])}else return Promise.resolve({type:Wr.error,error:Is(404,{pathname:vt.path})})})]);return await Promise.all([qP(ae,de,at,at.map(()=>He.signal),!1,Q.loaderData),qP(ae,De.map(vt=>vt.match),Qe,De.map(vt=>vt.controller?vt.controller.signal:null),!0)]),{loaderResults:at,fetcherResults:Qe}}function vn(){oe=!0,te.push(...ke()),It.forEach((ae,fe)=>{ve.has(fe)&&(Ce.push(fe),Er(fe))})}function Rn(ae,fe,de){de===void 0&&(de={}),Q.fetchers.set(ae,fe),pn({fetchers:new Map(Q.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function bn(ae,fe,de,De){De===void 0&&(De={});let He=Hm(Q.matches,fe);Mn(ae),pn({errors:{[He.route.id]:de},fetchers:new Map(Q.fetchers)},{flushSync:(De&&De.flushSync)===!0})}function _n(ae){return E.v7_fetcherPersist&&(Pt.set(ae,(Pt.get(ae)||0)+1),Kt.has(ae)&&Kt.delete(ae)),Q.fetchers.get(ae)||XZ}function Mn(ae){let fe=Q.fetchers.get(ae);ve.has(ae)&&!(fe&&fe.state==="loading"&&rt.has(ae))&&Er(ae),It.delete(ae),rt.delete(ae),Ct.delete(ae),Kt.delete(ae),Q.fetchers.delete(ae)}function Sr(ae){if(E.v7_fetcherPersist){let fe=(Pt.get(ae)||0)-1;fe<=0?(Pt.delete(ae),Kt.add(ae)):Pt.set(ae,fe)}else Mn(ae);pn({fetchers:new Map(Q.fetchers)})}function Er(ae){let fe=ve.get(ae);$n(fe,"Expected fetch controller: "+ae),fe.abort(),ve.delete(ae)}function Si(ae){for(let fe of ae){let de=_n(fe),De=vc(de.data);Q.fetchers.set(fe,De)}}function Qn(){let ae=[],fe=!1;for(let de of Ct){let De=Q.fetchers.get(de);$n(De,"Expected fetcher: "+de),De.state==="loading"&&(Ct.delete(de),ae.push(de),fe=!0)}return Si(ae),fe}function Xn(ae){let fe=[];for(let[de,De]of rt)if(De<ae){let He=Q.fetchers.get(de);$n(He,"Expected fetcher: "+de),He.state==="loading"&&(Er(de),rt.delete(de),fe.push(de))}return Si(fe),fe.length>0}function Gn(ae,fe){let de=Q.blockers.get(ae)||bm;return an.get(ae)!==fe&&an.set(ae,fe),de}function jr(ae){Q.blockers.delete(ae),an.delete(ae)}function Li(ae,fe){let de=Q.blockers.get(ae)||bm;$n(de.state==="unblocked"&&fe.state==="blocked"||de.state==="blocked"&&fe.state==="blocked"||de.state==="blocked"&&fe.state==="proceeding"||de.state==="blocked"&&fe.state==="unblocked"||de.state==="proceeding"&&fe.state==="unblocked","Invalid blocker state transition: "+de.state+" -> "+fe.state);let De=new Map(Q.blockers);De.set(ae,fe),pn({blockers:De})}function Xo(ae){let{currentLocation:fe,nextLocation:de,historyAction:De}=ae;if(an.size===0)return;an.size>1&&Ef(!1,"A router only supports one blocker at a time");let He=Array.from(an.entries()),[at,Qe]=He[He.length-1],vt=Q.blockers.get(at);if(!(vt&&vt.state==="proceeding")&&Qe({currentLocation:fe,nextLocation:de,historyAction:De}))return at}function ke(ae){let fe=[];return nn.forEach((de,De)=>{(!ae||ae(De))&&(de.cancel(),fe.push(De),nn.delete(De))}),fe}function Y(ae,fe,de){if(O=ae,$=fe,N=de||null,!K&&Q.navigation===pw){K=!0;let De=ze(Q.location,Q.matches);De!=null&&pn({restoreScrollPosition:De})}return()=>{O=null,$=null,N=null}}function ne(ae,fe){return N&&N(ae,fe.map(De=>oR(De,Q.loaderData)))||ae.key}function Te(ae,fe){if(O&&$){let de=ne(ae,fe);O[de]=$()}}function ze(ae,fe){if(O){let de=ne(ae,fe),De=O[de];if(typeof De=="number")return De}return null}function Ve(ae){d={},s=V2(ae,c,void 0,d)}return ye={get basename(){return _},get future(){return E},get state(){return Q},get routes(){return p},get window(){return t},initialize:Vt,subscribe:zt,enableScrollRestoration:Y,navigate:Fr,fetch:Ke,revalidate:mn,createHref:ae=>e.history.createHref(ae),encodeLocation:ae=>e.history.encodeLocation(ae),getFetcher:_n,deleteFetcher:Sr,dispose:ln,getBlocker:Gn,deleteBlocker:jr,_internalFetchControllers:ve,_internalActiveDeferreds:nn,_internalSetRoutes:Ve},ye}function QZ(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function W2(e,t,n,i,c,d,p,s){let _,S;if(p){_=[];for(let A of t)if(_.push(A),A.route.id===p){S=A;break}}else _=t,S=t[t.length-1];let E=XE(c||".",KE(_,d),Ka(e.pathname,n)||e.pathname,s==="path");return c==null&&(E.search=e.search,E.hash=e.hash),(c==null||c===""||c===".")&&S&&S.route.index&&!eT(E.search)&&(E.search=E.search?E.search.replace(/^\?/,"?index&"):"?index"),i&&n!=="/"&&(E.pathname=E.pathname==="/"?n:Il([n,E.pathname])),fd(E)}function BP(e,t,n,i){if(!i||!QZ(i))return{path:n};if(i.formMethod&&!dq(i.formMethod))return{path:n,error:Is(405,{method:i.formMethod})};let c=()=>({path:n,error:Is(400,{type:"invalid-body"})}),d=i.formMethod||"get",p=e?d.toUpperCase():d.toLowerCase(),s=hR(n);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!ma(p))return c();let I=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((O,N)=>{let[$,K]=N;return""+O+$+"="+K+`
`},""):String(i.body);return{path:n,submission:{formMethod:p,formAction:s,formEncType:i.formEncType,formData:void 0,json:void 0,text:I}}}else if(i.formEncType==="application/json"){if(!ma(p))return c();try{let I=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:n,submission:{formMethod:p,formAction:s,formEncType:i.formEncType,formData:void 0,json:I,text:void 0}}}catch{return c()}}}$n(typeof FormData=="function","FormData is not available in this environment");let _,S;if(i.formData)_=G2(i.formData),S=i.formData;else if(i.body instanceof FormData)_=G2(i.body),S=i.body;else if(i.body instanceof URLSearchParams)_=i.body,S=VP(_);else if(i.body==null)_=new URLSearchParams,S=new FormData;else try{_=new URLSearchParams(i.body),S=VP(_)}catch{return c()}let E={formMethod:p,formAction:s,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:S,json:void 0,text:void 0};if(ma(E.formMethod))return{path:n,submission:E};let A=Nl(n);return t&&A.search&&eT(A.search)&&_.append("index",""),A.search="?"+_,{path:fd(A),submission:E}}function eq(e,t){let n=e;if(t){let i=e.findIndex(c=>c.route.id===t);i>=0&&(n=e.slice(0,i))}return n}function FP(e,t,n,i,c,d,p,s,_,S,E,A,I,O,N,$){let K=$?Ls($[1])?$[1].error:$[1].data:void 0,W=e.createURL(t.location),B=e.createURL(c),U=$&&Ls($[1])?$[0]:void 0,J=U?eq(n,U):n,ee=$?$[1].statusCode:void 0,ye=p&&ee&&ee>=400,Q=J.filter((re,Ie)=>{let{route:Be}=re;if(Be.lazy)return!0;if(Be.loader==null)return!1;if(d)return typeof Be.loader!="function"||Be.loader.hydrate?!0:t.loaderData[Be.id]===void 0&&(!t.errors||t.errors[Be.id]===void 0);if(tq(t.loaderData,t.matches[Ie],re)||_.some(Se=>Se===re.route.id))return!0;let le=t.matches[Ie],xe=re;return jP(re,ei({currentUrl:W,currentParams:le.params,nextUrl:B,nextParams:xe.params},i,{actionResult:K,unstable_actionStatus:ee,defaultShouldRevalidate:ye?!1:s||W.pathname+W.search===B.pathname+B.search||W.search!==B.search||dR(le,xe)}))}),be=[];return A.forEach((re,Ie)=>{if(d||!n.some(oe=>oe.route.id===re.routeId)||E.has(Ie))return;let Be=Hh(O,re.path,N);if(!Be){be.push({key:Ie,routeId:re.routeId,path:re.path,matches:null,match:null,controller:null});return}let le=t.fetchers.get(Ie),xe=H2(Be,re.path),Se=!1;I.has(Ie)?Se=!1:S.includes(Ie)?Se=!0:le&&le.state!=="idle"&&le.data===void 0?Se=s:Se=jP(xe,ei({currentUrl:W,currentParams:t.matches[t.matches.length-1].params,nextUrl:B,nextParams:n[n.length-1].params},i,{actionResult:K,unstable_actionStatus:ee,defaultShouldRevalidate:ye?!1:s})),Se&&be.push({key:Ie,routeId:re.routeId,path:re.path,matches:Be,match:xe,controller:new AbortController})}),[Q,be]}function tq(e,t,n){let i=!t||n.route.id!==t.route.id,c=e[n.route.id]===void 0;return i||c}function dR(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function jP(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function NP(e,t,n){if(!e.lazy)return;let i=await e.lazy();if(!e.lazy)return;let c=n[e.id];$n(c,"No route found in manifest");let d={};for(let p in i){let _=c[p]!==void 0&&p!=="hasErrorBoundary";Ef(!_,'Route "'+c.id+'" has a static property "'+p+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+p+'" will be ignored.')),!_&&!CZ.has(p)&&(d[p]=i[p])}Object.assign(c,d),Object.assign(c,ei({},t(c),{lazy:void 0}))}function nq(e){return Promise.all(e.matches.map(t=>t.resolve()))}async function rq(e,t,n,i,c,d,p,s){let _=i.reduce((A,I)=>A.add(I.route.id),new Set),S=new Set,E=await e({matches:c.map(A=>{let I=_.has(A.route.id);return ei({},A,{shouldLoad:I,resolve:N=>(S.add(A.route.id),I?iq(t,n,A,d,p,N,s):Promise.resolve({type:Wr.data,result:void 0}))})}),request:n,params:c[0].params,context:s});return c.forEach(A=>$n(S.has(A.route.id),'`match.resolve()` was not called for route id "'+A.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),E.filter((A,I)=>_.has(c[I].route.id))}async function iq(e,t,n,i,c,d,p){let s,_,S=E=>{let A,I=new Promise(($,K)=>A=K);_=()=>A(),t.signal.addEventListener("abort",_);let O=$=>typeof E!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):E({request:t,params:n.params,context:p},...$!==void 0?[$]:[]),N;return d?N=d($=>O($)):N=(async()=>{try{return{type:"data",result:await O()}}catch($){return{type:"error",result:$}}})(),Promise.race([N,I])};try{let E=n.route[e];if(n.route.lazy)if(E){let A,[I]=await Promise.all([S(E).catch(O=>{A=O}),NP(n.route,c,i)]);if(A!==void 0)throw A;s=I}else if(await NP(n.route,c,i),E=n.route[e],E)s=await S(E);else if(e==="action"){let A=new URL(t.url),I=A.pathname+A.search;throw Is(405,{method:t.method,pathname:I,routeId:n.route.id})}else return{type:Wr.data,result:void 0};else if(E)s=await S(E);else{let A=new URL(t.url),I=A.pathname+A.search;throw Is(404,{pathname:I})}$n(s.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(E){return{type:Wr.error,result:E}}finally{_&&t.signal.removeEventListener("abort",_)}return s}async function oq(e){let{result:t,type:n,status:i}=e;if(fR(t)){let p;try{let s=t.headers.get("Content-Type");s&&/\bapplication\/json\b/.test(s)?t.body==null?p=null:p=await t.json():p=await t.text()}catch(s){return{type:Wr.error,error:s}}return n===Wr.error?{type:Wr.error,error:new JE(t.status,t.statusText,p),statusCode:t.status,headers:t.headers}:{type:Wr.data,data:p,statusCode:t.status,headers:t.headers}}if(n===Wr.error)return{type:Wr.error,error:t,statusCode:YE(t)?t.status:i};if(uq(t)){var c,d;return{type:Wr.deferred,deferredData:t,statusCode:(c=t.init)==null?void 0:c.status,headers:((d=t.init)==null?void 0:d.headers)&&new Headers(t.init.headers)}}return{type:Wr.data,data:t,statusCode:i}}function sq(e,t,n,i,c,d){let p=e.headers.get("Location");if($n(p,"Redirects returned/thrown from loaders/actions must have a Location header"),!QE.test(p)){let s=i.slice(0,i.findIndex(_=>_.route.id===n)+1);p=W2(new URL(t.url),s,c,!0,p,d),e.headers.set("Location",p)}return e}function $P(e,t,n){if(QE.test(e)){let i=e,c=i.startsWith("//")?new URL(t.protocol+i):new URL(i),d=Ka(c.pathname,n)!=null;if(c.origin===t.origin&&d)return c.pathname+c.search+c.hash}return e}function Th(e,t,n,i){let c=e.createURL(hR(t)).toString(),d={signal:n};if(i&&ma(i.formMethod)){let{formMethod:p,formEncType:s}=i;d.method=p.toUpperCase(),s==="application/json"?(d.headers=new Headers({"Content-Type":s}),d.body=JSON.stringify(i.json)):s==="text/plain"?d.body=i.text:s==="application/x-www-form-urlencoded"&&i.formData?d.body=G2(i.formData):d.body=i.formData}return new Request(c,d)}function G2(e){let t=new URLSearchParams;for(let[n,i]of e.entries())t.append(n,typeof i=="string"?i:i.name);return t}function VP(e){let t=new FormData;for(let[n,i]of e.entries())t.append(n,i);return t}function aq(e,t,n,i,c,d){let p={},s=null,_,S=!1,E={},A=i&&Ls(i[1])?i[1].error:void 0;return n.forEach((I,O)=>{let N=t[O].route.id;if($n(!Ju(I),"Cannot handle redirect results in processLoaderData"),Ls(I)){let $=I.error;if(A!==void 0&&($=A,A=void 0),s=s||{},d)s[N]=$;else{let K=Hm(e,N);s[K.route.id]==null&&(s[K.route.id]=$)}p[N]=void 0,S||(S=!0,_=YE(I.error)?I.error.status:500),I.headers&&(E[N]=I.headers)}else Xu(I)?(c.set(N,I.deferredData),p[N]=I.deferredData.data,I.statusCode!=null&&I.statusCode!==200&&!S&&(_=I.statusCode),I.headers&&(E[N]=I.headers)):(p[N]=I.data,I.statusCode&&I.statusCode!==200&&!S&&(_=I.statusCode),I.headers&&(E[N]=I.headers))}),A!==void 0&&i&&(s={[i[0]]:A},p[i[0]]=void 0),{loaderData:p,errors:s,statusCode:_||200,loaderHeaders:E}}function UP(e,t,n,i,c,d,p,s){let{loaderData:_,errors:S}=aq(t,n,i,c,s,!1);for(let E=0;E<d.length;E++){let{key:A,match:I,controller:O}=d[E];$n(p!==void 0&&p[E]!==void 0,"Did not find corresponding fetcher result");let N=p[E];if(!(O&&O.signal.aborted))if(Ls(N)){let $=Hm(e.matches,I==null?void 0:I.route.id);S&&S[$.route.id]||(S=ei({},S,{[$.route.id]:N.error})),e.fetchers.delete(A)}else if(Ju(N))$n(!1,"Unhandled fetcher revalidation redirect");else if(Xu(N))$n(!1,"Unhandled fetcher deferred data");else{let $=vc(N.data);e.fetchers.set(A,$)}}return{loaderData:_,errors:S}}function WP(e,t,n,i){let c=ei({},t);for(let d of n){let p=d.route.id;if(t.hasOwnProperty(p)?t[p]!==void 0&&(c[p]=t[p]):e[p]!==void 0&&d.route.loader&&(c[p]=e[p]),i&&i.hasOwnProperty(p))break}return c}function GP(e){return e?Ls(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Hm(e,t){return(t?e.slice(0,e.findIndex(i=>i.route.id===t)+1):[...e]).reverse().find(i=>i.route.hasErrorBoundary===!0)||e[0]}function HP(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Is(e,t){let{pathname:n,routeId:i,method:c,type:d}=t===void 0?{}:t,p="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(p="Bad Request",c&&n&&i?s="You made a "+c+' request to "'+n+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":d==="defer-action"?s="defer() is not supported in actions":d==="invalid-body"&&(s="Unable to encode submission body")):e===403?(p="Forbidden",s='Route "'+i+'" does not match URL "'+n+'"'):e===404?(p="Not Found",s='No route matches URL "'+n+'"'):e===405&&(p="Method Not Allowed",c&&n&&i?s="You made a "+c.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":c&&(s='Invalid request method "'+c.toUpperCase()+'"')),new JE(e||500,p,new Error(s),!0)}function ZP(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(Ju(n))return{result:n,idx:t}}}function hR(e){let t=typeof e=="string"?Nl(e):e;return fd(ei({},t,{hash:""}))}function lq(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function cq(e){return fR(e.result)&&qZ.has(e.result.status)}function Xu(e){return e.type===Wr.deferred}function Ls(e){return e.type===Wr.error}function Ju(e){return(e&&e.type)===Wr.redirect}function uq(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function fR(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function dq(e){return ZZ.has(e.toLowerCase())}function ma(e){return GZ.has(e.toLowerCase())}async function qP(e,t,n,i,c,d){for(let p=0;p<n.length;p++){let s=n[p],_=t[p];if(!_)continue;let S=e.find(A=>A.route.id===_.route.id),E=S!=null&&!dR(S,_)&&(d&&d[_.route.id])!==void 0;if(Xu(s)&&(c||E)){let A=i[p];$n(A,"Expected an AbortSignal for revalidating fetcher deferred result"),await pR(s,A,c).then(I=>{I&&(n[p]=I||n[p])})}}}async function pR(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Wr.data,data:e.deferredData.unwrappedData}}catch(c){return{type:Wr.error,error:c}}return{type:Wr.data,data:e.deferredData.data}}}function eT(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function H2(e,t){let n=typeof t=="string"?Nl(t).search:t.search;if(e[e.length-1].route.index&&eT(n||""))return e[e.length-1];let i=lR(e);return i[i.length-1]}function KP(e){let{formMethod:t,formAction:n,formEncType:i,text:c,formData:d,json:p}=e;if(!(!t||!n||!i)){if(c!=null)return{formMethod:t,formAction:n,formEncType:i,formData:void 0,json:void 0,text:c};if(d!=null)return{formMethod:t,formAction:n,formEncType:i,formData:d,json:void 0,text:void 0};if(p!==void 0)return{formMethod:t,formAction:n,formEncType:i,formData:void 0,json:p,text:void 0}}}function mw(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function hq(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function wm(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function fq(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function vc(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function pq(e,t){try{let n=e.sessionStorage.getItem(uR);if(n){let i=JSON.parse(n);for(let[c,d]of Object.entries(i||{}))d&&Array.isArray(d)&&t.set(c,new Set(d||[]))}}catch{}}function mq(e,t){if(t.size>0){let n={};for(let[i,c]of t)n[i]=[...c];try{e.sessionStorage.setItem(uR,JSON.stringify(n))}catch(i){Ef(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kg.apply(this,arguments)}const Xg=q.createContext(null),Px=q.createContext(null),$l=q.createContext(null),Mx=q.createContext(null),xd=q.createContext({outlet:null,matches:[],isDataRoute:!1}),mR=q.createContext(null);function gq(e,t){let{relative:n}=t===void 0?{}:t;Jg()||$n(!1);let{basename:i,navigator:c}=q.useContext($l),{hash:d,pathname:p,search:s}=Dx(e,{relative:n}),_=p;return i!=="/"&&(_=p==="/"?i:Il([i,p])),c.createHref({pathname:_,search:s,hash:d})}function Jg(){return q.useContext(Mx)!=null}function Lf(){return Jg()||$n(!1),q.useContext(Mx).location}function gR(e){q.useContext($l).static||q.useLayoutEffect(e)}function yq(){let{isDataRoute:e}=q.useContext(xd);return e?Pq():vq()}function vq(){Jg()||$n(!1);let e=q.useContext(Xg),{basename:t,future:n,navigator:i}=q.useContext($l),{matches:c}=q.useContext(xd),{pathname:d}=Lf(),p=JSON.stringify(KE(c,n.v7_relativeSplatPath)),s=q.useRef(!1);return gR(()=>{s.current=!0}),q.useCallback(function(S,E){if(E===void 0&&(E={}),!s.current)return;if(typeof S=="number"){i.go(S);return}let A=XE(S,JSON.parse(p),d,E.relative==="path");e==null&&t!=="/"&&(A.pathname=A.pathname==="/"?t:Il([t,A.pathname])),(E.replace?i.replace:i.push)(A,E.state,E)},[t,i,p,d,e])}function Dx(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=q.useContext($l),{matches:c}=q.useContext(xd),{pathname:d}=Lf(),p=JSON.stringify(KE(c,i.v7_relativeSplatPath));return q.useMemo(()=>XE(e,JSON.parse(p),d,n==="path"),[e,p,d,n])}function _q(e,t,n,i){Jg()||$n(!1);let{navigator:c}=q.useContext($l),{matches:d}=q.useContext(xd),p=d[d.length-1],s=p?p.params:{};p&&p.pathname;let _=p?p.pathnameBase:"/";p&&p.route;let S=Lf(),E;if(t){var A;let K=typeof t=="string"?Nl(t):t;_==="/"||(A=K.pathname)!=null&&A.startsWith(_)||$n(!1),E=K}else E=S;let I=E.pathname||"/",O=I;if(_!=="/"){let K=_.replace(/^\//,"").split("/");O="/"+I.replace(/^\//,"").split("/").slice(K.length).join("/")}let N=Hh(e,{pathname:O}),$=Eq(N&&N.map(K=>Object.assign({},K,{params:Object.assign({},s,K.params),pathname:Il([_,c.encodeLocation?c.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?_:Il([_,c.encodeLocation?c.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),d,n,i);return t&&$?q.createElement(Mx.Provider,{value:{location:kg({pathname:"/",search:"",hash:"",state:null,key:"default"},E),navigationType:pi.Pop}},$):$}function xq(){let e=Iq(),t=YE(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},d=null;return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),n?q.createElement("pre",{style:c},n):null,d)}const bq=q.createElement(xq,null);class wq extends q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?q.createElement(xd.Provider,{value:this.props.routeContext},q.createElement(mR.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Sq(e){let{routeContext:t,match:n,children:i}=e,c=q.useContext(Xg);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(xd.Provider,{value:t},i)}function Eq(e,t,n,i){var c;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var d;if((d=n)!=null&&d.errors)e=n.matches;else return null}let p=e,s=(c=n)==null?void 0:c.errors;if(s!=null){let E=p.findIndex(A=>A.route.id&&(s==null?void 0:s[A.route.id])!==void 0);E>=0||$n(!1),p=p.slice(0,Math.min(p.length,E+1))}let _=!1,S=-1;if(n&&i&&i.v7_partialHydration)for(let E=0;E<p.length;E++){let A=p[E];if((A.route.HydrateFallback||A.route.hydrateFallbackElement)&&(S=E),A.route.id){let{loaderData:I,errors:O}=n,N=A.route.loader&&I[A.route.id]===void 0&&(!O||O[A.route.id]===void 0);if(A.route.lazy||N){_=!0,S>=0?p=p.slice(0,S+1):p=[p[0]];break}}}return p.reduceRight((E,A,I)=>{let O,N=!1,$=null,K=null;n&&(O=s&&A.route.id?s[A.route.id]:void 0,$=A.route.errorElement||bq,_&&(S<0&&I===0?(Mq("route-fallback",!1),N=!0,K=null):S===I&&(N=!0,K=A.route.hydrateFallbackElement||null)));let W=t.concat(p.slice(0,I+1)),B=()=>{let U;return O?U=$:N?U=K:A.route.Component?U=q.createElement(A.route.Component,null):A.route.element?U=A.route.element:U=E,q.createElement(Sq,{match:A,routeContext:{outlet:E,matches:W,isDataRoute:n!=null},children:U})};return n&&(A.route.ErrorBoundary||A.route.errorElement||I===0)?q.createElement(wq,{location:n.location,revalidation:n.revalidation,component:$,error:O,children:B(),routeContext:{outlet:null,matches:W,isDataRoute:!0}}):B()},null)}var yR=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(yR||{}),Tf=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Tf||{});function Tq(e){let t=q.useContext(Xg);return t||$n(!1),t}function tT(e){let t=q.useContext(Px);return t||$n(!1),t}function Cq(e){let t=q.useContext(xd);return t||$n(!1),t}function vR(e){let t=Cq(),n=t.matches[t.matches.length-1];return n.route.id||$n(!1),n.route.id}function Aq(){return tT(Tf.UseNavigation).navigation}function kq(){let{matches:e,loaderData:t}=tT(Tf.UseMatches);return q.useMemo(()=>e.map(n=>oR(n,t)),[e,t])}function Iq(){var e;let t=q.useContext(mR),n=tT(Tf.UseRouteError),i=vR(Tf.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function Pq(){let{router:e}=Tq(yR.UseNavigateStable),t=vR(Tf.UseNavigateStable),n=q.useRef(!1);return gR(()=>{n.current=!0}),q.useCallback(function(c,d){d===void 0&&(d={}),n.current&&(typeof c=="number"?e.navigate(c):e.navigate(c,kg({fromRouteId:t},d)))},[e,t])}const XP={};function Mq(e,t,n){!t&&!XP[e]&&(XP[e]=!0)}function Dq(e){let{basename:t="/",children:n=null,location:i,navigationType:c=pi.Pop,navigator:d,static:p=!1,future:s}=e;Jg()&&$n(!1);let _=t.replace(/^\/*/,"/"),S=q.useMemo(()=>({basename:_,navigator:d,static:p,future:kg({v7_relativeSplatPath:!1},s)}),[_,s,d,p]);typeof i=="string"&&(i=Nl(i));let{pathname:E="/",search:A="",hash:I="",state:O=null,key:N="default"}=i,$=q.useMemo(()=>{let K=Ka(E,_);return K==null?null:{location:{pathname:K,search:A,hash:I,state:O,key:N},navigationType:c}},[_,E,A,I,O,N,c]);return $==null?null:q.createElement($l.Provider,{value:S},q.createElement(Mx.Provider,{children:n,value:$}))}new Promise(()=>{});function zq(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:q.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:q.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:q.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pd.apply(this,arguments)}function _R(e,t){if(e==null)return{};var n={},i=Object.keys(e),c,d;for(d=0;d<i.length;d++)c=i[d],!(t.indexOf(c)>=0)&&(n[c]=e[c]);return n}function Lq(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Rq(e,t){return e.button===0&&(!t||t==="_self")&&!Lq(e)}const Oq=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Bq=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],Fq="6";try{window.__reactRouterVersion=Fq}catch{}function jq(e,t){return YZ({basename:t==null?void 0:t.basename,future:pd({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:SZ({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Nq(),routes:e,mapRouteProperties:zq,unstable_dataStrategy:t==null?void 0:t.unstable_dataStrategy,window:t==null?void 0:t.window}).initialize()}function Nq(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=pd({},t,{errors:$q(t.errors)})),t}function $q(e){if(!e)return null;let t=Object.entries(e),n={};for(let[i,c]of t)if(c&&c.__type==="RouteErrorResponse")n[i]=new JE(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){if(c.__subType){let d=window[c.__subType];if(typeof d=="function")try{let p=new d(c.message);p.stack="",n[i]=p}catch{}}if(n[i]==null){let d=new Error(c.message);d.stack="",n[i]=d}}else n[i]=c;return n}const xR=q.createContext({isTransitioning:!1}),Vq=q.createContext(new Map),Uq="startTransition",JP=Ov[Uq],Wq="flushSync",YP=_7[Wq];function Gq(e){JP?JP(e):e()}function Sm(e){YP?YP(e):e()}class Hq{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",t(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",n(i))}})}}function Zq(e){let{fallbackElement:t,router:n,future:i}=e,[c,d]=q.useState(n.state),[p,s]=q.useState(),[_,S]=q.useState({isTransitioning:!1}),[E,A]=q.useState(),[I,O]=q.useState(),[N,$]=q.useState(),K=q.useRef(new Map),{v7_startTransition:W}=i||{},B=q.useCallback(Q=>{W?Gq(Q):Q()},[W]),U=q.useCallback((Q,be)=>{let{deletedFetchers:re,unstable_flushSync:Ie,unstable_viewTransitionOpts:Be}=be;re.forEach(xe=>K.current.delete(xe)),Q.fetchers.forEach((xe,Se)=>{xe.data!==void 0&&K.current.set(Se,xe.data)});let le=n.window==null||typeof n.window.document.startViewTransition!="function";if(!Be||le){Ie?Sm(()=>d(Q)):B(()=>d(Q));return}if(Ie){Sm(()=>{I&&(E&&E.resolve(),I.skipTransition()),S({isTransitioning:!0,flushSync:!0,currentLocation:Be.currentLocation,nextLocation:Be.nextLocation})});let xe=n.window.document.startViewTransition(()=>{Sm(()=>d(Q))});xe.finished.finally(()=>{Sm(()=>{A(void 0),O(void 0),s(void 0),S({isTransitioning:!1})})}),Sm(()=>O(xe));return}I?(E&&E.resolve(),I.skipTransition(),$({state:Q,currentLocation:Be.currentLocation,nextLocation:Be.nextLocation})):(s(Q),S({isTransitioning:!0,flushSync:!1,currentLocation:Be.currentLocation,nextLocation:Be.nextLocation}))},[n.window,I,E,K,B]);q.useLayoutEffect(()=>n.subscribe(U),[n,U]),q.useEffect(()=>{_.isTransitioning&&!_.flushSync&&A(new Hq)},[_]),q.useEffect(()=>{if(E&&p&&n.window){let Q=p,be=E.promise,re=n.window.document.startViewTransition(async()=>{B(()=>d(Q)),await be});re.finished.finally(()=>{A(void 0),O(void 0),s(void 0),S({isTransitioning:!1})}),O(re)}},[B,p,E,n.window]),q.useEffect(()=>{E&&p&&c.location.key===p.location.key&&E.resolve()},[E,I,c.location,p]),q.useEffect(()=>{!_.isTransitioning&&N&&(s(N.state),S({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}),$(void 0))},[_.isTransitioning,N]),q.useEffect(()=>{},[]);let J=q.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:Q=>n.navigate(Q),push:(Q,be,re)=>n.navigate(Q,{state:be,preventScrollReset:re==null?void 0:re.preventScrollReset}),replace:(Q,be,re)=>n.navigate(Q,{replace:!0,state:be,preventScrollReset:re==null?void 0:re.preventScrollReset})}),[n]),ee=n.basename||"/",ye=q.useMemo(()=>({router:n,navigator:J,static:!1,basename:ee}),[n,J,ee]);return q.createElement(q.Fragment,null,q.createElement(Xg.Provider,{value:ye},q.createElement(Px.Provider,{value:c},q.createElement(Vq.Provider,{value:K.current},q.createElement(xR.Provider,{value:_},q.createElement(Dq,{basename:ee,location:c.location,navigationType:c.historyAction,navigator:J,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},c.initialized||n.future.v7_partialHydration?q.createElement(qq,{routes:n.routes,future:n.future,state:c}):t))))),null)}function qq(e){let{routes:t,future:n,state:i}=e;return _q(t,void 0,i,n)}const Kq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Xq=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,od=q.forwardRef(function(t,n){let{onClick:i,relative:c,reloadDocument:d,replace:p,state:s,target:_,to:S,preventScrollReset:E,unstable_viewTransition:A}=t,I=_R(t,Oq),{basename:O}=q.useContext($l),N,$=!1;if(typeof S=="string"&&Xq.test(S)&&(N=S,Kq))try{let U=new URL(window.location.href),J=S.startsWith("//")?new URL(U.protocol+S):new URL(S),ee=Ka(J.pathname,O);J.origin===U.origin&&ee!=null?S=ee+J.search+J.hash:$=!0}catch{}let K=gq(S,{relative:c}),W=Qq(S,{replace:p,state:s,target:_,preventScrollReset:E,relative:c,unstable_viewTransition:A});function B(U){i&&i(U),U.defaultPrevented||W(U)}return q.createElement("a",pd({},I,{href:N||K,onClick:$||d?i:B,ref:n,target:_}))}),QP=q.forwardRef(function(t,n){let{"aria-current":i="page",caseSensitive:c=!1,className:d="",end:p=!1,style:s,to:_,unstable_viewTransition:S,children:E}=t,A=_R(t,Bq),I=Dx(_,{relative:A.relative}),O=Lf(),N=q.useContext(Px),{navigator:$,basename:K}=q.useContext($l),W=N!=null&&nK(I)&&S===!0,B=$.encodeLocation?$.encodeLocation(I).pathname:I.pathname,U=O.pathname,J=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;c||(U=U.toLowerCase(),J=J?J.toLowerCase():null,B=B.toLowerCase()),J&&K&&(J=Ka(J,K)||J);const ee=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ye=U===B||!p&&U.startsWith(B)&&U.charAt(ee)==="/",Q=J!=null&&(J===B||!p&&J.startsWith(B)&&J.charAt(B.length)==="/"),be={isActive:ye,isPending:Q,isTransitioning:W},re=ye?i:void 0,Ie;typeof d=="function"?Ie=d(be):Ie=[d,ye?"active":null,Q?"pending":null,W?"transitioning":null].filter(Boolean).join(" ");let Be=typeof s=="function"?s(be):s;return q.createElement(od,pd({},A,{"aria-current":re,className:Ie,ref:n,style:Be,to:_,unstable_viewTransition:S}),typeof E=="function"?E(be):E)});function Jq(e){let{getKey:t,storageKey:n}=e;return eK({getKey:t,storageKey:n}),null}var m_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(m_||(m_={}));var Z2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Z2||(Z2={}));function bR(e){let t=q.useContext(Xg);return t||$n(!1),t}function Yq(e){let t=q.useContext(Px);return t||$n(!1),t}function Qq(e,t){let{target:n,replace:i,state:c,preventScrollReset:d,relative:p,unstable_viewTransition:s}=t===void 0?{}:t,_=yq(),S=Lf(),E=Dx(e,{relative:p});return q.useCallback(A=>{if(Rq(A,n)){A.preventDefault();let I=i!==void 0?i:fd(S)===fd(E);_(e,{replace:I,state:c,preventScrollReset:d,relative:p,unstable_viewTransition:s})}},[S,_,E,i,c,n,e,d,p,s])}const eM="react-router-scroll-positions";let rv={};function eK(e){let{getKey:t,storageKey:n}=e===void 0?{}:e,{router:i}=bR(m_.UseScrollRestoration),{restoreScrollPosition:c,preventScrollReset:d}=Yq(Z2.UseScrollRestoration),{basename:p}=q.useContext($l),s=Lf(),_=kq(),S=Aq();q.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),tK(q.useCallback(()=>{if(S.state==="idle"){let E=(t?t(s,_):null)||s.key;rv[E]=window.scrollY}try{sessionStorage.setItem(n||eM,JSON.stringify(rv))}catch{}window.history.scrollRestoration="auto"},[n,t,S.state,s,_])),typeof document<"u"&&(q.useLayoutEffect(()=>{try{let E=sessionStorage.getItem(n||eM);E&&(rv=JSON.parse(E))}catch{}},[n]),q.useLayoutEffect(()=>{let E=t&&p!=="/"?(I,O)=>t(pd({},I,{pathname:Ka(I.pathname,p)||I.pathname}),O):t,A=i==null?void 0:i.enableScrollRestoration(rv,()=>window.scrollY,E);return()=>A&&A()},[i,p,t]),q.useLayoutEffect(()=>{if(c!==!1){if(typeof c=="number"){window.scrollTo(0,c);return}if(s.hash){let E=document.getElementById(decodeURIComponent(s.hash.slice(1)));if(E){E.scrollIntoView();return}}d!==!0&&window.scrollTo(0,0)}},[s,c,d]))}function tK(e,t){let{capture:n}=t||{};q.useEffect(()=>{let i=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",e,i),()=>{window.removeEventListener("pagehide",e,i)}},[e,n])}function nK(e,t){t===void 0&&(t={});let n=q.useContext(xR);n==null&&$n(!1);let{basename:i}=bR(m_.useViewTransitionState),c=Dx(e,{relative:t.relative});if(!n.isTransitioning)return!1;let d=Ka(n.currentLocation.pathname,i)||n.currentLocation.pathname,p=Ka(n.nextLocation.pathname,i)||n.nextLocation.pathname;return U2(c.pathname,p)!=null||U2(c.pathname,d)!=null}function wR(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=wR(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function yi(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=wR(e))&&(i&&(i+=" "),i+=t);return i}const rK=({to:e,children:t})=>z.jsx(od,{to:e,className:"text-base font-bold text-white",children:t}),iK=({title:e,links:t})=>z.jsxs("div",{className:"flex flex-col gap-2",children:[z.jsx("div",{className:"text-sm font-semibold text-white text-opacity-90",children:e}),z.jsx("div",{className:"flex flex-col gap-2",children:t.map(n=>z.jsx(rK,{to:n.to,children:n.title}))})]}),oK=({sections:e})=>z.jsx("div",{className:"flex flex-col gap-8 sm:flex-row-reverse sm:gap-12 lg:flex-col lg:gap-5",children:e.map(t=>z.jsx(iK,{title:t.title,links:t.links}))}),sK=[[{title:"Navigation",links:[{title:"Startseite",to:"/"},{title:"Kita-Karte",to:"/finder"}]}],[{title:"Kontakt",links:[{title:"Kontaktieren Sie uns",to:"mailto:hallo@kitaplatz-zentrale.de"}]},{title:"Unternehmen",links:[{title:"Impressum",to:"/impressum"},{title:"Datenschutzerklärung",to:"/datenschutzerklaerung"}]}]],aK=({navigation:e=sK})=>{const t=At.useMemo(()=>e.map((n,i)=>z.jsx(oK,{sections:n},"footer-navigation-segment-"+i)),[e]);return z.jsx("div",{className:"page-padding mt-auto w-full bg-[#233E65] pb-12 pt-12 sm:pb-28 sm:pt-20 lg:pb-10 lg:pt-16",children:z.jsxs("div",{className:"flex w-full flex-col justify-between gap-16",children:[z.jsxs("div",{className:"flex min-h-[256px] flex-col justify-between gap-16 lg:flex-row",children:[z.jsxs("div",{className:"flex flex-col gap-2",children:[z.jsx("div",{id:"logo",className:"w-72 md:w-96",children:z.jsx("img",{src:"/logo-alt.svg",width:"100%",alt:"KitaPlatzZentrale Logo"})}),z.jsx("div",{className:"text-lg font-bold text-white text-opacity-90",children:"Kita kann so einfach sein."})]}),z.jsx("div",{className:"flex flex-col gap-8 sm:flex-row sm:gap-12 lg:gap-28",children:t})]}),z.jsx("div",{className:"mt-auto flex flex-row justify-between text-white text-opacity-70",children:"©2023 kitaplatz-zentrale.de"})]})})},q2=US({fontFamily:{body:"Nunito, sans-serif"},colorSchemes:{light:{palette:{primary:{50:"#FDE9E8",100:"#FACFC9",200:"#F7B4A9",300:"#F49A89",400:"#F18069",500:"#F46E44",600:"#F05834",700:"#EC4325",800:"#D44518",900:"#BB3B10"},success:{50:"#F1FAF5",100:"#E3F6E9",200:"#D8F4DC",300:"#C0ECBE",400:"#A8E49F",500:"#90DB81",600:"#78D263",700:"#60C944",800:"#198444",900:"#146630"},info:{50:"#ECF6F8",100:"#D9EDEF",200:"#C6E3E6",300:"#B3D9DD",400:"#A0CFD4",500:"#4DA9B7",600:"#3D98A6",700:"#2C8795",800:"#318DB5",900:"#1F6F80"},neutral:{50:"#F2F5F7",100:"#E5EAF0",200:"#ABB8BF",300:"#92A3A9",400:"#798E93",500:"#6A8088",600:"#5B727D",700:"#4C646D",800:"#2B3B44",900:"#1C2A32"}}}},components:{JoyButton:{defaultProps:{variant:"solid"},styleOverrides:{root:({ownerState:e})=>({borderRadius:"8px",padding:"14px 32px",fontSize:"14px",fontWeight:800,...e.size==="lg"&&{fontSize:"16px","--Button-paddingInline":"1rem"},whiteSpace:"nowrap"})}},JoyInput:{styleOverrides:{root:({ownerState:e,theme:t})=>({...e.size==="sm"&&{padding:"11px 16px"},padding:"15px 16px",fontSize:"16px",...e.size==="lg"&&{padding:"15px 16px"}}),input:({ownerState:e,theme:t})=>({"&::placeholder":{color:t.colorSchemes.light.palette.neutral[900],fontWeight:600}}),startDecorator:({ownerState:e,theme:t})=>({color:t.colorSchemes.light.palette.info[600],"& > svg":{fontSize:"20px"}})}},JoyAutocomplete:{styleOverrides:{root:({ownerState:e,theme:t})=>({fontSize:"16px",padding:"11px 16px"}),input:({ownerState:e,theme:t})=>({"&::placeholder":{color:t.colorSchemes.light.palette.neutral[900],fontWeight:600,fontSize:"16px"}}),startDecorator:({ownerState:e,theme:t})=>({color:t.colorSchemes.light.palette.info[600],"& > svg":{fontSize:"20px"}}),clearIndicator:({ownerState:e,theme:t})=>({color:t.colorSchemes.light.palette.neutral[600],padding:4})}},JoyModalDialog:{styleOverrides:{root:({ownerState:e,theme:t})=>({borderRadius:"20px"})}},JoyModal:{styleOverrides:{backdrop:{backgroundColor:"rgba(0, 0, 0, 0.25)",backdropFilter:"blur(1px)"}}},JoyFormLabel:{styleOverrides:{root:({ownerState:e,theme:t})=>({fontWeight:600,marginBottom:"4px",fontSize:"14px",color:t.colorSchemes.light.palette.neutral[500]})}}}}),lK=({to:e,active:t=!1,onClick:n,children:i})=>z.jsx(QP,{to:e,onClick:n,className:({isActive:c})=>yi("h-full w-fit cursor-pointer after:relative after:float-left after:mt-[8px] after:h-1 after:w-full after:rounded-full after:transition-opacity active:after:transition-opacity",c?"after:bg-primary-dark after:opacity-100":"after:bg-[#966657] after:opacity-0 hover:after:opacity-30 active:after:opacity-100"),children:z.jsx(QP,{to:e,className:({isActive:c})=>yi("h-full text-4xl sm:text-5xl xl:text-base",c?"font-extrabold text-primary-dark":"font-bold text-[#966657]"),children:i})}),cK=[{title:"Startseite",to:"/"},{title:"Kita-Karte",to:"/finder"}],SR=({links:e=cK,onLinkClick:t})=>(At.useState(null),z.jsx("ul",{className:"flex h-full flex-col gap-12 xl:flex-row xl:items-center xl:justify-between xl:gap-8",children:e.map(n=>z.jsx(lK,{onClick:t,to:n.to,active:n.active,children:n.title},"header-navigation-link-"+n.to))})),ER=At.createContext({}),uK=({children:e})=>{const[t,n]=At.useState([]),i=_=>{d(_)||(n(S=>[...S,_]),document.body.style.overflowY="hidden")},c=_=>{n(S=>S.filter(E=>E!==_)),t.length===0&&(document.body.style.overflowY="auto")},d=_=>t.includes(_),p=(_,S)=>{S?i(_):c(_)},s=_=>t.findIndex(S=>S===_)+1;return z.jsx(ER.Provider,{value:{isOpen:d,setOpen:p,register:i,z:s},children:e})},Us=e=>{const t=At.useContext(ER);if(!t)throw new Error("useMobileOverlay must be used within a MobileOverlayContextProvider");return e?{isOpen:t.isOpen(e),setOpen:n=>t.setOpen(e,n),z:t.z(e)}:t},dK=()=>{const{setOpen:e}=Us("service-signup");return z.jsxs(z.Fragment,{children:[z.jsx(SR,{}),z.jsx(HE,{sx:{margin:"0 3rem"},component:"div",orientation:"vertical",className:"mx-8"}),z.jsx(ro,{variant:"solid",color:"primary",size:"lg",className:"shadow-md",onClick:()=>e(!0),children:"Platz finden lassen"})]})},zx=q.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Lx=q.createContext({}),Rx=q.createContext(null),Ox=typeof document<"u",Yg=Ox?q.useLayoutEffect:q.useEffect,TR=q.createContext({strict:!1}),nT=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),hK="framerAppearId",CR="data-"+nT(hK);function fK(e,t,n,i){const{visualElement:c}=q.useContext(Lx),d=q.useContext(TR),p=q.useContext(Rx),s=q.useContext(zx).reducedMotion,_=q.useRef();i=i||d.renderer,!_.current&&i&&(_.current=i(e,{visualState:t,parent:c,props:n,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:s}));const S=_.current;q.useInsertionEffect(()=>{S&&S.update(n,p)});const E=q.useRef(!!(n[CR]&&!window.HandoffComplete));return Yg(()=>{S&&(S.render(),E.current&&S.animationState&&S.animationState.animateChanges())}),q.useEffect(()=>{S&&(S.updateFeatures(),!E.current&&S.animationState&&S.animationState.animateChanges(),E.current&&(E.current=!1,window.HandoffComplete=!0))}),S}function Zh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function pK(e,t,n){return q.useCallback(i=>{i&&e.mount&&e.mount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Zh(n)&&(n.current=i))},[t])}function Ig(e){return typeof e=="string"||Array.isArray(e)}function Bx(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const rT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],iT=["initial",...rT];function Fx(e){return Bx(e.animate)||iT.some(t=>Ig(e[t]))}function AR(e){return!!(Fx(e)||e.variants)}function mK(e,t){if(Fx(e)){const{initial:n,animate:i}=e;return{initial:n===!1||Ig(n)?n:void 0,animate:Ig(i)?i:void 0}}return e.inherit!==!1?t:{}}function gK(e){const{initial:t,animate:n}=mK(e,q.useContext(Lx));return q.useMemo(()=>({initial:t,animate:n}),[tM(t),tM(n)])}function tM(e){return Array.isArray(e)?e.join(" "):e}const nM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pg={};for(const e in nM)Pg[e]={isEnabled:t=>nM[e].some(n=>!!t[n])};function yK(e){for(const t in e)Pg[t]={...Pg[t],...e[t]}}const oT=q.createContext({}),kR=q.createContext({}),vK=Symbol.for("motionComponentSymbol");function _K({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:i,Component:c}){e&&yK(e);function d(s,_){let S;const E={...q.useContext(zx),...s,layoutId:xK(s)},{isStatic:A}=E,I=gK(s),O=i(s,A);if(!A&&Ox){I.visualElement=fK(c,O,E,t);const N=q.useContext(kR),$=q.useContext(TR).strict;I.visualElement&&(S=I.visualElement.loadFeatures(E,$,e,N))}return q.createElement(Lx.Provider,{value:I},S&&I.visualElement?q.createElement(S,{visualElement:I.visualElement,...E}):null,n(c,s,pK(O,I.visualElement,_),O,A,I.visualElement))}const p=q.forwardRef(d);return p[vK]=c,p}function xK({layoutId:e}){const t=q.useContext(oT).id;return t&&e!==void 0?t+"-"+e:e}function bK(e){function t(i,c={}){return _K(e(i,c))}if(typeof Proxy>"u")return t;const n=new Map;return new Proxy(t,{get:(i,c)=>(n.has(c)||n.set(c,t(c)),n.get(c))})}const wK=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sT(e){return typeof e!="string"||e.includes("-")?!1:!!(wK.indexOf(e)>-1||/[A-Z]/.test(e))}const g_={};function SK(e){Object.assign(g_,e)}const Qg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bd=new Set(Qg);function IR(e,{layout:t,layoutId:n}){return bd.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!g_[e]||e==="opacity")}const xo=e=>!!(e&&e.getVelocity),EK={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},TK=Qg.length;function CK(e,{enableHardwareAcceleration:t=!0,allowTransformNone:n=!0},i,c){let d="";for(let p=0;p<TK;p++){const s=Qg[p];if(e[s]!==void 0){const _=EK[s]||s;d+=`${_}(${e[s]}) `}}return t&&!e.z&&(d+="translateZ(0)"),d=d.trim(),c?d=c(e,i?"":d):n&&i&&(d="none"),d}const PR=e=>t=>typeof t=="string"&&t.startsWith(e),MR=PR("--"),K2=PR("var(--"),AK=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,kK=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Gc=(e,t,n)=>Math.min(Math.max(n,e),t),wd={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Zm={...wd,transform:e=>Gc(0,1,e)},iv={...wd,default:1},qm=e=>Math.round(e*1e5)/1e5,jx=/(-)?([\d]*\.?[\d])+/g,DR=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,IK=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ey(e){return typeof e=="string"}const ty=e=>({test:t=>ey(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),_c=ty("deg"),Ga=ty("%"),In=ty("px"),PK=ty("vh"),MK=ty("vw"),rM={...Ga,parse:e=>Ga.parse(e)/100,transform:e=>Ga.transform(e*100)},iM={...wd,transform:Math.round},zR={borderWidth:In,borderTopWidth:In,borderRightWidth:In,borderBottomWidth:In,borderLeftWidth:In,borderRadius:In,radius:In,borderTopLeftRadius:In,borderTopRightRadius:In,borderBottomRightRadius:In,borderBottomLeftRadius:In,width:In,maxWidth:In,height:In,maxHeight:In,size:In,top:In,right:In,bottom:In,left:In,padding:In,paddingTop:In,paddingRight:In,paddingBottom:In,paddingLeft:In,margin:In,marginTop:In,marginRight:In,marginBottom:In,marginLeft:In,rotate:_c,rotateX:_c,rotateY:_c,rotateZ:_c,scale:iv,scaleX:iv,scaleY:iv,scaleZ:iv,skew:_c,skewX:_c,skewY:_c,distance:In,translateX:In,translateY:In,translateZ:In,x:In,y:In,z:In,perspective:In,transformPerspective:In,opacity:Zm,originX:rM,originY:rM,originZ:In,zIndex:iM,fillOpacity:Zm,strokeOpacity:Zm,numOctaves:iM};function aT(e,t,n,i){const{style:c,vars:d,transform:p,transformOrigin:s}=e;let _=!1,S=!1,E=!0;for(const A in t){const I=t[A];if(MR(A)){d[A]=I;continue}const O=zR[A],N=kK(I,O);if(bd.has(A)){if(_=!0,p[A]=N,!E)continue;I!==(O.default||0)&&(E=!1)}else A.startsWith("origin")?(S=!0,s[A]=N):c[A]=N}if(t.transform||(_||i?c.transform=CK(e.transform,n,E,i):c.transform&&(c.transform="none")),S){const{originX:A="50%",originY:I="50%",originZ:O=0}=s;c.transformOrigin=`${A} ${I} ${O}`}}const lT=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LR(e,t,n){for(const i in t)!xo(t[i])&&!IR(i,n)&&(e[i]=t[i])}function DK({transformTemplate:e},t,n){return q.useMemo(()=>{const i=lT();return aT(i,t,{enableHardwareAcceleration:!n},e),Object.assign({},i.vars,i.style)},[t])}function zK(e,t,n){const i=e.style||{},c={};return LR(c,i,e),Object.assign(c,DK(e,t,n)),e.transformValues?e.transformValues(c):c}function LK(e,t,n){const i={},c=zK(e,t,n);return e.drag&&e.dragListener!==!1&&(i.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=c,i}const RK=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function y_(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||RK.has(e)}let RR=e=>!y_(e);function OK(e){e&&(RR=t=>t.startsWith("on")?!y_(t):e(t))}try{OK(require("@emotion/is-prop-valid").default)}catch{}function BK(e,t,n){const i={};for(const c in e)c==="values"&&typeof e.values=="object"||(RR(c)||n===!0&&y_(c)||!t&&!y_(c)||e.draggable&&c.startsWith("onDrag"))&&(i[c]=e[c]);return i}function oM(e,t,n){return typeof e=="string"?e:In.transform(t+n*e)}function FK(e,t,n){const i=oM(t,e.x,e.width),c=oM(n,e.y,e.height);return`${i} ${c}`}const jK={offset:"stroke-dashoffset",array:"stroke-dasharray"},NK={offset:"strokeDashoffset",array:"strokeDasharray"};function $K(e,t,n=1,i=0,c=!0){e.pathLength=1;const d=c?jK:NK;e[d.offset]=In.transform(-i);const p=In.transform(t),s=In.transform(n);e[d.array]=`${p} ${s}`}function cT(e,{attrX:t,attrY:n,attrScale:i,originX:c,originY:d,pathLength:p,pathSpacing:s=1,pathOffset:_=0,...S},E,A,I){if(aT(e,S,E,I),A){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:O,style:N,dimensions:$}=e;O.transform&&($&&(N.transform=O.transform),delete O.transform),$&&(c!==void 0||d!==void 0||N.transform)&&(N.transformOrigin=FK($,c!==void 0?c:.5,d!==void 0?d:.5)),t!==void 0&&(O.x=t),n!==void 0&&(O.y=n),i!==void 0&&(O.scale=i),p!==void 0&&$K(O,p,s,_,!1)}const OR=()=>({...lT(),attrs:{}}),uT=e=>typeof e=="string"&&e.toLowerCase()==="svg";function VK(e,t,n,i){const c=q.useMemo(()=>{const d=OR();return cT(d,t,{enableHardwareAcceleration:!1},uT(i),e.transformTemplate),{...d.attrs,style:{...d.style}}},[t]);if(e.style){const d={};LR(d,e.style,e),c.style={...d,...c.style}}return c}function UK(e=!1){return(n,i,c,{latestValues:d},p)=>{const _=(sT(n)?VK:LK)(i,d,p,n),E={...BK(i,typeof n=="string",e),..._,ref:c},{children:A}=i,I=q.useMemo(()=>xo(A)?A.get():A,[A]);return q.createElement(n,{...E,children:I})}}function BR(e,{style:t,vars:n},i,c){Object.assign(e.style,t,c&&c.getProjectionStyles(i));for(const d in n)e.style.setProperty(d,n[d])}const FR=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jR(e,t,n,i){BR(e,t,void 0,i);for(const c in t.attrs)e.setAttribute(FR.has(c)?c:nT(c),t.attrs[c])}function dT(e,t){const{style:n}=e,i={};for(const c in n)(xo(n[c])||t.style&&xo(t.style[c])||IR(c,e))&&(i[c]=n[c]);return i}function NR(e,t){const n=dT(e,t);for(const i in e)if(xo(e[i])||xo(t[i])){const c=Qg.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;n[c]=e[i]}return n}function hT(e,t,n,i={},c={}){return typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,c)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(n!==void 0?n:e.custom,i,c)),t}function Nx(e){const t=q.useRef(null);return t.current===null&&(t.current=e()),t.current}const v_=e=>Array.isArray(e),WK=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),GK=e=>v_(e)?e[e.length-1]||0:e;function Pv(e){const t=xo(e)?e.get():e;return WK(t)?t.toValue():t}function HK({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:n},i,c,d){const p={latestValues:ZK(i,c,d,e),renderState:t()};return n&&(p.mount=s=>n(i,s,p)),p}const $R=e=>(t,n)=>{const i=q.useContext(Lx),c=q.useContext(Rx),d=()=>HK(e,t,i,c);return n?d():Nx(d)};function ZK(e,t,n,i){const c={},d=i(e,{});for(const I in d)c[I]=Pv(d[I]);let{initial:p,animate:s}=e;const _=Fx(e),S=AR(e);t&&S&&!_&&e.inherit!==!1&&(p===void 0&&(p=t.initial),s===void 0&&(s=t.animate));let E=n?n.initial===!1:!1;E=E||p===!1;const A=E?s:p;return A&&typeof A!="boolean"&&!Bx(A)&&(Array.isArray(A)?A:[A]).forEach(O=>{const N=hT(e,O);if(!N)return;const{transitionEnd:$,transition:K,...W}=N;for(const B in W){let U=W[B];if(Array.isArray(U)){const J=E?U.length-1:0;U=U[J]}U!==null&&(c[B]=U)}for(const B in $)c[B]=$[B]}),c}const hi=e=>e;class sM{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const n=this.order.indexOf(t);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function qK(e){let t=new sM,n=new sM,i=0,c=!1,d=!1;const p=new WeakSet,s={schedule:(_,S=!1,E=!1)=>{const A=E&&c,I=A?t:n;return S&&p.add(_),I.add(_)&&A&&c&&(i=t.order.length),_},cancel:_=>{n.remove(_),p.delete(_)},process:_=>{if(c){d=!0;return}if(c=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let S=0;S<i;S++){const E=t.order[S];E(_),p.has(E)&&(s.schedule(E),e())}c=!1,d&&(d=!1,s.process(_))}};return s}const ov=["prepare","read","update","preRender","render","postRender"],KK=40;function XK(e,t){let n=!1,i=!0;const c={delta:0,timestamp:0,isProcessing:!1},d=ov.reduce((A,I)=>(A[I]=qK(()=>n=!0),A),{}),p=A=>d[A].process(c),s=()=>{const A=performance.now();n=!1,c.delta=i?1e3/60:Math.max(Math.min(A-c.timestamp,KK),1),c.timestamp=A,c.isProcessing=!0,ov.forEach(p),c.isProcessing=!1,n&&t&&(i=!1,e(s))},_=()=>{n=!0,i=!0,c.isProcessing||e(s)};return{schedule:ov.reduce((A,I)=>{const O=d[I];return A[I]=(N,$=!1,K=!1)=>(n||_(),O.schedule(N,$,K)),A},{}),cancel:A=>ov.forEach(I=>d[I].cancel(A)),state:c,steps:d}}const{schedule:Ir,cancel:Xa,state:qi,steps:gw}=XK(typeof requestAnimationFrame<"u"?requestAnimationFrame:hi,!0),JK={useVisualState:$R({scrapeMotionValuesFromProps:NR,createRenderState:OR,onMount:(e,t,{renderState:n,latestValues:i})=>{Ir.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Ir.render(()=>{cT(n,i,{enableHardwareAcceleration:!1},uT(t.tagName),e.transformTemplate),jR(t,n)})}})},YK={useVisualState:$R({scrapeMotionValuesFromProps:dT,createRenderState:lT})};function QK(e,{forwardMotionProps:t=!1},n,i){return{...sT(e)?JK:YK,preloadedFeatures:n,useRender:UK(t),createVisualElement:i,Component:e}}function Al(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const VR=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function $x(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const eX=e=>t=>VR(t)&&e(t,$x(t));function Pl(e,t,n,i){return Al(e,t,eX(n),i)}const tX=(e,t)=>n=>t(e(n)),Nc=(...e)=>e.reduce(tX);function UR(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const aM=UR("dragHorizontal"),lM=UR("dragVertical");function WR(e){let t=!1;if(e==="y")t=lM();else if(e==="x")t=aM();else{const n=aM(),i=lM();n&&i?t=()=>{n(),i()}:(n&&n(),i&&i())}return t}function GR(){const e=WR(!0);return e?(e(),!1):!0}class Jc{constructor(t){this.isMounted=!1,this.node=t}update(){}}function cM(e,t){const n="pointer"+(t?"enter":"leave"),i="onHover"+(t?"Start":"End"),c=(d,p)=>{if(d.pointerType==="touch"||GR())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[i]&&Ir.update(()=>s[i](d,p))};return Pl(e.current,n,c,{passive:!e.getProps()[i]})}class nX extends Jc{mount(){this.unmount=Nc(cM(this.node,!0),cM(this.node,!1))}unmount(){}}class rX extends Jc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nc(Al(this.node.current,"focus",()=>this.onFocus()),Al(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const HR=(e,t)=>t?e===t?!0:HR(e,t.parentElement):!1;function yw(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,$x(n))}class iX extends Jc{constructor(){super(...arguments),this.removeStartListeners=hi,this.removeEndListeners=hi,this.removeAccessibleListeners=hi,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),d=Pl(window,"pointerup",(s,_)=>{if(!this.checkPressEnd())return;const{onTap:S,onTapCancel:E,globalTapTarget:A}=this.node.getProps();Ir.update(()=>{!A&&!HR(this.node.current,s.target)?E&&E(s,_):S&&S(s,_)})},{passive:!(i.onTap||i.onPointerUp)}),p=Pl(window,"pointercancel",(s,_)=>this.cancelPress(s,_),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Nc(d,p),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=d=>{if(d.key!=="Enter"||this.isPressing)return;const p=s=>{s.key!=="Enter"||!this.checkPressEnd()||yw("up",(_,S)=>{const{onTap:E}=this.node.getProps();E&&Ir.update(()=>E(_,S))})};this.removeEndListeners(),this.removeEndListeners=Al(this.node.current,"keyup",p),yw("down",(s,_)=>{this.startPress(s,_)})},n=Al(this.node.current,"keydown",t),i=()=>{this.isPressing&&yw("cancel",(d,p)=>this.cancelPress(d,p))},c=Al(this.node.current,"blur",i);this.removeAccessibleListeners=Nc(n,c)}}startPress(t,n){this.isPressing=!0;const{onTapStart:i,whileTap:c}=this.node.getProps();c&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Ir.update(()=>i(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!GR()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Ir.update(()=>i(t,n))}mount(){const t=this.node.getProps(),n=Pl(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),i=Al(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Nc(n,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const X2=new WeakMap,vw=new WeakMap,oX=e=>{const t=X2.get(e.target);t&&t(e)},sX=e=>{e.forEach(oX)};function aX({root:e,...t}){const n=e||document;vw.has(n)||vw.set(n,{});const i=vw.get(n),c=JSON.stringify(t);return i[c]||(i[c]=new IntersectionObserver(sX,{root:e,...t})),i[c]}function lX(e,t,n){const i=aX(t);return X2.set(e,n),i.observe(e),()=>{X2.delete(e),i.unobserve(e)}}const cX={some:0,all:1};class uX extends Jc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:c="some",once:d}=t,p={root:n?n.current:void 0,rootMargin:i,threshold:typeof c=="number"?c:cX[c]},s=_=>{const{isIntersecting:S}=_;if(this.isInView===S||(this.isInView=S,d&&!S&&this.hasEnteredView))return;S&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",S);const{onViewportEnter:E,onViewportLeave:A}=this.node.getProps(),I=S?E:A;I&&I(_)};return lX(this.node.current,p,s)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(dX(t,n))&&this.startObserver()}unmount(){}}function dX({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const hX={inView:{Feature:uX},tap:{Feature:iX},focus:{Feature:rX},hover:{Feature:nX}};function ZR(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function fX(e){const t={};return e.values.forEach((n,i)=>t[i]=n.get()),t}function pX(e){const t={};return e.values.forEach((n,i)=>t[i]=n.getVelocity()),t}function Vx(e,t,n){const i=e.getProps();return hT(i,t,n!==void 0?n:i.custom,fX(e),pX(e))}let mX=hi,fT=hi;const $c=e=>e*1e3,Ha=e=>e/1e3,gX={current:!1},qR=e=>Array.isArray(e)&&typeof e[0]=="number";function KR(e){return!!(!e||typeof e=="string"&&XR[e]||qR(e)||Array.isArray(e)&&e.every(KR))}const Dm=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,XR={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Dm([0,.65,.55,1]),circOut:Dm([.55,0,1,.45]),backIn:Dm([.31,.01,.66,-.59]),backOut:Dm([.33,1.53,.69,.99])};function JR(e){if(e)return qR(e)?Dm(e):Array.isArray(e)?e.map(JR):XR[e]}function yX(e,t,n,{delay:i=0,duration:c,repeat:d=0,repeatType:p="loop",ease:s,times:_}={}){const S={[t]:n};_&&(S.offset=_);const E=JR(s);return Array.isArray(E)&&(S.easing=E),e.animate(S,{delay:i,duration:c,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:d+1,direction:p==="reverse"?"alternate":"normal"})}function vX(e,{repeat:t,repeatType:n="loop"}){const i=t&&n!=="loop"&&t%2===1?0:e.length-1;return e[i]}const YR=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,_X=1e-7,xX=12;function bX(e,t,n,i,c){let d,p,s=0;do p=t+(n-t)/2,d=YR(p,i,c)-e,d>0?n=p:t=p;while(Math.abs(d)>_X&&++s<xX);return p}function ny(e,t,n,i){if(e===t&&n===i)return hi;const c=d=>bX(d,0,1,e,n);return d=>d===0||d===1?d:YR(c(d),t,i)}const wX=ny(.42,0,1,1),SX=ny(0,0,.58,1),QR=ny(.42,0,.58,1),EX=e=>Array.isArray(e)&&typeof e[0]!="number",eO=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tO=e=>t=>1-e(1-t),pT=e=>1-Math.sin(Math.acos(e)),nO=tO(pT),TX=eO(pT),rO=ny(.33,1.53,.69,.99),mT=tO(rO),CX=eO(mT),AX=e=>(e*=2)<1?.5*mT(e):.5*(2-Math.pow(2,-10*(e-1))),kX={linear:hi,easeIn:wX,easeInOut:QR,easeOut:SX,circIn:pT,circInOut:TX,circOut:nO,backIn:mT,backInOut:CX,backOut:rO,anticipate:AX},uM=e=>{if(Array.isArray(e)){fT(e.length===4);const[t,n,i,c]=e;return ny(t,n,i,c)}else if(typeof e=="string")return kX[e];return e},gT=(e,t)=>n=>!!(ey(n)&&IK.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),iO=(e,t,n)=>i=>{if(!ey(i))return i;const[c,d,p,s]=i.match(jx);return{[e]:parseFloat(c),[t]:parseFloat(d),[n]:parseFloat(p),alpha:s!==void 0?parseFloat(s):1}},IX=e=>Gc(0,255,e),_w={...wd,transform:e=>Math.round(IX(e))},Yu={test:gT("rgb","red"),parse:iO("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+_w.transform(e)+", "+_w.transform(t)+", "+_w.transform(n)+", "+qm(Zm.transform(i))+")"};function PX(e){let t="",n="",i="",c="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),c=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),c=e.substring(4,5),t+=t,n+=n,i+=i,c+=c),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:c?parseInt(c,16)/255:1}}const J2={test:gT("#"),parse:PX,transform:Yu.transform},qh={test:gT("hsl","hue"),parse:iO("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Ga.transform(qm(t))+", "+Ga.transform(qm(n))+", "+qm(Zm.transform(i))+")"},Eo={test:e=>Yu.test(e)||J2.test(e)||qh.test(e),parse:e=>Yu.test(e)?Yu.parse(e):qh.test(e)?qh.parse(e):J2.parse(e),transform:e=>ey(e)?e:e.hasOwnProperty("red")?Yu.transform(e):qh.transform(e)},ri=(e,t,n)=>-n*e+n*t+e;function xw(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function MX({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let c=0,d=0,p=0;if(!t)c=d=p=n;else{const s=n<.5?n*(1+t):n+t-n*t,_=2*n-s;c=xw(_,s,e+1/3),d=xw(_,s,e),p=xw(_,s,e-1/3)}return{red:Math.round(c*255),green:Math.round(d*255),blue:Math.round(p*255),alpha:i}}const bw=(e,t,n)=>{const i=e*e;return Math.sqrt(Math.max(0,n*(t*t-i)+i))},DX=[J2,Yu,qh],zX=e=>DX.find(t=>t.test(e));function dM(e){const t=zX(e);let n=t.parse(e);return t===qh&&(n=MX(n)),n}const oO=(e,t)=>{const n=dM(e),i=dM(t),c={...n};return d=>(c.red=bw(n.red,i.red,d),c.green=bw(n.green,i.green,d),c.blue=bw(n.blue,i.blue,d),c.alpha=ri(n.alpha,i.alpha,d),Yu.transform(c))};function LX(e){var t,n;return isNaN(e)&&ey(e)&&(((t=e.match(jx))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(DR))===null||n===void 0?void 0:n.length)||0)>0}const sO={regex:AK,countKey:"Vars",token:"${v}",parse:hi},aO={regex:DR,countKey:"Colors",token:"${c}",parse:Eo.parse},lO={regex:jx,countKey:"Numbers",token:"${n}",parse:wd.parse};function ww(e,{regex:t,countKey:n,token:i,parse:c}){const d=e.tokenised.match(t);d&&(e["num"+n]=d.length,e.tokenised=e.tokenised.replace(t,i),e.values.push(...d.map(c)))}function __(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&ww(n,sO),ww(n,aO),ww(n,lO),n}function cO(e){return __(e).values}function uO(e){const{values:t,numColors:n,numVars:i,tokenised:c}=__(e),d=t.length;return p=>{let s=c;for(let _=0;_<d;_++)_<i?s=s.replace(sO.token,p[_]):_<i+n?s=s.replace(aO.token,Eo.transform(p[_])):s=s.replace(lO.token,qm(p[_]));return s}}const RX=e=>typeof e=="number"?0:e;function OX(e){const t=cO(e);return uO(e)(t.map(RX))}const Hc={test:LX,parse:cO,createTransformer:uO,getAnimatableNone:OX},dO=(e,t)=>n=>`${n>0?t:e}`;function hO(e,t){return typeof e=="number"?n=>ri(e,t,n):Eo.test(e)?oO(e,t):e.startsWith("var(")?dO(e,t):pO(e,t)}const fO=(e,t)=>{const n=[...e],i=n.length,c=e.map((d,p)=>hO(d,t[p]));return d=>{for(let p=0;p<i;p++)n[p]=c[p](d);return n}},BX=(e,t)=>{const n={...e,...t},i={};for(const c in n)e[c]!==void 0&&t[c]!==void 0&&(i[c]=hO(e[c],t[c]));return c=>{for(const d in i)n[d]=i[d](c);return n}},pO=(e,t)=>{const n=Hc.createTransformer(t),i=__(e),c=__(t);return i.numVars===c.numVars&&i.numColors===c.numColors&&i.numNumbers>=c.numNumbers?Nc(fO(i.values,c.values),n):dO(e,t)},Mg=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i},hM=(e,t)=>n=>ri(e,t,n);function FX(e){return typeof e=="number"?hM:typeof e=="string"?Eo.test(e)?oO:pO:Array.isArray(e)?fO:typeof e=="object"?BX:hM}function jX(e,t,n){const i=[],c=n||FX(e[0]),d=e.length-1;for(let p=0;p<d;p++){let s=c(e[p],e[p+1]);if(t){const _=Array.isArray(t)?t[p]||hi:t;s=Nc(_,s)}i.push(s)}return i}function yT(e,t,{clamp:n=!0,ease:i,mixer:c}={}){const d=e.length;if(fT(d===t.length),d===1)return()=>t[0];e[0]>e[d-1]&&(e=[...e].reverse(),t=[...t].reverse());const p=jX(t,i,c),s=p.length,_=S=>{let E=0;if(s>1)for(;E<e.length-2&&!(S<e[E+1]);E++);const A=Mg(e[E],e[E+1],S);return p[E](A)};return n?S=>_(Gc(e[0],e[d-1],S)):_}function NX(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const c=Mg(0,t,i);e.push(ri(n,1,c))}}function $X(e){const t=[0];return NX(t,e.length-1),t}function VX(e,t){return e.map(n=>n*t)}function UX(e,t){return e.map(()=>t||QR).splice(0,e.length-1)}function x_({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const c=EX(i)?i.map(uM):uM(i),d={done:!1,value:t[0]},p=VX(n&&n.length===t.length?n:$X(t),e),s=yT(p,t,{ease:Array.isArray(c)?c:UX(t,c)});return{calculatedDuration:e,next:_=>(d.value=s(_),d.done=_>=e,d)}}function mO(e,t){return t?e*(1e3/t):0}const WX=5;function gO(e,t,n){const i=Math.max(t-WX,0);return mO(n-e(i),t-i)}const Sw=.001,GX=.01,fM=10,HX=.05,ZX=1;function qX({duration:e=800,bounce:t=.25,velocity:n=0,mass:i=1}){let c,d;mX(e<=$c(fM));let p=1-t;p=Gc(HX,ZX,p),e=Gc(GX,fM,Ha(e)),p<1?(c=S=>{const E=S*p,A=E*e,I=E-n,O=Y2(S,p),N=Math.exp(-A);return Sw-I/O*N},d=S=>{const A=S*p*e,I=A*n+n,O=Math.pow(p,2)*Math.pow(S,2)*e,N=Math.exp(-A),$=Y2(Math.pow(S,2),p);return(-c(S)+Sw>0?-1:1)*((I-O)*N)/$}):(c=S=>{const E=Math.exp(-S*e),A=(S-n)*e+1;return-Sw+E*A},d=S=>{const E=Math.exp(-S*e),A=(n-S)*(e*e);return E*A});const s=5/e,_=XX(c,d,s);if(e=$c(e),isNaN(_))return{stiffness:100,damping:10,duration:e};{const S=Math.pow(_,2)*i;return{stiffness:S,damping:p*2*Math.sqrt(i*S),duration:e}}}const KX=12;function XX(e,t,n){let i=n;for(let c=1;c<KX;c++)i=i-e(i)/t(i);return i}function Y2(e,t){return e*Math.sqrt(1-t*t)}const JX=["duration","bounce"],YX=["stiffness","damping","mass"];function pM(e,t){return t.some(n=>e[n]!==void 0)}function QX(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!pM(e,YX)&&pM(e,JX)){const n=qX(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function yO({keyframes:e,restDelta:t,restSpeed:n,...i}){const c=e[0],d=e[e.length-1],p={done:!1,value:c},{stiffness:s,damping:_,mass:S,duration:E,velocity:A,isResolvedFromDuration:I}=QX({...i,velocity:-Ha(i.velocity||0)}),O=A||0,N=_/(2*Math.sqrt(s*S)),$=d-c,K=Ha(Math.sqrt(s/S)),W=Math.abs($)<5;n||(n=W?.01:2),t||(t=W?.005:.5);let B;if(N<1){const U=Y2(K,N);B=J=>{const ee=Math.exp(-N*K*J);return d-ee*((O+N*K*$)/U*Math.sin(U*J)+$*Math.cos(U*J))}}else if(N===1)B=U=>d-Math.exp(-K*U)*($+(O+K*$)*U);else{const U=K*Math.sqrt(N*N-1);B=J=>{const ee=Math.exp(-N*K*J),ye=Math.min(U*J,300);return d-ee*((O+N*K*$)*Math.sinh(ye)+U*$*Math.cosh(ye))/U}}return{calculatedDuration:I&&E||null,next:U=>{const J=B(U);if(I)p.done=U>=E;else{let ee=O;U!==0&&(N<1?ee=gO(B,U,J):ee=0);const ye=Math.abs(ee)<=n,Q=Math.abs(d-J)<=t;p.done=ye&&Q}return p.value=p.done?d:J,p}}}function mM({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:c=10,bounceStiffness:d=500,modifyTarget:p,min:s,max:_,restDelta:S=.5,restSpeed:E}){const A=e[0],I={done:!1,value:A},O=be=>s!==void 0&&be<s||_!==void 0&&be>_,N=be=>s===void 0?_:_===void 0||Math.abs(s-be)<Math.abs(_-be)?s:_;let $=n*t;const K=A+$,W=p===void 0?K:p(K);W!==K&&($=W-A);const B=be=>-$*Math.exp(-be/i),U=be=>W+B(be),J=be=>{const re=B(be),Ie=U(be);I.done=Math.abs(re)<=S,I.value=I.done?W:Ie};let ee,ye;const Q=be=>{O(I.value)&&(ee=be,ye=yO({keyframes:[I.value,N(I.value)],velocity:gO(U,be,I.value),damping:c,stiffness:d,restDelta:S,restSpeed:E}))};return Q(0),{calculatedDuration:null,next:be=>{let re=!1;return!ye&&ee===void 0&&(re=!0,J(be),Q(be)),ee!==void 0&&be>ee?ye.next(be-ee):(!re&&J(be),I)}}}const eJ=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Ir.update(t,!0),stop:()=>Xa(t),now:()=>qi.isProcessing?qi.timestamp:performance.now()}},gM=2e4;function yM(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<gM;)t+=n,i=e.next(t);return t>=gM?1/0:t}const tJ={decay:mM,inertia:mM,tween:x_,keyframes:x_,spring:yO};function Dg({autoplay:e=!0,delay:t=0,driver:n=eJ,keyframes:i,type:c="keyframes",repeat:d=0,repeatDelay:p=0,repeatType:s="loop",onPlay:_,onStop:S,onComplete:E,onUpdate:A,...I}){let O=1,N=!1,$,K;const W=()=>{K=new Promise(rt=>{$=rt})};W();let B;const U=tJ[c]||x_;let J;U!==x_&&typeof i[0]!="number"&&(J=yT([0,100],i,{clamp:!1}),i=[0,100]);const ee=U({...I,keyframes:i});let ye;s==="mirror"&&(ye=U({...I,keyframes:[...i].reverse(),velocity:-(I.velocity||0)}));let Q="idle",be=null,re=null,Ie=null;ee.calculatedDuration===null&&d&&(ee.calculatedDuration=yM(ee));const{calculatedDuration:Be}=ee;let le=1/0,xe=1/0;Be!==null&&(le=Be+p,xe=le*(d+1)-p);let Se=0;const oe=rt=>{if(re===null)return;O>0&&(re=Math.min(re,rt)),O<0&&(re=Math.min(rt-xe/O,re)),be!==null?Se=be:Se=Math.round(rt-re)*O;const Ct=Se-t*(O>=0?1:-1),It=O>=0?Ct<0:Ct>xe;Se=Math.max(Ct,0),Q==="finished"&&be===null&&(Se=xe);let Pt=Se,Kt=ee;if(d){const Vt=Math.min(Se,xe)/le;let ln=Math.floor(Vt),zt=Vt%1;!zt&&Vt>=1&&(zt=1),zt===1&&ln--,ln=Math.min(ln,d+1),!!(ln%2)&&(s==="reverse"?(zt=1-zt,p&&(zt-=p/le)):s==="mirror"&&(Kt=ye)),Pt=Gc(0,1,zt)*le}const nn=It?{done:!1,value:i[0]}:Kt.next(Pt);J&&(nn.value=J(nn.value));let{done:an}=nn;!It&&Be!==null&&(an=O>=0?Se>=xe:Se<=0);const ct=be===null&&(Q==="finished"||Q==="running"&&an);return A&&A(nn.value),ct&&ve(),nn},te=()=>{B&&B.stop(),B=void 0},Ce=()=>{Q="idle",te(),$(),W(),re=Ie=null},ve=()=>{Q="finished",E&&E(),te(),$()},Fe=()=>{if(N)return;B||(B=n(oe));const rt=B.now();_&&_(),be!==null?re=rt-be:(!re||Q==="finished")&&(re=rt),Q==="finished"&&W(),Ie=re,be=null,Q="running",B.start()};e&&Fe();const Ge={then(rt,Ct){return K.then(rt,Ct)},get time(){return Ha(Se)},set time(rt){rt=$c(rt),Se=rt,be!==null||!B||O===0?be=rt:re=B.now()-rt/O},get duration(){const rt=ee.calculatedDuration===null?yM(ee):ee.calculatedDuration;return Ha(rt)},get speed(){return O},set speed(rt){rt===O||!B||(O=rt,Ge.time=Ha(Se))},get state(){return Q},play:Fe,pause:()=>{Q="paused",be=Se},stop:()=>{N=!0,Q!=="idle"&&(Q="idle",S&&S(),Ce())},cancel:()=>{Ie!==null&&oe(Ie),Ce()},complete:()=>{Q="finished"},sample:rt=>(re=0,oe(rt))};return Ge}function nJ(e){let t;return()=>(t===void 0&&(t=e()),t)}const rJ=nJ(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),iJ=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),sv=10,oJ=2e4,sJ=(e,t)=>t.type==="spring"||e==="backgroundColor"||!KR(t.ease);function aJ(e,t,{onUpdate:n,onComplete:i,...c}){if(!(rJ()&&iJ.has(t)&&!c.repeatDelay&&c.repeatType!=="mirror"&&c.damping!==0&&c.type!=="inertia"))return!1;let p=!1,s,_,S=!1;const E=()=>{_=new Promise(U=>{s=U})};E();let{keyframes:A,duration:I=300,ease:O,times:N}=c;if(sJ(t,c)){const U=Dg({...c,repeat:0,delay:0});let J={done:!1,value:A[0]};const ee=[];let ye=0;for(;!J.done&&ye<oJ;)J=U.sample(ye),ee.push(J.value),ye+=sv;N=void 0,A=ee,I=ye-sv,O="linear"}const $=yX(e.owner.current,t,A,{...c,duration:I,ease:O,times:N}),K=()=>{S=!1,$.cancel()},W=()=>{S=!0,Ir.update(K),s(),E()};return $.onfinish=()=>{S||(e.set(vX(A,c)),i&&i(),W())},{then(U,J){return _.then(U,J)},attachTimeline(U){return $.timeline=U,$.onfinish=null,hi},get time(){return Ha($.currentTime||0)},set time(U){$.currentTime=$c(U)},get speed(){return $.playbackRate},set speed(U){$.playbackRate=U},get duration(){return Ha(I)},play:()=>{p||($.play(),Xa(K))},pause:()=>$.pause(),stop:()=>{if(p=!0,$.playState==="idle")return;const{currentTime:U}=$;if(U){const J=Dg({...c,autoplay:!1});e.setWithVelocity(J.sample(U-sv).value,J.sample(U).value,sv)}W()},complete:()=>{S||$.finish()},cancel:W}}function lJ({keyframes:e,delay:t,onUpdate:n,onComplete:i}){const c=()=>(n&&n(e[e.length-1]),i&&i(),{time:0,speed:1,duration:0,play:hi,pause:hi,stop:hi,then:d=>(d(),Promise.resolve()),cancel:hi,complete:hi});return t?Dg({keyframes:[0,1],duration:0,delay:t,onComplete:c}):c()}const cJ={type:"spring",stiffness:500,damping:25,restSpeed:10},uJ=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),dJ={type:"keyframes",duration:.8},hJ={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fJ=(e,{keyframes:t})=>t.length>2?dJ:bd.has(e)?e.startsWith("scale")?uJ(t[1]):cJ:hJ,Q2=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Hc.test(t)||t==="0")&&!t.startsWith("url(")),pJ=new Set(["brightness","contrast","saturate","opacity"]);function mJ(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(jx)||[];if(!i)return e;const c=n.replace(i,"");let d=pJ.has(t)?1:0;return i!==n&&(d*=100),t+"("+d+c+")"}const gJ=/([a-z-]*)\(.*?\)/g,eS={...Hc,getAnimatableNone:e=>{const t=e.match(gJ);return t?t.map(mJ).join(" "):e}},yJ={...zR,color:Eo,backgroundColor:Eo,outlineColor:Eo,fill:Eo,stroke:Eo,borderColor:Eo,borderTopColor:Eo,borderRightColor:Eo,borderBottomColor:Eo,borderLeftColor:Eo,filter:eS,WebkitFilter:eS},vT=e=>yJ[e];function vO(e,t){let n=vT(e);return n!==eS&&(n=Hc),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const _O=e=>/^0[^.\s]+$/.test(e);function vJ(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||_O(e)}function _J(e,t,n,i){const c=Q2(t,n);let d;Array.isArray(n)?d=[...n]:d=[null,n];const p=i.from!==void 0?i.from:e.get();let s;const _=[];for(let S=0;S<d.length;S++)d[S]===null&&(d[S]=S===0?p:d[S-1]),vJ(d[S])&&_.push(S),typeof d[S]=="string"&&d[S]!=="none"&&d[S]!=="0"&&(s=d[S]);if(c&&_.length&&s)for(let S=0;S<_.length;S++){const E=_[S];d[E]=vO(t,s)}return d}function xJ({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:c,repeat:d,repeatType:p,repeatDelay:s,from:_,elapsed:S,...E}){return!!Object.keys(E).length}function _T(e,t){return e[t]||e.default||e}const bJ={skipAnimations:!1},xT=(e,t,n,i={})=>c=>{const d=_T(i,e)||{},p=d.delay||i.delay||0;let{elapsed:s=0}=i;s=s-$c(p);const _=_J(t,e,n,d),S=_[0],E=_[_.length-1],A=Q2(e,S),I=Q2(e,E);let O={keyframes:_,velocity:t.getVelocity(),ease:"easeOut",...d,delay:-s,onUpdate:N=>{t.set(N),d.onUpdate&&d.onUpdate(N)},onComplete:()=>{c(),d.onComplete&&d.onComplete()}};if(xJ(d)||(O={...O,...fJ(e,O)}),O.duration&&(O.duration=$c(O.duration)),O.repeatDelay&&(O.repeatDelay=$c(O.repeatDelay)),!A||!I||gX.current||d.type===!1||bJ.skipAnimations)return lJ(O);if(!i.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const N=aJ(t,e,O);if(N)return N}return Dg(O)};function b_(e){return!!(xo(e)&&e.add)}const xO=e=>/^\-?\d*\.?\d+$/.test(e);function bT(e,t){e.indexOf(t)===-1&&e.push(t)}function wT(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class ST{constructor(){this.subscriptions=[]}add(t){return bT(this.subscriptions,t),()=>wT(this.subscriptions,t)}notify(t,n,i){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,n,i);else for(let d=0;d<c;d++){const p=this.subscriptions[d];p&&p(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const wJ=e=>!isNaN(parseFloat(e)),Km={current:void 0};class SJ{constructor(t,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,c=!0)=>{this.prev=this.current,this.current=i;const{delta:d,timestamp:p}=qi;this.lastUpdated!==p&&(this.timeDelta=d,this.lastUpdated=p,Ir.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ir.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=wJ(this.current),this.owner=n.owner}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new ST);const i=this.events[t].add(n);return t==="change"?()=>{i(),Ir.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=t,this.timeDelta=i}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Km.current&&Km.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?mO(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function md(e,t){return new SJ(e,t)}const bO=e=>t=>t.test(e),EJ={test:e=>e==="auto",parse:e=>e},wO=[wd,In,Ga,_c,MK,PK,EJ],Em=e=>wO.find(bO(e)),TJ=[...wO,Eo,Hc],CJ=e=>TJ.find(bO(e));function AJ(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,md(n))}function kJ(e,t){const n=Vx(e,t);let{transitionEnd:i={},transition:c={},...d}=n?e.makeTargetAnimatable(n,!1):{};d={...d,...i};for(const p in d){const s=GK(d[p]);AJ(e,p,s)}}function IJ(e,t,n){var i,c;const d=Object.keys(t).filter(s=>!e.hasValue(s)),p=d.length;if(p)for(let s=0;s<p;s++){const _=d[s],S=t[_];let E=null;Array.isArray(S)&&(E=S[0]),E===null&&(E=(c=(i=n[_])!==null&&i!==void 0?i:e.readValue(_))!==null&&c!==void 0?c:t[_]),E!=null&&(typeof E=="string"&&(xO(E)||_O(E))?E=parseFloat(E):!CJ(E)&&Hc.test(S)&&(E=vO(_,S)),e.addValue(_,md(E,{owner:e})),n[_]===void 0&&(n[_]=E),E!==null&&e.setBaseTarget(_,E))}}function PJ(e,t){return t?(t[e]||t.default||t).from:void 0}function MJ(e,t,n){const i={};for(const c in e){const d=PJ(c,t);if(d!==void 0)i[c]=d;else{const p=n.getValue(c);p&&(i[c]=p.get())}}return i}function DJ({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function zJ(e,t){const n=e.get();if(Array.isArray(t)){for(let i=0;i<t.length;i++)if(t[i]!==n)return!0}else return n!==t}function SO(e,t,{delay:n=0,transitionOverride:i,type:c}={}){let{transition:d=e.getDefaultTransition(),transitionEnd:p,...s}=e.makeTargetAnimatable(t);const _=e.getValue("willChange");i&&(d=i);const S=[],E=c&&e.animationState&&e.animationState.getState()[c];for(const A in s){const I=e.getValue(A),O=s[A];if(!I||O===void 0||E&&DJ(E,A))continue;const N={delay:n,elapsed:0,..._T(d||{},A)};if(window.HandoffAppearAnimations){const W=e.getProps()[CR];if(W){const B=window.HandoffAppearAnimations(W,A,I,Ir);B!==null&&(N.elapsed=B,N.isHandoff=!0)}}let $=!N.isHandoff&&!zJ(I,O);if(N.type==="spring"&&(I.getVelocity()||N.velocity)&&($=!1),I.animation&&($=!1),$)continue;I.start(xT(A,I,O,e.shouldReduceMotion&&bd.has(A)?{type:!1}:N));const K=I.animation;b_(_)&&(_.add(A),K.then(()=>_.remove(A))),S.push(K)}return p&&Promise.all(S).then(()=>{p&&kJ(e,p)}),S}function tS(e,t,n={}){const i=Vx(e,t,n.custom);let{transition:c=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(c=n.transitionOverride);const d=i?()=>Promise.all(SO(e,i,n)):()=>Promise.resolve(),p=e.variantChildren&&e.variantChildren.size?(_=0)=>{const{delayChildren:S=0,staggerChildren:E,staggerDirection:A}=c;return LJ(e,t,S+_,E,A,n)}:()=>Promise.resolve(),{when:s}=c;if(s){const[_,S]=s==="beforeChildren"?[d,p]:[p,d];return _().then(()=>S())}else return Promise.all([d(),p(n.delay)])}function LJ(e,t,n=0,i=0,c=1,d){const p=[],s=(e.variantChildren.size-1)*i,_=c===1?(S=0)=>S*i:(S=0)=>s-S*i;return Array.from(e.variantChildren).sort(RJ).forEach((S,E)=>{S.notify("AnimationStart",t),p.push(tS(S,t,{...d,delay:n+_(E)}).then(()=>S.notify("AnimationComplete",t)))}),Promise.all(p)}function RJ(e,t){return e.sortNodePosition(t)}function OJ(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const c=t.map(d=>tS(e,d,n));i=Promise.all(c)}else if(typeof t=="string")i=tS(e,t,n);else{const c=typeof t=="function"?Vx(e,t,n.custom):t;i=Promise.all(SO(e,c,n))}return i.then(()=>e.notify("AnimationComplete",t))}const BJ=[...rT].reverse(),FJ=rT.length;function jJ(e){return t=>Promise.all(t.map(({animation:n,options:i})=>OJ(e,n,i)))}function NJ(e){let t=jJ(e);const n=VJ();let i=!0;const c=(_,S)=>{const E=Vx(e,S);if(E){const{transition:A,transitionEnd:I,...O}=E;_={..._,...O,...I}}return _};function d(_){t=_(e)}function p(_,S){const E=e.getProps(),A=e.getVariantContext(!0)||{},I=[],O=new Set;let N={},$=1/0;for(let W=0;W<FJ;W++){const B=BJ[W],U=n[B],J=E[B]!==void 0?E[B]:A[B],ee=Ig(J),ye=B===S?U.isActive:null;ye===!1&&($=W);let Q=J===A[B]&&J!==E[B]&&ee;if(Q&&i&&e.manuallyAnimateOnMount&&(Q=!1),U.protectedKeys={...N},!U.isActive&&ye===null||!J&&!U.prevProp||Bx(J)||typeof J=="boolean")continue;let re=$J(U.prevProp,J)||B===S&&U.isActive&&!Q&&ee||W>$&&ee,Ie=!1;const Be=Array.isArray(J)?J:[J];let le=Be.reduce(c,{});ye===!1&&(le={});const{prevResolvedValues:xe={}}=U,Se={...xe,...le},oe=te=>{re=!0,O.has(te)&&(Ie=!0,O.delete(te)),U.needsAnimating[te]=!0};for(const te in Se){const Ce=le[te],ve=xe[te];if(N.hasOwnProperty(te))continue;let Fe=!1;v_(Ce)&&v_(ve)?Fe=!ZR(Ce,ve):Fe=Ce!==ve,Fe?Ce!==void 0?oe(te):O.add(te):Ce!==void 0&&O.has(te)?oe(te):U.protectedKeys[te]=!0}U.prevProp=J,U.prevResolvedValues=le,U.isActive&&(N={...N,...le}),i&&e.blockInitialAnimation&&(re=!1),re&&(!Q||Ie)&&I.push(...Be.map(te=>({animation:te,options:{type:B,..._}})))}if(O.size){const W={};O.forEach(B=>{const U=e.getBaseTarget(B);U!==void 0&&(W[B]=U)}),I.push({animation:W})}let K=!!I.length;return i&&(E.initial===!1||E.initial===E.animate)&&!e.manuallyAnimateOnMount&&(K=!1),i=!1,K?t(I):Promise.resolve()}function s(_,S,E){var A;if(n[_].isActive===S)return Promise.resolve();(A=e.variantChildren)===null||A===void 0||A.forEach(O=>{var N;return(N=O.animationState)===null||N===void 0?void 0:N.setActive(_,S)}),n[_].isActive=S;const I=p(E,_);for(const O in n)n[O].protectedKeys={};return I}return{animateChanges:p,setActive:s,setAnimateFunction:d,getState:()=>n}}function $J(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ZR(t,e):!1}function Nu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VJ(){return{animate:Nu(!0),whileInView:Nu(),whileHover:Nu(),whileTap:Nu(),whileDrag:Nu(),whileFocus:Nu(),exit:Nu()}}class UJ extends Jc{constructor(t){super(t),t.animationState||(t.animationState=NJ(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Bx(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let WJ=0;class GJ extends Jc{constructor(){super(...arguments),this.id=WJ++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n,custom:i}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===c)return;const d=this.node.animationState.setActive("exit",!t,{custom:i??this.node.getProps().custom});n&&!t&&d.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const HJ={animation:{Feature:UJ},exit:{Feature:GJ}},vM=(e,t)=>Math.abs(e-t);function ZJ(e,t){const n=vM(e.x,t.x),i=vM(e.y,t.y);return Math.sqrt(n**2+i**2)}class EO{constructor(t,n,{transformPagePoint:i,contextWindow:c,dragSnapToOrigin:d=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=Tw(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,O=ZJ(A.offset,{x:0,y:0})>=3;if(!I&&!O)return;const{point:N}=A,{timestamp:$}=qi;this.history.push({...N,timestamp:$});const{onStart:K,onMove:W}=this.handlers;I||(K&&K(this.lastMoveEvent,A),this.startEvent=this.lastMoveEvent),W&&W(this.lastMoveEvent,A)},this.handlePointerMove=(A,I)=>{this.lastMoveEvent=A,this.lastMoveEventInfo=Ew(I,this.transformPagePoint),Ir.update(this.updatePoint,!0)},this.handlePointerUp=(A,I)=>{this.end();const{onEnd:O,onSessionEnd:N,resumeAnimation:$}=this.handlers;if(this.dragSnapToOrigin&&$&&$(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const K=Tw(A.type==="pointercancel"?this.lastMoveEventInfo:Ew(I,this.transformPagePoint),this.history);this.startEvent&&O&&O(A,K),N&&N(A,K)},!VR(t))return;this.dragSnapToOrigin=d,this.handlers=n,this.transformPagePoint=i,this.contextWindow=c||window;const p=$x(t),s=Ew(p,this.transformPagePoint),{point:_}=s,{timestamp:S}=qi;this.history=[{..._,timestamp:S}];const{onSessionStart:E}=n;E&&E(t,Tw(s,this.history)),this.removeListeners=Nc(Pl(this.contextWindow,"pointermove",this.handlePointerMove),Pl(this.contextWindow,"pointerup",this.handlePointerUp),Pl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Xa(this.updatePoint)}}function Ew(e,t){return t?{point:t(e.point)}:e}function _M(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Tw({point:e},t){return{point:e,delta:_M(e,TO(t)),offset:_M(e,qJ(t)),velocity:KJ(t,.1)}}function qJ(e){return e[0]}function TO(e){return e[e.length-1]}function KJ(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const c=TO(e);for(;n>=0&&(i=e[n],!(c.timestamp-i.timestamp>$c(t)));)n--;if(!i)return{x:0,y:0};const d=Ha(c.timestamp-i.timestamp);if(d===0)return{x:0,y:0};const p={x:(c.x-i.x)/d,y:(c.y-i.y)/d};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function hs(e){return e.max-e.min}function nS(e,t=0,n=.01){return Math.abs(e-t)<=n}function xM(e,t,n,i=.5){e.origin=i,e.originPoint=ri(t.min,t.max,e.origin),e.scale=hs(n)/hs(t),(nS(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=ri(n.min,n.max,e.origin)-e.originPoint,(nS(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Xm(e,t,n,i){xM(e.x,t.x,n.x,i?i.originX:void 0),xM(e.y,t.y,n.y,i?i.originY:void 0)}function bM(e,t,n){e.min=n.min+t.min,e.max=e.min+hs(t)}function XJ(e,t,n){bM(e.x,t.x,n.x),bM(e.y,t.y,n.y)}function wM(e,t,n){e.min=t.min-n.min,e.max=e.min+hs(t)}function Jm(e,t,n){wM(e.x,t.x,n.x),wM(e.y,t.y,n.y)}function JJ(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?ri(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?ri(n,e,i.max):Math.min(e,n)),e}function SM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function YJ(e,{top:t,left:n,bottom:i,right:c}){return{x:SM(e.x,n,c),y:SM(e.y,t,i)}}function EM(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function QJ(e,t){return{x:EM(e.x,t.x),y:EM(e.y,t.y)}}function eY(e,t){let n=.5;const i=hs(e),c=hs(t);return c>i?n=Mg(t.min,t.max-i,e.min):i>c&&(n=Mg(e.min,e.max-c,t.min)),Gc(0,1,n)}function tY(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const rS=.35;function nY(e=rS){return e===!1?e=0:e===!0&&(e=rS),{x:TM(e,"left","right"),y:TM(e,"top","bottom")}}function TM(e,t,n){return{min:CM(e,t),max:CM(e,n)}}function CM(e,t){return typeof e=="number"?e:e[t]||0}const AM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Kh=()=>({x:AM(),y:AM()}),kM=()=>({min:0,max:0}),Pi=()=>({x:kM(),y:kM()});function ks(e){return[e("x"),e("y")]}function CO({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function rY({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function iY(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function Cw(e){return e===void 0||e===1}function iS({scale:e,scaleX:t,scaleY:n}){return!Cw(e)||!Cw(t)||!Cw(n)}function Wu(e){return iS(e)||AO(e)||e.z||e.rotate||e.rotateX||e.rotateY}function AO(e){return IM(e.x)||IM(e.y)}function IM(e){return e&&e!=="0%"}function w_(e,t,n){const i=e-n,c=t*i;return n+c}function PM(e,t,n,i,c){return c!==void 0&&(e=w_(e,c,i)),w_(e,n,i)+t}function oS(e,t=0,n=1,i,c){e.min=PM(e.min,t,n,i,c),e.max=PM(e.max,t,n,i,c)}function kO(e,{x:t,y:n}){oS(e.x,t.translate,t.scale,t.originPoint),oS(e.y,n.translate,n.scale,n.originPoint)}function oY(e,t,n,i=!1){const c=n.length;if(!c)return;t.x=t.y=1;let d,p;for(let s=0;s<c;s++){d=n[s],p=d.projectionDelta;const _=d.instance;_&&_.style&&_.style.display==="contents"||(i&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Xh(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),p&&(t.x*=p.x.scale,t.y*=p.y.scale,kO(e,p)),i&&Wu(d.latestValues)&&Xh(e,d.latestValues))}t.x=MM(t.x),t.y=MM(t.y)}function MM(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function wc(e,t){e.min=e.min+t,e.max=e.max+t}function DM(e,t,[n,i,c]){const d=t[c]!==void 0?t[c]:.5,p=ri(e.min,e.max,d);oS(e,t[n],t[i],p,t.scale)}const sY=["x","scaleX","originX"],aY=["y","scaleY","originY"];function Xh(e,t){DM(e.x,t,sY),DM(e.y,t,aY)}function IO(e,t){return CO(iY(e.getBoundingClientRect(),t))}function lY(e,t,n){const i=IO(e,n),{scroll:c}=t;return c&&(wc(i.x,c.offset.x),wc(i.y,c.offset.y)),i}const PO=({current:e})=>e?e.ownerDocument.defaultView:null,cY=new WeakMap;class uY{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pi(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const c=E=>{const{dragSnapToOrigin:A}=this.getProps();A?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor($x(E,"page").point)},d=(E,A)=>{const{drag:I,dragPropagation:O,onDragStart:N}=this.getProps();if(I&&!O&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=WR(I),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ks(K=>{let W=this.getAxisMotionValue(K).get()||0;if(Ga.test(W)){const{projection:B}=this.visualElement;if(B&&B.layout){const U=B.layout.layoutBox[K];U&&(W=hs(U)*(parseFloat(W)/100))}}this.originPoint[K]=W}),N&&Ir.update(()=>N(E,A),!1,!0);const{animationState:$}=this.visualElement;$&&$.setActive("whileDrag",!0)},p=(E,A)=>{const{dragPropagation:I,dragDirectionLock:O,onDirectionLock:N,onDrag:$}=this.getProps();if(!I&&!this.openGlobalLock)return;const{offset:K}=A;if(O&&this.currentDirection===null){this.currentDirection=dY(K),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",A.point,K),this.updateAxis("y",A.point,K),this.visualElement.render(),$&&$(E,A)},s=(E,A)=>this.stop(E,A),_=()=>ks(E=>{var A;return this.getAnimationState(E)==="paused"&&((A=this.getAxisMotionValue(E).animation)===null||A===void 0?void 0:A.play())}),{dragSnapToOrigin:S}=this.getProps();this.panSession=new EO(t,{onSessionStart:c,onStart:d,onMove:p,onSessionEnd:s,resumeAnimation:_},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,contextWindow:PO(this.visualElement)})}stop(t,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:c}=n;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&Ir.update(()=>d(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:c}=this.getProps();if(!i||!av(t,c,this.currentDirection))return;const d=this.getAxisMotionValue(t);let p=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(p=JJ(p,this.constraints[t],this.elastic[t])),d.set(p)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:i}=this.getProps(),c=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,d=this.constraints;n&&Zh(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&c?this.constraints=YJ(c.layoutBox,n):this.constraints=!1,this.elastic=nY(i),d!==this.constraints&&c&&this.constraints&&!this.hasMutatedConstraints&&ks(p=>{this.getAxisMotionValue(p)&&(this.constraints[p]=tY(c.layoutBox[p],this.constraints[p]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Zh(t))return!1;const i=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const d=lY(i,c.root,this.visualElement.getTransformPagePoint());let p=QJ(c.layout.layoutBox,d);if(n){const s=n(rY(p));this.hasMutatedConstraints=!!s,s&&(p=CO(s))}return p}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:c,dragTransition:d,dragSnapToOrigin:p,onDragTransitionEnd:s}=this.getProps(),_=this.constraints||{},S=ks(E=>{if(!av(E,n,this.currentDirection))return;let A=_&&_[E]||{};p&&(A={min:0,max:0});const I=c?200:1e6,O=c?40:1e7,N={type:"inertia",velocity:i?t[E]:0,bounceStiffness:I,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...d,...A};return this.startAxisValueAnimation(E,N)});return Promise.all(S).then(s)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return i.start(xT(t,i,0,n))}stopAnimation(){ks(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ks(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n="_drag"+t.toUpperCase(),i=this.visualElement.getProps(),c=i[n];return c||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){ks(n=>{const{drag:i}=this.getProps();if(!av(n,i,this.currentDirection))return;const{projection:c}=this.visualElement,d=this.getAxisMotionValue(n);if(c&&c.layout){const{min:p,max:s}=c.layout.layoutBox[n];d.set(t[n]-ri(p,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Zh(n)||!i||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};ks(p=>{const s=this.getAxisMotionValue(p);if(s){const _=s.get();c[p]=eY({min:_,max:_},this.constraints[p])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),ks(p=>{if(!av(p,t,null))return;const s=this.getAxisMotionValue(p),{min:_,max:S}=this.constraints[p];s.set(ri(_,S,c[p]))})}addListeners(){if(!this.visualElement.current)return;cY.set(this.visualElement,this);const t=this.visualElement.current,n=Pl(t,"pointerdown",_=>{const{drag:S,dragListener:E=!0}=this.getProps();S&&E&&this.start(_)}),i=()=>{const{dragConstraints:_}=this.getProps();Zh(_)&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,d=c.addEventListener("measure",i);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),i();const p=Al(window,"resize",()=>this.scalePositionWithinConstraints()),s=c.addEventListener("didUpdate",({delta:_,hasLayoutChanged:S})=>{this.isDragging&&S&&(ks(E=>{const A=this.getAxisMotionValue(E);A&&(this.originPoint[E]+=_[E].translate,A.set(A.get()+_[E].translate))}),this.visualElement.render())});return()=>{p(),n(),d(),s&&s()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:c=!1,dragConstraints:d=!1,dragElastic:p=rS,dragMomentum:s=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:c,dragConstraints:d,dragElastic:p,dragMomentum:s}}}function av(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function dY(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class hY extends Jc{constructor(t){super(t),this.removeGroupControls=hi,this.removeListeners=hi,this.controls=new uY(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hi}unmount(){this.removeGroupControls(),this.removeListeners()}}const zM=e=>(t,n)=>{e&&Ir.update(()=>e(t,n))};class fY extends Jc{constructor(){super(...arguments),this.removePointerDownListener=hi}onPointerDown(t){this.session=new EO(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:PO(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:c}=this.node.getProps();return{onSessionStart:zM(t),onStart:zM(n),onMove:i,onEnd:(d,p)=>{delete this.session,c&&Ir.update(()=>c(d,p))}}}mount(){this.removePointerDownListener=Pl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function pY(){const e=q.useContext(Rx);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:i}=e,c=q.useId();return q.useEffect(()=>i(c),[]),!t&&n?[!1,()=>n&&n(c)]:[!0]}const Mv={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function LM(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Tm={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(In.test(e))e=parseFloat(e);else return e;const n=LM(e,t.target.x),i=LM(e,t.target.y);return`${n}% ${i}%`}},mY={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,c=Hc.parse(e);if(c.length>5)return i;const d=Hc.createTransformer(e),p=typeof c[0]!="number"?1:0,s=n.x.scale*t.x,_=n.y.scale*t.y;c[0+p]/=s,c[1+p]/=_;const S=ri(s,_,.5);return typeof c[2+p]=="number"&&(c[2+p]/=S),typeof c[3+p]=="number"&&(c[3+p]/=S),d(c)}};class gY extends At.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:c}=this.props,{projection:d}=t;SK(yY),d&&(n.group&&n.group.add(d),i&&i.register&&c&&i.register(d),d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),Mv.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:c,isPresent:d}=this.props,p=i.projection;return p&&(p.isPresent=d,c||t.layoutDependency!==n||n===void 0?p.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?p.promote():p.relegate()||Ir.postRender(()=>{const s=p.getStack();(!s||!s.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:c}=t;c&&(c.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(c),i&&i.deregister&&i.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MO(e){const[t,n]=pY(),i=q.useContext(oT);return At.createElement(gY,{...e,layoutGroup:i,switchLayoutGroup:q.useContext(kR),isPresent:t,safeToRemove:n})}const yY={borderRadius:{...Tm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Tm,borderTopRightRadius:Tm,borderBottomLeftRadius:Tm,borderBottomRightRadius:Tm,boxShadow:mY},DO=["TopLeft","TopRight","BottomLeft","BottomRight"],vY=DO.length,RM=e=>typeof e=="string"?parseFloat(e):e,OM=e=>typeof e=="number"||In.test(e);function _Y(e,t,n,i,c,d){c?(e.opacity=ri(0,n.opacity!==void 0?n.opacity:1,xY(i)),e.opacityExit=ri(t.opacity!==void 0?t.opacity:1,0,bY(i))):d&&(e.opacity=ri(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let p=0;p<vY;p++){const s=`border${DO[p]}Radius`;let _=BM(t,s),S=BM(n,s);if(_===void 0&&S===void 0)continue;_||(_=0),S||(S=0),_===0||S===0||OM(_)===OM(S)?(e[s]=Math.max(ri(RM(_),RM(S),i),0),(Ga.test(S)||Ga.test(_))&&(e[s]+="%")):e[s]=S}(t.rotate||n.rotate)&&(e.rotate=ri(t.rotate||0,n.rotate||0,i))}function BM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const xY=zO(0,.5,nO),bY=zO(.5,.95,hi);function zO(e,t,n){return i=>i<e?0:i>t?1:n(Mg(e,t,i))}function FM(e,t){e.min=t.min,e.max=t.max}function Cs(e,t){FM(e.x,t.x),FM(e.y,t.y)}function jM(e,t,n,i,c){return e-=t,e=w_(e,1/n,i),c!==void 0&&(e=w_(e,1/c,i)),e}function wY(e,t=0,n=1,i=.5,c,d=e,p=e){if(Ga.test(t)&&(t=parseFloat(t),t=ri(p.min,p.max,t/100)-p.min),typeof t!="number")return;let s=ri(d.min,d.max,i);e===d&&(s-=t),e.min=jM(e.min,t,n,s,c),e.max=jM(e.max,t,n,s,c)}function NM(e,t,[n,i,c],d,p){wY(e,t[n],t[i],t[c],t.scale,d,p)}const SY=["x","scaleX","originX"],EY=["y","scaleY","originY"];function $M(e,t,n,i){NM(e.x,t,SY,n?n.x:void 0,i?i.x:void 0),NM(e.y,t,EY,n?n.y:void 0,i?i.y:void 0)}function VM(e){return e.translate===0&&e.scale===1}function LO(e){return VM(e.x)&&VM(e.y)}function TY(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function RO(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function UM(e){return hs(e.x)/hs(e.y)}class CY{constructor(){this.members=[]}add(t){bT(this.members,t),t.scheduleRender()}remove(t){if(wT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(c=>t===c);if(n===0)return!1;let i;for(let c=n;c>=0;c--){const d=this.members[c];if(d.isPresent!==!1){i=d;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function WM(e,t,n){let i="";const c=e.x.translate/t.x,d=e.y.translate/t.y;if((c||d)&&(i=`translate3d(${c}px, ${d}px, 0) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{rotate:_,rotateX:S,rotateY:E}=n;_&&(i+=`rotate(${_}deg) `),S&&(i+=`rotateX(${S}deg) `),E&&(i+=`rotateY(${E}deg) `)}const p=e.x.scale*t.x,s=e.y.scale*t.y;return(p!==1||s!==1)&&(i+=`scale(${p}, ${s})`),i||"none"}const AY=(e,t)=>e.depth-t.depth;class kY{constructor(){this.children=[],this.isDirty=!1}add(t){bT(this.children,t),this.isDirty=!0}remove(t){wT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(AY),this.isDirty=!1,this.children.forEach(t)}}function IY(e,t){const n=performance.now(),i=({timestamp:c})=>{const d=c-n;d>=t&&(Xa(i),e(d-t))};return Ir.read(i,!0),()=>Xa(i)}function PY(e){window.MotionDebug&&window.MotionDebug.record(e)}function MY(e){return e instanceof SVGElement&&e.tagName!=="svg"}function DY(e,t,n){const i=xo(e)?e:md(e);return i.start(xT("",i,t,n)),i.animation}const GM=["","X","Y","Z"],zY={visibility:"hidden"},HM=1e3;let LY=0;const Gu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function OO({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:c}){return class{constructor(p={},s=t==null?void 0:t()){this.id=LY++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Gu.totalNodes=Gu.resolvedTargetDeltas=Gu.recalculatedProjection=0,this.nodes.forEach(BY),this.nodes.forEach(VY),this.nodes.forEach(UY),this.nodes.forEach(FY),PY(Gu)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=p,this.root=s?s.root||s:this,this.path=s?[...s.path,s]:[],this.parent=s,this.depth=s?s.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new kY)}addEventListener(p,s){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new ST),this.eventHandlers.get(p).add(s)}notifyListeners(p,...s){const _=this.eventHandlers.get(p);_&&_.notify(...s)}hasListeners(p){return this.eventHandlers.has(p)}mount(p,s=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=MY(p),this.instance=p;const{layoutId:_,layout:S,visualElement:E}=this.options;if(E&&!E.current&&E.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),s&&(S||_)&&(this.isLayoutDirty=!0),e){let A;const I=()=>this.root.updateBlockedByResize=!1;e(p,()=>{this.root.updateBlockedByResize=!0,A&&A(),A=IY(I,250),Mv.hasAnimatedSinceResize&&(Mv.hasAnimatedSinceResize=!1,this.nodes.forEach(qM))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&E&&(_||S)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:I,hasRelativeTargetChanged:O,layout:N})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const $=this.options.transition||E.getDefaultTransition()||qY,{onLayoutAnimationStart:K,onLayoutAnimationComplete:W}=E.getProps(),B=!this.targetLayout||!RO(this.targetLayout,N)||O,U=!I&&O;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||U||I&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(A,U);const J={..._T($,"layout"),onPlay:K,onComplete:W};(E.shouldReduceMotion||this.options.layoutRoot)&&(J.delay=0,J.type=!1),this.startAnimation(J)}else I||qM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=N})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(WY),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let E=0;E<this.path.length;E++){const A=this.path[E];A.shouldResetTransform=!0,A.updateScroll("snapshot"),A.options.layoutRoot&&A.willUpdate(!1)}const{layoutId:s,layout:_}=this.options;if(s===void 0&&!_)return;const S=this.getTransformTemplate();this.prevTransformTemplateValue=S?S(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ZM);return}this.isUpdating||this.nodes.forEach(NY),this.isUpdating=!1,this.nodes.forEach($Y),this.nodes.forEach(RY),this.nodes.forEach(OY),this.clearAllSnapshots();const s=performance.now();qi.delta=Gc(0,1e3/60,s-qi.timestamp),qi.timestamp=s,qi.isProcessing=!0,gw.update.process(qi),gw.preRender.process(qi),gw.render.process(qi),qi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(jY),this.sharedNodes.forEach(GY)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ir.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ir.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:s}=this.options;s&&s.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let s=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(s=!1),s&&(this.scroll={animationId:this.root.animationId,phase:p,isRoot:i(this.instance),offset:n(this.instance)})}resetTransform(){if(!c)return;const p=this.isLayoutDirty||this.shouldResetTransform,s=this.projectionDelta&&!LO(this.projectionDelta),_=this.getTransformTemplate(),S=_?_(this.latestValues,""):void 0,E=S!==this.prevTransformTemplateValue;p&&(s||Wu(this.latestValues)||E)&&(c(this.instance,S),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const s=this.measurePageBox();let _=this.removeElementScroll(s);return p&&(_=this.removeTransform(_)),KY(_),{animationId:this.root.animationId,measuredBox:s,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:p}=this.options;if(!p)return Pi();const s=p.measureViewportBox(),{scroll:_}=this.root;return _&&(wc(s.x,_.offset.x),wc(s.y,_.offset.y)),s}removeElementScroll(p){const s=Pi();Cs(s,p);for(let _=0;_<this.path.length;_++){const S=this.path[_],{scroll:E,options:A}=S;if(S!==this.root&&E&&A.layoutScroll){if(E.isRoot){Cs(s,p);const{scroll:I}=this.root;I&&(wc(s.x,-I.offset.x),wc(s.y,-I.offset.y))}wc(s.x,E.offset.x),wc(s.y,E.offset.y)}}return s}applyTransform(p,s=!1){const _=Pi();Cs(_,p);for(let S=0;S<this.path.length;S++){const E=this.path[S];!s&&E.options.layoutScroll&&E.scroll&&E!==E.root&&Xh(_,{x:-E.scroll.offset.x,y:-E.scroll.offset.y}),Wu(E.latestValues)&&Xh(_,E.latestValues)}return Wu(this.latestValues)&&Xh(_,this.latestValues),_}removeTransform(p){const s=Pi();Cs(s,p);for(let _=0;_<this.path.length;_++){const S=this.path[_];if(!S.instance||!Wu(S.latestValues))continue;iS(S.latestValues)&&S.updateSnapshot();const E=Pi(),A=S.measurePageBox();Cs(E,A),$M(s,S.latestValues,S.snapshot?S.snapshot.layoutBox:void 0,E)}return Wu(this.latestValues)&&$M(s,this.latestValues),s}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){var s;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const S=!!this.resumingFrom||this!==_;if(!(p||S&&this.isSharedProjectionDirty||this.isProjectionDirty||!((s=this.parent)===null||s===void 0)&&s.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:A,layoutId:I}=this.options;if(!(!this.layout||!(A||I))){if(this.resolvedRelativeTargetAt=qi.timestamp,!this.targetDelta&&!this.relativeTarget){const O=this.getClosestProjectingParent();O&&O.layout&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pi(),this.relativeTargetOrigin=Pi(),Jm(this.relativeTargetOrigin,this.layout.layoutBox,O.layout.layoutBox),Cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Pi(),this.targetWithTransforms=Pi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XJ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Cs(this.target,this.layout.layoutBox),kO(this.target,this.targetDelta)):Cs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const O=this.getClosestProjectingParent();O&&!!O.resumingFrom==!!this.resumingFrom&&!O.options.layoutScroll&&O.target&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pi(),this.relativeTargetOrigin=Pi(),Jm(this.relativeTargetOrigin,this.target,O.target),Cs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Gu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||iS(this.parent.latestValues)||AO(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const s=this.getLead(),_=!!this.resumingFrom||this!==s;let S=!0;if((this.isProjectionDirty||!((p=this.parent)===null||p===void 0)&&p.isProjectionDirty)&&(S=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(S=!1),this.resolvedRelativeTargetAt===qi.timestamp&&(S=!1),S)return;const{layout:E,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||A))return;Cs(this.layoutCorrected,this.layout.layoutBox);const I=this.treeScale.x,O=this.treeScale.y;oY(this.layoutCorrected,this.treeScale,this.path,_),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox);const{target:N}=s;if(!N){this.projectionTransform&&(this.projectionDelta=Kh(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Kh(),this.projectionDeltaWithTransform=Kh());const $=this.projectionTransform;Xm(this.projectionDelta,this.layoutCorrected,N,this.latestValues),this.projectionTransform=WM(this.projectionDelta,this.treeScale),(this.projectionTransform!==$||this.treeScale.x!==I||this.treeScale.y!==O)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",N)),Gu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),p){const s=this.getStack();s&&s.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(p,s=!1){const _=this.snapshot,S=_?_.latestValues:{},E={...this.latestValues},A=Kh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!s;const I=Pi(),O=_?_.source:void 0,N=this.layout?this.layout.source:void 0,$=O!==N,K=this.getStack(),W=!K||K.members.length<=1,B=!!($&&!W&&this.options.crossfade===!0&&!this.path.some(ZY));this.animationProgress=0;let U;this.mixTargetDelta=J=>{const ee=J/1e3;KM(A.x,p.x,ee),KM(A.y,p.y,ee),this.setTargetDelta(A),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jm(I,this.layout.layoutBox,this.relativeParent.layout.layoutBox),HY(this.relativeTarget,this.relativeTargetOrigin,I,ee),U&&TY(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=Pi()),Cs(U,this.relativeTarget)),$&&(this.animationValues=E,_Y(E,S,this.latestValues,ee,B,W)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ee},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ir.update(()=>{Mv.hasAnimatedSinceResize=!0,this.currentAnimation=DY(0,HM,{...p,onUpdate:s=>{this.mixTargetDelta(s),p.onUpdate&&p.onUpdate(s)},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(HM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:s,target:_,layout:S,latestValues:E}=p;if(!(!s||!_||!S)){if(this!==p&&this.layout&&S&&BO(this.options.animationType,this.layout.layoutBox,S.layoutBox)){_=this.target||Pi();const A=hs(this.layout.layoutBox.x);_.x.min=p.target.x.min,_.x.max=_.x.min+A;const I=hs(this.layout.layoutBox.y);_.y.min=p.target.y.min,_.y.max=_.y.min+I}Cs(s,_),Xh(s,E),Xm(this.projectionDeltaWithTransform,this.layoutCorrected,s,E)}}registerSharedNode(p,s){this.sharedNodes.has(p)||this.sharedNodes.set(p,new CY),this.sharedNodes.get(p).add(s);const S=s.options.initialPromotionConfig;s.promote({transition:S?S.transition:void 0,preserveFollowOpacity:S&&S.shouldPreserveFollowOpacity?S.shouldPreserveFollowOpacity(s):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){var p;const{layoutId:s}=this.options;return s?((p=this.getStack())===null||p===void 0?void 0:p.lead)||this:this}getPrevLead(){var p;const{layoutId:s}=this.options;return s?(p=this.getStack())===null||p===void 0?void 0:p.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:s,preserveFollowOpacity:_}={}){const S=this.getStack();S&&S.promote(this,_),p&&(this.projectionDelta=void 0,this.needsReset=!0),s&&this.setOptions({transition:s})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetRotation(){const{visualElement:p}=this.options;if(!p)return;let s=!1;const{latestValues:_}=p;if((_.rotate||_.rotateX||_.rotateY||_.rotateZ)&&(s=!0),!s)return;const S={};for(let E=0;E<GM.length;E++){const A="rotate"+GM[E];_[A]&&(S[A]=_[A],p.setStaticValue(A,0))}p.render();for(const E in S)p.setStaticValue(E,S[E]);p.scheduleRender()}getProjectionStyles(p){var s,_;if(!this.instance||this.isSVG)return;if(!this.isVisible)return zY;const S={visibility:""},E=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,S.opacity="",S.pointerEvents=Pv(p==null?void 0:p.pointerEvents)||"",S.transform=E?E(this.latestValues,""):"none",S;const A=this.getLead();if(!this.projectionDelta||!this.layout||!A.target){const $={};return this.options.layoutId&&($.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,$.pointerEvents=Pv(p==null?void 0:p.pointerEvents)||""),this.hasProjected&&!Wu(this.latestValues)&&($.transform=E?E({},""):"none",this.hasProjected=!1),$}const I=A.animationValues||A.latestValues;this.applyTransformsToTarget(),S.transform=WM(this.projectionDeltaWithTransform,this.treeScale,I),E&&(S.transform=E(I,S.transform));const{x:O,y:N}=this.projectionDelta;S.transformOrigin=`${O.origin*100}% ${N.origin*100}% 0`,A.animationValues?S.opacity=A===this?(_=(s=I.opacity)!==null&&s!==void 0?s:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:I.opacityExit:S.opacity=A===this?I.opacity!==void 0?I.opacity:"":I.opacityExit!==void 0?I.opacityExit:0;for(const $ in g_){if(I[$]===void 0)continue;const{correct:K,applyTo:W}=g_[$],B=S.transform==="none"?I[$]:K(I[$],A);if(W){const U=W.length;for(let J=0;J<U;J++)S[W[J]]=B}else S[$]=B}return this.options.layoutId&&(S.pointerEvents=A===this?Pv(p==null?void 0:p.pointerEvents)||"":"none"),S}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>{var s;return(s=p.currentAnimation)===null||s===void 0?void 0:s.stop()}),this.root.nodes.forEach(ZM),this.root.sharedNodes.clear()}}}function RY(e){e.updateLayout()}function OY(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:c}=e.layout,{animationType:d}=e.options,p=n.source!==e.layout.source;d==="size"?ks(A=>{const I=p?n.measuredBox[A]:n.layoutBox[A],O=hs(I);I.min=i[A].min,I.max=I.min+O}):BO(d,n.layoutBox,i)&&ks(A=>{const I=p?n.measuredBox[A]:n.layoutBox[A],O=hs(i[A]);I.max=I.min+O,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+O)});const s=Kh();Xm(s,i,n.layoutBox);const _=Kh();p?Xm(_,e.applyTransform(c,!0),n.measuredBox):Xm(_,i,n.layoutBox);const S=!LO(s);let E=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:I,layout:O}=A;if(I&&O){const N=Pi();Jm(N,n.layoutBox,I.layoutBox);const $=Pi();Jm($,i,O.layoutBox),RO(N,$)||(E=!0),A.options.layoutRoot&&(e.relativeTarget=$,e.relativeTargetOrigin=N,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:_,layoutDelta:s,hasLayoutChanged:S,hasRelativeTargetChanged:E})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function BY(e){Gu.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function FY(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function jY(e){e.clearSnapshot()}function ZM(e){e.clearMeasurements()}function NY(e){e.isLayoutDirty=!1}function $Y(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function qM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function VY(e){e.resolveTargetDelta()}function UY(e){e.calcProjection()}function WY(e){e.resetRotation()}function GY(e){e.removeLeadSnapshot()}function KM(e,t,n){e.translate=ri(t.translate,0,n),e.scale=ri(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function XM(e,t,n,i){e.min=ri(t.min,n.min,i),e.max=ri(t.max,n.max,i)}function HY(e,t,n,i){XM(e.x,t.x,n.x,i),XM(e.y,t.y,n.y,i)}function ZY(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const qY={duration:.45,ease:[.4,0,.1,1]},JM=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),YM=JM("applewebkit/")&&!JM("chrome/")?Math.round:hi;function QM(e){e.min=YM(e.min),e.max=YM(e.max)}function KY(e){QM(e.x),QM(e.y)}function BO(e,t,n){return e==="position"||e==="preserve-aspect"&&!nS(UM(t),UM(n),.2)}const XY=OO({attachResizeListener:(e,t)=>Al(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Aw={current:void 0},FO=OO({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Aw.current){const e=new XY({});e.mount(window),e.setOptions({layoutScroll:!0}),Aw.current=e}return Aw.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),JY={pan:{Feature:fY},drag:{Feature:hY,ProjectionNode:FO,MeasureLayout:MO}},YY=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function QY(e){const t=YY.exec(e);if(!t)return[,];const[,n,i]=t;return[n,i]}function sS(e,t,n=1){const[i,c]=QY(e);if(!i)return;const d=window.getComputedStyle(t).getPropertyValue(i);if(d){const p=d.trim();return xO(p)?parseFloat(p):p}else return K2(c)?sS(c,t,n+1):c}function eQ(e,{...t},n){const i=e.current;if(!(i instanceof Element))return{target:t,transitionEnd:n};n&&(n={...n}),e.values.forEach(c=>{const d=c.get();if(!K2(d))return;const p=sS(d,i);p&&c.set(p)});for(const c in t){const d=t[c];if(!K2(d))continue;const p=sS(d,i);p&&(t[c]=p,n||(n={}),n[c]===void 0&&(n[c]=d))}return{target:t,transitionEnd:n}}const tQ=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),jO=e=>tQ.has(e),nQ=e=>Object.keys(e).some(jO),eD=e=>e===wd||e===In,tD=(e,t)=>parseFloat(e.split(", ")[t]),nD=(e,t)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const c=i.match(/^matrix3d\((.+)\)$/);if(c)return tD(c[1],t);{const d=i.match(/^matrix\((.+)\)$/);return d?tD(d[1],e):0}},rQ=new Set(["x","y","z"]),iQ=Qg.filter(e=>!rQ.has(e));function oQ(e){const t=[];return iQ.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}const Cf={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:nD(4,13),y:nD(5,14)};Cf.translateX=Cf.x;Cf.translateY=Cf.y;const sQ=(e,t,n)=>{const i=t.measureViewportBox(),c=t.current,d=getComputedStyle(c),{display:p}=d,s={};p==="none"&&t.setStaticValue("display",e.display||"block"),n.forEach(S=>{s[S]=Cf[S](i,d)}),t.render();const _=t.measureViewportBox();return n.forEach(S=>{const E=t.getValue(S);E&&E.jump(s[S]),e[S]=Cf[S](_,d)}),e},aQ=(e,t,n={},i={})=>{t={...t},i={...i};const c=Object.keys(t).filter(jO);let d=[],p=!1;const s=[];if(c.forEach(_=>{const S=e.getValue(_);if(!e.hasValue(_))return;let E=n[_],A=Em(E);const I=t[_];let O;if(v_(I)){const N=I.length,$=I[0]===null?1:0;E=I[$],A=Em(E);for(let K=$;K<N&&I[K]!==null;K++)O?fT(Em(I[K])===O):O=Em(I[K])}else O=Em(I);if(A!==O)if(eD(A)&&eD(O)){const N=S.get();typeof N=="string"&&S.set(parseFloat(N)),typeof I=="string"?t[_]=parseFloat(I):Array.isArray(I)&&O===In&&(t[_]=I.map(parseFloat))}else A!=null&&A.transform&&(O!=null&&O.transform)&&(E===0||I===0)?E===0?S.set(O.transform(E)):t[_]=A.transform(I):(p||(d=oQ(e),p=!0),s.push(_),i[_]=i[_]!==void 0?i[_]:t[_],S.jump(I))}),s.length){const _=s.indexOf("height")>=0?window.pageYOffset:null,S=sQ(t,e,s);return d.length&&d.forEach(([E,A])=>{e.getValue(E).set(A)}),e.render(),Ox&&_!==null&&window.scrollTo({top:_}),{target:S,transitionEnd:i}}else return{target:t,transitionEnd:i}};function lQ(e,t,n,i){return nQ(t)?aQ(e,t,n,i):{target:t,transitionEnd:i}}const cQ=(e,t,n,i)=>{const c=eQ(e,t,i);return t=c.target,i=c.transitionEnd,lQ(e,t,n,i)},aS={current:null},NO={current:!1};function uQ(){if(NO.current=!0,!!Ox)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>aS.current=e.matches;e.addListener(t),t()}else aS.current=!1}function dQ(e,t,n){const{willChange:i}=t;for(const c in t){const d=t[c],p=n[c];if(xo(d))e.addValue(c,d),b_(i)&&i.add(c);else if(xo(p))e.addValue(c,md(d,{owner:e})),b_(i)&&i.remove(c);else if(p!==d)if(e.hasValue(c)){const s=e.getValue(c);!s.hasAnimated&&s.set(d)}else{const s=e.getStaticValue(c);e.addValue(c,md(s!==void 0?s:d,{owner:e}))}}for(const c in n)t[c]===void 0&&e.removeValue(c);return t}const rD=new WeakMap,$O=Object.keys(Pg),hQ=$O.length,iD=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],fQ=iT.length;class pQ{constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:c,visualState:d},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ir.render(this.render,!1,!0);const{latestValues:s,renderState:_}=d;this.latestValues=s,this.baseTarget={...s},this.initialValues=n.initial?{...s}:{},this.renderState=_,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=p,this.isControllingVariants=Fx(n),this.isVariantNode=AR(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:S,...E}=this.scrapeMotionValuesFromProps(n,{});for(const A in E){const I=E[A];s[A]!==void 0&&xo(I)&&(I.set(s[A],!1),b_(S)&&S.add(A))}}scrapeMotionValuesFromProps(t,n){return{}}mount(t){this.current=t,rD.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),NO.current||uQ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:aS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){rD.delete(this.current),this.projection&&this.projection.unmount(),Xa(this.notifyUpdate),Xa(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,n){const i=bd.has(t),c=n.on("change",p=>{this.latestValues[t]=p,this.props.onUpdate&&Ir.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),d=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{c(),d()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...n},i,c,d){let p,s;for(let _=0;_<hQ;_++){const S=$O[_],{isEnabled:E,Feature:A,ProjectionNode:I,MeasureLayout:O}=Pg[S];I&&(p=I),E(n)&&(!this.features[S]&&A&&(this.features[S]=new A(this)),O&&(s=O))}if((this.type==="html"||this.type==="svg")&&!this.projection&&p){this.projection=new p(this.latestValues,this.parent&&this.parent.projection);const{layoutId:_,layout:S,drag:E,dragConstraints:A,layoutScroll:I,layoutRoot:O}=n;this.projection.setOptions({layoutId:_,layout:S,alwaysMeasureLayout:!!E||A&&Zh(A),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof S=="string"?S:"both",initialPromotionConfig:d,layoutScroll:I,layoutRoot:O})}return s}updateFeatures(){for(const t in this.features){const n=this.features[t];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pi()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}makeTargetAnimatable(t,n=!0){return this.makeTargetAnimatableFromInstance(t,this.props,n)}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<iD.length;i++){const c=iD[i];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const d=t["on"+c];d&&(this.propEventSubscriptions[c]=this.on(c,d))}this.prevMotionValues=dQ(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const n={};for(let i=0;i<fQ;i++){const c=iT[i],d=this.props[c];(Ig(d)||d===!1)&&(n[c]=d)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){n!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,n)),this.values.set(t,n),this.latestValues[t]=n.get()}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=md(n,{owner:this}),this.addValue(t,i)),i}readValue(t){var n;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:i}=this.props,c=typeof i=="string"||typeof i=="object"?(n=hT(this.props,i))===null||n===void 0?void 0:n[t]:void 0;if(i&&c!==void 0)return c;const d=this.getBaseTargetFromProps(this.props,t);return d!==void 0&&!xo(d)?d:this.initialValues[t]!==void 0&&c===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new ST),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class VO extends pQ{sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:n,...i},{transformValues:c},d){let p=MJ(i,t||{},this);if(c&&(n&&(n=c(n)),i&&(i=c(i)),p&&(p=c(p))),d){IJ(this,i,p);const s=cQ(this,i,p,n);n=s.transitionEnd,i=s.target}return{transition:t,transitionEnd:n,...i}}}function mQ(e){return window.getComputedStyle(e)}class gQ extends VO{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,n){if(bd.has(n)){const i=vT(n);return i&&i.default||0}else{const i=mQ(t),c=(MR(n)?i.getPropertyValue(n):i[n])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:n}){return IO(t,n)}build(t,n,i,c){aT(t,n,i,c.transformTemplate)}scrapeMotionValuesFromProps(t,n){return dT(t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;xo(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(t,n,i,c){BR(t,n,i,c)}}class yQ extends VO{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(bd.has(n)){const i=vT(n);return i&&i.default||0}return n=FR.has(n)?n:nT(n),t.getAttribute(n)}measureInstanceViewportBox(){return Pi()}scrapeMotionValuesFromProps(t,n){return NR(t,n)}build(t,n,i,c){cT(t,n,i,this.isSVGTag,c.transformTemplate)}renderInstance(t,n,i,c){jR(t,n,i,c)}mount(t){this.isSVGTag=uT(t.tagName),super.mount(t)}}const vQ=(e,t)=>sT(e)?new yQ(t,{enableHardwareAcceleration:!1}):new gQ(t,{enableHardwareAcceleration:!0}),_Q={layout:{ProjectionNode:FO,MeasureLayout:MO}},xQ={...HJ,...hX,...JY,..._Q},ni=bK((e,t)=>QK(e,t,xQ,vQ));function UO(){const e=q.useRef(!1);return Yg(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function bQ(){const e=UO(),[t,n]=q.useState(0),i=q.useCallback(()=>{e.current&&n(t+1)},[t]);return[q.useCallback(()=>Ir.postRender(i),[i]),t]}class wQ extends q.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function SQ({children:e,isPresent:t}){const n=q.useId(),i=q.useRef(null),c=q.useRef({width:0,height:0,top:0,left:0});return q.useInsertionEffect(()=>{const{width:d,height:p,top:s,left:_}=c.current;if(t||!i.current||!d||!p)return;i.current.dataset.motionPopId=n;const S=document.createElement("style");return document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${p}px !important;
            top: ${s}px !important;
            left: ${_}px !important;
          }
        `),()=>{document.head.removeChild(S)}},[t]),q.createElement(wQ,{isPresent:t,childRef:i,sizeRef:c},q.cloneElement(e,{ref:i}))}const kw=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:c,presenceAffectsLayout:d,mode:p})=>{const s=Nx(EQ),_=q.useId(),S=q.useMemo(()=>({id:_,initial:t,isPresent:n,custom:c,onExitComplete:E=>{s.set(E,!0);for(const A of s.values())if(!A)return;i&&i()},register:E=>(s.set(E,!1),()=>s.delete(E))}),d?void 0:[n]);return q.useMemo(()=>{s.forEach((E,A)=>s.set(A,!1))},[n]),q.useEffect(()=>{!n&&!s.size&&i&&i()},[n]),p==="popLayout"&&(e=q.createElement(SQ,{isPresent:n},e)),q.createElement(Rx.Provider,{value:S},e)};function EQ(){return new Map}function TQ(e){return q.useEffect(()=>()=>e(),[])}const Hu=e=>e.key||"";function CQ(e,t){e.forEach(n=>{const i=Hu(n);t.set(i,n)})}function AQ(e){const t=[];return q.Children.forEach(e,n=>{q.isValidElement(n)&&t.push(n)}),t}const lS=({children:e,custom:t,initial:n=!0,onExitComplete:i,exitBeforeEnter:c,presenceAffectsLayout:d=!0,mode:p="sync"})=>{const s=q.useContext(oT).forceRender||bQ()[0],_=UO(),S=AQ(e);let E=S;const A=q.useRef(new Map).current,I=q.useRef(E),O=q.useRef(new Map).current,N=q.useRef(!0);if(Yg(()=>{N.current=!1,CQ(S,O),I.current=E}),TQ(()=>{N.current=!0,O.clear(),A.clear()}),N.current)return q.createElement(q.Fragment,null,E.map(B=>q.createElement(kw,{key:Hu(B),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:d,mode:p},B)));E=[...E];const $=I.current.map(Hu),K=S.map(Hu),W=$.length;for(let B=0;B<W;B++){const U=$[B];K.indexOf(U)===-1&&!A.has(U)&&A.set(U,void 0)}return p==="wait"&&A.size&&(E=[]),A.forEach((B,U)=>{if(K.indexOf(U)!==-1)return;const J=O.get(U);if(!J)return;const ee=$.indexOf(U);let ye=B;if(!ye){const Q=()=>{A.delete(U);const be=Array.from(O.keys()).filter(re=>!K.includes(re));if(be.forEach(re=>O.delete(re)),I.current=S.filter(re=>{const Ie=Hu(re);return Ie===U||be.includes(Ie)}),!A.size){if(_.current===!1)return;s(),i&&i()}};ye=q.createElement(kw,{key:Hu(J),isPresent:!1,onExitComplete:Q,custom:t,presenceAffectsLayout:d,mode:p},J),A.set(U,ye)}E.splice(ee,0,ye)}),E=E.map(B=>{const U=B.key;return A.has(U)?B:q.createElement(kw,{key:Hu(B),isPresent:!0,presenceAffectsLayout:d,mode:p},B)}),q.createElement(q.Fragment,null,A.size?E:E.map(B=>q.cloneElement(B)))};function ET(e){const t=Nx(()=>md(e)),{isStatic:n}=q.useContext(zx);if(n){const[,i]=q.useState(e);q.useEffect(()=>t.on("change",i),[])}return t}const kQ=e=>e&&typeof e=="object"&&e.mix,IQ=e=>kQ(e)?e.mix:void 0;function PQ(...e){const t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],c=e[1+n],d=e[2+n],p=e[3+n],s=yT(c,d,{mixer:IQ(d[0]),...p});return t?s(i):s}function WO(e,t){const n=ET(t()),i=()=>n.set(t());return i(),Yg(()=>{const c=()=>Ir.update(i,!1,!0),d=e.map(p=>p.on("change",c));return()=>{d.forEach(p=>p()),Xa(i)}}),n}function MQ(e){Km.current=[],e();const t=WO(Km.current,e);return Km.current=void 0,t}function oD(e,t,n,i){if(typeof e=="function")return MQ(e);const c=typeof t=="function"?t:PQ(t,n,i);return Array.isArray(e)?sD(e,c):sD([e],([d])=>c(d))}function sD(e,t){const n=Nx(()=>[]);return WO(e,()=>{n.length=0;const i=e.length;for(let c=0;c<i;c++)n[c]=e[c].get();return t(n)})}function DQ(e,t={}){const{isStatic:n}=q.useContext(zx),i=q.useRef(null),c=ET(xo(e)?e.get():e),d=()=>{i.current&&i.current.stop()};return q.useInsertionEffect(()=>c.attach((p,s)=>{if(n)return s(p);if(d(),i.current=Dg({keyframes:[c.get(),p],velocity:c.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:s}),!qi.isProcessing){const _=performance.now()-qi.timestamp;_<30&&(i.current.time=Ha(_))}return c.get()},d),[JSON.stringify(t)]),Yg(()=>{if(xo(e))return e.on("change",p=>c.set(parseFloat(p)))},[c]),c}const Ux=({onClose:e,children:t,name:n,animationDirection:i="y",hideClose:c=!1})=>{const{isOpen:d,setOpen:p,z:s}=Us(n),_=()=>{p(!1),e==null||e()},S="px-4";return z.jsx(z.Fragment,{children:d?z.jsxs(ni.div,{initial:i==="y"?{y:window.innerHeight}:{x:window.innerWidth},animate:i==="y"?{y:0}:{x:0},exit:i==="y"?{y:window.innerHeight}:{x:window.innerWidth},transition:{type:"spring",bounce:0,duration:.5},className:yi("absolute left-0 top-0 z-[300] flex h-full max-h-screen w-full flex-col overflow-hidden rounded-lg bg-white",d&&"open-overlay"),children:[!c&&z.jsx(ni.div,{animate:{x:0},initial:{x:70},transition:{delay:.275},className:yi("flex flex-row items-center justify-between py-3",S),children:z.jsx(Ix,{variant:"soft",size:"md",color:"neutral",onClick:_,style:{position:"relative",top:0,right:0,marginLeft:"auto"}})}),t]}):null})},zQ=({open:e=!1,onClose:t})=>{const{setOpen:n}=Us("service-signup"),{isOpen:i,setOpen:c}=Us("header-navigation"),d=()=>{c(!1),t==null||t()};At.useEffect(()=>{e!==void 0&&c(e)},[e]);const p="px-6";return z.jsx(Ux,{name:"header-navigation",animationDirection:"x",hideClose:!0,children:z.jsxs("div",{className:yi("flex w-full flex-col gap-7 py-3",p),children:[z.jsx("div",{className:"h-12",id:"header-mobile-navigation-mock"}),z.jsx(ni.h2,{className:"mb-3 text-3xl font-black",children:"Menü"}),z.jsx("div",{className:"flex w-full flex-col",children:z.jsx(SR,{onLinkClick:()=>d()})}),z.jsx(HE,{sx:{margin:"3rem 0rem 1rem"},component:"div",orientation:"horizontal"}),z.jsx(ro,{href:"/finder",variant:"solid",color:"primary",size:"lg",className:"w-fit shadow-md",sx:{padding:"1.25rem 2rem"},onClick:()=>{d(),n(!0)},children:"Platz finden lassen"})]})})},LQ=({isOpen:e=!1,width:t=24,height:n=24,strokeWidth:i=1,color:c="#000",transition:d=null,lineProps:p=null,className:s,..._})=>{const S=e?"opened":"closed",E={closed:{rotate:0,translateY:0},opened:{rotate:45,translateY:2}},A={closed:{opacity:1},opened:{opacity:0}},I={closed:{rotate:0,translateY:0},opened:{rotate:-45,translateY:-2}};p={stroke:c,strokeWidth:i,vectorEffect:"non-scaling-stroke",initial:"closed",animate:S,transition:d,...p};const O=4,N=O*t/n;return z.jsxs(ni.svg,{className:s,viewBox:`0 0 ${N} ${O}`,overflow:"visible",preserveAspectRatio:"none",width:t,height:n,style:{zIndex:1e3},..._,children:[z.jsx(ni.line,{x1:"0",x2:N,y1:"0",y2:"0",variants:E,...p}),z.jsx(ni.line,{x1:"0",x2:N,y1:"2",y2:"2",variants:A,...p}),z.jsx(ni.line,{x1:"0",x2:N,y1:"4",y2:"4",variants:I,...p})]})},RQ=({headerRef:e})=>{const{isOpen:t,setOpen:n}=Us("header-navigation");return z.jsx("header",{ref:e,id:"nav-header",className:"page-padding z-[205] flex h-20 w-full flex-row items-center justify-between border-b border-gray-200 bg-white py-4",children:z.jsxs("nav",{className:"flex w-full flex-row items-center justify-between",children:[z.jsx(od,{to:"/",id:"logo-container",className:"w-56 md:w-64",children:z.jsx("img",{src:"/logo.svg",width:"100%",alt:"KitaPlatzZentrale Logo"})}),z.jsx("div",{className:"hidden h-full flex-row items-end xl:flex",id:"nav-links-container",children:z.jsx(dK,{})}),z.jsxs("div",{className:"flex flex-row items-center gap-8 xl:hidden",children:[z.jsx(LQ,{isOpen:t,onClick:()=>n(!t),strokeWidth:"3",color:q2.palette.primary[600],lineProps:{strokeLinecap:"round"},transition:{type:"spring",stiffness:260,damping:20},width:"24",height:"20",className:"cursor-pointer"}),z.jsx(zQ,{open:t,onClose:()=>n(!1)})]})]})})},GO=At.createContext({}),OQ=({steps:e,activeStepIndex:t=0,onComplete:n,children:i})=>{var $;const[c,d]=At.useState(t),[p,s]=At.useState(e??[]),[_,S]=At.useState(!(($=p[c])!=null&&$.valid)),[E,A]=At.useState(!1);At.useEffect(()=>{var K;return S(!((K=p[c])!=null&&K.valid))},[c,p]),At.useEffect(()=>e&&s(e||[]),[e]);const I=async()=>{var W,B;const K=p[c];if(K.beforeNext)if(await K.beforeNext()){if(!await((B=(W=p[c]).onNext)==null?void 0:B.call(W)))return;c===p.length-1?(A(!0),await(n==null?void 0:n()),A(!1)):d(c+1)}else S(!0);else d(c+1)},O=async()=>{const K=p[c];K.beforePrevious?await K.beforePrevious()?d(c-1):S(!0):d(c-1)},N=async()=>{await(n==null?void 0:n())};return z.jsx(GO.Provider,{value:{steps:p,setSteps:s,activeStepIndex:c,goToNext:I,goToPrevious:O,isErrorful:_,handleComplete:N,isLoading:E},children:i})},TT=()=>At.useContext(GO);var ry=e=>e.type==="checkbox",Jh=e=>e instanceof Date,Co=e=>e==null;const HO=e=>typeof e=="object";var $i=e=>!Co(e)&&!Array.isArray(e)&&HO(e)&&!Jh(e),BQ=e=>$i(e)&&e.target?ry(e.target)?e.target.checked:e.target.value:e,FQ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,jQ=(e,t)=>e.has(FQ(t)),NQ=e=>{const t=e.constructor&&e.constructor.prototype;return $i(t)&&t.hasOwnProperty("isPrototypeOf")},CT=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function As(e){let t;const n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(CT&&(e instanceof Blob||e instanceof FileList))&&(n||$i(e)))if(t=n?[]:{},!n&&!NQ(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=As(e[i]));else return e;return t}var iy=e=>Array.isArray(e)?e.filter(Boolean):[],mi=e=>e===void 0,sn=(e,t,n)=>{if(!t||!$i(e))return n;const i=iy(t.split(/[,[\].]+?/)).reduce((c,d)=>Co(c)?c:c[d],e);return mi(i)||i===e?mi(e[t])?n:e[t]:i},wl=e=>typeof e=="boolean";const aD={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ya={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"};At.createContext(null);var $Q=(e,t,n,i=!0)=>{const c={defaultValues:t._defaultValues};for(const d in e)Object.defineProperty(c,d,{get:()=>{const p=d;return t._proxyFormState[p]!==ya.all&&(t._proxyFormState[p]=!i||ya.all),n&&(n[p]=!0),e[p]}});return c},rs=e=>$i(e)&&!Object.keys(e).length,VQ=(e,t,n,i)=>{n(e);const{name:c,...d}=e;return rs(d)||Object.keys(d).length>=Object.keys(t).length||Object.keys(d).find(p=>t[p]===(!i||ya.all))},Iw=e=>Array.isArray(e)?e:[e];function UQ(e){const t=At.useRef(e);t.current=e,At.useEffect(()=>{const n=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{n&&n.unsubscribe()}},[e.disabled])}var Fa=e=>typeof e=="string",WQ=(e,t,n,i,c)=>Fa(e)?(i&&t.watch.add(e),sn(n,e,c)):Array.isArray(e)?e.map(d=>(i&&t.watch.add(d),sn(n,d))):(i&&(t.watchAll=!0),n),AT=e=>/^\w*$/.test(e),ZO=e=>iy(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ar=(e,t,n)=>{let i=-1;const c=AT(t)?[t]:ZO(t),d=c.length,p=d-1;for(;++i<d;){const s=c[i];let _=n;if(i!==p){const S=e[s];_=$i(S)||Array.isArray(S)?S:isNaN(+c[i+1])?{}:[]}e[s]=_,e=e[s]}return e},qO=(e,t,n,i,c)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[i]:c||!0}}:{},lD=e=>({isOnSubmit:!e||e===ya.onSubmit,isOnBlur:e===ya.onBlur,isOnChange:e===ya.onChange,isOnAll:e===ya.all,isOnTouch:e===ya.onTouched}),cD=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const Ym=(e,t,n,i)=>{for(const c of n||Object.keys(e)){const d=sn(e,c);if(d){const{_f:p,...s}=d;if(p){if(p.refs&&p.refs[0]&&t(p.refs[0],c)&&!i)break;if(p.ref&&t(p.ref,p.name)&&!i)break;Ym(s,t)}else $i(s)&&Ym(s,t)}}};var GQ=(e,t,n)=>{const i=iy(sn(e,n));return Ar(i,"root",t[n]),Ar(e,n,i),e},kT=e=>e.type==="file",Mc=e=>typeof e=="function",S_=e=>{if(!CT)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Dv=e=>Fa(e),IT=e=>e.type==="radio",E_=e=>e instanceof RegExp;const uD={value:!1,isValid:!1},dD={value:!0,isValid:!0};var KO=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!mi(e[0].attributes.value)?mi(e[0].value)||e[0].value===""?dD:{value:e[0].value,isValid:!0}:dD:uD}return uD};const hD={isValid:!1,value:null};var XO=e=>Array.isArray(e)?e.reduce((t,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:t,hD):hD;function fD(e,t,n="validate"){if(Dv(e)||Array.isArray(e)&&e.every(Dv)||wl(e)&&!e)return{type:n,message:Dv(e)?e:"",ref:t}}var Ch=e=>$i(e)&&!E_(e)?e:{value:e,message:""},pD=async(e,t,n,i,c)=>{const{ref:d,refs:p,required:s,maxLength:_,minLength:S,min:E,max:A,pattern:I,validate:O,name:N,valueAsNumber:$,mount:K,disabled:W}=e._f,B=sn(t,N);if(!K||W)return{};const U=p?p[0]:d,J=le=>{i&&U.reportValidity&&(U.setCustomValidity(wl(le)?"":le||""),U.reportValidity())},ee={},ye=IT(d),Q=ry(d),be=ye||Q,re=($||kT(d))&&mi(d.value)&&mi(B)||S_(d)&&d.value===""||B===""||Array.isArray(B)&&!B.length,Ie=qO.bind(null,N,n,ee),Be=(le,xe,Se,oe=vl.maxLength,te=vl.minLength)=>{const Ce=le?xe:Se;ee[N]={type:le?oe:te,message:Ce,ref:d,...Ie(le?oe:te,Ce)}};if(c?!Array.isArray(B)||!B.length:s&&(!be&&(re||Co(B))||wl(B)&&!B||Q&&!KO(p).isValid||ye&&!XO(p).isValid)){const{value:le,message:xe}=Dv(s)?{value:!!s,message:s}:Ch(s);if(le&&(ee[N]={type:vl.required,message:xe,ref:U,...Ie(vl.required,xe)},!n))return J(xe),ee}if(!re&&(!Co(E)||!Co(A))){let le,xe;const Se=Ch(A),oe=Ch(E);if(!Co(B)&&!isNaN(B)){const te=d.valueAsNumber||B&&+B;Co(Se.value)||(le=te>Se.value),Co(oe.value)||(xe=te<oe.value)}else{const te=d.valueAsDate||new Date(B),Ce=Ge=>new Date(new Date().toDateString()+" "+Ge),ve=d.type=="time",Fe=d.type=="week";Fa(Se.value)&&B&&(le=ve?Ce(B)>Ce(Se.value):Fe?B>Se.value:te>new Date(Se.value)),Fa(oe.value)&&B&&(xe=ve?Ce(B)<Ce(oe.value):Fe?B<oe.value:te<new Date(oe.value))}if((le||xe)&&(Be(!!le,Se.message,oe.message,vl.max,vl.min),!n))return J(ee[N].message),ee}if((_||S)&&!re&&(Fa(B)||c&&Array.isArray(B))){const le=Ch(_),xe=Ch(S),Se=!Co(le.value)&&B.length>+le.value,oe=!Co(xe.value)&&B.length<+xe.value;if((Se||oe)&&(Be(Se,le.message,xe.message),!n))return J(ee[N].message),ee}if(I&&!re&&Fa(B)){const{value:le,message:xe}=Ch(I);if(E_(le)&&!B.match(le)&&(ee[N]={type:vl.pattern,message:xe,ref:d,...Ie(vl.pattern,xe)},!n))return J(xe),ee}if(O){if(Mc(O)){const le=await O(B,t),xe=fD(le,U);if(xe&&(ee[N]={...xe,...Ie(vl.validate,xe.message)},!n))return J(xe.message),ee}else if($i(O)){let le={};for(const xe in O){if(!rs(le)&&!n)break;const Se=fD(await O[xe](B,t),U,xe);Se&&(le={...Se,...Ie(xe,Se.message)},J(Se.message),n&&(ee[N]=le))}if(!rs(le)&&(ee[N]={ref:U,...le},!n))return ee}}return J(!0),ee};function HQ(e,t){const n=t.slice(0,-1).length;let i=0;for(;i<n;)e=mi(e)?i++:e[t[i++]];return e}function ZQ(e){for(const t in e)if(e.hasOwnProperty(t)&&!mi(e[t]))return!1;return!0}function Fi(e,t){const n=Array.isArray(t)?t:AT(t)?[t]:ZO(t),i=n.length===1?e:HQ(e,n),c=n.length-1,d=n[c];return i&&delete i[d],c!==0&&($i(i)&&rs(i)||Array.isArray(i)&&ZQ(i))&&Fi(e,n.slice(0,-1)),e}var Pw=()=>{let e=[];return{get observers(){return e},next:c=>{for(const d of e)d.next&&d.next(c)},subscribe:c=>(e.push(c),{unsubscribe:()=>{e=e.filter(d=>d!==c)}}),unsubscribe:()=>{e=[]}}},T_=e=>Co(e)||!HO(e);function Qu(e,t){if(T_(e)||T_(t))return e===t;if(Jh(e)&&Jh(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const c of n){const d=e[c];if(!i.includes(c))return!1;if(c!=="ref"){const p=t[c];if(Jh(d)&&Jh(p)||$i(d)&&$i(p)||Array.isArray(d)&&Array.isArray(p)?!Qu(d,p):d!==p)return!1}}return!0}var JO=e=>e.type==="select-multiple",qQ=e=>IT(e)||ry(e),Mw=e=>S_(e)&&e.isConnected,YO=e=>{for(const t in e)if(Mc(e[t]))return!0;return!1};function C_(e,t={}){const n=Array.isArray(e);if($i(e)||n)for(const i in e)Array.isArray(e[i])||$i(e[i])&&!YO(e[i])?(t[i]=Array.isArray(e[i])?[]:{},C_(e[i],t[i])):Co(e[i])||(t[i]=!0);return t}function QO(e,t,n){const i=Array.isArray(e);if($i(e)||i)for(const c in e)Array.isArray(e[c])||$i(e[c])&&!YO(e[c])?mi(t)||T_(n[c])?n[c]=Array.isArray(e[c])?C_(e[c],[]):{...C_(e[c])}:QO(e[c],Co(t)?{}:t[c],n[c]):n[c]=!Qu(e[c],t[c]);return n}var lv=(e,t)=>QO(e,t,C_(t)),e4=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:i})=>mi(e)?e:t?e===""?NaN:e&&+e:n&&Fa(e)?new Date(e):i?i(e):e;function Dw(e){const t=e.ref;if(!(e.refs?e.refs.every(n=>n.disabled):t.disabled))return kT(t)?t.files:IT(t)?XO(e.refs).value:JO(t)?[...t.selectedOptions].map(({value:n})=>n):ry(t)?KO(e.refs).value:e4(mi(t.value)?e.ref.value:t.value,e)}var KQ=(e,t,n,i)=>{const c={};for(const d of e){const p=sn(t,d);p&&Ar(c,d,p._f)}return{criteriaMode:n,names:[...e],fields:c,shouldUseNativeValidation:i}},Cm=e=>mi(e)?e:E_(e)?e.source:$i(e)?E_(e.value)?e.value.source:e.value:e,XQ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function mD(e,t,n){const i=sn(e,n);if(i||AT(n))return{error:i,name:n};const c=n.split(".");for(;c.length;){const d=c.join("."),p=sn(t,d),s=sn(e,d);if(p&&!Array.isArray(p)&&n!==d)return{name:n};if(s&&s.type)return{name:d,error:s};c.pop()}return{name:n}}var JQ=(e,t,n,i,c)=>c.isOnAll?!1:!n&&c.isOnTouch?!(t||e):(n?i.isOnBlur:c.isOnBlur)?!e:(n?i.isOnChange:c.isOnChange)?e:!0,YQ=(e,t)=>!iy(sn(e,t)).length&&Fi(e,t);const QQ={mode:ya.onSubmit,reValidateMode:ya.onChange,shouldFocusError:!0};function eee(e={}){let t={...QQ,...e},n={submitCount:0,isDirty:!1,isLoading:Mc(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},c=$i(t.defaultValues)||$i(t.values)?As(t.defaultValues||t.values)||{}:{},d=t.shouldUnregister?{}:As(c),p={action:!1,mount:!1,watch:!1},s={mount:new Set,unMount:new Set,array:new Set,watch:new Set},_,S=0;const E={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},A={values:Pw(),array:Pw(),state:Pw()},I=lD(t.mode),O=lD(t.reValidateMode),N=t.criteriaMode===ya.all,$=Le=>Ke=>{clearTimeout(S),S=setTimeout(Le,Ke)},K=async Le=>{if(E.isValid||Le){const Ke=t.resolver?rs((await be()).errors):await Ie(i,!0);Ke!==n.isValid&&A.state.next({isValid:Ke})}},W=(Le,Ke)=>{(E.isValidating||E.validatingFields)&&((Le||Array.from(s.mount)).forEach(et=>{et&&(Ke?Ar(n.validatingFields,et,Ke):Fi(n.validatingFields,et))}),A.state.next({validatingFields:n.validatingFields,isValidating:!rs(n.validatingFields)}))},B=(Le,Ke=[],et,Ot,kt=!0,yt=!0)=>{if(Ot&&et){if(p.action=!0,yt&&Array.isArray(sn(i,Le))){const Zt=et(sn(i,Le),Ot.argA,Ot.argB);kt&&Ar(i,Le,Zt)}if(yt&&Array.isArray(sn(n.errors,Le))){const Zt=et(sn(n.errors,Le),Ot.argA,Ot.argB);kt&&Ar(n.errors,Le,Zt),YQ(n.errors,Le)}if(E.touchedFields&&yt&&Array.isArray(sn(n.touchedFields,Le))){const Zt=et(sn(n.touchedFields,Le),Ot.argA,Ot.argB);kt&&Ar(n.touchedFields,Le,Zt)}E.dirtyFields&&(n.dirtyFields=lv(c,d)),A.state.next({name:Le,isDirty:le(Le,Ke),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Ar(d,Le,Ke)},U=(Le,Ke)=>{Ar(n.errors,Le,Ke),A.state.next({errors:n.errors})},J=Le=>{n.errors=Le,A.state.next({errors:n.errors,isValid:!1})},ee=(Le,Ke,et,Ot)=>{const kt=sn(i,Le);if(kt){const yt=sn(d,Le,mi(et)?sn(c,Le):et);mi(yt)||Ot&&Ot.defaultChecked||Ke?Ar(d,Le,Ke?yt:Dw(kt._f)):oe(Le,yt),p.mount&&K()}},ye=(Le,Ke,et,Ot,kt)=>{let yt=!1,Zt=!1;const vn={name:Le},Rn=!!(sn(i,Le)&&sn(i,Le)._f.disabled);if(!et||Ot){E.isDirty&&(Zt=n.isDirty,n.isDirty=vn.isDirty=le(),yt=Zt!==vn.isDirty);const bn=Rn||Qu(sn(c,Le),Ke);Zt=!!(!Rn&&sn(n.dirtyFields,Le)),bn||Rn?Fi(n.dirtyFields,Le):Ar(n.dirtyFields,Le,!0),vn.dirtyFields=n.dirtyFields,yt=yt||E.dirtyFields&&Zt!==!bn}if(et){const bn=sn(n.touchedFields,Le);bn||(Ar(n.touchedFields,Le,et),vn.touchedFields=n.touchedFields,yt=yt||E.touchedFields&&bn!==et)}return yt&&kt&&A.state.next(vn),yt?vn:{}},Q=(Le,Ke,et,Ot)=>{const kt=sn(n.errors,Le),yt=E.isValid&&wl(Ke)&&n.isValid!==Ke;if(e.delayError&&et?(_=$(()=>U(Le,et)),_(e.delayError)):(clearTimeout(S),_=null,et?Ar(n.errors,Le,et):Fi(n.errors,Le)),(et?!Qu(kt,et):kt)||!rs(Ot)||yt){const Zt={...Ot,...yt&&wl(Ke)?{isValid:Ke}:{},errors:n.errors,name:Le};n={...n,...Zt},A.state.next(Zt)}},be=async Le=>{W(Le,!0);const Ke=await t.resolver(d,t.context,KQ(Le||s.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return W(Le),Ke},re=async Le=>{const{errors:Ke}=await be(Le);if(Le)for(const et of Le){const Ot=sn(Ke,et);Ot?Ar(n.errors,et,Ot):Fi(n.errors,et)}else n.errors=Ke;return Ke},Ie=async(Le,Ke,et={valid:!0})=>{for(const Ot in Le){const kt=Le[Ot];if(kt){const{_f:yt,...Zt}=kt;if(yt){const vn=s.array.has(yt.name);W([Ot],!0);const Rn=await pD(kt,d,N,t.shouldUseNativeValidation&&!Ke,vn);if(W([Ot]),Rn[yt.name]&&(et.valid=!1,Ke))break;!Ke&&(sn(Rn,yt.name)?vn?GQ(n.errors,Rn,yt.name):Ar(n.errors,yt.name,Rn[yt.name]):Fi(n.errors,yt.name))}Zt&&await Ie(Zt,Ke,et)}}return et.valid},Be=()=>{for(const Le of s.unMount){const Ke=sn(i,Le);Ke&&(Ke._f.refs?Ke._f.refs.every(et=>!Mw(et)):!Mw(Ke._f.ref))&&nn(Le)}s.unMount=new Set},le=(Le,Ke)=>(Le&&Ke&&Ar(d,Le,Ke),!Qu(rt(),c)),xe=(Le,Ke,et)=>WQ(Le,s,{...p.mount?d:mi(Ke)?c:Fa(Le)?{[Le]:Ke}:Ke},et,Ke),Se=Le=>iy(sn(p.mount?d:c,Le,e.shouldUnregister?sn(c,Le,[]):[])),oe=(Le,Ke,et={})=>{const Ot=sn(i,Le);let kt=Ke;if(Ot){const yt=Ot._f;yt&&(!yt.disabled&&Ar(d,Le,e4(Ke,yt)),kt=S_(yt.ref)&&Co(Ke)?"":Ke,JO(yt.ref)?[...yt.ref.options].forEach(Zt=>Zt.selected=kt.includes(Zt.value)):yt.refs?ry(yt.ref)?yt.refs.length>1?yt.refs.forEach(Zt=>(!Zt.defaultChecked||!Zt.disabled)&&(Zt.checked=Array.isArray(kt)?!!kt.find(vn=>vn===Zt.value):kt===Zt.value)):yt.refs[0]&&(yt.refs[0].checked=!!kt):yt.refs.forEach(Zt=>Zt.checked=Zt.value===kt):kT(yt.ref)?yt.ref.value="":(yt.ref.value=kt,yt.ref.type||A.values.next({name:Le,values:{...d}})))}(et.shouldDirty||et.shouldTouch)&&ye(Le,kt,et.shouldTouch,et.shouldDirty,!0),et.shouldValidate&&Ge(Le)},te=(Le,Ke,et)=>{for(const Ot in Ke){const kt=Ke[Ot],yt=`${Le}.${Ot}`,Zt=sn(i,yt);(s.array.has(Le)||!T_(kt)||Zt&&!Zt._f)&&!Jh(kt)?te(yt,kt,et):oe(yt,kt,et)}},Ce=(Le,Ke,et={})=>{const Ot=sn(i,Le),kt=s.array.has(Le),yt=As(Ke);Ar(d,Le,yt),kt?(A.array.next({name:Le,values:{...d}}),(E.isDirty||E.dirtyFields)&&et.shouldDirty&&A.state.next({name:Le,dirtyFields:lv(c,d),isDirty:le(Le,yt)})):Ot&&!Ot._f&&!Co(yt)?te(Le,yt,et):oe(Le,yt,et),cD(Le,s)&&A.state.next({...n}),A.values.next({name:p.mount?Le:void 0,values:{...d}})},ve=async Le=>{p.mount=!0;const Ke=Le.target;let et=Ke.name,Ot=!0;const kt=sn(i,et),yt=()=>Ke.type?Dw(kt._f):BQ(Le),Zt=vn=>{Ot=Number.isNaN(vn)||vn===sn(d,et,vn)};if(kt){let vn,Rn;const bn=yt(),_n=Le.type===aD.BLUR||Le.type===aD.FOCUS_OUT,Mn=!XQ(kt._f)&&!t.resolver&&!sn(n.errors,et)&&!kt._f.deps||JQ(_n,sn(n.touchedFields,et),n.isSubmitted,O,I),Sr=cD(et,s,_n);Ar(d,et,bn),_n?(kt._f.onBlur&&kt._f.onBlur(Le),_&&_(0)):kt._f.onChange&&kt._f.onChange(Le);const Er=ye(et,bn,_n,!1),Si=!rs(Er)||Sr;if(!_n&&A.values.next({name:et,type:Le.type,values:{...d}}),Mn)return E.isValid&&K(),Si&&A.state.next({name:et,...Sr?{}:Er});if(!_n&&Sr&&A.state.next({...n}),t.resolver){const{errors:Qn}=await be([et]);if(Zt(bn),Ot){const Xn=mD(n.errors,i,et),Gn=mD(Qn,i,Xn.name||et);vn=Gn.error,et=Gn.name,Rn=rs(Qn)}}else W([et],!0),vn=(await pD(kt,d,N,t.shouldUseNativeValidation))[et],W([et]),Zt(bn),Ot&&(vn?Rn=!1:E.isValid&&(Rn=await Ie(i,!0)));Ot&&(kt._f.deps&&Ge(kt._f.deps),Q(et,Rn,vn,Er))}},Fe=(Le,Ke)=>{if(sn(n.errors,Ke)&&Le.focus)return Le.focus(),1},Ge=async(Le,Ke={})=>{let et,Ot;const kt=Iw(Le);if(t.resolver){const yt=await re(mi(Le)?Le:kt);et=rs(yt),Ot=Le?!kt.some(Zt=>sn(yt,Zt)):et}else Le?(Ot=(await Promise.all(kt.map(async yt=>{const Zt=sn(i,yt);return await Ie(Zt&&Zt._f?{[yt]:Zt}:Zt)}))).every(Boolean),!(!Ot&&!n.isValid)&&K()):Ot=et=await Ie(i);return A.state.next({...!Fa(Le)||E.isValid&&et!==n.isValid?{}:{name:Le},...t.resolver||!Le?{isValid:et}:{},errors:n.errors}),Ke.shouldFocus&&!Ot&&Ym(i,Fe,Le?kt:s.mount),Ot},rt=Le=>{const Ke={...p.mount?d:c};return mi(Le)?Ke:Fa(Le)?sn(Ke,Le):Le.map(et=>sn(Ke,et))},Ct=(Le,Ke)=>({invalid:!!sn((Ke||n).errors,Le),isDirty:!!sn((Ke||n).dirtyFields,Le),isTouched:!!sn((Ke||n).touchedFields,Le),isValidating:!!sn((Ke||n).validatingFields,Le),error:sn((Ke||n).errors,Le)}),It=Le=>{Le&&Iw(Le).forEach(Ke=>Fi(n.errors,Ke)),A.state.next({errors:Le?n.errors:{}})},Pt=(Le,Ke,et)=>{const Ot=(sn(i,Le,{_f:{}})._f||{}).ref;Ar(n.errors,Le,{...Ke,ref:Ot}),A.state.next({name:Le,errors:n.errors,isValid:!1}),et&&et.shouldFocus&&Ot&&Ot.focus&&Ot.focus()},Kt=(Le,Ke)=>Mc(Le)?A.values.subscribe({next:et=>Le(xe(void 0,Ke),et)}):xe(Le,Ke,!0),nn=(Le,Ke={})=>{for(const et of Le?Iw(Le):s.mount)s.mount.delete(et),s.array.delete(et),Ke.keepValue||(Fi(i,et),Fi(d,et)),!Ke.keepError&&Fi(n.errors,et),!Ke.keepDirty&&Fi(n.dirtyFields,et),!Ke.keepTouched&&Fi(n.touchedFields,et),!Ke.keepIsValidating&&Fi(n.validatingFields,et),!t.shouldUnregister&&!Ke.keepDefaultValue&&Fi(c,et);A.values.next({values:{...d}}),A.state.next({...n,...Ke.keepDirty?{isDirty:le()}:{}}),!Ke.keepIsValid&&K()},an=({disabled:Le,name:Ke,field:et,fields:Ot,value:kt})=>{if(wl(Le)){const yt=Le?void 0:mi(kt)?Dw(et?et._f:sn(Ot,Ke)._f):kt;Ar(d,Ke,yt),ye(Ke,yt,!1,!1,!0)}},ct=(Le,Ke={})=>{let et=sn(i,Le);const Ot=wl(Ke.disabled);return Ar(i,Le,{...et||{},_f:{...et&&et._f?et._f:{ref:{name:Le}},name:Le,mount:!0,...Ke}}),s.mount.add(Le),et?an({field:et,disabled:Ke.disabled,name:Le,value:Ke.value}):ee(Le,!0,Ke.value),{...Ot?{disabled:Ke.disabled}:{},...t.progressive?{required:!!Ke.required,min:Cm(Ke.min),max:Cm(Ke.max),minLength:Cm(Ke.minLength),maxLength:Cm(Ke.maxLength),pattern:Cm(Ke.pattern)}:{},name:Le,onChange:ve,onBlur:ve,ref:kt=>{if(kt){ct(Le,Ke),et=sn(i,Le);const yt=mi(kt.value)&&kt.querySelectorAll&&kt.querySelectorAll("input,select,textarea")[0]||kt,Zt=qQ(yt),vn=et._f.refs||[];if(Zt?vn.find(Rn=>Rn===yt):yt===et._f.ref)return;Ar(i,Le,{_f:{...et._f,...Zt?{refs:[...vn.filter(Mw),yt,...Array.isArray(sn(c,Le))?[{}]:[]],ref:{type:yt.type,name:Le}}:{ref:yt}}}),ee(Le,!1,void 0,yt)}else et=sn(i,Le,{}),et._f&&(et._f.mount=!1),(t.shouldUnregister||Ke.shouldUnregister)&&!(jQ(s.array,Le)&&p.action)&&s.unMount.add(Le)}}},Vt=()=>t.shouldFocusError&&Ym(i,Fe,s.mount),ln=Le=>{wl(Le)&&(A.state.next({disabled:Le}),Ym(i,(Ke,et)=>{let Ot=Le;const kt=sn(i,et);kt&&wl(kt._f.disabled)&&(Ot||(Ot=kt._f.disabled)),Ke.disabled=Ot},0,!1))},zt=(Le,Ke)=>async et=>{let Ot;et&&(et.preventDefault&&et.preventDefault(),et.persist&&et.persist());let kt=As(d);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:yt,values:Zt}=await be();n.errors=yt,kt=Zt}else await Ie(i);if(Fi(n.errors,"root"),rs(n.errors)){A.state.next({errors:{}});try{await Le(kt,et)}catch(yt){Ot=yt}}else Ke&&await Ke({...n.errors},et),Vt(),setTimeout(Vt);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:rs(n.errors)&&!Ot,submitCount:n.submitCount+1,errors:n.errors}),Ot)throw Ot},pn=(Le,Ke={})=>{sn(i,Le)&&(mi(Ke.defaultValue)?Ce(Le,As(sn(c,Le))):(Ce(Le,Ke.defaultValue),Ar(c,Le,As(Ke.defaultValue))),Ke.keepTouched||Fi(n.touchedFields,Le),Ke.keepDirty||(Fi(n.dirtyFields,Le),n.isDirty=Ke.defaultValue?le(Le,As(sn(c,Le))):le()),Ke.keepError||(Fi(n.errors,Le),E.isValid&&K()),A.state.next({...n}))},Kn=(Le,Ke={})=>{const et=Le?As(Le):c,Ot=As(et),kt=rs(Le),yt=kt?c:Ot;if(Ke.keepDefaultValues||(c=et),!Ke.keepValues){if(Ke.keepDirtyValues)for(const Zt of s.mount)sn(n.dirtyFields,Zt)?Ar(yt,Zt,sn(d,Zt)):Ce(Zt,sn(yt,Zt));else{if(CT&&mi(Le))for(const Zt of s.mount){const vn=sn(i,Zt);if(vn&&vn._f){const Rn=Array.isArray(vn._f.refs)?vn._f.refs[0]:vn._f.ref;if(S_(Rn)){const bn=Rn.closest("form");if(bn){bn.reset();break}}}}i={}}d=e.shouldUnregister?Ke.keepDefaultValues?As(c):{}:As(yt),A.array.next({values:{...yt}}),A.values.next({values:{...yt}})}s={mount:Ke.keepDirtyValues?s.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},p.mount=!E.isValid||!!Ke.keepIsValid||!!Ke.keepDirtyValues,p.watch=!!e.shouldUnregister,A.state.next({submitCount:Ke.keepSubmitCount?n.submitCount:0,isDirty:kt?!1:Ke.keepDirty?n.isDirty:!!(Ke.keepDefaultValues&&!Qu(Le,c)),isSubmitted:Ke.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:kt?[]:Ke.keepDirtyValues?Ke.keepDefaultValues&&d?lv(c,d):n.dirtyFields:Ke.keepDefaultValues&&Le?lv(c,Le):{},touchedFields:Ke.keepTouched?n.touchedFields:{},errors:Ke.keepErrors?n.errors:{},isSubmitSuccessful:Ke.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},Fr=(Le,Ke)=>Kn(Mc(Le)?Le(d):Le,Ke);return{control:{register:ct,unregister:nn,getFieldState:Ct,handleSubmit:zt,setError:Pt,_executeSchema:be,_getWatch:xe,_getDirty:le,_updateValid:K,_removeUnmounted:Be,_updateFieldArray:B,_updateDisabledField:an,_getFieldArray:Se,_reset:Kn,_resetDefaultValues:()=>Mc(t.defaultValues)&&t.defaultValues().then(Le=>{Fr(Le,t.resetOptions),A.state.next({isLoading:!1})}),_updateFormState:Le=>{n={...n,...Le}},_disableForm:ln,_subjects:A,_proxyFormState:E,_setErrors:J,get _fields(){return i},get _formValues(){return d},get _state(){return p},set _state(Le){p=Le},get _defaultValues(){return c},get _names(){return s},set _names(Le){s=Le},get _formState(){return n},set _formState(Le){n=Le},get _options(){return t},set _options(Le){t={...t,...Le}}},trigger:Ge,register:ct,handleSubmit:zt,watch:Kt,setValue:Ce,getValues:rt,reset:Fr,resetField:pn,clearErrors:It,unregister:nn,setError:Pt,setFocus:(Le,Ke={})=>{const et=sn(i,Le),Ot=et&&et._f;if(Ot){const kt=Ot.refs?Ot.refs[0]:Ot.ref;kt.focus&&(kt.focus(),Ke.shouldSelect&&kt.select())}},getFieldState:Ct}}function t4(e={}){const t=At.useRef(),n=At.useRef(),[i,c]=At.useState({isDirty:!1,isValidating:!1,isLoading:Mc(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Mc(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...eee(e),formState:i});const d=t.current.control;return d._options=e,UQ({subject:d._subjects.state,next:p=>{VQ(p,d._proxyFormState,d._updateFormState,!0)&&c({...d._formState})}}),At.useEffect(()=>d._disableForm(e.disabled),[d,e.disabled]),At.useEffect(()=>{if(d._proxyFormState.isDirty){const p=d._getDirty();p!==i.isDirty&&d._subjects.state.next({isDirty:p})}},[d,i.isDirty]),At.useEffect(()=>{e.values&&!Qu(e.values,n.current)?(d._reset(e.values,d._options.resetOptions),n.current=e.values,c(p=>({...p}))):d._resetDefaultValues()},[e.values,d]),At.useEffect(()=>{e.errors&&d._setErrors(e.errors)},[e.errors,d]),At.useEffect(()=>{d._state.mount||(d._updateValid(),d._state.mount=!0),d._state.watch&&(d._state.watch=!1,d._subjects.state.next({...d._formState})),d._removeUnmounted()}),At.useEffect(()=>{e.shouldUnregister&&d._subjects.values.next({values:d._getWatch()})},[e.shouldUnregister,d]),t.current.formState=$Q(i,d),t.current}var gD=function(e,t,n){if(e&&"reportValidity"in e){var i=sn(n,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},n4=function(e,t){var n=function(c){var d=t.fields[c];d&&d.ref&&"reportValidity"in d.ref?gD(d.ref,c,e):d.refs&&d.refs.forEach(function(p){return gD(p,c,e)})};for(var i in t.fields)n(i)},tee=function(e,t){t.shouldUseNativeValidation&&n4(e,t);var n={};for(var i in e){var c=sn(t.fields,i),d=Object.assign(e[i]||{},{ref:c&&c.ref});if(nee(t.names||Object.keys(e),i)){var p=Object.assign({},sn(n,i));Ar(p,"root",d),Ar(n,i,p)}else Ar(n,i,d)}return n},nee=function(e,t){return e.some(function(n){return n.startsWith(t+".")})};function r4(e,t,n){return t===void 0&&(t={}),n===void 0&&(n={}),function(i,c,d){try{return Promise.resolve(function(p,s){try{var _=(t.context,Promise.resolve(e[n.mode==="sync"?"validateSync":"validate"](i,Object.assign({abortEarly:!1},t,{context:c}))).then(function(S){return d.shouldUseNativeValidation&&n4({},d),{values:n.raw?i:S,errors:{}}}))}catch(S){return s(S)}return _&&_.then?_.then(void 0,s):_}(0,function(p){if(!p.inner)throw p;return{values:{},errors:tee((s=p,_=!d.shouldUseNativeValidation&&d.criteriaMode==="all",(s.inner||[]).reduce(function(S,E){if(S[E.path]||(S[E.path]={message:E.message,type:E.type}),_){var A=S[E.path].types,I=A&&A[E.type];S[E.path]=qO(E.path,_,S,E.type,I?[].concat(I,E.message):E.message)}return S},{})),d)};var s,_}))}catch(p){return Promise.reject(p)}}}function Sd(e){this._maxSize=e,this.clear()}Sd.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Sd.prototype.get=function(e){return this._values[e]};Sd.prototype.set=function(e,t){return this._size>=this._maxSize&&this.clear(),e in this._values||this._size++,this._values[e]=t};var ree=/[^.^\]^[]+|(?=\[\]|\.\.)/g,i4=/^\d+$/,iee=/^\d/,oee=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,see=/^\s*(['"]?)(.*?)(\1)\s*$/,PT=512,yD=new Sd(PT),vD=new Sd(PT),_D=new Sd(PT),sd={Cache:Sd,split:cS,normalizePath:zw,setter:function(e){var t=zw(e);return vD.get(e)||vD.set(e,function(i,c){for(var d=0,p=t.length,s=i;d<p-1;){var _=t[d];if(_==="__proto__"||_==="constructor"||_==="prototype")return i;s=s[t[d++]]}s[t[d]]=c})},getter:function(e,t){var n=zw(e);return _D.get(e)||_D.set(e,function(c){for(var d=0,p=n.length;d<p;)if(c!=null||!t)c=c[n[d++]];else return;return c})},join:function(e){return e.reduce(function(t,n){return t+(MT(n)||i4.test(n)?"["+n+"]":(t?".":"")+n)},"")},forEach:function(e,t,n){aee(Array.isArray(e)?e:cS(e),t,n)}};function zw(e){return yD.get(e)||yD.set(e,cS(e).map(function(t){return t.replace(see,"$2")}))}function cS(e){return e.match(ree)||[""]}function aee(e,t,n){var i=e.length,c,d,p,s;for(d=0;d<i;d++)c=e[d],c&&(uee(c)&&(c='"'+c+'"'),s=MT(c),p=!s&&/^\d+$/.test(c),t.call(n,c,s,p,d,e))}function MT(e){return typeof e=="string"&&e&&["'",'"'].indexOf(e.charAt(0))!==-1}function lee(e){return e.match(iee)&&!e.match(i4)}function cee(e){return oee.test(e)}function uee(e){return!MT(e)&&(lee(e)||cee(e))}const dee=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,Wx=e=>e.match(dee)||[],Gx=e=>e[0].toUpperCase()+e.slice(1),DT=(e,t)=>Wx(e).join(t).toLowerCase(),o4=e=>Wx(e).reduce((t,n)=>`${t}${t?n[0].toUpperCase()+n.slice(1).toLowerCase():n.toLowerCase()}`,""),hee=e=>Gx(o4(e)),fee=e=>DT(e,"_"),pee=e=>DT(e,"-"),mee=e=>Gx(DT(e," ")),gee=e=>Wx(e).map(Gx).join(" ");var Lw={words:Wx,upperFirst:Gx,camelCase:o4,pascalCase:hee,snakeCase:fee,kebabCase:pee,sentenceCase:mee,titleCase:gee},zT={exports:{}};zT.exports=function(e){return s4(yee(e),e)};zT.exports.array=s4;function s4(e,t){var n=e.length,i=new Array(n),c={},d=n,p=vee(t),s=_ee(e);for(t.forEach(function(S){if(!s.has(S[0])||!s.has(S[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});d--;)c[d]||_(e[d],d,new Set);return i;function _(S,E,A){if(A.has(S)){var I;try{I=", node was:"+JSON.stringify(S)}catch{I=""}throw new Error("Cyclic dependency"+I)}if(!s.has(S))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(S));if(!c[E]){c[E]=!0;var O=p.get(S)||new Set;if(O=Array.from(O),E=O.length){A.add(S);do{var N=O[--E];_(N,s.get(N),A)}while(E);A.delete(S)}i[--n]=S}}}function yee(e){for(var t=new Set,n=0,i=e.length;n<i;n++){var c=e[n];t.add(c[0]),t.add(c[1])}return Array.from(t)}function vee(e){for(var t=new Map,n=0,i=e.length;n<i;n++){var c=e[n];t.has(c[0])||t.set(c[0],new Set),t.has(c[1])||t.set(c[1],new Set),t.get(c[0]).add(c[1])}return t}function _ee(e){for(var t=new Map,n=0,i=e.length;n<i;n++)t.set(e[n],n);return t}var xee=zT.exports;const bee=Ya(xee),wee=Object.prototype.toString,See=Error.prototype.toString,Eee=RegExp.prototype.toString,Tee=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",Cee=/^Symbol\((.*)\)(.*)$/;function Aee(e){return e!=+e?"NaN":e===0&&1/e<0?"-0":""+e}function xD(e,t=!1){if(e==null||e===!0||e===!1)return""+e;const n=typeof e;if(n==="number")return Aee(e);if(n==="string")return t?`"${e}"`:e;if(n==="function")return"[Function "+(e.name||"anonymous")+"]";if(n==="symbol")return Tee.call(e).replace(Cee,"Symbol($1)");const i=wee.call(e).slice(8,-1);return i==="Date"?isNaN(e.getTime())?""+e:e.toISOString(e):i==="Error"||e instanceof Error?"["+See.call(e)+"]":i==="RegExp"?Eee.call(e):null}function Vc(e,t){let n=xD(e,t);return n!==null?n:JSON.stringify(e,function(i,c){let d=xD(this[i],t);return d!==null?d:c},2)}function a4(e){return e==null?[]:[].concat(e)}let l4,c4,u4,kee=/\$\{\s*(\w+)\s*\}/g;l4=Symbol.toStringTag;class bD{constructor(t,n,i,c){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[l4]="Error",this.name="ValidationError",this.value=n,this.path=i,this.type=c,this.errors=[],this.inner=[],a4(t).forEach(d=>{if(Vo.isError(d)){this.errors.push(...d.errors);const p=d.inner.length?d.inner:[d];this.inner.push(...p)}else this.errors.push(d)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}c4=Symbol.hasInstance;u4=Symbol.toStringTag;class Vo extends Error{static formatError(t,n){const i=n.label||n.path||"this";return i!==n.path&&(n=Object.assign({},n,{path:i})),typeof t=="string"?t.replace(kee,(c,d)=>Vc(n[d])):typeof t=="function"?t(n):t}static isError(t){return t&&t.name==="ValidationError"}constructor(t,n,i,c,d){const p=new bD(t,n,i,c);if(d)return p;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[u4]="Error",this.name=p.name,this.message=p.message,this.type=p.type,this.value=p.value,this.path=p.path,this.errors=p.errors,this.inner=p.inner,Error.captureStackTrace&&Error.captureStackTrace(this,Vo)}static[c4](t){return bD[Symbol.hasInstance](t)||super[Symbol.hasInstance](t)}}let La={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:e,type:t,value:n,originalValue:i})=>{const c=i!=null&&i!==n?` (cast from the value \`${Vc(i,!0)}\`).`:".";return t!=="mixed"?`${e} must be a \`${t}\` type, but the final value was: \`${Vc(n,!0)}\``+c:`${e} must match the configured type. The validated value was: \`${Vc(n,!0)}\``+c}},No={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Iee={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},uS={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Pee={isValue:"${path} field must be ${value}"},dS={noUnknown:"${path} field has unspecified keys: ${unknown}"},Mee={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Dee={notType:e=>{const{path:t,value:n,spec:i}=e,c=i.types.length;if(Array.isArray(n)){if(n.length<c)return`${t} tuple value has too few items, expected a length of ${c} but got ${n.length} for value: \`${Vc(n,!0)}\``;if(n.length>c)return`${t} tuple value has too many items, expected a length of ${c} but got ${n.length} for value: \`${Vc(n,!0)}\``}return Vo.formatError(La.notType,e)}};Object.assign(Object.create(null),{mixed:La,string:No,number:Iee,date:uS,object:dS,array:Mee,boolean:Pee,tuple:Dee});const LT=e=>e&&e.__isYupSchema__;class A_{static fromOptions(t,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:c,otherwise:d}=n,p=typeof i=="function"?i:(...s)=>s.every(_=>_===i);return new A_(t,(s,_)=>{var S;let E=p(...s)?c:d;return(S=E==null?void 0:E(_))!=null?S:_})}constructor(t,n){this.fn=void 0,this.refs=t,this.refs=t,this.fn=n}resolve(t,n){let i=this.refs.map(d=>d.getValue(n==null?void 0:n.value,n==null?void 0:n.parent,n==null?void 0:n.context)),c=this.fn(i,t,n);if(c===void 0||c===t)return t;if(!LT(c))throw new TypeError("conditions must return a schema object");return c.resolve(n)}}const cv={context:"$",value:"."};class Ed{constructor(t,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof t!="string")throw new TypeError("ref must be a string, got: "+t);if(this.key=t.trim(),t==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===cv.context,this.isValue=this.key[0]===cv.value,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?cv.context:this.isValue?cv.value:"";this.path=this.key.slice(i.length),this.getter=this.path&&sd.getter(this.path,!0),this.map=n.map}getValue(t,n,i){let c=this.isContext?i:this.isValue?t:n;return this.getter&&(c=this.getter(c||{})),this.map&&(c=this.map(c)),c}cast(t,n){return this.getValue(t,n==null?void 0:n.parent,n==null?void 0:n.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(t){return t&&t.__isYupRef}}Ed.prototype.__isYupRef=!0;const ed=e=>e==null;function Ah(e){function t({value:n,path:i="",options:c,originalValue:d,schema:p},s,_){const{name:S,test:E,params:A,message:I,skipAbsent:O}=e;let{parent:N,context:$,abortEarly:K=p.spec.abortEarly,disableStackTrace:W=p.spec.disableStackTrace}=c;function B(Be){return Ed.isRef(Be)?Be.getValue(n,N,$):Be}function U(Be={}){const le=Object.assign({value:n,originalValue:d,label:p.spec.label,path:Be.path||i,spec:p.spec,disableStackTrace:Be.disableStackTrace||W},A,Be.params);for(const Se of Object.keys(le))le[Se]=B(le[Se]);const xe=new Vo(Vo.formatError(Be.message||I,le),n,le.path,Be.type||S,le.disableStackTrace);return xe.params=le,xe}const J=K?s:_;let ee={path:i,parent:N,type:S,from:c.from,createError:U,resolve:B,options:c,originalValue:d,schema:p};const ye=Be=>{Vo.isError(Be)?J(Be):Be?_(null):J(U())},Q=Be=>{Vo.isError(Be)?J(Be):s(Be)};if(O&&ed(n))return ye(!0);let re;try{var Ie;if(re=E.call(ee,n,ee),typeof((Ie=re)==null?void 0:Ie.then)=="function"){if(c.sync)throw new Error(`Validation test of type: "${ee.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(re).then(ye,Q)}}catch(Be){Q(Be);return}ye(re)}return t.OPTIONS=e,t}function zee(e,t,n,i=n){let c,d,p;return t?(sd.forEach(t,(s,_,S)=>{let E=_?s.slice(1,s.length-1):s;e=e.resolve({context:i,parent:c,value:n});let A=e.type==="tuple",I=S?parseInt(E,10):0;if(e.innerType||A){if(A&&!S)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${p}" must contain an index to the tuple element, e.g. "${p}[0]"`);if(n&&I>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${s}, in the path: ${t}. because there is no value at that index. `);c=n,n=n&&n[I],e=A?e.spec.types[I]:e.innerType}if(!S){if(!e.fields||!e.fields[E])throw new Error(`The schema does not contain the path: ${t}. (failed at: ${p} which is a type: "${e.type}")`);c=n,n=n&&n[E],e=e.fields[E]}d=E,p=_?"["+s+"]":"."+s}),{schema:e,parent:c,parentPath:d}):{parent:c,parentPath:t,schema:e}}class k_ extends Set{describe(){const t=[];for(const n of this.values())t.push(Ed.isRef(n)?n.describe():n);return t}resolveAll(t){let n=[];for(const i of this.values())n.push(t(i));return n}clone(){return new k_(this.values())}merge(t,n){const i=this.clone();return t.forEach(c=>i.add(c)),n.forEach(c=>i.delete(c)),i}}function Yh(e,t=new Map){if(LT(e)||!e||typeof e!="object")return e;if(t.has(e))return t.get(e);let n;if(e instanceof Date)n=new Date(e.getTime()),t.set(e,n);else if(e instanceof RegExp)n=new RegExp(e),t.set(e,n);else if(Array.isArray(e)){n=new Array(e.length),t.set(e,n);for(let i=0;i<e.length;i++)n[i]=Yh(e[i],t)}else if(e instanceof Map){n=new Map,t.set(e,n);for(const[i,c]of e.entries())n.set(i,Yh(c,t))}else if(e instanceof Set){n=new Set,t.set(e,n);for(const i of e)n.add(Yh(i,t))}else if(e instanceof Object){n={},t.set(e,n);for(const[i,c]of Object.entries(e))n[i]=Yh(c,t)}else throw Error(`Unable to clone ${e}`);return n}class Ja{constructor(t){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new k_,this._blacklist=new k_,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(La.notType)}),this.type=t.type,this._typeCheck=t.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},t==null?void 0:t.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(t){if(this._mutate)return t&&Object.assign(this.spec,t),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=Yh(Object.assign({},this.spec,t)),n}label(t){let n=this.clone();return n.spec.label=t,n}meta(...t){if(t.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},t[0]),n}withMutation(t){let n=this._mutate;this._mutate=!0;let i=t(this);return this._mutate=n,i}concat(t){if(!t||t===this)return this;if(t.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${t.type}`);let n=this,i=t.clone();const c=Object.assign({},n.spec,i.spec);return i.spec=c,i.internalTests=Object.assign({},n.internalTests,i.internalTests),i._whitelist=n._whitelist.merge(t._whitelist,t._blacklist),i._blacklist=n._blacklist.merge(t._blacklist,t._whitelist),i.tests=n.tests,i.exclusiveTests=n.exclusiveTests,i.withMutation(d=>{t.tests.forEach(p=>{d.test(p.OPTIONS)})}),i.transforms=[...n.transforms,...i.transforms],i}isType(t){return t==null?!!(this.spec.nullable&&t===null||this.spec.optional&&t===void 0):this._typeCheck(t)}resolve(t){let n=this;if(n.conditions.length){let i=n.conditions;n=n.clone(),n.conditions=[],n=i.reduce((c,d)=>d.resolve(c,t),n),n=n.resolve(t)}return n}resolveOptions(t){var n,i,c,d;return Object.assign({},t,{from:t.from||[],strict:(n=t.strict)!=null?n:this.spec.strict,abortEarly:(i=t.abortEarly)!=null?i:this.spec.abortEarly,recursive:(c=t.recursive)!=null?c:this.spec.recursive,disableStackTrace:(d=t.disableStackTrace)!=null?d:this.spec.disableStackTrace})}cast(t,n={}){let i=this.resolve(Object.assign({value:t},n)),c=n.assert==="ignore-optionality",d=i._cast(t,n);if(n.assert!==!1&&!i.isType(d)){if(c&&ed(d))return d;let p=Vc(t),s=Vc(d);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${i.type}". 

attempted value: ${p} 
`+(s!==p?`result of cast: ${s}`:""))}return d}_cast(t,n){let i=t===void 0?t:this.transforms.reduce((c,d)=>d.call(this,c,t,this),t);return i===void 0&&(i=this.getDefault(n)),i}_validate(t,n={},i,c){let{path:d,originalValue:p=t,strict:s=this.spec.strict}=n,_=t;s||(_=this._cast(_,Object.assign({assert:!1},n)));let S=[];for(let E of Object.values(this.internalTests))E&&S.push(E);this.runTests({path:d,value:_,originalValue:p,options:n,tests:S},i,E=>{if(E.length)return c(E,_);this.runTests({path:d,value:_,originalValue:p,options:n,tests:this.tests},i,c)})}runTests(t,n,i){let c=!1,{tests:d,value:p,originalValue:s,path:_,options:S}=t,E=$=>{c||(c=!0,n($,p))},A=$=>{c||(c=!0,i($,p))},I=d.length,O=[];if(!I)return A([]);let N={value:p,originalValue:s,path:_,options:S,schema:this};for(let $=0;$<d.length;$++){const K=d[$];K(N,E,function(B){B&&(Array.isArray(B)?O.push(...B):O.push(B)),--I<=0&&A(O)})}}asNestedTest({key:t,index:n,parent:i,parentPath:c,originalParent:d,options:p}){const s=t??n;if(s==null)throw TypeError("Must include `key` or `index` for nested validations");const _=typeof s=="number";let S=i[s];const E=Object.assign({},p,{strict:!0,parent:i,value:S,originalValue:d[s],key:void 0,[_?"index":"key"]:s,path:_||s.includes(".")?`${c||""}[${_?s:`"${s}"`}]`:(c?`${c}.`:"")+t});return(A,I,O)=>this.resolve(E)._validate(S,E,I,O)}validate(t,n){var i;let c=this.resolve(Object.assign({},n,{value:t})),d=(i=n==null?void 0:n.disableStackTrace)!=null?i:c.spec.disableStackTrace;return new Promise((p,s)=>c._validate(t,n,(_,S)=>{Vo.isError(_)&&(_.value=S),s(_)},(_,S)=>{_.length?s(new Vo(_,S,void 0,void 0,d)):p(S)}))}validateSync(t,n){var i;let c=this.resolve(Object.assign({},n,{value:t})),d,p=(i=n==null?void 0:n.disableStackTrace)!=null?i:c.spec.disableStackTrace;return c._validate(t,Object.assign({},n,{sync:!0}),(s,_)=>{throw Vo.isError(s)&&(s.value=_),s},(s,_)=>{if(s.length)throw new Vo(s,t,void 0,void 0,p);d=_}),d}isValid(t,n){return this.validate(t,n).then(()=>!0,i=>{if(Vo.isError(i))return!1;throw i})}isValidSync(t,n){try{return this.validateSync(t,n),!0}catch(i){if(Vo.isError(i))return!1;throw i}}_getDefault(t){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,t):Yh(n)}getDefault(t){return this.resolve(t||{})._getDefault(t)}default(t){return arguments.length===0?this._getDefault():this.clone({default:t})}strict(t=!0){return this.clone({strict:t})}nullability(t,n){const i=this.clone({nullable:t});return i.internalTests.nullable=Ah({message:n,name:"nullable",test(c){return c===null?this.schema.spec.nullable:!0}}),i}optionality(t,n){const i=this.clone({optional:t});return i.internalTests.optionality=Ah({message:n,name:"optionality",test(c){return c===void 0?this.schema.spec.optional:!0}}),i}optional(){return this.optionality(!0)}defined(t=La.defined){return this.optionality(!1,t)}nullable(){return this.nullability(!0)}nonNullable(t=La.notNull){return this.nullability(!1,t)}required(t=La.required){return this.clone().withMutation(n=>n.nonNullable(t).defined(t))}notRequired(){return this.clone().withMutation(t=>t.nullable().optional())}transform(t){let n=this.clone();return n.transforms.push(t),n}test(...t){let n;if(t.length===1?typeof t[0]=="function"?n={test:t[0]}:n=t[0]:t.length===2?n={name:t[0],test:t[1]}:n={name:t[0],message:t[1],test:t[2]},n.message===void 0&&(n.message=La.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let i=this.clone(),c=Ah(n),d=n.exclusive||n.name&&i.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(i.exclusiveTests[n.name]=!!n.exclusive),i.tests=i.tests.filter(p=>!(p.OPTIONS.name===n.name&&(d||p.OPTIONS.test===c.OPTIONS.test))),i.tests.push(c),i}when(t,n){!Array.isArray(t)&&typeof t!="string"&&(n=t,t=".");let i=this.clone(),c=a4(t).map(d=>new Ed(d));return c.forEach(d=>{d.isSibling&&i.deps.push(d.key)}),i.conditions.push(typeof n=="function"?new A_(c,n):A_.fromOptions(c,n)),i}typeError(t){let n=this.clone();return n.internalTests.typeError=Ah({message:t,name:"typeError",skipAbsent:!0,test(i){return this.schema._typeCheck(i)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(t,n=La.oneOf){let i=this.clone();return t.forEach(c=>{i._whitelist.add(c),i._blacklist.delete(c)}),i.internalTests.whiteList=Ah({message:n,name:"oneOf",skipAbsent:!0,test(c){let d=this.schema._whitelist,p=d.resolveAll(this.resolve);return p.includes(c)?!0:this.createError({params:{values:Array.from(d).join(", "),resolved:p}})}}),i}notOneOf(t,n=La.notOneOf){let i=this.clone();return t.forEach(c=>{i._blacklist.add(c),i._whitelist.delete(c)}),i.internalTests.blacklist=Ah({message:n,name:"notOneOf",test(c){let d=this.schema._blacklist,p=d.resolveAll(this.resolve);return p.includes(c)?this.createError({params:{values:Array.from(d).join(", "),resolved:p}}):!0}}),i}strip(t=!0){let n=this.clone();return n.spec.strip=t,n}describe(t){const n=(t?this.resolve(t):this).clone(),{label:i,meta:c,optional:d,nullable:p}=n.spec;return{meta:c,label:i,optional:d,nullable:p,default:n.getDefault(t),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.map(_=>({name:_.OPTIONS.name,params:_.OPTIONS.params})).filter((_,S,E)=>E.findIndex(A=>A.name===_.name)===S)}}}Ja.prototype.__isYupSchema__=!0;for(const e of["validate","validateSync"])Ja.prototype[`${e}At`]=function(t,n,i={}){const{parent:c,parentPath:d,schema:p}=zee(this,t,n,i.context);return p[e](c&&c[d],Object.assign({},i,{parent:c,path:t}))};for(const e of["equals","is"])Ja.prototype[e]=Ja.prototype.oneOf;for(const e of["not","nope"])Ja.prototype[e]=Ja.prototype.notOneOf;const Lee=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function Ree(e){const t=hS(e);if(!t)return Date.parse?Date.parse(e):Number.NaN;if(t.z===void 0&&t.plusMinus===void 0)return new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond).valueOf();let n=0;return t.z!=="Z"&&t.plusMinus!==void 0&&(n=t.hourOffset*60+t.minuteOffset,t.plusMinus==="+"&&(n=0-n)),Date.UTC(t.year,t.month,t.day,t.hour,t.minute+n,t.second,t.millisecond)}function hS(e){var t,n;const i=Lee.exec(e);return i?{year:_l(i[1]),month:_l(i[2],1)-1,day:_l(i[3],1),hour:_l(i[4]),minute:_l(i[5]),second:_l(i[6]),millisecond:i[7]?_l(i[7].substring(0,3)):0,precision:(t=(n=i[7])==null?void 0:n.length)!=null?t:void 0,z:i[8]||void 0,plusMinus:i[9]||void 0,hourOffset:_l(i[10]),minuteOffset:_l(i[11])}:null}function _l(e,t=0){return Number(e)||t}let Oee=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Bee=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Fee=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,jee="^\\d{4}-\\d{2}-\\d{2}",Nee="\\d{2}:\\d{2}:\\d{2}",$ee="(([+-]\\d{2}(:?\\d{2})?)|Z)",Vee=new RegExp(`${jee}T${Nee}(\\.\\d+)?${$ee}$`),Uee=e=>ed(e)||e===e.trim(),Wee={}.toString();function Qh(){return new d4}class d4 extends Ja{constructor(){super({type:"string",check(t){return t instanceof String&&(t=t.valueOf()),typeof t=="string"}}),this.withMutation(()=>{this.transform((t,n,i)=>{if(!i.spec.coerce||i.isType(t)||Array.isArray(t))return t;const c=t!=null&&t.toString?t.toString():t;return c===Wee?t:c})})}required(t){return super.required(t).withMutation(n=>n.test({message:t||La.required,name:"required",skipAbsent:!0,test:i=>!!i.length}))}notRequired(){return super.notRequired().withMutation(t=>(t.tests=t.tests.filter(n=>n.OPTIONS.name!=="required"),t))}length(t,n=No.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:t},skipAbsent:!0,test(i){return i.length===this.resolve(t)}})}min(t,n=No.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(i){return i.length>=this.resolve(t)}})}max(t,n=No.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:t},skipAbsent:!0,test(i){return i.length<=this.resolve(t)}})}matches(t,n){let i=!1,c,d;return n&&(typeof n=="object"?{excludeEmptyString:i=!1,message:c,name:d}=n:c=n),this.test({name:d||"matches",message:c||No.matches,params:{regex:t},skipAbsent:!0,test:p=>p===""&&i||p.search(t)!==-1})}email(t=No.email){return this.matches(Oee,{name:"email",message:t,excludeEmptyString:!0})}url(t=No.url){return this.matches(Bee,{name:"url",message:t,excludeEmptyString:!0})}uuid(t=No.uuid){return this.matches(Fee,{name:"uuid",message:t,excludeEmptyString:!1})}datetime(t){let n="",i,c;return t&&(typeof t=="object"?{message:n="",allowOffset:i=!1,precision:c=void 0}=t:n=t),this.matches(Vee,{name:"datetime",message:n||No.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||No.datetime_offset,params:{allowOffset:i},skipAbsent:!0,test:d=>{if(!d||i)return!0;const p=hS(d);return p?!!p.z:!1}}).test({name:"datetime_precision",message:n||No.datetime_precision,params:{precision:c},skipAbsent:!0,test:d=>{if(!d||c==null)return!0;const p=hS(d);return p?p.precision===c:!1}})}ensure(){return this.default("").transform(t=>t===null?"":t)}trim(t=No.trim){return this.transform(n=>n!=null?n.trim():n).test({message:t,name:"trim",test:Uee})}lowercase(t=No.lowercase){return this.transform(n=>ed(n)?n:n.toLowerCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>ed(n)||n===n.toLowerCase()})}uppercase(t=No.uppercase){return this.transform(n=>ed(n)?n:n.toUpperCase()).test({message:t,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>ed(n)||n===n.toUpperCase()})}}Qh.prototype=d4.prototype;let Gee=new Date(""),Hee=e=>Object.prototype.toString.call(e)==="[object Date]";class Hx extends Ja{constructor(){super({type:"date",check(t){return Hee(t)&&!isNaN(t.getTime())}}),this.withMutation(()=>{this.transform((t,n,i)=>!i.spec.coerce||i.isType(t)||t===null?t:(t=Ree(t),isNaN(t)?Hx.INVALID_DATE:new Date(t)))})}prepareParam(t,n){let i;if(Ed.isRef(t))i=t;else{let c=this.cast(t);if(!this._typeCheck(c))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);i=c}return i}min(t,n=uS.min){let i=this.prepareParam(t,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:t},skipAbsent:!0,test(c){return c>=this.resolve(i)}})}max(t,n=uS.max){let i=this.prepareParam(t,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:t},skipAbsent:!0,test(c){return c<=this.resolve(i)}})}}Hx.INVALID_DATE=Gee;Hx.prototype;function Zee(e,t=[]){let n=[],i=new Set,c=new Set(t.map(([p,s])=>`${p}-${s}`));function d(p,s){let _=sd.split(p)[0];i.add(_),c.has(`${s}-${_}`)||n.push([s,_])}for(const p of Object.keys(e)){let s=e[p];i.add(p),Ed.isRef(s)&&s.isSibling?d(s.path,p):LT(s)&&"deps"in s&&s.deps.forEach(_=>d(_,p))}return bee.array(Array.from(i),n).reverse()}function wD(e,t){let n=1/0;return e.some((i,c)=>{var d;if((d=t.path)!=null&&d.includes(i))return n=c,!0}),n}function h4(e){return(t,n)=>wD(e,t)-wD(e,n)}const qee=(e,t,n)=>{if(typeof e!="string")return e;let i=e;try{i=JSON.parse(e)}catch{}return n.isType(i)?i:e};function zv(e){if("fields"in e){const t={};for(const[n,i]of Object.entries(e.fields))t[n]=zv(i);return e.setFields(t)}if(e.type==="array"){const t=e.optional();return t.innerType&&(t.innerType=zv(t.innerType)),t}return e.type==="tuple"?e.optional().clone({types:e.spec.types.map(zv)}):"optional"in e?e.optional():e}const Kee=(e,t)=>{const n=[...sd.normalizePath(t)];if(n.length===1)return n[0]in e;let i=n.pop(),c=sd.getter(sd.join(n),!0)(e);return!!(c&&i in c)};let SD=e=>Object.prototype.toString.call(e)==="[object Object]";function Xee(e,t){let n=Object.keys(e.fields);return Object.keys(t).filter(i=>n.indexOf(i)===-1)}const Jee=h4([]);function RT(e){return new f4(e)}class f4 extends Ja{constructor(t){super({type:"object",check(n){return SD(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=Jee,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{t&&this.shape(t)})}_cast(t,n={}){var i;let c=super._cast(t,n);if(c===void 0)return this.getDefault(n);if(!this._typeCheck(c))return c;let d=this.fields,p=(i=n.stripUnknown)!=null?i:this.spec.noUnknown,s=[].concat(this._nodes,Object.keys(c).filter(A=>!this._nodes.includes(A))),_={},S=Object.assign({},n,{parent:_,__validating:n.__validating||!1}),E=!1;for(const A of s){let I=d[A],O=A in c;if(I){let N,$=c[A];S.path=(n.path?`${n.path}.`:"")+A,I=I.resolve({value:$,context:n.context,parent:_});let K=I instanceof Ja?I.spec:void 0,W=K==null?void 0:K.strict;if(K!=null&&K.strip){E=E||A in c;continue}N=!n.__validating||!W?I.cast(c[A],S):c[A],N!==void 0&&(_[A]=N)}else O&&!p&&(_[A]=c[A]);(O!==A in _||_[A]!==c[A])&&(E=!0)}return E?_:c}_validate(t,n={},i,c){let{from:d=[],originalValue:p=t,recursive:s=this.spec.recursive}=n;n.from=[{schema:this,value:p},...d],n.__validating=!0,n.originalValue=p,super._validate(t,n,i,(_,S)=>{if(!s||!SD(S)){c(_,S);return}p=p||S;let E=[];for(let A of this._nodes){let I=this.fields[A];!I||Ed.isRef(I)||E.push(I.asNestedTest({options:n,key:A,parent:S,parentPath:n.path,originalParent:p}))}this.runTests({tests:E,value:S,originalValue:p,options:n},i,A=>{c(A.sort(this._sortErrors).concat(_),S)})})}clone(t){const n=super.clone(t);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(t){let n=super.concat(t),i=n.fields;for(let[c,d]of Object.entries(this.fields)){const p=i[c];i[c]=p===void 0?d:p}return n.withMutation(c=>c.setFields(i,[...this._excludedEdges,...t._excludedEdges]))}_getDefault(t){if("default"in this.spec)return super._getDefault(t);if(!this._nodes.length)return;let n={};return this._nodes.forEach(i=>{var c;const d=this.fields[i];let p=t;(c=p)!=null&&c.value&&(p=Object.assign({},p,{parent:p.value,value:p.value[i]})),n[i]=d&&"getDefault"in d?d.getDefault(p):void 0}),n}setFields(t,n){let i=this.clone();return i.fields=t,i._nodes=Zee(t,n),i._sortErrors=h4(Object.keys(t)),n&&(i._excludedEdges=n),i}shape(t,n=[]){return this.clone().withMutation(i=>{let c=i._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),c=[...i._excludedEdges,...n]),i.setFields(Object.assign(i.fields,t),c)})}partial(){const t={};for(const[n,i]of Object.entries(this.fields))t[n]="optional"in i&&i.optional instanceof Function?i.optional():i;return this.setFields(t)}deepPartial(){return zv(this)}pick(t){const n={};for(const i of t)this.fields[i]&&(n[i]=this.fields[i]);return this.setFields(n,this._excludedEdges.filter(([i,c])=>t.includes(i)&&t.includes(c)))}omit(t){const n=[];for(const i of Object.keys(this.fields))t.includes(i)||n.push(i);return this.pick(n)}from(t,n,i){let c=sd.getter(t,!0);return this.transform(d=>{if(!d)return d;let p=d;return Kee(d,t)&&(p=Object.assign({},d),i||delete p[t],p[n]=c(d)),p})}json(){return this.transform(qee)}noUnknown(t=!0,n=dS.noUnknown){typeof t!="boolean"&&(n=t,t=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:n,test(c){if(c==null)return!0;const d=Xee(this.schema,c);return!t||d.length===0||this.createError({params:{unknown:d.join(", ")}})}});return i.spec.noUnknown=t,i}unknown(t=!0,n=dS.noUnknown){return this.noUnknown(!t,n)}transformKeys(t){return this.transform(n=>{if(!n)return n;const i={};for(const c of Object.keys(n))i[t(c)]=n[c];return i})}camelCase(){return this.transformKeys(Lw.camelCase)}snakeCase(){return this.transformKeys(Lw.snakeCase)}constantCase(){return this.transformKeys(t=>Lw.snakeCase(t).toUpperCase())}describe(t){const n=(t?this.resolve(t):this).clone(),i=super.describe(t);i.fields={};for(const[d,p]of Object.entries(n.fields)){var c;let s=t;(c=s)!=null&&c.value&&(s=Object.assign({},s,{parent:s.value,value:s.value[d]})),i.fields[d]=p.describe(s)}return i}}RT.prototype=f4.prototype;const Yee=RT().shape({fullAddress:Qh().required("Bitte geben Sie die Adresse Ihres Wohnortes ein."),desiredStartMonth:Qh().required("Bitte geben Sie den gewünschten Beginn an."),expectedBirthDate:Qh().required("Bitte geben Sie das (erwartete) Geburtsdatum Ihres Kindes an."),email:Qh().email("Bitte geben Sie eine gültige Email Adresse ein.").required("Bitte geben Sie eine Email Adresse ein.")}),p4=At.createContext({}),Qee=({children:e,onSubmit:t})=>{const[n,i]=At.useState(!1),[c,d]=At.useState(!1),{register:p,handleSubmit:s,getFieldState:_,formState:S,control:E,watch:A,trigger:I,setValue:O}=t4({mode:"onChange",reValidateMode:"onChange",resolver:r4(Yee)}),N=U=>{const{error:J,invalid:ee}=_(U,S),{ref:ye,...Q}=p(U),be=A(U);return{...Q,ref:ye,defaultValue:be,inputRef:ye,helperText:J==null?void 0:J.message,error:ee}},$=async U=>{const J=await I(U);return U||i(!0),J},K=At.useMemo(()=>n?S.isValid:!0,[n,S.isValid]),W=async U=>(i(!0),await(t==null?void 0:t(U))),B=async()=>(d(!0),s(async U=>await W(U),U=>{console.log(U)})().then(()=>(d(!1),!0)).catch(()=>(d(!1),!1)));return z.jsx(p4.Provider,{value:{register:N,control:E,formState:S,watch:A,validate:$,setValue:O,handleSubmit:B,isValid:K,isLoading:c},children:e})},m4=()=>At.useContext(p4);function Ac(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function g4(e){if(!Ac(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=g4(e[n])}),t}function Za(e,t,n={clone:!0}){const i=n.clone?we({},e):e;return Ac(e)&&Ac(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(Ac(t[c])&&c in e&&Ac(e[c])?i[c]=Za(e[c],t[c],n):n.clone?i[c]=Ac(t[c])?g4(t[c]):t[c]:i[c]=t[c])}),i}const ete=Object.freeze(Object.defineProperty({__proto__:null,default:Za,isPlainObject:Ac},Symbol.toStringTag,{value:"Module"}));function zg(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const tte=Object.freeze(Object.defineProperty({__proto__:null,default:zg},Symbol.toStringTag,{value:"Module"})),nte=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function y4(e){const t=`${e}`.match(nte);return t&&t[1]||""}function v4(e,t=""){return e.displayName||e.name||y4(e)||t}function ED(e,t,n){const i=v4(t);return e.displayName||(i!==""?`${n}(${i})`:n)}function rte(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return v4(e,"Component");if(typeof e=="object")switch(e.$$typeof){case Hk.ForwardRef:return ED(e,e.render,"ForwardRef");case Hk.Memo:return ED(e,e.type,"memo");default:return}}}const ite=Object.freeze(Object.defineProperty({__proto__:null,default:rte,getFunctionName:y4},Symbol.toStringTag,{value:"Module"}));function gd(e){if(typeof e!="string")throw new Error(zg(7));return e.charAt(0).toUpperCase()+e.slice(1)}const ote=Object.freeze(Object.defineProperty({__proto__:null,default:gd},Symbol.toStringTag,{value:"Module"}));function _4(e,t){const n=we({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))n[i]=we({},e[i],n[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const c=e[i]||{},d=t[i];n[i]={},!d||!Object.keys(d)?n[i]=c:!c||!Object.keys(c)?n[i]=d:(n[i]=we({},d),Object.keys(c).forEach(p=>{n[i][p]=_4(c[p],d[p])}))}else n[i]===void 0&&(n[i]=e[i])}),n}function ste(e,t,n=void 0){const i={};return Object.keys(e).forEach(c=>{i[c]=e[c].reduce((d,p)=>{if(p){const s=t(p);s!==""&&d.push(s),n&&n[p]&&d.push(n[p])}return d},[]).join(" ")}),i}const TD=e=>e,ate=()=>{let e=TD;return{configure(t){e=t},generate(t){return e(t)},reset(){e=TD}}},lte=ate(),cte=lte,ute={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function x4(e,t,n="Mui"){const i=ute[t];return i?`${n}-${i}`:`${cte.generate(e)}-${t}`}function dte(e,t,n="Mui"){const i={};return t.forEach(c=>{i[c]=x4(e,c,n)}),i}function hte(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const fte=Object.freeze(Object.defineProperty({__proto__:null,default:hte},Symbol.toStringTag,{value:"Module"}));function b4(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var c=e.length;for(t=0;t<c;t++)e[t]&&(n=b4(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function pte(){for(var e,t,n=0,i="",c=arguments.length;n<c;n++)(e=arguments[n])&&(t=b4(e))&&(i&&(i+=" "),i+=t);return i}function mte(e){const{theme:t,name:n,props:i}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?i:_4(t.components[n].defaultProps,i)}const gte=["values","unit","step"],yte=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,i)=>n.val-i.val),t.reduce((n,i)=>we({},n,{[i.key]:i.val}),{})};function w4(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5}=e,c=gn(e,gte),d=yte(t),p=Object.keys(d);function s(I){return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n})`}function _(I){return`@media (max-width:${(typeof t[I]=="number"?t[I]:I)-i/100}${n})`}function S(I,O){const N=p.indexOf(O);return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n}) and (max-width:${(N!==-1&&typeof t[p[N]]=="number"?t[p[N]]:O)-i/100}${n})`}function E(I){return p.indexOf(I)+1<p.length?S(I,p[p.indexOf(I)+1]):s(I)}function A(I){const O=p.indexOf(I);return O===0?s(p[1]):O===p.length-1?_(p[O]):S(I,p[p.indexOf(I)+1]).replace("@media","@media not all and")}return we({keys:p,values:d,up:s,down:_,between:S,only:E,not:A,unit:n},c)}const vte={borderRadius:4},_te=vte;function Qm(e,t){return t?Za(e,t,{clone:!1}):e}const OT={xs:0,sm:600,md:900,lg:1200,xl:1536},CD={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${OT[e]}px)`};function Bl(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const d=i.breakpoints||CD;return t.reduce((p,s,_)=>(p[d.up(d.keys[_])]=n(t[_]),p),{})}if(typeof t=="object"){const d=i.breakpoints||CD;return Object.keys(t).reduce((p,s)=>{if(Object.keys(d.values||OT).indexOf(s)!==-1){const _=d.up(s);p[_]=n(t[s],s)}else{const _=s;p[_]=t[_]}return p},{})}return n(t)}function xte(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,c)=>{const d=e.up(c);return i[d]={},i},{}))||{}}function bte(e,t){return e.reduce((n,i)=>{const c=n[i];return(!c||Object.keys(c).length===0)&&delete n[i],n},t)}function Zx(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const i=`vars.${t}`.split(".").reduce((c,d)=>c&&c[d]?c[d]:null,e);if(i!=null)return i}return t.split(".").reduce((i,c)=>i&&i[c]!=null?i[c]:null,e)}function I_(e,t,n,i=n){let c;return typeof e=="function"?c=e(n):Array.isArray(e)?c=e[n]||i:c=Zx(e,n)||i,t&&(c=t(c,i,e)),c}function bi(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:c}=e,d=p=>{if(p[t]==null)return null;const s=p[t],_=p.theme,S=Zx(_,i)||{};return Bl(p,s,A=>{let I=I_(S,c,A);return A===I&&typeof A=="string"&&(I=I_(S,c,`${t}${A==="default"?"":gd(A)}`,A)),n===!1?I:{[n]:I}})};return d.propTypes={},d.filterProps=[t],d}function wte(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const Ste={m:"margin",p:"padding"},Ete={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},AD={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Tte=wte(e=>{if(e.length>2)if(AD[e])e=AD[e];else return[e];const[t,n]=e.split(""),i=Ste[t],c=Ete[n]||"";return Array.isArray(c)?c.map(d=>i+d):[i+c]}),BT=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],FT=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...BT,...FT];function oy(e,t,n,i){var c;const d=(c=Zx(e,t,!1))!=null?c:n;return typeof d=="number"?p=>typeof p=="string"?p:d*p:Array.isArray(d)?p=>typeof p=="string"?p:d[p]:typeof d=="function"?d:()=>{}}function S4(e){return oy(e,"spacing",8)}function sy(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),i=e(n);return t>=0?i:typeof i=="number"?-i:`-${i}`}function Cte(e,t){return n=>e.reduce((i,c)=>(i[c]=sy(t,n),i),{})}function Ate(e,t,n,i){if(t.indexOf(n)===-1)return null;const c=Tte(n),d=Cte(c,i),p=e[n];return Bl(e,p,d)}function E4(e,t){const n=S4(e.theme);return Object.keys(e).map(i=>Ate(e,t,i,n)).reduce(Qm,{})}function ci(e){return E4(e,BT)}ci.propTypes={};ci.filterProps=BT;function ui(e){return E4(e,FT)}ui.propTypes={};ui.filterProps=FT;function kte(e=8){if(e.mui)return e;const t=S4({spacing:e}),n=(...i)=>(i.length===0?[1]:i).map(d=>{const p=t(d);return typeof p=="number"?`${p}px`:p}).join(" ");return n.mui=!0,n}function qx(...e){const t=e.reduce((i,c)=>(c.filterProps.forEach(d=>{i[d]=c}),i),{}),n=i=>Object.keys(i).reduce((c,d)=>t[d]?Qm(c,t[d](i)):c,{});return n.propTypes={},n.filterProps=e.reduce((i,c)=>i.concat(c.filterProps),[]),n}function Rs(e){return typeof e!="number"?e:`${e}px solid`}function Zs(e,t){return bi({prop:e,themeKey:"borders",transform:t})}const Ite=Zs("border",Rs),Pte=Zs("borderTop",Rs),Mte=Zs("borderRight",Rs),Dte=Zs("borderBottom",Rs),zte=Zs("borderLeft",Rs),Lte=Zs("borderColor"),Rte=Zs("borderTopColor"),Ote=Zs("borderRightColor"),Bte=Zs("borderBottomColor"),Fte=Zs("borderLeftColor"),jte=Zs("outline",Rs),Nte=Zs("outlineColor"),Kx=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=oy(e.theme,"shape.borderRadius",4),n=i=>({borderRadius:sy(t,i)});return Bl(e,e.borderRadius,n)}return null};Kx.propTypes={};Kx.filterProps=["borderRadius"];qx(Ite,Pte,Mte,Dte,zte,Lte,Rte,Ote,Bte,Fte,Kx,jte,Nte);const Xx=e=>{if(e.gap!==void 0&&e.gap!==null){const t=oy(e.theme,"spacing",8),n=i=>({gap:sy(t,i)});return Bl(e,e.gap,n)}return null};Xx.propTypes={};Xx.filterProps=["gap"];const Jx=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=oy(e.theme,"spacing",8),n=i=>({columnGap:sy(t,i)});return Bl(e,e.columnGap,n)}return null};Jx.propTypes={};Jx.filterProps=["columnGap"];const Yx=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=oy(e.theme,"spacing",8),n=i=>({rowGap:sy(t,i)});return Bl(e,e.rowGap,n)}return null};Yx.propTypes={};Yx.filterProps=["rowGap"];const $te=bi({prop:"gridColumn"}),Vte=bi({prop:"gridRow"}),Ute=bi({prop:"gridAutoFlow"}),Wte=bi({prop:"gridAutoColumns"}),Gte=bi({prop:"gridAutoRows"}),Hte=bi({prop:"gridTemplateColumns"}),Zte=bi({prop:"gridTemplateRows"}),qte=bi({prop:"gridTemplateAreas"}),Kte=bi({prop:"gridArea"});qx(Xx,Jx,Yx,$te,Vte,Ute,Wte,Gte,Hte,Zte,qte,Kte);function cf(e,t){return t==="grey"?t:e}const Xte=bi({prop:"color",themeKey:"palette",transform:cf}),Jte=bi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:cf}),Yte=bi({prop:"backgroundColor",themeKey:"palette",transform:cf});qx(Xte,Jte,Yte);function ss(e){return e<=1&&e!==0?`${e*100}%`:e}const Qte=bi({prop:"width",transform:ss}),jT=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var i,c;const d=((i=e.theme)==null||(i=i.breakpoints)==null||(i=i.values)==null?void 0:i[n])||OT[n];return d?((c=e.theme)==null||(c=c.breakpoints)==null?void 0:c.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:ss(n)}};return Bl(e,e.maxWidth,t)}return null};jT.filterProps=["maxWidth"];const ene=bi({prop:"minWidth",transform:ss}),tne=bi({prop:"height",transform:ss}),nne=bi({prop:"maxHeight",transform:ss}),rne=bi({prop:"minHeight",transform:ss});bi({prop:"size",cssProperty:"width",transform:ss});bi({prop:"size",cssProperty:"height",transform:ss});const ine=bi({prop:"boxSizing"});qx(Qte,jT,ene,tne,nne,rne,ine);const one={border:{themeKey:"borders",transform:Rs},borderTop:{themeKey:"borders",transform:Rs},borderRight:{themeKey:"borders",transform:Rs},borderBottom:{themeKey:"borders",transform:Rs},borderLeft:{themeKey:"borders",transform:Rs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Rs},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Kx},color:{themeKey:"palette",transform:cf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:cf},backgroundColor:{themeKey:"palette",transform:cf},p:{style:ui},pt:{style:ui},pr:{style:ui},pb:{style:ui},pl:{style:ui},px:{style:ui},py:{style:ui},padding:{style:ui},paddingTop:{style:ui},paddingRight:{style:ui},paddingBottom:{style:ui},paddingLeft:{style:ui},paddingX:{style:ui},paddingY:{style:ui},paddingInline:{style:ui},paddingInlineStart:{style:ui},paddingInlineEnd:{style:ui},paddingBlock:{style:ui},paddingBlockStart:{style:ui},paddingBlockEnd:{style:ui},m:{style:ci},mt:{style:ci},mr:{style:ci},mb:{style:ci},ml:{style:ci},mx:{style:ci},my:{style:ci},margin:{style:ci},marginTop:{style:ci},marginRight:{style:ci},marginBottom:{style:ci},marginLeft:{style:ci},marginX:{style:ci},marginY:{style:ci},marginInline:{style:ci},marginInlineStart:{style:ci},marginInlineEnd:{style:ci},marginBlock:{style:ci},marginBlockStart:{style:ci},marginBlockEnd:{style:ci},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Xx},rowGap:{style:Yx},columnGap:{style:Jx},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ss},maxWidth:{style:jT},minWidth:{transform:ss},height:{transform:ss},maxHeight:{transform:ss},minHeight:{transform:ss},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},ay=one;function sne(...e){const t=e.reduce((i,c)=>i.concat(Object.keys(c)),[]),n=new Set(t);return e.every(i=>n.size===Object.keys(i).length)}function ane(e,t){return typeof e=="function"?e(t):e}function T4(){function e(n,i,c,d){const p={[n]:i,theme:c},s=d[n];if(!s)return{[n]:i};const{cssProperty:_=n,themeKey:S,transform:E,style:A}=s;if(i==null)return null;if(S==="typography"&&i==="inherit")return{[n]:i};const I=Zx(c,S)||{};return A?A(p):Bl(p,i,N=>{let $=I_(I,E,N);return N===$&&typeof N=="string"&&($=I_(I,E,`${n}${N==="default"?"":gd(N)}`,N)),_===!1?$:{[_]:$}})}function t(n){var i;const{sx:c,theme:d={}}=n||{};if(!c)return null;const p=(i=d.unstable_sxConfig)!=null?i:ay;function s(_){let S=_;if(typeof _=="function")S=_(d);else if(typeof _!="object")return _;if(!S)return null;const E=xte(d.breakpoints),A=Object.keys(E);let I=E;return Object.keys(S).forEach(O=>{const N=ane(S[O],d);if(N!=null)if(typeof N=="object")if(p[O])I=Qm(I,e(O,N,d,p));else{const $=Bl({theme:d},N,K=>({[O]:K}));sne($,N)?I[O]=t({sx:N,theme:d}):I=Qm(I,$)}else I=Qm(I,e(O,N,d,p))}),bte(A,I)}return Array.isArray(c)?c.map(s):s(c)}return t}const C4=T4();C4.filterProps=["sx"];const NT=C4;function A4(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const lne=["breakpoints","palette","spacing","shape"];function $T(e={},...t){const{breakpoints:n={},palette:i={},spacing:c,shape:d={}}=e,p=gn(e,lne),s=w4(n),_=kte(c);let S=Za({breakpoints:s,direction:"ltr",components:{},palette:we({mode:"light"},i),spacing:_,shape:we({},_te,d)},p);return S.applyStyles=A4,S=t.reduce((E,A)=>Za(E,A),S),S.unstable_sxConfig=we({},ay,p==null?void 0:p.unstable_sxConfig),S.unstable_sx=function(A){return NT({sx:A,theme:this})},S}const cne=Object.freeze(Object.defineProperty({__proto__:null,default:$T,private_createBreakpoints:w4,unstable_applyStyles:A4},Symbol.toStringTag,{value:"Module"}));let fS;typeof document=="object"&&(fS=w3({key:"css",prepend:!0}));function une(e){const{injectFirst:t,children:n}=e;return t&&fS?z.jsx(PN,{value:fS,children:n}):n}function dne(e){return e==null||Object.keys(e).length===0}function hne(e){const{styles:t,defaultTheme:n={}}=e,i=typeof t=="function"?c=>t(dne(c)?n:c):t;return z.jsx(z3,{styles:i})}/**
 * @mui/styled-engine v5.15.14
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function fne(e,t){return Fv(e,t)}const pne=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},mne=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:hne,StyledEngineProvider:une,ThemeContext:Pf,css:IS,default:fne,internal_processStyles:pne,keyframes:L3},Symbol.toStringTag,{value:"Module"}));function gne(e){return Object.keys(e).length===0}function yne(e=null){const t=q.useContext(Pf);return!t||gne(t)?e:t}const vne=$T();function _ne(e=vne){return yne(e)}function xne({props:e,name:t,defaultTheme:n,themeId:i}){let c=_ne(n);return i&&(c=c[i]||c),mte({theme:c,name:t,props:e})}const bne=["sx"],wne=e=>{var t,n;const i={systemProps:{},otherProps:{}},c=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:ay;return Object.keys(e).forEach(d=>{c[d]?i.systemProps[d]=e[d]:i.otherProps[d]=e[d]}),i};function Sne(e){const{sx:t}=e,n=gn(e,bne),{systemProps:i,otherProps:c}=wne(n);let d;return Array.isArray(t)?d=[i,...t]:typeof t=="function"?d=(...p)=>{const s=t(...p);return Ac(s)?we({},i,s):i}:d=we({},i,t),we({},c,{sx:d})}const Ene=Object.freeze(Object.defineProperty({__proto__:null,default:NT,extendSxProp:Sne,unstable_createStyleFunctionSx:T4,unstable_defaultSxConfig:ay},Symbol.toStringTag,{value:"Module"}));function Tne(e,t){return we({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var wi={},k4={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(k4);var I4=k4.exports;const Cne=Fl(tte),Ane=Fl(fte);var P4=I4;Object.defineProperty(wi,"__esModule",{value:!0});wi.alpha=L4;wi.blend=Nne;wi.colorChannel=void 0;var kne=wi.darken=UT;wi.decomposeColor=Ws;wi.emphasize=R4;var Ine=wi.getContrastRatio=Rne;wi.getLuminance=P_;wi.hexToRgb=M4;wi.hslToRgb=z4;var Pne=wi.lighten=WT;wi.private_safeAlpha=One;wi.private_safeColorChannel=void 0;wi.private_safeDarken=Bne;wi.private_safeEmphasize=jne;wi.private_safeLighten=Fne;wi.recomposeColor=Rf;wi.rgbToHex=Lne;var kD=P4(Cne),Mne=P4(Ane);function VT(e,t=0,n=1){return(0,Mne.default)(e,t,n)}function M4(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,c)=>c<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function Dne(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Ws(e){if(e.type)return e;if(e.charAt(0)==="#")return Ws(M4(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,kD.default)(9,e));let i=e.substring(t+1,e.length-1),c;if(n==="color"){if(i=i.split(" "),c=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error((0,kD.default)(10,c))}else i=i.split(",");return i=i.map(d=>parseFloat(d)),{type:n,values:i,colorSpace:c}}const D4=e=>{const t=Ws(e);return t.values.slice(0,3).map((n,i)=>t.type.indexOf("hsl")!==-1&&i!==0?`${n}%`:n).join(" ")};wi.colorChannel=D4;const zne=(e,t)=>{try{return D4(e)}catch{return e}};wi.private_safeColorChannel=zne;function Rf(e){const{type:t,colorSpace:n}=e;let{values:i}=e;return t.indexOf("rgb")!==-1?i=i.map((c,d)=>d<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.indexOf("color")!==-1?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function Lne(e){if(e.indexOf("#")===0)return e;const{values:t}=Ws(e);return`#${t.map((n,i)=>Dne(i===3?Math.round(255*n):n)).join("")}`}function z4(e){e=Ws(e);const{values:t}=e,n=t[0],i=t[1]/100,c=t[2]/100,d=i*Math.min(c,1-c),p=(S,E=(S+n/30)%12)=>c-d*Math.max(Math.min(E-3,9-E,1),-1);let s="rgb";const _=[Math.round(p(0)*255),Math.round(p(8)*255),Math.round(p(4)*255)];return e.type==="hsla"&&(s+="a",_.push(t[3])),Rf({type:s,values:_})}function P_(e){e=Ws(e);let t=e.type==="hsl"||e.type==="hsla"?Ws(z4(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Rne(e,t){const n=P_(e),i=P_(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function L4(e,t){return e=Ws(e),t=VT(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Rf(e)}function One(e,t,n){try{return L4(e,t)}catch{return e}}function UT(e,t){if(e=Ws(e),t=VT(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Rf(e)}function Bne(e,t,n){try{return UT(e,t)}catch{return e}}function WT(e,t){if(e=Ws(e),t=VT(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Rf(e)}function Fne(e,t,n){try{return WT(e,t)}catch{return e}}function R4(e,t=.15){return P_(e)>.5?UT(e,t):WT(e,t)}function jne(e,t,n){try{return R4(e,t)}catch{return e}}function Nne(e,t,n,i=1){const c=(_,S)=>Math.round((_**(1/i)*(1-n)+S**(1/i)*n)**i),d=Ws(e),p=Ws(t),s=[c(d.values[0],p.values[0]),c(d.values[1],p.values[1]),c(d.values[2],p.values[2])];return Rf({type:"rgb",values:s})}const $ne={black:"#000",white:"#fff"},Lg=$ne,Vne={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Une=Vne,Wne={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},kh=Wne,Gne={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Ih=Gne,Hne={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Am=Hne,Zne={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Ph=Zne,qne={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Mh=qne,Kne={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Dh=Kne,Xne=["mode","contrastThreshold","tonalOffset"],ID={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Lg.white,default:Lg.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Rw={text:{primary:Lg.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Lg.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function PD(e,t,n,i){const c=i.light||i,d=i.dark||i*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Pne(e.main,c):t==="dark"&&(e.dark=kne(e.main,d)))}function Jne(e="light"){return e==="dark"?{main:Ph[200],light:Ph[50],dark:Ph[400]}:{main:Ph[700],light:Ph[400],dark:Ph[800]}}function Yne(e="light"){return e==="dark"?{main:kh[200],light:kh[50],dark:kh[400]}:{main:kh[500],light:kh[300],dark:kh[700]}}function Qne(e="light"){return e==="dark"?{main:Ih[500],light:Ih[300],dark:Ih[700]}:{main:Ih[700],light:Ih[400],dark:Ih[800]}}function ere(e="light"){return e==="dark"?{main:Mh[400],light:Mh[300],dark:Mh[700]}:{main:Mh[700],light:Mh[500],dark:Mh[900]}}function tre(e="light"){return e==="dark"?{main:Dh[400],light:Dh[300],dark:Dh[700]}:{main:Dh[800],light:Dh[500],dark:Dh[900]}}function nre(e="light"){return e==="dark"?{main:Am[400],light:Am[300],dark:Am[700]}:{main:"#ed6c02",light:Am[500],dark:Am[900]}}function rre(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:i=.2}=e,c=gn(e,Xne),d=e.primary||Jne(t),p=e.secondary||Yne(t),s=e.error||Qne(t),_=e.info||ere(t),S=e.success||tre(t),E=e.warning||nre(t);function A($){return Ine($,Rw.text.primary)>=n?Rw.text.primary:ID.text.primary}const I=({color:$,name:K,mainShade:W=500,lightShade:B=300,darkShade:U=700})=>{if($=we({},$),!$.main&&$[W]&&($.main=$[W]),!$.hasOwnProperty("main"))throw new Error(zg(11,K?` (${K})`:"",W));if(typeof $.main!="string")throw new Error(zg(12,K?` (${K})`:"",JSON.stringify($.main)));return PD($,"light",B,i),PD($,"dark",U,i),$.contrastText||($.contrastText=A($.main)),$},O={dark:Rw,light:ID};return Za(we({common:we({},Lg),mode:t,primary:I({color:d,name:"primary"}),secondary:I({color:p,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:s,name:"error"}),warning:I({color:E,name:"warning"}),info:I({color:_,name:"info"}),success:I({color:S,name:"success"}),grey:Une,contrastThreshold:n,getContrastText:A,augmentColor:I,tonalOffset:i},O[t]),c)}const ire=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function ore(e){return Math.round(e*1e5)/1e5}const MD={textTransform:"uppercase"},DD='"Roboto", "Helvetica", "Arial", sans-serif';function sre(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:i=DD,fontSize:c=14,fontWeightLight:d=300,fontWeightRegular:p=400,fontWeightMedium:s=500,fontWeightBold:_=700,htmlFontSize:S=16,allVariants:E,pxToRem:A}=n,I=gn(n,ire),O=c/14,N=A||(W=>`${W/S*O}rem`),$=(W,B,U,J,ee)=>we({fontFamily:i,fontWeight:W,fontSize:N(B),lineHeight:U},i===DD?{letterSpacing:`${ore(J/B)}em`}:{},ee,E),K={h1:$(d,96,1.167,-1.5),h2:$(d,60,1.2,-.5),h3:$(p,48,1.167,0),h4:$(p,34,1.235,.25),h5:$(p,24,1.334,0),h6:$(s,20,1.6,.15),subtitle1:$(p,16,1.75,.15),subtitle2:$(s,14,1.57,.1),body1:$(p,16,1.5,.15),body2:$(p,14,1.43,.15),button:$(s,14,1.75,.4,MD),caption:$(p,12,1.66,.4),overline:$(p,12,2.66,1,MD),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Za(we({htmlFontSize:S,pxToRem:N,fontFamily:i,fontSize:c,fontWeightLight:d,fontWeightRegular:p,fontWeightMedium:s,fontWeightBold:_},K),I,{clone:!1})}const are=.2,lre=.14,cre=.12;function Ur(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${are})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${lre})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${cre})`].join(",")}const ure=["none",Ur(0,2,1,-1,0,1,1,0,0,1,3,0),Ur(0,3,1,-2,0,2,2,0,0,1,5,0),Ur(0,3,3,-2,0,3,4,0,0,1,8,0),Ur(0,2,4,-1,0,4,5,0,0,1,10,0),Ur(0,3,5,-1,0,5,8,0,0,1,14,0),Ur(0,3,5,-1,0,6,10,0,0,1,18,0),Ur(0,4,5,-2,0,7,10,1,0,2,16,1),Ur(0,5,5,-3,0,8,10,1,0,3,14,2),Ur(0,5,6,-3,0,9,12,1,0,3,16,2),Ur(0,6,6,-3,0,10,14,1,0,4,18,3),Ur(0,6,7,-4,0,11,15,1,0,4,20,3),Ur(0,7,8,-4,0,12,17,2,0,5,22,4),Ur(0,7,8,-4,0,13,19,2,0,5,24,4),Ur(0,7,9,-4,0,14,21,2,0,5,26,4),Ur(0,8,9,-5,0,15,22,2,0,6,28,5),Ur(0,8,10,-5,0,16,24,2,0,6,30,5),Ur(0,8,11,-5,0,17,26,2,0,6,32,5),Ur(0,9,11,-5,0,18,28,2,0,7,34,6),Ur(0,9,12,-6,0,19,29,2,0,7,36,6),Ur(0,10,13,-6,0,20,31,3,0,8,38,7),Ur(0,10,13,-6,0,21,33,3,0,8,40,7),Ur(0,10,14,-6,0,22,35,3,0,8,42,7),Ur(0,11,14,-7,0,23,36,3,0,9,44,8),Ur(0,11,15,-7,0,24,38,3,0,9,46,8)],dre=ure,hre=["duration","easing","delay"],fre={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},pre={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function zD(e){return`${Math.round(e)}ms`}function mre(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function gre(e){const t=we({},fre,e.easing),n=we({},pre,e.duration);return we({getAutoHeightDuration:mre,create:(c=["all"],d={})=>{const{duration:p=n.standard,easing:s=t.easeInOut,delay:_=0}=d;return gn(d,hre),(Array.isArray(c)?c:[c]).map(S=>`${S} ${typeof p=="string"?p:zD(p)} ${s} ${typeof _=="string"?_:zD(_)}`).join(",")}},e,{easing:t,duration:n})}const yre={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},vre=yre,_re=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function xre(e={},...t){const{mixins:n={},palette:i={},transitions:c={},typography:d={}}=e,p=gn(e,_re);if(e.vars)throw new Error(zg(18));const s=rre(i),_=$T(e);let S=Za(_,{mixins:Tne(_.breakpoints,n),palette:s,shadows:dre.slice(),typography:sre(s,d),transitions:gre(c),zIndex:we({},vre)});return S=Za(S,p),S=t.reduce((E,A)=>Za(E,A),S),S.unstable_sxConfig=we({},ay,p==null?void 0:p.unstable_sxConfig),S.unstable_sx=function(A){return NT({sx:A,theme:this})},S}const bre=xre(),O4=bre,B4="$$material";function wre({props:e,name:t}){return xne({props:e,name:t,defaultTheme:O4,themeId:B4})}var ly={};const Sre=Fl(Oj);var Ow={exports:{}},LD;function Ere(){return LD||(LD=1,function(e){function t(n,i){if(n==null)return{};var c={};for(var d in n)if(Object.prototype.hasOwnProperty.call(n,d)){if(i.indexOf(d)>=0)continue;c[d]=n[d]}return c}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Ow)),Ow.exports}const Tre=Fl(mne),Cre=Fl(ete),Are=Fl(ote),kre=Fl(ite),Ire=Fl(cne),Pre=Fl(Ene);var Of=I4;Object.defineProperty(ly,"__esModule",{value:!0});var Mre=ly.default=Wre;ly.shouldForwardProp=Lv;ly.systemDefaultTheme=void 0;var Ps=Of(Sre),pS=Of(Ere()),RD=Fre(Tre),Dre=Cre;Of(Are);Of(kre);var zre=Of(Ire),Lre=Of(Pre);const Rre=["ownerState"],Ore=["variants"],Bre=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function F4(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(F4=function(i){return i?n:t})(e)}function Fre(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=F4(t);if(n&&n.has(e))return n.get(e);var i={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var d in e)if(d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)){var p=c?Object.getOwnPropertyDescriptor(e,d):null;p&&(p.get||p.set)?Object.defineProperty(i,d,p):i[d]=e[d]}return i.default=e,n&&n.set(e,i),i}function jre(e){return Object.keys(e).length===0}function Nre(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Lv(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const $re=ly.systemDefaultTheme=(0,zre.default)(),Vre=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function uv({defaultTheme:e,theme:t,themeId:n}){return jre(t)?e:t[n]||t}function Ure(e){return e?(t,n)=>n[e]:null}function Rv(e,t){let{ownerState:n}=t,i=(0,pS.default)(t,Rre);const c=typeof e=="function"?e((0,Ps.default)({ownerState:n},i)):e;if(Array.isArray(c))return c.flatMap(d=>Rv(d,(0,Ps.default)({ownerState:n},i)));if(c&&typeof c=="object"&&Array.isArray(c.variants)){const{variants:d=[]}=c;let s=(0,pS.default)(c,Ore);return d.forEach(_=>{let S=!0;typeof _.props=="function"?S=_.props((0,Ps.default)({ownerState:n},i,n)):Object.keys(_.props).forEach(E=>{(n==null?void 0:n[E])!==_.props[E]&&i[E]!==_.props[E]&&(S=!1)}),S&&(Array.isArray(s)||(s=[s]),s.push(typeof _.style=="function"?_.style((0,Ps.default)({ownerState:n},i,n)):_.style))}),s}return c}function Wre(e={}){const{themeId:t,defaultTheme:n=$re,rootShouldForwardProp:i=Lv,slotShouldForwardProp:c=Lv}=e,d=p=>(0,Lre.default)((0,Ps.default)({},p,{theme:uv((0,Ps.default)({},p,{defaultTheme:n,themeId:t}))}));return d.__mui_systemSx=!0,(p,s={})=>{(0,RD.internal_processStyles)(p,ee=>ee.filter(ye=>!(ye!=null&&ye.__mui_systemSx)));const{name:_,slot:S,skipVariantsResolver:E,skipSx:A,overridesResolver:I=Ure(Vre(S))}=s,O=(0,pS.default)(s,Bre),N=E!==void 0?E:S&&S!=="Root"&&S!=="root"||!1,$=A||!1;let K,W=Lv;S==="Root"||S==="root"?W=i:S?W=c:Nre(p)&&(W=void 0);const B=(0,RD.default)(p,(0,Ps.default)({shouldForwardProp:W,label:K},O)),U=ee=>typeof ee=="function"&&ee.__emotion_real!==ee||(0,Dre.isPlainObject)(ee)?ye=>Rv(ee,(0,Ps.default)({},ye,{theme:uv({theme:ye.theme,defaultTheme:n,themeId:t})})):ee,J=(ee,...ye)=>{let Q=U(ee);const be=ye?ye.map(U):[];_&&I&&be.push(Be=>{const le=uv((0,Ps.default)({},Be,{defaultTheme:n,themeId:t}));if(!le.components||!le.components[_]||!le.components[_].styleOverrides)return null;const xe=le.components[_].styleOverrides,Se={};return Object.entries(xe).forEach(([oe,te])=>{Se[oe]=Rv(te,(0,Ps.default)({},Be,{theme:le}))}),I(Be,Se)}),_&&!N&&be.push(Be=>{var le;const xe=uv((0,Ps.default)({},Be,{defaultTheme:n,themeId:t})),Se=xe==null||(le=xe.components)==null||(le=le[_])==null?void 0:le.variants;return Rv({variants:Se},(0,Ps.default)({},Be,{theme:xe}))}),$||be.push(d);const re=be.length-ye.length;if(Array.isArray(ee)&&re>0){const Be=new Array(re).fill("");Q=[...ee,...Be],Q.raw=[...ee.raw,...Be]}const Ie=B(Q,...be);return p.muiName&&(Ie.muiName=p.muiName),Ie};return B.withConfig&&(J.withConfig=B.withConfig),J}}function Gre(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Hre=e=>Gre(e)&&e!=="classes",Zre=Hre,qre=Mre({themeId:B4,defaultTheme:O4,rootShouldForwardProp:Zre}),Kre=qre;function Xre(e){return x4("MuiSvgIcon",e)}dte("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Jre=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Yre=e=>{const{color:t,fontSize:n,classes:i}=e,c={root:["root",t!=="inherit"&&`color${gd(t)}`,`fontSize${gd(n)}`]};return ste(c,Xre,i)},Qre=Kre("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${gd(n.color)}`],t[`fontSize${gd(n.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var n,i,c,d,p,s,_,S,E,A,I,O,N;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=e.transitions)==null||(i=n.create)==null?void 0:i.call(n,"fill",{duration:(c=e.transitions)==null||(c=c.duration)==null?void 0:c.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(p=d.pxToRem)==null?void 0:p.call(d,20))||"1.25rem",medium:((s=e.typography)==null||(_=s.pxToRem)==null?void 0:_.call(s,24))||"1.5rem",large:((S=e.typography)==null||(E=S.pxToRem)==null?void 0:E.call(S,35))||"2.1875rem"}[t.fontSize],color:(A=(I=(e.vars||e).palette)==null||(I=I[t.color])==null?void 0:I.main)!=null?A:{action:(O=(e.vars||e).palette)==null||(O=O.action)==null?void 0:O.active,disabled:(N=(e.vars||e).palette)==null||(N=N.action)==null?void 0:N.disabled,inherit:void 0}[t.color]}}),j4=q.forwardRef(function(t,n){const i=wre({props:t,name:"MuiSvgIcon"}),{children:c,className:d,color:p="inherit",component:s="svg",fontSize:_="medium",htmlColor:S,inheritViewBox:E=!1,titleAccess:A,viewBox:I="0 0 24 24"}=i,O=gn(i,Jre),N=q.isValidElement(c)&&c.type==="svg",$=we({},i,{color:p,component:s,fontSize:_,instanceFontSize:t.fontSize,inheritViewBox:E,viewBox:I,hasSvgAsChild:N}),K={};E||(K.viewBox=I);const W=Yre($);return z.jsxs(Qre,we({as:s,className:pte(W.root,d),focusable:"false",color:S,"aria-hidden":A?void 0:!0,role:A?"img":void 0,ref:n},K,O,N&&c.props,{ownerState:$,children:[N?c.props.children:c,A?z.jsx("title",{children:A}):null]}))});j4.muiName="SvgIcon";const OD=j4;function gs(e,t){function n(i,c){return z.jsx(OD,we({"data-testid":`${t}Icon`,ref:c},i,{children:e}))}return n.muiName=OD.muiName,q.memo(q.forwardRef(n))}const eie=gs(z.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),tie=gs(z.jsx("path",{d:"M12 6c1.11 0 2-.9 2-2 0-.38-.1-.73-.29-1.03L12 0l-1.71 2.97c-.19.3-.29.65-.29 1.03 0 1.1.9 2 2 2m4.6 9.99-1.07-1.07-1.08 1.07c-1.3 1.3-3.58 1.31-4.89 0l-1.07-1.07-1.09 1.07C6.75 16.64 5.88 17 4.96 17c-.73 0-1.4-.23-1.96-.61V21c0 .55.45 1 1 1h16c.55 0 1-.45 1-1v-4.61c-.56.38-1.23.61-1.96.61-.92 0-1.79-.36-2.44-1.01M18 9h-5V7h-2v2H6c-1.66 0-3 1.34-3 3v1.54c0 1.08.88 1.96 1.96 1.96.52 0 1.02-.2 1.38-.57l2.14-2.13 2.13 2.13c.74.74 2.03.74 2.77 0l2.14-2.13 2.13 2.13c.37.37.86.57 1.38.57 1.08 0 1.96-.88 1.96-1.96V12C21 10.34 19.66 9 18 9"}),"Cake"),N4=gs(z.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),$4=gs(z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),V4=gs(z.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),GT=gs(z.jsx("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"}),"DateRange"),U4=gs(z.jsx("path",{d:"M13.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2M9.8 8.9 7 23h2.1l1.8-8 2.1 2v6h2v-7.5l-2.1-2 .6-3C14.8 12 16.8 13 19 13v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1L6 8.3V13h2V9.6z"}),"DirectionsWalk"),nie=gs(z.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),rie=gs(z.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),W4=gs(z.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 14H4V8l8 5 8-5zm-8-7L4 6h16z"}),"MailOutline"),G4=gs(z.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2m6-6v-5c0-3.07-1.63-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.64 5.36 6 7.92 6 11v5l-2 2v1h16v-1zm-2 1H8v-6c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5z"}),"NotificationsOutlined"),iie=gs(z.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew"),oie=gs(z.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var mS="__wrap_b",BD="__wrap_o",sie=typeof window>"u",FD=sie?At.useEffect:At.useLayoutEffect,H4=(e,t,n)=>{n=n||document.querySelector(`[data-br="${e}"]`);let i=n.parentElement,c=E=>n.style.maxWidth=E+"px";n.style.maxWidth="";let d=i.clientWidth,p=i.clientHeight,s=d/2-.25,_=d+.5,S;if(d){for(;s+1<_;)S=Math.round((s+_)/2),c(S),i.clientHeight===p?_=S:s=S;c(_*t+d*(1-t))}n.__wrap_o||typeof ResizeObserver<"u"&&(n.__wrap_o=new ResizeObserver(()=>{self.__wrap_b(0,+n.dataset.brr,n)})).observe(i)},aie=H4.toString(),lie=(e,t="")=>At.createElement("script",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:(e?"":`self.${mS}=${aie};`)+t}}),cie=At.createContext(!1),uie=({as:e="span",ratio:t=1,children:n,...i})=>{let c=At.useId(),d=At.useRef(),p=At.useContext(cie);return FD(()=>{d.current&&(self[mS]=H4)(0,t,d.current)},[n,t]),FD(()=>()=>{if(!d.current)return;let s=d.current[BD];!s||(s.disconnect(),delete d.current[BD])},[]),At.createElement(At.Fragment,null,At.createElement(e,{...i,"data-br":c,"data-brr":t,ref:d,style:{display:"inline-block",verticalAlign:"top",textDecoration:"inherit"},suppressHydrationWarning:!0},n),lie(p,`self.${mS}("${c}",${t})`))},yd=uie;const die=()=>{const{setOpen:e}=Us("service-signup");return z.jsxs("div",{className:"mb-6 flex flex-col items-center justify-center px-3 lg:px-0",children:[z.jsx("div",{className:"mb-4",children:z.jsx($4,{color:"info",fontSize:"xl7"})}),z.jsxs("div",{className:"mb-4 flex flex-col items-center p-2",children:[z.jsx("h3",{className:"mb-2 text-2xl font-black",children:"Erfolgreich eingereicht."}),z.jsx(yd,{className:"text-center text-base font-semibold text-gray-500",children:"Wir werden Sie schnell per Email benachrichtigen, sobald diese Kita wieder Kapazitäten hat."})]}),z.jsx(ro,{fullWidth:!0,size:"lg",variant:"soft",color:"neutral",onClick:()=>e(!1),children:"Schließen"})]})},Rg=({label:e,options:t,placeholder:n,inputProps:i,formControlProps:c,...d})=>{const{error:p,helperText:s,..._}=i||{};return z.jsxs(ZE,{error:p,...c,children:[z.jsx(qE,{children:e}),z.jsx(rH,{options:t,placeholder:n,slotProps:{input:{..._}},...d}),s&&z.jsx(rR,{color:"primary",children:s})]})};var Z4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=q;function n(E,A){return s(E)||p(E,A)||c(E,A)||i()}function i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function c(E,A){if(E){if(typeof E=="string")return d(E,A);var I=Object.prototype.toString.call(E).slice(8,-1);if(I==="Object"&&E.constructor&&(I=E.constructor.name),I==="Map"||I==="Set")return Array.from(E);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return d(E,A)}}function d(E,A){(A==null||A>E.length)&&(A=E.length);for(var I=0,O=new Array(A);I<A;I++)O[I]=E[I];return O}function p(E,A){var I=E==null?null:typeof Symbol<"u"&&E[Symbol.iterator]||E["@@iterator"];if(I!=null){var O=[],N=!0,$=!1,K,W;try{for(I=I.call(E);!(N=(K=I.next()).done)&&(O.push(K.value),!(A&&O.length===A));N=!0);}catch(B){$=!0,W=B}finally{try{!N&&I.return!=null&&I.return()}finally{if($)throw W}}return O}}function s(E){if(Array.isArray(E))return E}var _=function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=A.enableHighAccuracy,O=A.maximumAge,N=A.timeout,$=arguments.length>1?arguments[1]:void 0,K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,W=(0,t.useState)({accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,latitude:null,longitude:null,speed:null,timestamp:null,error:null}),B=n(W,2),U=B[0],J=B[1],ee=(0,t.useCallback)(function(Q){var be=Q.coords,re=Q.timestamp,Ie=be.accuracy,Be=be.altitude,le=be.altitudeAccuracy,xe=be.heading,Se=be.latitude,oe=be.longitude,te=be.speed;J({accuracy:Ie,altitude:Be,altitudeAccuracy:le,heading:xe,latitude:Se,longitude:oe,speed:te,timestamp:re,error:null}),typeof $=="function"&&$({accuracy:Ie,altitude:Be,altitudeAccuracy:le,heading:xe,latitude:Se,longitude:oe,speed:te,timestamp:re,error:null})},[$]),ye=(0,t.useCallback)(function(Q){J({accuracy:null,altitude:null,altitudeAccuracy:null,heading:null,latitude:null,longitude:null,speed:null,timestamp:null,error:Q})},[]);return(0,t.useEffect)(function(){var Q;return K&&navigator.geolocation&&(navigator.geolocation.getCurrentPosition(ee,ye),Q=navigator.geolocation.watchPosition(ee,ye,{enableHighAccuracy:I,maximumAge:O,timeout:N})),function(){Q&&navigator.geolocation.clearWatch(Q)}},[K,$,I,O,ye,N,ee]),U},S=_;e.default=S})(Z4);const hie=Ya(Z4),eg={lat:52.520008,lng:13.404954},fie=200,pie=1,HT=({label:e="Wo wohnen Sie?",className:t,onAddressSelected:n,onCoordinatesSuccessfullyRetrieved:i,helperText:c,error:d,hideCurrentLocationOption:p,...s})=>{const[_,S]=At.useState(null),[E,A]=At.useState({latitude:null,longitude:null}),[I,O]=At.useState(""),[N,$]=At.useState([]),[K,W]=At.useState(""),[B,U]=At.useState({lat:null,lng:null}),J=E&&E.latitude&&E.longitude&&B.lat===E.latitude&&B.lng===E.longitude,[ee,ye]=At.useState(!1),[Q,be]=At.useState(!1),[re,Ie]=At.useState(!1),[Be,le]=At.useState(null),xe=async Fe=>{var Ge;ye(!1);try{const Ct=await(await fetch(`https://autocomplete.search.hereapi.com/v1/autocomplete?q=${Fe}&in=circle%3A${eg.lat}%2C${eg.lng}%3Br%3D50000&lang=de&resultType=street&limit=5&apikey=W4Sm0s8ksnXVnfgqHit48vXtf4MvD90-TY_vH0W1Sno`,{method:"GET"})).json();if(!Ct.items){ye(!0);return}const It=((Ge=Ct.items)==null?void 0:Ge.map(Pt=>{var Kt;return((Kt=Pt.address)==null?void 0:Kt.label)||""}))??[];$(It)}catch(rt){ye(!0),console.error("Error fetching suggestions:",rt)}},Se=async(Fe,Ge)=>{var rt,Ct;ye(!1);try{const Pt=await(await fetch(`https://revgeocode.search.hereapi.com/v1/revgeocode?at=${Fe},${Ge}&lang=de&apikey=W4Sm0s8ksnXVnfgqHit48vXtf4MvD90-TY_vH0W1Sno`,{method:"GET"})).json();if(!Pt.items)throw Error("No property items found on response");return((Ct=(rt=Pt.items)==null?void 0:rt[0])==null?void 0:Ct.title)??""}catch(It){console.error("Error fetching address:",It),ye(!0)}},oe=async Fe=>{var Ge,rt;ye(!1);try{const It=await(await fetch(`https://geocode.search.hereapi.com/v1/geocode?q=${Fe}&apikey=W4Sm0s8ksnXVnfgqHit48vXtf4MvD90-TY_vH0W1Sno`,{method:"GET"})).json();if(!It.items){ye(!0);return}const Pt=((rt=(Ge=It.items)==null?void 0:Ge[0])==null?void 0:rt.position)??{};U(Pt)}catch(Ct){ye(!0),console.error("Error fetching coordinates:",Ct)}},te=Fe=>{if(!Fe)return;const Ge=Fe==null?void 0:Fe.target.value;O(Ge),Be&&clearTimeout(Be),le(setTimeout(async()=>{(Ge==null?void 0:Ge.length)>=pie?(Ie(!0),await xe(Ge),Ie(!1)):$([])},fie))},Ce=Fe=>{O(Fe||""),W(Fe),n==null||n(Fe)};return hie({enableHighAccuracy:!0,timeout:5e3,maximumAge:0},async Fe=>{if(!_||J)return;const{latitude:Ge,longitude:rt,accuracy:Ct}=Fe;be(!0),U({lat:Ge,lng:rt}),A({latitude:Ge,longitude:rt});const It=await Se(Ge,rt);It.length>0?(O(It),W(It)):O("Momentane Adresse"),be(!1),S(!1)},!!_),At.useEffect(()=>{K&&oe(K)},[K]),At.useEffect(()=>{!B||!B.lat||!B.lng||i==null||i(B)},[B]),z.jsxs("div",{className:yi("flex flex-col",t),children:[z.jsx(Rg,{label:e,placeholder:"Ihr Wohnort",options:N,onChange:(Fe,Ge)=>Ce(Ge),onInputChange:te,inputValue:I,loading:re,loadingText:z.jsxs("span",{className:"flex flex-row items-center gap-3",children:[z.jsx(Cg,{color:"neutral",size:"sm"}),z.jsx("span",{className:"ml-2",children:"Lade Adressen..."})]}),value:K||void 0,noOptionsText:"Keine Adressen gefunden",startDecorator:z.jsx(nie,{}),inputProps:{error:ee||d,helperText:ee?"Fehler beim Abrufen der Adresse":c},...s}),!p&&z.jsx(kx,{component:"button",mt:1,color:"info",fontWeight:"bold",fontSize:"sm",underline:"always",disabled:J&&_===!1,startDecorator:Q?z.jsx(Cg,{color:"info",size:"sm"}):z.jsx(rie,{}),onClick:()=>S(!0),children:"Momentane Position nutzen"})]})},q4=({label:e,placeholder:t,onChange:n,inputProps:i,...c})=>{const{error:d,helperText:p}=i||{};return z.jsxs(ZE,{error:d,...c,children:[z.jsx(qE,{children:e}),z.jsx(AG,{placeholder:t,...i}),p&&z.jsx(rR,{color:"primary",children:p})]})},mie=Math.asin,jD=Math.cos,gie=Math.sin,yie=Math.sqrt,vie=Math.PI,_ie=6378137;function xie(e){return e*e}function dv(e){return e*vie/180}function ND(e){return xie(gie(e/2))}function bie(e,t){const n=dv(Array.isArray(e)?e[1]:e.latitude||e.lat),i=dv(Array.isArray(t)?t[1]:t.latitude||t.lat),c=dv(Array.isArray(e)?e[0]:e.longitude||e.lng||e.lon),d=dv(Array.isArray(t)?t[0]:t.longitude||t.lng||t.lon),p=ND(i-n)+jD(n)*jD(i)*ND(d-c);return 2*_ie*mie(yie(p))}var wie=bie;const Sie=Ya(wie);var K4={},X4={},ZT={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});function t(n){if(n=`${n}`,n==="0")return"0";if(/^[+-]?(\d+|\d*\.\d+)(e[+-]?\d+)?(%|\w+)?$/.test(n))return n.replace(/^[+-]?/,c=>c==="-"?"":"-");let i=["var","calc","min","max","clamp"];for(const c of i)if(n.includes(`${c}(`))return`calc(${n} * -1)`}})(ZT);var J4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});const t=["preflight","container","accessibility","pointerEvents","visibility","position","inset","isolation","zIndex","order","gridColumn","gridColumnStart","gridColumnEnd","gridRow","gridRowStart","gridRowEnd","float","clear","margin","boxSizing","lineClamp","display","aspectRatio","size","height","maxHeight","minHeight","width","minWidth","maxWidth","flex","flexShrink","flexGrow","flexBasis","tableLayout","captionSide","borderCollapse","borderSpacing","transformOrigin","translate","rotate","skew","scale","transform","animation","cursor","touchAction","userSelect","resize","scrollSnapType","scrollSnapAlign","scrollSnapStop","scrollMargin","scrollPadding","listStylePosition","listStyleType","listStyleImage","appearance","columns","breakBefore","breakInside","breakAfter","gridAutoColumns","gridAutoFlow","gridAutoRows","gridTemplateColumns","gridTemplateRows","flexDirection","flexWrap","placeContent","placeItems","alignContent","alignItems","justifyContent","justifyItems","gap","space","divideWidth","divideStyle","divideColor","divideOpacity","placeSelf","alignSelf","justifySelf","overflow","overscrollBehavior","scrollBehavior","textOverflow","hyphens","whitespace","textWrap","wordBreak","borderRadius","borderWidth","borderStyle","borderColor","borderOpacity","backgroundColor","backgroundOpacity","backgroundImage","gradientColorStops","boxDecorationBreak","backgroundSize","backgroundAttachment","backgroundClip","backgroundPosition","backgroundRepeat","backgroundOrigin","fill","stroke","strokeWidth","objectFit","objectPosition","padding","textAlign","textIndent","verticalAlign","fontFamily","fontSize","fontWeight","textTransform","fontStyle","fontVariantNumeric","lineHeight","letterSpacing","textColor","textOpacity","textDecoration","textDecorationColor","textDecorationStyle","textDecorationThickness","textUnderlineOffset","fontSmoothing","placeholderColor","placeholderOpacity","caretColor","accentColor","opacity","backgroundBlendMode","mixBlendMode","boxShadow","boxShadowColor","outlineStyle","outlineWidth","outlineOffset","outlineColor","ringWidth","ringColor","ringOpacity","ringOffsetWidth","ringOffsetColor","blur","brightness","contrast","dropShadow","grayscale","hueRotate","invert","saturate","sepia","filter","backdropBlur","backdropBrightness","backdropContrast","backdropGrayscale","backdropHueRotate","backdropInvert","backdropOpacity","backdropSaturate","backdropSepia","backdropFilter","transitionProperty","transitionDelay","transitionDuration","transitionTimingFunction","willChange","contain","content","forcedColorAdjust"]})(J4);var Y4={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});function t(n,i){return n===void 0?i:Array.isArray(n)?n:[...new Set(i.filter(d=>n!==!1&&n[d]!==!1).concat(Object.keys(n).filter(d=>n[d]!==!1)))]}})(Y4);var Q4={},Qx={},qT={exports:{}},Rr=String,eB=function(){return{isColorSupported:!1,reset:Rr,bold:Rr,dim:Rr,italic:Rr,underline:Rr,inverse:Rr,hidden:Rr,strikethrough:Rr,black:Rr,red:Rr,green:Rr,yellow:Rr,blue:Rr,magenta:Rr,cyan:Rr,white:Rr,gray:Rr,bgBlack:Rr,bgRed:Rr,bgGreen:Rr,bgYellow:Rr,bgBlue:Rr,bgMagenta:Rr,bgCyan:Rr,bgWhite:Rr}};qT.exports=eB();qT.exports.createColors=eB;var tB=qT.exports;(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,S){for(var E in S)Object.defineProperty(_,E,{enumerable:!0,get:S[E]})}t(e,{dim:function(){return p},default:function(){return s}});const n=i(tB);function i(_){return _&&_.__esModule?_:{default:_}}let c=new Set;function d(_,S,E){typeof process<"u"&&{}.JEST_WORKER_ID||E&&c.has(E)||(E&&c.add(E),console.warn(""),S.forEach(A=>console.warn(_,"-",A)))}function p(_){return n.default.dim(_)}const s={info(_,S){d(n.default.bold(n.default.cyan("info")),...Array.isArray(_)?[_]:[S,_])},warn(_,S){d(n.default.bold(n.default.yellow("warn")),...Array.isArray(_)?[_]:[S,_])},risk(_,S){d(n.default.bold(n.default.magenta("risk")),...Array.isArray(_)?[_]:[S,_])}}})(Qx);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return c}});const t=n(Qx);function n(d){return d&&d.__esModule?d:{default:d}}function i({version:d,from:p,to:s}){t.default.warn(`${p}-color-renamed`,[`As of Tailwind CSS ${d}, \`${p}\` has been renamed to \`${s}\`.`,"Update your configuration file to silence this warning."])}const c={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return i({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return i({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return i({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return i({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return i({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}})(Q4);var nB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"defaults",{enumerable:!0,get:function(){return t}});function t(n,...i){for(let p of i){for(let s in p){var c;!(n==null||(c=n.hasOwnProperty)===null||c===void 0)&&c.call(n,s)||(n[s]=p[s])}for(let s of Object.getOwnPropertySymbols(p)){var d;!(n==null||(d=n.hasOwnProperty)===null||d===void 0)&&d.call(n,s)||(n[s]=p[s])}}return n}})(nB);var rB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"toPath",{enumerable:!0,get:function(){return t}});function t(n){if(Array.isArray(n))return n;let i=n.split("[").length-1,c=n.split("]").length-1;if(i!==c)throw new Error(`Path is invalid. Has unbalanced brackets: ${n}`);return n.split(/\.(?![^\[]*\])|[\[\]]/g).filter(Boolean)}})(rB);var iB={},e1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(A,I){for(var O in I)Object.defineProperty(A,O,{enumerable:!0,get:I[O]})}t(e,{flagEnabled:function(){return s},issueFlagNotices:function(){return S},default:function(){return E}});const n=c(tB),i=c(Qx);function c(A){return A&&A.__esModule?A:{default:A}}let d={optimizeUniversalDefaults:!1,generalizedModifiers:!0,disableColorOpacityUtilitiesByDefault:!1,relativeContentPathsByDefault:!1},p={future:["hoverOnlyWhenSupported","respectDefaultRingColorOpacity","disableColorOpacityUtilitiesByDefault","relativeContentPathsByDefault"],experimental:["optimizeUniversalDefaults","generalizedModifiers"]};function s(A,I){if(p.future.includes(I)){var O,N,$;return A.future==="all"||(($=(N=A==null||(O=A.future)===null||O===void 0?void 0:O[I])!==null&&N!==void 0?N:d[I])!==null&&$!==void 0?$:!1)}if(p.experimental.includes(I)){var K,W,B;return A.experimental==="all"||((B=(W=A==null||(K=A.experimental)===null||K===void 0?void 0:K[I])!==null&&W!==void 0?W:d[I])!==null&&B!==void 0?B:!1)}return!1}function _(A){if(A.experimental==="all")return p.experimental;var I;return Object.keys((I=A==null?void 0:A.experimental)!==null&&I!==void 0?I:{}).filter(O=>p.experimental.includes(O)&&A.experimental[O])}function S(A){if({}.JEST_WORKER_ID===void 0&&_(A).length>0){let I=_(A).map(O=>n.default.yellow(O)).join(", ");i.default.warn("experimental-flags-enabled",[`You have enabled experimental features: ${I}`,"Experimental features in Tailwind CSS are not covered by semver, may introduce breaking changes, and can change at any time."])}}const E=p})(e1);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"normalizeConfig",{enumerable:!0,get:function(){return d}});const t=e1,n=c(Qx);function i(p){if(typeof WeakMap!="function")return null;var s=new WeakMap,_=new WeakMap;return(i=function(S){return S?_:s})(p)}function c(p,s){if(!s&&p&&p.__esModule)return p;if(p===null||typeof p!="object"&&typeof p!="function")return{default:p};var _=i(s);if(_&&_.has(p))return _.get(p);var S={},E=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var A in p)if(A!=="default"&&Object.prototype.hasOwnProperty.call(p,A)){var I=E?Object.getOwnPropertyDescriptor(p,A):null;I&&(I.get||I.set)?Object.defineProperty(S,A,I):S[A]=p[A]}return S.default=p,_&&_.set(p,S),S}function d(p){if((()=>{if(p.purge||!p.content||!Array.isArray(p.content)&&!(typeof p.content=="object"&&p.content!==null))return!1;if(Array.isArray(p.content))return p.content.every(S=>typeof S=="string"?!0:!(typeof(S==null?void 0:S.raw)!="string"||S!=null&&S.extension&&typeof(S==null?void 0:S.extension)!="string"));if(typeof p.content=="object"&&p.content!==null){if(Object.keys(p.content).some(S=>!["files","relative","extract","transform"].includes(S)))return!1;if(Array.isArray(p.content.files)){if(!p.content.files.every(S=>typeof S=="string"?!0:!(typeof(S==null?void 0:S.raw)!="string"||S!=null&&S.extension&&typeof(S==null?void 0:S.extension)!="string")))return!1;if(typeof p.content.extract=="object"){for(let S of Object.values(p.content.extract))if(typeof S!="function")return!1}else if(!(p.content.extract===void 0||typeof p.content.extract=="function"))return!1;if(typeof p.content.transform=="object"){for(let S of Object.values(p.content.transform))if(typeof S!="function")return!1}else if(!(p.content.transform===void 0||typeof p.content.transform=="function"))return!1;if(typeof p.content.relative!="boolean"&&typeof p.content.relative<"u")return!1}return!0}return!1})()||n.default.warn("purge-deprecation",["The `purge`/`content` options have changed in Tailwind CSS v3.0.","Update your configuration file to eliminate this warning.","https://tailwindcss.com/docs/upgrade-guide#configure-content-sources"]),p.safelist=(()=>{var S;let{content:E,purge:A,safelist:I}=p;return Array.isArray(I)?I:Array.isArray(E==null?void 0:E.safelist)?E.safelist:Array.isArray(A==null?void 0:A.safelist)?A.safelist:Array.isArray(A==null||(S=A.options)===null||S===void 0?void 0:S.safelist)?A.options.safelist:[]})(),p.blocklist=(()=>{let{blocklist:S}=p;if(Array.isArray(S)){if(S.every(E=>typeof E=="string"))return S;n.default.warn("blocklist-invalid",["The `blocklist` option must be an array of strings.","https://tailwindcss.com/docs/content-configuration#discarding-classes"])}return[]})(),typeof p.prefix=="function")n.default.warn("prefix-function",["As of Tailwind CSS v3.0, `prefix` cannot be a function.","Update `prefix` in your configuration to be a string to eliminate this warning.","https://tailwindcss.com/docs/upgrade-guide#prefix-cannot-be-a-function"]),p.prefix="";else{var _;p.prefix=(_=p.prefix)!==null&&_!==void 0?_:""}p.content={relative:(()=>{let{content:S}=p;return S!=null&&S.relative?S.relative:(0,t.flagEnabled)(p,"relativeContentPathsByDefault")})(),files:(()=>{let{content:S,purge:E}=p;return Array.isArray(E)?E:Array.isArray(E==null?void 0:E.content)?E.content:Array.isArray(S)?S:Array.isArray(S==null?void 0:S.content)?S.content:Array.isArray(S==null?void 0:S.files)?S.files:[]})(),extract:(()=>{let S=(()=>{var I,O,N,$,K,W,B,U,J,ee;return!((I=p.purge)===null||I===void 0)&&I.extract?p.purge.extract:!((O=p.content)===null||O===void 0)&&O.extract?p.content.extract:!((N=p.purge)===null||N===void 0||($=N.extract)===null||$===void 0)&&$.DEFAULT?p.purge.extract.DEFAULT:!((K=p.content)===null||K===void 0||(W=K.extract)===null||W===void 0)&&W.DEFAULT?p.content.extract.DEFAULT:!((B=p.purge)===null||B===void 0||(U=B.options)===null||U===void 0)&&U.extractors?p.purge.options.extractors:!((J=p.content)===null||J===void 0||(ee=J.options)===null||ee===void 0)&&ee.extractors?p.content.options.extractors:{}})(),E={},A=(()=>{var I,O,N,$;if(!((I=p.purge)===null||I===void 0||(O=I.options)===null||O===void 0)&&O.defaultExtractor)return p.purge.options.defaultExtractor;if(!((N=p.content)===null||N===void 0||($=N.options)===null||$===void 0)&&$.defaultExtractor)return p.content.options.defaultExtractor})();if(A!==void 0&&(E.DEFAULT=A),typeof S=="function")E.DEFAULT=S;else if(Array.isArray(S))for(let{extensions:I,extractor:O}of S??[])for(let N of I)E[N]=O;else typeof S=="object"&&S!==null&&Object.assign(E,S);return E})(),transform:(()=>{let S=(()=>{var A,I,O,N,$,K;return!((A=p.purge)===null||A===void 0)&&A.transform?p.purge.transform:!((I=p.content)===null||I===void 0)&&I.transform?p.content.transform:!((O=p.purge)===null||O===void 0||(N=O.transform)===null||N===void 0)&&N.DEFAULT?p.purge.transform.DEFAULT:!(($=p.content)===null||$===void 0||(K=$.transform)===null||K===void 0)&&K.DEFAULT?p.content.transform.DEFAULT:{}})(),E={};return typeof S=="function"&&(E.DEFAULT=S),typeof S=="object"&&S!==null&&Object.assign(E,S),E})()};for(let S of p.content.files)if(typeof S=="string"&&/{([^,]*?)}/g.test(S)){n.default.warn("invalid-glob-braces",[`The glob pattern ${(0,n.dim)(S)} in your Tailwind CSS configuration is invalid.`,`Update it to ${(0,n.dim)(S.replace(/{([^,]*?)}/g,"$1"))} to silence this warning.`]);break}return p}})(iB);var oB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});function t(n){if(Object.prototype.toString.call(n)!=="[object Object]")return!1;const i=Object.getPrototypeOf(n);return i===null||Object.getPrototypeOf(i)===null}})(oB);var sB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"cloneDeep",{enumerable:!0,get:function(){return t}});function t(n){return Array.isArray(n)?n.map(i=>t(i)):typeof n=="object"&&n!==null?Object.fromEntries(Object.entries(n).map(([i,c])=>[i,t(c)])):n}})(sB);var aB={},lB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});function t(n){return n.replace(/\\,/g,"\\2c ")}})(lB);var KT={},XT={},cB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});const t={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}})(cB);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(N,$){for(var K in $)Object.defineProperty(N,K,{enumerable:!0,get:$[K]})}t(e,{parseColor:function(){return I},formatColor:function(){return O}});const n=i(cB);function i(N){return N&&N.__esModule?N:{default:N}}let c=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,d=/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,p=/(?:\d+|\d*\.\d+)%?/,s=/(?:\s*,\s*|\s+)/,_=/\s*[,/]\s*/,S=/var\(--(?:[^ )]*?)(?:,(?:[^ )]*?|var\(--[^ )]*?\)))?\)/,E=new RegExp(`^(rgba?)\\(\\s*(${p.source}|${S.source})(?:${s.source}(${p.source}|${S.source}))?(?:${s.source}(${p.source}|${S.source}))?(?:${_.source}(${p.source}|${S.source}))?\\s*\\)$`),A=new RegExp(`^(hsla?)\\(\\s*((?:${p.source})(?:deg|rad|grad|turn)?|${S.source})(?:${s.source}(${p.source}|${S.source}))?(?:${s.source}(${p.source}|${S.source}))?(?:${_.source}(${p.source}|${S.source}))?\\s*\\)$`);function I(N,{loose:$=!1}={}){var K,W;if(typeof N!="string")return null;if(N=N.trim(),N==="transparent")return{mode:"rgb",color:["0","0","0"],alpha:"0"};if(N in n.default)return{mode:"rgb",color:n.default[N].map(ye=>ye.toString())};let B=N.replace(d,(ye,Q,be,re,Ie)=>["#",Q,Q,be,be,re,re,Ie?Ie+Ie:""].join("")).match(c);if(B!==null)return{mode:"rgb",color:[parseInt(B[1],16),parseInt(B[2],16),parseInt(B[3],16)].map(ye=>ye.toString()),alpha:B[4]?(parseInt(B[4],16)/255).toString():void 0};var U;let J=(U=N.match(E))!==null&&U!==void 0?U:N.match(A);if(J===null)return null;let ee=[J[2],J[3],J[4]].filter(Boolean).map(ye=>ye.toString());return ee.length===2&&ee[0].startsWith("var(")?{mode:J[1],color:[ee[0]],alpha:ee[1]}:!$&&ee.length!==3||ee.length<3&&!ee.some(ye=>/^var\(.*?\)$/.test(ye))?null:{mode:J[1],color:ee,alpha:(K=J[5])===null||K===void 0||(W=K.toString)===null||W===void 0?void 0:W.call(K)}}function O({mode:N,color:$,alpha:K}){let W=K!==void 0;return N==="rgba"||N==="hsla"?`${N}(${$.join(", ")}${W?`, ${K}`:""})`:`${N}(${$.join(" ")}${W?` / ${K}`:""})`}})(XT);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(d,p){for(var s in p)Object.defineProperty(d,s,{enumerable:!0,get:p[s]})}t(e,{withAlphaValue:function(){return i},default:function(){return c}});const n=XT;function i(d,p,s){if(typeof d=="function")return d({opacityValue:p});let _=(0,n.parseColor)(d,{loose:!0});return _===null?s:(0,n.formatColor)({..._,alpha:p})}function c({color:d,property:p,variable:s}){let _=[].concat(p);if(typeof d=="function")return{[s]:"1",...Object.fromEntries(_.map(E=>[E,d({opacityVariable:s,opacityValue:`var(${s})`})]))};const S=(0,n.parseColor)(d);return S===null?Object.fromEntries(_.map(E=>[E,d])):S.alpha!==void 0?Object.fromEntries(_.map(E=>[E,d])):{[s]:"1",...Object.fromEntries(_.map(E=>[E,(0,n.formatColor)({...S,alpha:`var(${s})`})]))}}})(KT);var JT={},uB={},t1={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"splitAtTopLevelOnly",{enumerable:!0,get:function(){return t}});function t(n,i){let c=[],d=[],p=0,s=!1;for(let _=0;_<n.length;_++){let S=n[_];c.length===0&&S===i[0]&&!s&&(i.length===1||n.slice(_,_+i.length)===i)&&(d.push(n.slice(p,_)),p=_+i.length),s?s=!1:S==="\\"&&(s=!0),S==="("||S==="["||S==="{"?c.push(S):(S===")"&&c[c.length-1]==="("||S==="]"&&c[c.length-1]==="["||S==="}"&&c[c.length-1]==="{")&&c.pop()}return d.push(n.slice(p)),d}})(t1);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(_,S){for(var E in S)Object.defineProperty(_,E,{enumerable:!0,get:S[E]})}t(e,{parseBoxShadowValue:function(){return p},formatBoxShadowValue:function(){return s}});const n=t1;let i=new Set(["inset","inherit","initial","revert","unset"]),c=/\ +(?![^(]*\))/g,d=/^-?(\d+|\.\d+)(.*?)$/g;function p(_){return(0,n.splitAtTopLevelOnly)(_,",").map(E=>{let A=E.trim(),I={raw:A},O=A.split(c),N=new Set;for(let $ of O)d.lastIndex=0,!N.has("KEYWORD")&&i.has($)?(I.keyword=$,N.add("KEYWORD")):d.test($)?N.has("X")?N.has("Y")?N.has("BLUR")?N.has("SPREAD")||(I.spread=$,N.add("SPREAD")):(I.blur=$,N.add("BLUR")):(I.y=$,N.add("Y")):(I.x=$,N.add("X")):I.color?(I.unknown||(I.unknown=[]),I.unknown.push($)):I.color=$;return I.valid=I.x!==void 0&&I.y!==void 0,I})}function s(_){return _.map(S=>S.valid?[S.keyword,S.x,S.y,S.blur,S.spread,S.color].filter(Boolean).join(" "):S.raw).join(", ")}})(uB);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(te,Ce){for(var ve in Ce)Object.defineProperty(te,ve,{enumerable:!0,get:Ce[ve]})}t(e,{normalize:function(){return _},url:function(){return E},number:function(){return A},percentage:function(){return I},length:function(){return $},lineWidth:function(){return W},shadow:function(){return B},color:function(){return U},image:function(){return J},gradient:function(){return ye},position:function(){return be},familyName:function(){return re},genericName:function(){return Be},absoluteSize:function(){return xe},relativeSize:function(){return oe}});const n=XT,i=uB,c=t1;let d=["min","max","clamp","calc"];function p(te){return d.some(Ce=>new RegExp(`^${Ce}\\(.*\\)`).test(te))}const s=new Set(["scroll-timeline-name","timeline-scope","view-timeline-name","font-palette","scroll-timeline","animation-timeline","view-timeline"]);function _(te,Ce=null,ve=!0){let Fe=Ce&&s.has(Ce.property);return te.startsWith("--")&&!Fe?`var(${te})`:te.includes("url(")?te.split(/(url\(.*?\))/g).filter(Boolean).map(Ge=>/^url\(.*?\)$/.test(Ge)?Ge:_(Ge,Ce,!1)).join(""):(te=te.replace(/([^\\])_+/g,(Ge,rt)=>rt+" ".repeat(Ge.length-1)).replace(/^_/g," ").replace(/\\_/g,"_"),ve&&(te=te.trim()),te=S(te),te)}function S(te){let Ce=["theme"],ve=["min-content","max-content","fit-content","safe-area-inset-top","safe-area-inset-right","safe-area-inset-bottom","safe-area-inset-left","titlebar-area-x","titlebar-area-y","titlebar-area-width","titlebar-area-height","keyboard-inset-top","keyboard-inset-right","keyboard-inset-bottom","keyboard-inset-left","keyboard-inset-width","keyboard-inset-height","radial-gradient","linear-gradient","conic-gradient","repeating-radial-gradient","repeating-linear-gradient","repeating-conic-gradient"];return te.replace(/(calc|min|max|clamp)\(.+\)/g,Fe=>{let Ge="";function rt(){let Pt=Ge.trimEnd();return Pt[Pt.length-1]}for(let Pt=0;Pt<Fe.length;Pt++){let Kt=function(ct){return ct.split("").every((Vt,ln)=>Fe[Pt+ln]===Vt)},nn=function(ct){let Vt=1/0;for(let zt of ct){let pn=Fe.indexOf(zt,Pt);pn!==-1&&pn<Vt&&(Vt=pn)}let ln=Fe.slice(Pt,Vt);return Pt+=ln.length-1,ln};var Ct=Kt,It=nn;let an=Fe[Pt];if(Kt("var"))Ge+=nn([")",","]);else if(ve.some(ct=>Kt(ct))){let ct=ve.find(Vt=>Kt(Vt));Ge+=ct,Pt+=ct.length-1}else Ce.some(ct=>Kt(ct))?Ge+=nn([")"]):Kt("[")?Ge+=nn(["]"]):["+","-","*","/"].includes(an)&&!["(","+","-","*","/",","].includes(rt())?Ge+=` ${an} `:Ge+=an}return Ge.replace(/\s+/g," ")})}function E(te){return te.startsWith("url(")}function A(te){return!isNaN(Number(te))||p(te)}function I(te){return te.endsWith("%")&&A(te.slice(0,-1))||p(te)}let N=`(?:${["cm","mm","Q","in","pc","pt","px","em","ex","ch","rem","lh","rlh","vw","vh","vmin","vmax","vb","vi","svw","svh","lvw","lvh","dvw","dvh","cqw","cqh","cqi","cqb","cqmin","cqmax"].join("|")})`;function $(te){return te==="0"||new RegExp(`^[+-]?[0-9]*.?[0-9]+(?:[eE][+-]?[0-9]+)?${N}$`).test(te)||p(te)}let K=new Set(["thin","medium","thick"]);function W(te){return K.has(te)}function B(te){let Ce=(0,i.parseBoxShadowValue)(_(te));for(let ve of Ce)if(!ve.valid)return!1;return!0}function U(te){let Ce=0;return(0,c.splitAtTopLevelOnly)(te,"_").every(Fe=>(Fe=_(Fe),Fe.startsWith("var(")?!0:(0,n.parseColor)(Fe,{loose:!0})!==null?(Ce++,!0):!1))?Ce>0:!1}function J(te){let Ce=0;return(0,c.splitAtTopLevelOnly)(te,",").every(Fe=>(Fe=_(Fe),Fe.startsWith("var(")?!0:E(Fe)||ye(Fe)||["element(","image(","cross-fade(","image-set("].some(Ge=>Fe.startsWith(Ge))?(Ce++,!0):!1))?Ce>0:!1}let ee=new Set(["conic-gradient","linear-gradient","radial-gradient","repeating-conic-gradient","repeating-linear-gradient","repeating-radial-gradient"]);function ye(te){te=_(te);for(let Ce of ee)if(te.startsWith(`${Ce}(`))return!0;return!1}let Q=new Set(["center","top","right","bottom","left"]);function be(te){let Ce=0;return(0,c.splitAtTopLevelOnly)(te,"_").every(Fe=>(Fe=_(Fe),Fe.startsWith("var(")?!0:Q.has(Fe)||$(Fe)||I(Fe)?(Ce++,!0):!1))?Ce>0:!1}function re(te){let Ce=0;return(0,c.splitAtTopLevelOnly)(te,",").every(Fe=>(Fe=_(Fe),Fe.startsWith("var(")?!0:Fe.includes(" ")&&!/(['"])([^"']+)\1/g.test(Fe)||/^\d/g.test(Fe)?!1:(Ce++,!0)))?Ce>0:!1}let Ie=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]);function Be(te){return Ie.has(te)}let le=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large","xxx-large"]);function xe(te){return le.has(te)}let Se=new Set(["larger","smaller"]);function oe(te){return Se.has(te)}})(JT);var dB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"backgroundSize",{enumerable:!0,get:function(){return i}});const t=JT,n=t1;function i(c){let d=["cover","contain"];return(0,n.splitAtTopLevelOnly)(c,",").every(p=>{let s=(0,n.splitAtTopLevelOnly)(p,"_").filter(Boolean);return s.length===1&&d.includes(s[0])?!0:s.length!==1&&s.length!==2?!1:s.every(_=>(0,t.length)(_)||(0,t.percentage)(_)||_==="auto")})}})(dB);(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(re,Ie){for(var Be in Ie)Object.defineProperty(re,Be,{enumerable:!0,get:Ie[Be]})}t(e,{updateAllClasses:function(){return S},asValue:function(){return I},parseColorFormat:function(){return $},asColor:function(){return W},asLookupValue:function(){return B},typeMap:function(){return J},coerceValue:function(){return Q},getMatchingTypes:function(){return be}});const n=_(lB),i=KT,c=JT,d=_(ZT),p=dB,s=e1;function _(re){return re&&re.__esModule?re:{default:re}}function S(re,Ie){re.walkClasses(Be=>{Be.value=Ie(Be.value),Be.raws&&Be.raws.value&&(Be.raws.value=(0,n.default)(Be.raws.value))})}function E(re,Ie){if(!O(re))return;let Be=re.slice(1,-1);if(Ie(Be))return(0,c.normalize)(Be)}function A(re,Ie={},Be){let le=Ie[re];if(le!==void 0)return(0,d.default)(le);if(O(re)){let xe=E(re,Be);return xe===void 0?void 0:(0,d.default)(xe)}}function I(re,Ie={},{validate:Be=()=>!0}={}){var le;let xe=(le=Ie.values)===null||le===void 0?void 0:le[re];return xe!==void 0?xe:Ie.supportsNegativeValues&&re.startsWith("-")?A(re.slice(1),Ie.values,Be):E(re,Be)}function O(re){return re.startsWith("[")&&re.endsWith("]")}function N(re){let Ie=re.lastIndexOf("/"),Be=re.lastIndexOf("[",Ie),le=re.indexOf("]",Ie);return re[Ie-1]==="]"||re[Ie+1]==="["||Be!==-1&&le!==-1&&Be<Ie&&Ie<le&&(Ie=re.lastIndexOf("/",Be)),Ie===-1||Ie===re.length-1?[re,void 0]:O(re)&&!re.includes("]/[")?[re,void 0]:[re.slice(0,Ie),re.slice(Ie+1)]}function $(re){if(typeof re=="string"&&re.includes("<alpha-value>")){let Ie=re;return({opacityValue:Be=1})=>Ie.replace("<alpha-value>",Be)}return re}function K(re){return(0,c.normalize)(re.slice(1,-1))}function W(re,Ie={},{tailwindConfig:Be={}}={}){var le;if(((le=Ie.values)===null||le===void 0?void 0:le[re])!==void 0){var xe;return $((xe=Ie.values)===null||xe===void 0?void 0:xe[re])}let[Se,oe]=N(re);if(oe!==void 0){var te,Ce,ve,Fe;let Ge=(Fe=(te=Ie.values)===null||te===void 0?void 0:te[Se])!==null&&Fe!==void 0?Fe:O(Se)?Se.slice(1,-1):void 0;return Ge===void 0?void 0:(Ge=$(Ge),O(oe)?(0,i.withAlphaValue)(Ge,K(oe)):((Ce=Be.theme)===null||Ce===void 0||(ve=Ce.opacity)===null||ve===void 0?void 0:ve[oe])===void 0?void 0:(0,i.withAlphaValue)(Ge,Be.theme.opacity[oe]))}return I(re,Ie,{validate:c.color})}function B(re,Ie={}){var Be;return(Be=Ie.values)===null||Be===void 0?void 0:Be[re]}function U(re){return(Ie,Be)=>I(Ie,Be,{validate:re})}let J={any:I,color:W,url:U(c.url),image:U(c.image),length:U(c.length),percentage:U(c.percentage),position:U(c.position),lookup:B,"generic-name":U(c.genericName),"family-name":U(c.familyName),number:U(c.number),"line-width":U(c.lineWidth),"absolute-size":U(c.absoluteSize),"relative-size":U(c.relativeSize),shadow:U(c.shadow),size:U(p.backgroundSize)},ee=Object.keys(J);function ye(re,Ie){let Be=re.indexOf(Ie);return Be===-1?[void 0,re]:[re.slice(0,Be),re.slice(Be+1)]}function Q(re,Ie,Be,le){if(Be.values&&Ie in Be.values)for(let{type:Se}of re??[]){let oe=J[Se](Ie,Be,{tailwindConfig:le});if(oe!==void 0)return[oe,Se,null]}if(O(Ie)){let Se=Ie.slice(1,-1),[oe,te]=ye(Se,":");if(!/^[\w-_]+$/g.test(oe))te=Se;else if(oe!==void 0&&!ee.includes(oe))return[];if(te.length>0&&ee.includes(oe))return[I(`[${te}]`,Be),oe,null]}let xe=be(re,Ie,Be,le);for(let Se of xe)return Se;return[]}function*be(re,Ie,Be,le){let xe=(0,s.flagEnabled)(le,"generalizedModifiers"),[Se,oe]=N(Ie);if(xe&&Be.modifiers!=null&&(Be.modifiers==="any"||typeof Be.modifiers=="object"&&(oe&&O(oe)||oe in Be.modifiers))||(Se=Ie,oe=void 0),oe!==void 0&&Se===""&&(Se="DEFAULT"),oe!==void 0&&typeof Be.modifiers=="object"){var Ce,ve;let Fe=(ve=(Ce=Be.modifiers)===null||Ce===void 0?void 0:Ce[oe])!==null&&ve!==void 0?ve:null;Fe!==null?oe=Fe:O(oe)&&(oe=K(oe))}for(let{type:Fe}of re??[]){let Ge=J[Fe](Se,Be,{tailwindConfig:le});Ge!==void 0&&(yield[Ge,Fe,oe??null])}}})(aB);var hB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t}});function t(n){return typeof n=="function"?n({}):n}})(hB);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return Be}});const t=O(ZT),n=O(J4),i=O(Y4),c=O(Q4),d=nB,p=rB,s=iB,_=O(oB),S=sB,E=aB,A=KT,I=O(hB);function O(le){return le&&le.__esModule?le:{default:le}}function N(le){return typeof le=="function"}function $(le,...xe){let Se=xe.pop();for(let oe of xe)for(let te in oe){let Ce=Se(le[te],oe[te]);Ce===void 0?(0,_.default)(le[te])&&(0,_.default)(oe[te])?le[te]=$({},le[te],oe[te],Se):le[te]=oe[te]:le[te]=Ce}return le}const K={colors:c.default,negative(le){return Object.keys(le).filter(xe=>le[xe]!=="0").reduce((xe,Se)=>{let oe=(0,t.default)(le[Se]);return oe!==void 0&&(xe[`-${Se}`]=oe),xe},{})},breakpoints(le){return Object.keys(le).filter(xe=>typeof le[xe]=="string").reduce((xe,Se)=>({...xe,[`screen-${Se}`]:le[Se]}),{})}};function W(le,...xe){return N(le)?le(...xe):le}function B(le){return le.reduce((xe,{extend:Se})=>$(xe,Se,(oe,te)=>oe===void 0?[te]:Array.isArray(oe)?[te,...oe]:[te,oe]),{})}function U(le){return{...le.reduce((xe,Se)=>(0,d.defaults)(xe,Se),{}),extend:B(le)}}function J(le,xe){if(Array.isArray(le)&&(0,_.default)(le[0]))return le.concat(xe);if(Array.isArray(xe)&&(0,_.default)(xe[0])&&(0,_.default)(le))return[le,...xe];if(Array.isArray(xe))return xe}function ee({extend:le,...xe}){return $(xe,le,(Se,oe)=>!N(Se)&&!oe.some(N)?$({},Se,...oe,J):(te,Ce)=>$({},...[Se,...oe].map(ve=>W(ve,te,Ce)),J))}function*ye(le){let xe=(0,p.toPath)(le);if(xe.length===0||(yield xe,Array.isArray(le)))return;let Se=/^(.*?)\s*\/\s*([^/]+)$/,oe=le.match(Se);if(oe!==null){let[,te,Ce]=oe,ve=(0,p.toPath)(te);ve.alpha=Ce,yield ve}}function Q(le){const xe=(Se,oe)=>{for(const te of ye(Se)){let Ce=0,ve=le;for(;ve!=null&&Ce<te.length;)ve=ve[te[Ce++]],ve=N(ve)&&(te.alpha===void 0||Ce<=te.length-1)?ve(xe,K):ve;if(ve!==void 0){if(te.alpha!==void 0){let Fe=(0,E.parseColorFormat)(ve);return(0,A.withAlphaValue)(Fe,te.alpha,(0,I.default)(Fe))}return(0,_.default)(ve)?(0,S.cloneDeep)(ve):ve}}return oe};return Object.assign(xe,{theme:xe,...K}),Object.keys(le).reduce((Se,oe)=>(Se[oe]=N(le[oe])?le[oe](xe,K):le[oe],Se),{})}function be(le){let xe=[];return le.forEach(Se=>{xe=[...xe,Se];var oe;const te=(oe=Se==null?void 0:Se.plugins)!==null&&oe!==void 0?oe:[];te.length!==0&&te.forEach(Ce=>{Ce.__isOptionsFunction&&(Ce=Ce());var ve;xe=[...xe,...be([(ve=Ce==null?void 0:Ce.config)!==null&&ve!==void 0?ve:{}])]})}),xe}function re(le){return[...le].reduceRight((Se,oe)=>N(oe)?oe({corePlugins:Se}):(0,i.default)(oe,Se),n.default)}function Ie(le){return[...le].reduceRight((Se,oe)=>[...Se,...oe],[])}function Be(le){let xe=[...be(le),{prefix:"",important:!1,separator:":"}];var Se,oe;return(0,s.normalizeConfig)((0,d.defaults)({theme:Q(ee(U(xe.map(te=>(Se=te==null?void 0:te.theme)!==null&&Se!==void 0?Se:{})))),corePlugins:re(xe.map(te=>te.corePlugins)),plugins:Ie(le.map(te=>(oe=te==null?void 0:te.plugins)!==null&&oe!==void 0?oe:[]))},...xe))}})(X4);var fB={},Eie={content:[],presets:[],darkMode:"media",theme:{accentColor:({theme:e})=>({...e("colors"),auto:"auto"}),animation:{none:"none",spin:"spin 1s linear infinite",ping:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite",pulse:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite",bounce:"bounce 1s infinite"},aria:{busy:'busy="true"',checked:'checked="true"',disabled:'disabled="true"',expanded:'expanded="true"',hidden:'hidden="true"',pressed:'pressed="true"',readonly:'readonly="true"',required:'required="true"',selected:'selected="true"'},aspectRatio:{auto:"auto",square:"1 / 1",video:"16 / 9"},backdropBlur:({theme:e})=>e("blur"),backdropBrightness:({theme:e})=>e("brightness"),backdropContrast:({theme:e})=>e("contrast"),backdropGrayscale:({theme:e})=>e("grayscale"),backdropHueRotate:({theme:e})=>e("hueRotate"),backdropInvert:({theme:e})=>e("invert"),backdropOpacity:({theme:e})=>e("opacity"),backdropSaturate:({theme:e})=>e("saturate"),backdropSepia:({theme:e})=>e("sepia"),backgroundColor:({theme:e})=>e("colors"),backgroundImage:{none:"none","gradient-to-t":"linear-gradient(to top, var(--tw-gradient-stops))","gradient-to-tr":"linear-gradient(to top right, var(--tw-gradient-stops))","gradient-to-r":"linear-gradient(to right, var(--tw-gradient-stops))","gradient-to-br":"linear-gradient(to bottom right, var(--tw-gradient-stops))","gradient-to-b":"linear-gradient(to bottom, var(--tw-gradient-stops))","gradient-to-bl":"linear-gradient(to bottom left, var(--tw-gradient-stops))","gradient-to-l":"linear-gradient(to left, var(--tw-gradient-stops))","gradient-to-tl":"linear-gradient(to top left, var(--tw-gradient-stops))"},backgroundOpacity:({theme:e})=>e("opacity"),backgroundPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},backgroundSize:{auto:"auto",cover:"cover",contain:"contain"},blur:{0:"0",none:"0",sm:"4px",DEFAULT:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},borderColor:({theme:e})=>({...e("colors"),DEFAULT:e("colors.gray.200","currentColor")}),borderOpacity:({theme:e})=>e("opacity"),borderRadius:{none:"0px",sm:"0.125rem",DEFAULT:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},borderSpacing:({theme:e})=>({...e("spacing")}),borderWidth:{DEFAULT:"1px",0:"0px",2:"2px",4:"4px",8:"8px"},boxShadow:{sm:"0 1px 2px 0 rgb(0 0 0 / 0.05)",DEFAULT:"0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1)",md:"0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1)",lg:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",xl:"0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1)","2xl":"0 25px 50px -12px rgb(0 0 0 / 0.25)",inner:"inset 0 2px 4px 0 rgb(0 0 0 / 0.05)",none:"none"},boxShadowColor:({theme:e})=>e("colors"),brightness:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5",200:"2"},caretColor:({theme:e})=>e("colors"),colors:({colors:e})=>({inherit:e.inherit,current:e.current,transparent:e.transparent,black:e.black,white:e.white,slate:e.slate,gray:e.gray,zinc:e.zinc,neutral:e.neutral,stone:e.stone,red:e.red,orange:e.orange,amber:e.amber,yellow:e.yellow,lime:e.lime,green:e.green,emerald:e.emerald,teal:e.teal,cyan:e.cyan,sky:e.sky,blue:e.blue,indigo:e.indigo,violet:e.violet,purple:e.purple,fuchsia:e.fuchsia,pink:e.pink,rose:e.rose}),columns:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12","3xs":"16rem","2xs":"18rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem"},container:{},content:{none:"none"},contrast:{0:"0",50:".5",75:".75",100:"1",125:"1.25",150:"1.5",200:"2"},cursor:{auto:"auto",default:"default",pointer:"pointer",wait:"wait",text:"text",move:"move",help:"help","not-allowed":"not-allowed",none:"none","context-menu":"context-menu",progress:"progress",cell:"cell",crosshair:"crosshair","vertical-text":"vertical-text",alias:"alias",copy:"copy","no-drop":"no-drop",grab:"grab",grabbing:"grabbing","all-scroll":"all-scroll","col-resize":"col-resize","row-resize":"row-resize","n-resize":"n-resize","e-resize":"e-resize","s-resize":"s-resize","w-resize":"w-resize","ne-resize":"ne-resize","nw-resize":"nw-resize","se-resize":"se-resize","sw-resize":"sw-resize","ew-resize":"ew-resize","ns-resize":"ns-resize","nesw-resize":"nesw-resize","nwse-resize":"nwse-resize","zoom-in":"zoom-in","zoom-out":"zoom-out"},divideColor:({theme:e})=>e("borderColor"),divideOpacity:({theme:e})=>e("borderOpacity"),divideWidth:({theme:e})=>e("borderWidth"),dropShadow:{sm:"0 1px 1px rgb(0 0 0 / 0.05)",DEFAULT:["0 1px 2px rgb(0 0 0 / 0.1)","0 1px 1px rgb(0 0 0 / 0.06)"],md:["0 4px 3px rgb(0 0 0 / 0.07)","0 2px 2px rgb(0 0 0 / 0.06)"],lg:["0 10px 8px rgb(0 0 0 / 0.04)","0 4px 3px rgb(0 0 0 / 0.1)"],xl:["0 20px 13px rgb(0 0 0 / 0.03)","0 8px 5px rgb(0 0 0 / 0.08)"],"2xl":"0 25px 25px rgb(0 0 0 / 0.15)",none:"0 0 #0000"},fill:({theme:e})=>({none:"none",...e("colors")}),flex:{1:"1 1 0%",auto:"1 1 auto",initial:"0 1 auto",none:"none"},flexBasis:({theme:e})=>({auto:"auto",...e("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%"}),flexGrow:{0:"0",DEFAULT:"1"},flexShrink:{0:"0",DEFAULT:"1"},fontFamily:{sans:["ui-sans-serif","system-ui","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"','"Noto Color Emoji"'],serif:["ui-serif","Georgia","Cambria",'"Times New Roman"',"Times","serif"],mono:["ui-monospace","SFMono-Regular","Menlo","Monaco","Consolas",'"Liberation Mono"','"Courier New"',"monospace"]},fontSize:{xs:["0.75rem",{lineHeight:"1rem"}],sm:["0.875rem",{lineHeight:"1.25rem"}],base:["1rem",{lineHeight:"1.5rem"}],lg:["1.125rem",{lineHeight:"1.75rem"}],xl:["1.25rem",{lineHeight:"1.75rem"}],"2xl":["1.5rem",{lineHeight:"2rem"}],"3xl":["1.875rem",{lineHeight:"2.25rem"}],"4xl":["2.25rem",{lineHeight:"2.5rem"}],"5xl":["3rem",{lineHeight:"1"}],"6xl":["3.75rem",{lineHeight:"1"}],"7xl":["4.5rem",{lineHeight:"1"}],"8xl":["6rem",{lineHeight:"1"}],"9xl":["8rem",{lineHeight:"1"}]},fontWeight:{thin:"100",extralight:"200",light:"300",normal:"400",medium:"500",semibold:"600",bold:"700",extrabold:"800",black:"900"},gap:({theme:e})=>e("spacing"),gradientColorStops:({theme:e})=>e("colors"),gradientColorStopPositions:{"0%":"0%","5%":"5%","10%":"10%","15%":"15%","20%":"20%","25%":"25%","30%":"30%","35%":"35%","40%":"40%","45%":"45%","50%":"50%","55%":"55%","60%":"60%","65%":"65%","70%":"70%","75%":"75%","80%":"80%","85%":"85%","90%":"90%","95%":"95%","100%":"100%"},grayscale:{0:"0",DEFAULT:"100%"},gridAutoColumns:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridAutoRows:{auto:"auto",min:"min-content",max:"max-content",fr:"minmax(0, 1fr)"},gridColumn:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridColumnEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridColumnStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRow:{auto:"auto","span-1":"span 1 / span 1","span-2":"span 2 / span 2","span-3":"span 3 / span 3","span-4":"span 4 / span 4","span-5":"span 5 / span 5","span-6":"span 6 / span 6","span-7":"span 7 / span 7","span-8":"span 8 / span 8","span-9":"span 9 / span 9","span-10":"span 10 / span 10","span-11":"span 11 / span 11","span-12":"span 12 / span 12","span-full":"1 / -1"},gridRowEnd:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridRowStart:{auto:"auto",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12",13:"13"},gridTemplateColumns:{none:"none",subgrid:"subgrid",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},gridTemplateRows:{none:"none",subgrid:"subgrid",1:"repeat(1, minmax(0, 1fr))",2:"repeat(2, minmax(0, 1fr))",3:"repeat(3, minmax(0, 1fr))",4:"repeat(4, minmax(0, 1fr))",5:"repeat(5, minmax(0, 1fr))",6:"repeat(6, minmax(0, 1fr))",7:"repeat(7, minmax(0, 1fr))",8:"repeat(8, minmax(0, 1fr))",9:"repeat(9, minmax(0, 1fr))",10:"repeat(10, minmax(0, 1fr))",11:"repeat(11, minmax(0, 1fr))",12:"repeat(12, minmax(0, 1fr))"},height:({theme:e})=>({auto:"auto",...e("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%",full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),hueRotate:{0:"0deg",15:"15deg",30:"30deg",60:"60deg",90:"90deg",180:"180deg"},inset:({theme:e})=>({auto:"auto",...e("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"}),invert:{0:"0",DEFAULT:"100%"},keyframes:{spin:{to:{transform:"rotate(360deg)"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},pulse:{"50%":{opacity:".5"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}}},letterSpacing:{tighter:"-0.05em",tight:"-0.025em",normal:"0em",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeight:{none:"1",tight:"1.25",snug:"1.375",normal:"1.5",relaxed:"1.625",loose:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},listStyleType:{none:"none",disc:"disc",decimal:"decimal"},listStyleImage:{none:"none"},margin:({theme:e})=>({auto:"auto",...e("spacing")}),lineClamp:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6"},maxHeight:({theme:e})=>({...e("spacing"),none:"none",full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),maxWidth:({theme:e,breakpoints:t})=>({...e("spacing"),none:"none",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem",full:"100%",min:"min-content",max:"max-content",fit:"fit-content",prose:"65ch",...t(e("screens"))}),minHeight:({theme:e})=>({...e("spacing"),full:"100%",screen:"100vh",svh:"100svh",lvh:"100lvh",dvh:"100dvh",min:"min-content",max:"max-content",fit:"fit-content"}),minWidth:({theme:e})=>({...e("spacing"),full:"100%",min:"min-content",max:"max-content",fit:"fit-content"}),objectPosition:{bottom:"bottom",center:"center",left:"left","left-bottom":"left bottom","left-top":"left top",right:"right","right-bottom":"right bottom","right-top":"right top",top:"top"},opacity:{0:"0",5:"0.05",10:"0.1",15:"0.15",20:"0.2",25:"0.25",30:"0.3",35:"0.35",40:"0.4",45:"0.45",50:"0.5",55:"0.55",60:"0.6",65:"0.65",70:"0.7",75:"0.75",80:"0.8",85:"0.85",90:"0.9",95:"0.95",100:"1"},order:{first:"-9999",last:"9999",none:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},outlineColor:({theme:e})=>e("colors"),outlineOffset:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},outlineWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},padding:({theme:e})=>e("spacing"),placeholderColor:({theme:e})=>e("colors"),placeholderOpacity:({theme:e})=>e("opacity"),ringColor:({theme:e})=>({DEFAULT:e("colors.blue.500","#3b82f6"),...e("colors")}),ringOffsetColor:({theme:e})=>e("colors"),ringOffsetWidth:{0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},ringOpacity:({theme:e})=>({DEFAULT:"0.5",...e("opacity")}),ringWidth:{DEFAULT:"3px",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},rotate:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg",45:"45deg",90:"90deg",180:"180deg"},saturate:{0:"0",50:".5",100:"1",150:"1.5",200:"2"},scale:{0:"0",50:".5",75:".75",90:".9",95:".95",100:"1",105:"1.05",110:"1.1",125:"1.25",150:"1.5"},screens:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},scrollMargin:({theme:e})=>({...e("spacing")}),scrollPadding:({theme:e})=>e("spacing"),sepia:{0:"0",DEFAULT:"100%"},skew:{0:"0deg",1:"1deg",2:"2deg",3:"3deg",6:"6deg",12:"12deg"},space:({theme:e})=>({...e("spacing")}),spacing:{px:"1px",0:"0px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",11:"2.75rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},stroke:({theme:e})=>({none:"none",...e("colors")}),strokeWidth:{0:"0",1:"1",2:"2"},supports:{},data:{},textColor:({theme:e})=>e("colors"),textDecorationColor:({theme:e})=>e("colors"),textDecorationThickness:{auto:"auto","from-font":"from-font",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},textIndent:({theme:e})=>({...e("spacing")}),textOpacity:({theme:e})=>e("opacity"),textUnderlineOffset:{auto:"auto",0:"0px",1:"1px",2:"2px",4:"4px",8:"8px"},transformOrigin:{center:"center",top:"top","top-right":"top right",right:"right","bottom-right":"bottom right",bottom:"bottom","bottom-left":"bottom left",left:"left","top-left":"top left"},transitionDelay:{0:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionDuration:{DEFAULT:"150ms",0:"0s",75:"75ms",100:"100ms",150:"150ms",200:"200ms",300:"300ms",500:"500ms",700:"700ms",1e3:"1000ms"},transitionProperty:{none:"none",all:"all",DEFAULT:"color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter",colors:"color, background-color, border-color, text-decoration-color, fill, stroke",opacity:"opacity",shadow:"box-shadow",transform:"transform"},transitionTimingFunction:{DEFAULT:"cubic-bezier(0.4, 0, 0.2, 1)",linear:"linear",in:"cubic-bezier(0.4, 0, 1, 1)",out:"cubic-bezier(0, 0, 0.2, 1)","in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},translate:({theme:e})=>({...e("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%",full:"100%"}),size:({theme:e})=>({auto:"auto",...e("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",min:"min-content",max:"max-content",fit:"fit-content"}),width:({theme:e})=>({auto:"auto",...e("spacing"),"1/2":"50%","1/3":"33.333333%","2/3":"66.666667%","1/4":"25%","2/4":"50%","3/4":"75%","1/5":"20%","2/5":"40%","3/5":"60%","4/5":"80%","1/6":"16.666667%","2/6":"33.333333%","3/6":"50%","4/6":"66.666667%","5/6":"83.333333%","1/12":"8.333333%","2/12":"16.666667%","3/12":"25%","4/12":"33.333333%","5/12":"41.666667%","6/12":"50%","7/12":"58.333333%","8/12":"66.666667%","9/12":"75%","10/12":"83.333333%","11/12":"91.666667%",full:"100%",screen:"100vw",svw:"100svw",lvw:"100lvw",dvw:"100dvw",min:"min-content",max:"max-content",fit:"fit-content"}),willChange:{auto:"auto",scroll:"scroll-position",contents:"contents",transform:"transform"},zIndex:{auto:"auto",0:"0",10:"10",20:"20",30:"30",40:"40",50:"50"}},plugins:[]};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return c}});const t=i(Eie),n=e1;function i(d){return d&&d.__esModule?d:{default:d}}function c(d){var p;const s=((p=d==null?void 0:d.presets)!==null&&p!==void 0?p:[t.default]).slice().reverse().flatMap(E=>c(E instanceof Function?E():E)),_={respectDefaultRingColorOpacity:{theme:{ringColor:({theme:E})=>({DEFAULT:"#3b82f67f",...E("colors")})}},disableColorOpacityUtilitiesByDefault:{corePlugins:{backgroundOpacity:!1,borderOpacity:!1,divideOpacity:!1,placeholderOpacity:!1,ringOpacity:!1,textOpacity:!1}}},S=Object.keys(_).filter(E=>(0,n.flagEnabled)(d,E)).map(E=>_[E]);return[d,...S,...s]}})(fB);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return c}});const t=i(X4),n=i(fB);function i(d){return d&&d.__esModule?d:{default:d}}function c(...d){let[,...p]=(0,n.default)(d[0]);return(0,t.default)([...d,...p])}})(K4);let Bw=K4;var Tie=(Bw.__esModule?Bw:{default:Bw}).default;const pB=Ya(Tie);var mB={},gB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}});function t(i,c){return{handler:i,config:c}}t.withOptions=function(i,c=()=>({})){const d=function(p){return{__options:p,handler:i(p),config:c(p)}};return d.__isOptionsFunction=!0,d.__pluginFunction=i,d.__configFunction=c,d};const n=t})(gB);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i}});const t=n(gB);function n(c){return c&&c.__esModule?c:{default:c}}const i=t.default})(mB);let Fw=mB;var Cie=(Fw.__esModule?Fw:{default:Fw}).default;const Aie=Cie;function $D(e){return Object.fromEntries(Object.entries(e).filter(([t])=>t!=="DEFAULT"))}var kie=Aie(({addUtilities:e,matchUtilities:t,theme:n})=>{e({"@keyframes enter":n("keyframes.enter"),"@keyframes exit":n("keyframes.exit"),".animate-in":{animationName:"enter",animationDuration:n("animationDuration.DEFAULT"),"--tw-enter-opacity":"initial","--tw-enter-scale":"initial","--tw-enter-rotate":"initial","--tw-enter-translate-x":"initial","--tw-enter-translate-y":"initial"},".animate-out":{animationName:"exit",animationDuration:n("animationDuration.DEFAULT"),"--tw-exit-opacity":"initial","--tw-exit-scale":"initial","--tw-exit-rotate":"initial","--tw-exit-translate-x":"initial","--tw-exit-translate-y":"initial"}}),t({"fade-in":i=>({"--tw-enter-opacity":i}),"fade-out":i=>({"--tw-exit-opacity":i})},{values:n("animationOpacity")}),t({"zoom-in":i=>({"--tw-enter-scale":i}),"zoom-out":i=>({"--tw-exit-scale":i})},{values:n("animationScale")}),t({"spin-in":i=>({"--tw-enter-rotate":i}),"spin-out":i=>({"--tw-exit-rotate":i})},{values:n("animationRotate")}),t({"slide-in-from-top":i=>({"--tw-enter-translate-y":`-${i}`}),"slide-in-from-bottom":i=>({"--tw-enter-translate-y":i}),"slide-in-from-left":i=>({"--tw-enter-translate-x":`-${i}`}),"slide-in-from-right":i=>({"--tw-enter-translate-x":i}),"slide-out-to-top":i=>({"--tw-exit-translate-y":`-${i}`}),"slide-out-to-bottom":i=>({"--tw-exit-translate-y":i}),"slide-out-to-left":i=>({"--tw-exit-translate-x":`-${i}`}),"slide-out-to-right":i=>({"--tw-exit-translate-x":i})},{values:n("animationTranslate")}),t({duration:i=>({animationDuration:i})},{values:$D(n("animationDuration"))}),t({delay:i=>({animationDelay:i})},{values:n("animationDelay")}),t({ease:i=>({animationTimingFunction:i})},{values:$D(n("animationTimingFunction"))}),e({".running":{animationPlayState:"running"},".paused":{animationPlayState:"paused"}}),t({"fill-mode":i=>({animationFillMode:i})},{values:n("animationFillMode")}),t({direction:i=>({animationDirection:i})},{values:n("animationDirection")}),t({repeat:i=>({animationIterationCount:i})},{values:n("animationRepeat")})},{theme:{extend:{animationDelay:({theme:e})=>({...e("transitionDelay")}),animationDuration:({theme:e})=>({0:"0ms",...e("transitionDuration")}),animationTimingFunction:({theme:e})=>({...e("transitionTimingFunction")}),animationFillMode:{none:"none",forwards:"forwards",backwards:"backwards",both:"both"},animationDirection:{normal:"normal",reverse:"reverse",alternate:"alternate","alternate-reverse":"alternate-reverse"},animationOpacity:({theme:e})=>({DEFAULT:0,...e("opacity")}),animationTranslate:({theme:e})=>({DEFAULT:"100%",...e("translate")}),animationScale:({theme:e})=>({DEFAULT:0,...e("scale")}),animationRotate:({theme:e})=>({DEFAULT:"30deg",...e("rotate")}),animationRepeat:{0:"0",1:"1",infinite:"infinite"},keyframes:{enter:{from:{opacity:"var(--tw-enter-opacity, 1)",transform:"translate3d(var(--tw-enter-translate-x, 0), var(--tw-enter-translate-y, 0), 0) scale3d(var(--tw-enter-scale, 1), var(--tw-enter-scale, 1), var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))"}},exit:{to:{opacity:"var(--tw-exit-opacity, 1)",transform:"translate3d(var(--tw-exit-translate-x, 0), var(--tw-exit-translate-y, 0), 0) scale3d(var(--tw-exit-scale, 1), var(--tw-exit-scale, 1), var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))"}}}}}});const Iie=Ya(kie),yB={content:["./index.html","./src/**/*.{js,ts,jsx,tsx}"],theme:{extend:{fontFamily:{sans:["Nunito","sans-serif"]},colors:{primary:{DEFAULT:"#F46E44",dark:"#D44518"},green:{dark:"#198444",light:"#D8F4DC",DEFAULT:"#2ECC40"},gray:{primary:"#2B3B44",secondary:"#6A8088",tertiary:"#ABB8BF"},sunny:{DEFAULT:"#FDC534",light:"#FFF3D6"},cream:{DEFAULT:"#FFFEF8"},"happy-blue":{DEFAULT:"#318DB5"},"sea-blue":{DEFAULT:"#4DA9B7"},"deep-blue":{DEFAULT:"#496C80"}}}},plugins:[Iie]},Pie=()=>{const{theme:e}=pB(yB),t=e.extend?e.extend.screens:{md:768};return window.innerWidth>=t.md},Mie=()=>{const{theme:e}=pB(yB),t=e.extend?e.extend.screens:{xl:1024};return window.innerWidth>=t.xl},vB=(e,t)=>{const n=Sie(e,t);return n<1e3?`${Math.round(n)}m`:`${Math.round(n/100)/10}km`},_B=e=>{if(!e||e.length===0)return null;const t={Januar:"01",Februar:"02",März:"03",April:"04",Mai:"05",Juni:"06",Juli:"07",August:"08",September:"09",Oktober:"10",November:"11",Dezember:"12"},[n,i]=e.split(" "),c=t[n];return`${i}-${c}-01`},xB=()=>{const e=["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],t=new Date().getMonth(),n=new Date().getFullYear(),i=9,c=[];for(let d=0;d<i;d++){const p=e[(t+d)%12],s=n+Math.floor((t+d)/12);c.push(`${p} ${s}`),console.log(`${p} ${s}`)}return c},bB=()=>{const e=new Date,t=e.toLocaleString("default",{month:"long"}),n=e.getFullYear();return`${t} ${n}`},Die=()=>{const[e,t]=q.useState(""),[n,i]=q.useState([]);q.useEffect(()=>{t(bB()),i(xB())},[]);const{goToPrevious:c,goToNext:d}=TT(),{register:p,isLoading:s,control:_,isValid:S,setValue:E}=m4(),{helperText:A,error:I,defaultValue:O,...N}=p("fullAddress"),{helperText:$,error:K,defaultValue:W,...B}=p("desiredStartMonth"),{helperText:U,error:J,defaultValue:ee,...ye}=p("expectedBirthDate");return z.jsxs("div",{className:"px-3 lg:px-0",children:[z.jsxs("div",{className:"mb-8 flex w-full flex-col",children:[z.jsx("h3",{className:"mb-2 text-2xl font-black",children:"Wo sollen wir suchen?"}),z.jsx("p",{className:"w-full text-base text-gray-800",children:"Mit Ihren Angaben gleichen wir die Angebote der naheliegenden Kitas ab. Diese Daten verlassen dabei niemals unsere Server."})]}),z.jsx(HT,{onAddressSelected:Q=>{E("fullAddress",Q||null,{shouldValidate:!0})},className:"mb-6 w-full",error:I,helperText:A,defaultValue:O,slotProps:{listbox:{sx:{zIndex:9999}},input:{...N}}}),z.jsxs("div",{className:"mb-6 flex flex-row flex-wrap items-start gap-6",children:[z.jsx(Rg,{formControlProps:{className:"w-1/3 flex-auto",error:K},label:"Gewünschter Beginn",placeholder:`z.B. ${e||"loading..."}`,slotProps:{listbox:{sx:{zIndex:9999},style:{zIndex:9999}},input:{...B}},inputProps:{helperText:$},defaultValue:W,onChange:(Q,be)=>E("desiredStartMonth",be,{shouldValidate:!0}),startDecorator:z.jsx(GT,{}),disabled:s,options:n}),z.jsx(Rg,{formControlProps:{className:"w-1/3 flex-auto z-50",error:J},label:"Geburtsmonats des Kindes",placeholder:"z.B. Juni 2022",slotProps:{listbox:{sx:{zIndex:9999},style:{zIndex:9999}},input:{...ye}},inputProps:{helperText:U},defaultValue:ee,onChange:(Q,be)=>E("expectedBirthDate",be,{shouldValidate:!0}),startDecorator:z.jsx(tie,{}),disabled:s,options:["Januar 2020","Februar 2020","März 2020","April 2020","Mai 2020","Juni 2020","Juli 2020","August 2020","September 2020","Oktober 2020","November 2020","Dezember 2020","Januar 2021","Februar 2021","März 2021","April 2021","Mai 2021","Juni 2021","Juli 2021","August 2021","September 2021","Oktober 2021","November 2021","Dezember 2021","Januar 2022","Februar 2022","März 2022","April 2022","Mai 2022","Juni 2022","Juli 2022","August 2022","September 2022","Oktober 2022","November 2022","Dezember 2022","Januar 2023","Februar 2023","März 2023","April 2023","Mai 2023","Juni 2023","Juli 2023","August 2023","September 2023","Oktober 2023","November 2023","Dezember 2023","Januar 2024","Februar 2024","März 2024","April 2024","Mai 2024","Juni 2024","Juli 2024","August 2024","September 2024","Oktober 2024","November 2024","Dezember 2024","Januar 2025","Februar 2025","März 2025","April 2025","Mai 2025","Juni 2025","Juli 2025","August 2025","September 2025","Oktober 2025","November 2025","Dezember 2025","Januar 2026","Februar 2026","März 2026","April 2026","Mai 2026","Juni 2026","Juli 2026","August 2026","September 2026","Oktober 2026","November 2026","Dezember 2026"]})]}),z.jsx(HE,{role:"separator"}),z.jsx(q4,{inputProps:{startDecorator:z.jsx(W4,{}),...p("email"),autoComplete:"email",disabled:s},label:"Email Adresse",placeholder:"Ihre Email Adresse",className:"pt-6"}),z.jsxs("div",{className:"mb-4 mt-8 flex flex-row justify-end gap-3",children:[z.jsx(ro,{variant:"outlined",color:"neutral",size:"lg",onClick:c,disabled:s,children:"Zurück"}),z.jsx(ro,{loading:s,disabled:!S,type:"submit",variant:"solid",color:"primary",size:"lg",onClick:d,children:"Unverbindlich Anmelden"})]})]})},zie=()=>{const{goToNext:e}=TT();return z.jsxs("div",{className:"flex h-full flex-col items-center lg:h-fit lg:justify-center",children:[z.jsxs("div",{className:"flex flex-col items-center p-2",children:[z.jsxs("h3",{className:"mb-8 text-center text-3xl font-black",children:["Auf Kita-Suche?",z.jsx("br",{}),z.jsx("span",{className:"text-happy-blue",children:"Wir sind hier für dich."})]}),z.jsx(yd,{className:"text-center text-base font-semibold text-gray-500",children:"Wir wissen wie stressgeladen die Suche nach einer Kita sein kann. Überlass' uns die Fleißarbeit - wir finden die passende Kita für dich."})]}),z.jsxs("div",{className:"my-10 flex flex-col justify-center gap-4 px-0 lg:flex-row lg:gap-6",children:[z.jsxs("div",{className:"flex w-full flex-row items-center gap-4 px-2 lg:w-32 lg:flex-col lg:gap-2",children:[z.jsx("img",{src:"/illustrations/service-modal-feat1.svg",className:"w-16 lg:w-full",alt:"Maßgeschneiderte Kita-Suche mit eigenen Präferenzen"}),z.jsx("span",{className:"font-medium lg:text-center",children:"Finde eine Kita nach deinen Präferenzen"})]}),z.jsxs("div",{className:"flex w-full flex-row items-center gap-4 px-2 lg:w-32 lg:flex-col lg:gap-2",children:[z.jsx("img",{src:"/illustrations/service-modal-feat2.svg",className:"w-16 lg:w-full",alt:"Maßgeschneiderte Kita-Suche mit eigenen Präferenzen"}),z.jsx("span",{className:"w-full font-medium lg:text-center",children:"Erhalte Berichte direkt via Email"})]}),z.jsxs("div",{className:"flex w-full flex-row items-center gap-4 px-2 lg:w-32 lg:flex-col lg:gap-2",children:[z.jsx("img",{src:"/illustrations/service-modal-feat3.svg",className:"w-16 lg:w-full",alt:"Maßgeschneiderte Kita-Suche mit eigenen Präferenzen"}),z.jsxs("span",{className:"w-full font-medium lg:text-center",children:["Zahle ",z.jsx("strong",{children:"nur bei erfolgreicher Vermittlung"})]})]})]}),z.jsx("div",{className:"mb-8 flex flex-col items-center justify-center",children:z.jsx(ro,{endDecorator:z.jsx(eie,{sx:{fontSize:24}}),size:"lg",variant:"solid",color:"primary",onClick:e,children:"Kostenlos anmelden"})}),z.jsxs("span",{className:"mb-6 mt-auto w-full text-center text-sm text-gray-400 lg:mt-0",children:["Ein unverbindliches Angebot. Ein Kitaplatz ist nicht garantiert. ",z.jsx("br",{}),z.jsx(kx,{className:"text-sm font-bold",fontSize:"0.875rem",href:"",children:"Lerne mehr"})," ","über KitaPlatzZentrale."]})]})},Lie=()=>{var p;const{activeStepIndex:e,steps:t,setSteps:n}=TT(),{isValid:i,validate:c,handleSubmit:d}=m4();return At.useEffect(()=>{n([{view:z.jsx(zie,{}),valid:!0},{view:z.jsx(Die,{}),valid:i,beforeNext:async()=>await c(),onNext:async()=>await d()},{view:z.jsx(die,{}),valid:!0}])},[]),z.jsx(z.Fragment,{children:((p=t[e])==null?void 0:p.view)??z.jsx("div",{})})},Rie=async({email:e,fullAddress:t,desiredStartMonth:n,expectedBirthDate:i})=>(await fetch("http://localhost:3000/signup/service",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,fullAddress:t,desiredStartingMonth:n,actualOrExpectedBirthMonth:i})})).ok,Oie=({open:e,onClose:t})=>{const{isOpen:n,setOpen:i}=Us("service-signup"),c=()=>{i(!1),t==null||t()};At.useEffect(()=>{e!==void 0&&i(e)},[e]);const d=()=>z.jsx(Qee,{onSubmit:async S=>await Rie(S),children:z.jsx(OQ,{children:z.jsx(Lie,{})})}),p=({children:S})=>z.jsx(nR,{open:n,onClose:c,children:z.jsxs(iR,{sx:{paddingBottom:"24px",paddingRight:"40px",paddingLeft:"40px",paddingTop:"20px",border:"none"},className:"w-full max-w-xl",children:[z.jsx("div",{className:"mb-4 flex flex-row-reverse",children:z.jsx(Ix,{sx:{position:"relative",top:0,right:"-16px"},onClick:c})}),S]})}),s=({children:S})=>z.jsx(Ux,{name:"service-signup",animationDirection:"y",children:S}),_=document.body.clientWidth>768?p:s;return z.jsx(_,{children:z.jsx(d,{})})},Bie=RT().shape({email:Qh().email("Bitte geben Sie eine gültige Email Adresse ein.").required("Bitte geben Sie eine Email Adresse ein.")}),wB=At.createContext({}),Fie=({children:e,onSubmit:t})=>{const[n,i]=At.useState(!1),[c,d]=At.useState(!1),{register:p,handleSubmit:s,getFieldState:_,formState:S,control:E,watch:A,trigger:I,setValue:O}=t4({mode:"onBlur",reValidateMode:"onBlur",resolver:r4(Bie)}),N=U=>{const{error:J,invalid:ee}=_(U,S),{ref:ye,onChange:Q,...be}=p(U),re=A(U);return{...be,ref:ye,defaultValue:re,inputRef:ye,helperText:J==null?void 0:J.message,error:ee}},$=async U=>{const J=await I(U);return U||i(!0),J},K=At.useMemo(()=>n?S.isValid:!0,[n,S.isValid]),W=async U=>(i(!0),await(t==null?void 0:t(U))),B=async()=>(d(!0),s(async U=>await W(U),U=>{console.log(U)})().then(()=>(d(!1),!0)).catch(()=>(d(!1),!1)));return z.jsx(wB.Provider,{value:{register:N,control:E,formState:S,watch:A,validate:$,setValue:O,handleSubmit:B,isValid:K,isLoading:c},children:e})},SB=()=>At.useContext(wB),jie=async e=>(await fetch("http://localhost:3000/signup/single",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok,EB=({onClose:e})=>{const{isOpen:t,setOpen:n}=Us("single-kita-signup"),{register:i,isLoading:c,handleSubmit:d,watch:p}=SB(),s=async()=>{try{await d(),S(!0)}catch(W){console.error(W)}},[_,S]=At.useState(!1),E=()=>{n(!1),S(!1),e==null||e()},A=i("email"),I=p("kitaName"),O=()=>z.jsx(z.Fragment,{children:_?z.jsxs("div",{className:"flex flex-col items-center justify-center",children:[z.jsx("div",{className:"mb-4",children:z.jsx($4,{color:"info",fontSize:"xl7"})}),z.jsxs("div",{className:"mb-4 flex flex-col items-center p-2",children:[z.jsx("h3",{className:"mb-2 text-2xl font-black",children:"Erfolgreich eingereicht."}),z.jsx(yd,{className:"text-center text-base font-semibold text-gray-500",children:"Wir werden Sie schnell per Email benachrichtigen, sobald diese Kita wieder Kapazitäten hat."})]}),z.jsx(ro,{fullWidth:!0,size:"lg",variant:"soft",color:"neutral",onClick:E,children:"Schließen"})]}):z.jsxs("div",{className:"px-3",children:[z.jsxs("div",{className:"mb-8 w-full",children:[z.jsx("h3",{className:"mb-2 text-xl font-black",children:"Email Benachrichtigungen"}),z.jsxs(yd,{className:"text-base",children:["Wir werden Sie schnell per Email benachrichtigen, sobald die Tageseinrichtung ",z.jsx("strong",{children:I})," wieder Kapazitäten hat."]})]}),z.jsx("div",{className:"w-full",children:z.jsx(q4,{inputProps:{startDecorator:z.jsx(W4,{}),...A,autoComplete:"email",disabled:c},label:"Email Adresse",placeholder:"Ihre Email Adresse"})}),z.jsx("div",{className:"mt-8 flex w-full flex-row-reverse",children:z.jsx(ro,{loading:c,variant:"solid",size:"lg",color:"primary",type:"submit",onClick:async()=>await s(),children:"Benachrichtigen lassen"})})]})}),N=({children:W})=>z.jsx(nR,{open:t,onClose:E,children:z.jsxs(iR,{sx:{paddingBottom:"48px",paddingRight:"32px",paddingLeft:"32px",paddingTop:"16px",border:"none"},className:"w-full max-w-lg",children:[z.jsx("div",{className:"mb-4 flex flex-row-reverse",children:z.jsx(Ix,{sx:{position:"relative",top:0,right:"-16px"},onClick:E})}),W]})}),$=({children:W})=>z.jsx(Ux,{name:"single-kita-signup",animationDirection:"y",children:W}),K=document.body.clientWidth>768?N:$;return z.jsx(K,{children:z.jsx(O,{})})},cy=({children:e,lockAtScreenHeight:t=!1,headerRef:n})=>z.jsx(uK,{children:z.jsxs(Fie,{onSubmit:jie,children:[z.jsx(Jq,{getKey:(i,c)=>i.pathname}),z.jsx(Oie,{}),z.jsx(EB,{}),z.jsxs("div",{className:yi("flex min-h-[120vh] flex-col",t?"max-h-screen overflow-hidden":"h-full"),children:[t&&z.jsx("style",{children:`
            html, body {
              overflow-y: hidden;
            }
              `}),z.jsx(RQ,{headerRef:n}),e,z.jsx(aK,{})]})]})}),Nie=({})=>z.jsx(cy,{children:z.jsxs("div",{className:"page-padding flex h-screen flex-col-reverse items-center justify-center gap-0 py-24 md:gap-28 md:py-20 lg:flex-row lg:py-24",children:[z.jsx("div",{className:"relative w-full pb-12 lg:pb-0 xl:w-1/2 xl:pt-0",children:z.jsx("div",{className:"relative",children:z.jsx("div",{children:z.jsxs("div",{className:"flex flex-col",children:[z.jsx("h1",{className:"my-2 text-5xl font-extrabold text-gray-800",children:"Seite nicht gefunden"}),z.jsxs(yd,{className:"my-3 w-2/3 text-lg font-medium text-gray-700",children:["Sollte hier etwas zu finden sein, melden Sie dies bitte an"," ",z.jsx("a",{className:"font-semibold text-happy-blue",href:"mailto:hallo@kitaplatz-zentrale.de",children:"hallo@kitaplatz-zentrale.de"})]}),z.jsx(od,{to:"/",children:z.jsx(ro,{size:"lg",sx:{marginTop:2,padding:"1.25rem 2rem"},variant:"solid",children:"Zurück zur Startseite"})})]})})})}),z.jsx("div",{children:z.jsx("span",{className:"text-[10rem] font-black text-happy-blue text-opacity-20 md:text-[12rem] lg:text-[16rem]",children:"404"})})]})}),$ie=async({lat:e,lng:t,distanceInMeters:n=1500,page:i=1,limit:c=500})=>{const p=await(await fetch("http://localhost:3000/location-service",{method:"POST",body:JSON.stringify({lat:e.toString(),lng:t.toString(),radius:n.toString(),page:i.toString(),limit:c.toString()})})).json();return!p||!p.items?null:p.items},TB=At.createContext({}),Vie=({kitas:e=null,children:t})=>{const[n,i]=At.useState(e),[c,d]=At.useState(!1),p=async s=>{d(!0),i(null),setTimeout(async()=>{const _=await $ie({...s});i(_),d(!1)},0)};return z.jsx(TB.Provider,{value:{kitas:n,setKitas:i,fetchKitas:p,isFetching:c},children:t})},Td=()=>At.useContext(TB);function Uie(e,t){if(e){if(typeof e=="string")return VD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return VD(e,t)}}function VD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function UD(e,t){var n;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(n=Uie(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return n=e[Symbol.iterator](),n.next.bind(n)}var Sl;(function(e){e.X="x",e.Y="y"})(Sl||(Sl={}));var Wie=function(t){return{leftTop:Sl.X===t?"left":"top",offsetLeftTop:Sl.X===t?"offsetLeft":"offsetTop",offsetWidthHeight:Sl.X===t?"offsetWidth":"offsetHeight",scrollLeftTop:Sl.X===t?"scrollLeft":"scrollTop",scrollWidthHeight:Sl.X===t?"scrollWidth":"scrollHeight",clientWidthHeight:Sl.X===t?"clientWidth":"clientHeight"}};function WD(e,t){t===void 0&&(t=100);var n;return function(){for(var i=arguments.length,c=new Array(i),d=0;d<i;d++)c[d]=arguments[d];var p=this;n&&clearTimeout(n),n=setTimeout(function(){e.apply(p,c)},t)}}var Gie=function(t){return!t.parentElement||!t.parentElement.parentElement},Hie=function(t,n,i){if(typeof t=="number")return t;if(typeof t=="string"){var c=document.querySelector(t);if(!c)return console.warn("Please pass correct selector string for scrollTo()!"),0;var d=0;return Gie(n)?d=c.getBoundingClientRect()[i.leftTop]:d=c.getBoundingClientRect()[i.leftTop]-n.getBoundingClientRect()[i.leftTop],d}return 0},Zie=function(t){var n=t.ref,i=t.speed,c=i===void 0?100:i,d=t.direction,p=d===void 0?Sl.Y:d,s=t.threshold,_=s===void 0?1:s,S=Wie(p),E=q.useState(!0),A=E[0],I=E[1],O=q.useState(!0),N=O[0],$=O[1],K=q.useState(0),W=K[0],B=K[1],U=function(){var re=n.current;return re?re[S.scrollLeftTop]===0:!1},J=function(){var re=n.current;return re?Math.abs(re[S.scrollLeftTop]+re[S.clientWidthHeight]-re[S.scrollWidthHeight])<_:!1},ee=WD(function(){if(n.current){var be=n.current[S.clientWidthHeight];B(be)}}),ye=WD(function(be){U()?I(!0):I(!1),J()?$(!0):$(!1)}),Q=function(re,Ie){if(!n||!n.current){console.warn("Please pass `ref` property for your scroll container! \n Get more info at https://github.com/ron0115/react-smooth-scroll-hook");return}var Be=n.current;if(Be){!re&&typeof re!="number"&&console.warn("Please pass a valid property for `scrollTo()`! \n Get more info at https://github.com/ron0115/react-smooth-scroll-hook");var le=Be[S.scrollLeftTop],xe=Hie(re,Be,S);typeof Ie=="number"&&(xe+=Ie);var Se=c,oe=function te(){if(ye(),xe!==0&&!(J()&&xe>9||xe<0&&U())){var Ce=function(){return Math.abs(Be[S.scrollLeftTop]-le)};Math.abs(xe)-Ce()<Se&&(Se=Math.abs(xe)-Ce()),Be[S.scrollLeftTop]+=Se*(xe>0?1:-1),!(Math.abs(Ce()-Math.abs(xe))<_)&&requestAnimationFrame(te)}};requestAnimationFrame(oe)}};return q.useEffect(function(){if(n.current){ye(),ee();var be=new MutationObserver(function(re,Ie){for(var Be=UD(re),le;!(le=Be()).done;){var xe=le.value;xe.type==="attributes"&&xe.target instanceof Element&&ee()}});return be.observe(n.current,{attributes:!0}),window.addEventListener("resize",ee),function(){be.disconnect(),window.removeEventListener("resize",ee)}}},[n,ye,ee]),q.useEffect(function(){if(n.current){var be=n.current,re=new MutationObserver(function(Ie,Be){for(var le=UD(Ie),xe;!(xe=le()).done;){var Se=xe.value;Se.type==="childList"&&Se.target instanceof Element&&ye()}});return re.observe(be,{childList:!0,subtree:!0}),be.addEventListener("scroll",ye),function(){re.disconnect(),be&&be.removeEventListener("scroll",ye)}}},[n,ye]),{reachedTop:A,reachedBottom:N,containerSize:W,scrollTo:Q,scrollToPage:function(re){Q(re*W)},refreshState:ye,refreshSize:ee}};const CB=At.createContext({}),qie=({startScrollPosition:e=0,children:t})=>{const[n,i]=At.useState(e),c=At.useRef(null);Zie({ref:c,speed:300,direction:"y"});const d=s=>{const _=c.current,S=document.getElementById(s);console.log("attempted to scroll to",s),console.log(s),console.log(c,S),_&&S&&console.log("scrolling to",s)},p=s=>s.length>0?"list-anchor-"+s:void 0;return z.jsx(CB.Provider,{value:{listRef:c,lastScrollPosition:n,scrollTo:d,generateElementScrollAnchor:p},children:t})},YT=()=>At.useContext(CB),AB=At.createContext({}),Kie=({children:e})=>{const{fetchKitas:t}=Td(),[n,i]=At.useState(null),[c,d]=At.useState(null),[p,s]=At.useState(!1),_=At.useMemo(()=>n!==null||c!==null||p,[n,c,p]),S=At.useCallback($=>{d($)},[d]),E=async $=>{s(!0);const K=$||c;K&&await A(K)},A=async $=>await t($),[I,O]=At.useState(null),N=At.useMemo(()=>c&&(c==null?void 0:c.lat)!==null&&(c==null?void 0:c.lng)!==null,[c]);return z.jsx(AB.Provider,{value:{address:n,setAddress:i,coordinates:c,setCoordinates:S,desiredStartingMonth:I,setDesiredStartingMonth:O,coordinatesAreValid:N,dirty:_,submitted:p,submit:E},children:e})},Yc=()=>At.useContext(AB),Xie=({id:e,className:t,rootRef:n})=>{const[i,c]=q.useState(""),[d,p]=q.useState([]);q.useEffect(()=>{c(bB()),p(xB())},[]);const{setCoordinates:s,setAddress:_,desiredStartingMonth:S,setDesiredStartingMonth:E,coordinatesAreValid:A,submit:I}=Yc(),{isFetching:O}=Td();return z.jsx("div",{ref:n,id:e,className:yi("page-padding flex w-full flex-row justify-between bg-white pb-6 pt-10 align-baseline",t),children:z.jsxs("div",{className:"flex w-full flex-col",children:[z.jsx("h3",{className:"mb-4 text-2xl font-extrabold",children:"Kitas in der Nähe finden"}),z.jsxs("div",{className:"flex w-full max-w-5xl flex-col items-stretch gap-6 lg:flex-row lg:items-start",children:[z.jsx(HT,{className:"lg:w-full",onAddressSelected:async N=>{_(N)},onCoordinatesSuccessfullyRetrieved:async N=>{N.lat==null||N.lng==null||s(N)}}),z.jsx(Rg,{formControlProps:{className:"w-full lg:w-1/4"},label:"Gewünschter Beginn",placeholder:`z.B. ${i||"loading..."}`,startDecorator:z.jsx(GT,{}),value:S,options:d,defaultValue:S,onChange:(N,$)=>{E($)}}),z.jsxs(ZE,{children:[z.jsx(qE,{style:{opacity:0},children:"Einreichen"}),z.jsx(ro,{style:{padding:"20px 40px"},className:"w-full lg:w-fit",color:"info",size:"lg",variant:"solid",loading:O,loadingPosition:"center",disabled:!A||!S,onClick:async()=>{await I()},children:"Kitas finden"})]})]})]})})},Jie=({open:e,className:t})=>{const[n,i]=At.useState(e??!0),{isOpen:c,setOpen:d}=Us("service-signup");return n?z.jsx("div",{className:yi("relative flex w-full items-center justify-center rounded-2xl bg-white px-8 py-8 lg:px-12 lg:pr-6",t),children:z.jsxs("div",{className:"flex w-full flex-col justify-between gap-8 2xl:flex-row 2xl:items-center 2xl:gap-12",children:[z.jsxs("div",{className:"flex flex-col items-center gap-8 2xl:flex-row 2xl:items-start 2xl:gap-8",children:[z.jsx("div",{className:"mt-2",children:z.jsx("img",{src:"/illustrations/service-finder.svg",className:"h-full w-full object-cover",alt:"Finder"})}),z.jsxs("div",{className:"flex flex-col items-center gap-6 2xl:items-start 2xl:gap-2",children:[z.jsxs("div",{className:"flex flex-col gap-0",children:[z.jsx("h4",{className:"m-0 text-center text-xl font-black 2xl:text-start",children:"Auf Kita-Suche?"}),z.jsx("h4",{className:"m-0 text-center text-xl font-black text-happy-blue 2xl:text-start",children:"Wir sind für dich da."})]}),z.jsx("p",{className:"font-semibold",children:z.jsxs("p",{className:"text-center 2xl:text-start",children:["Unser PlatzFinder Service nimmt den Stress aus Ihrem Elternalltag. Ganz unverbindlich —"," ",z.jsx("p",{className:"font-extrabold",children:"Sie bezahlen nur bei Erfolg."})]})})]})]}),z.jsx("div",{className:"flex flex-col-reverse justify-stretch gap-4 2xl:flex-row 2xl:items-center 2xl:self-center",children:z.jsx(ro,{color:"primary",variant:"solid",onClick:()=>d(!0),size:"lg",children:"Jetzt anfragen"})})]})}):null},GD=({kita:e,id:t})=>{const{desiredStartingMonth:n,coordinates:i}=Yc(),{setOpen:c}=Us("single-kita-signup"),{setValue:d}=SB(),p=()=>{c(!0),d("kitaDesiredAvailability",n),d("kitaId",e.uuid),d("kitaName",e.name)},[s,_]=At.useState(n),S=_B(s),E=S?e.availability[S]:!1;return At.useEffect(()=>{n&&n.length!==0&&_(n)},[n]),z.jsxs("div",{id:t,className:"flex w-full flex-col gap-6 rounded-2xl bg-white p-6 pl-8 shadow-lg sm:p-9 sm:pl-12 lg:flex-row lg:p-6 lg:pl-9 lg:shadow-none",children:[z.jsxs("div",{className:"flex flex-col gap-2",children:[z.jsx(kx,{href:`https://kita-navigator.berlin.de/einrichtungen/${e.uuid}`,sx:A=>({color:A.palette.neutral[900],textDecorationColor:A.palette.neutral[200],":hover":{color:A.palette.info[800]}}),component:"a",className:"text-xl font-extrabold underline-offset-4",fontSize:20,underline:"always",target:"_blank",rel:"noopener noreferrer",children:z.jsx(yd,{children:e.name})}),z.jsxs("div",{className:"mb-4 flex flex-row items-center gap-3",children:[z.jsx("span",{className:"text-bl text-sm font-bold text-deep-blue",children:`${e.address.street} ${e.address.houseNumber}, ${e.address.zip}`}),z.jsx(GE,{startDecorator:z.jsx(U4,{}),color:"neutral",variant:"soft",size:"sm",children:z.jsx("span",{className:"px-2 font-bold",children:`${vB({lng:e.location.coordinates[0],lat:e.location.coordinates[1]},i)}`})})]}),z.jsxs("div",{className:"flex flex-row items-center text-sm",children:[z.jsxs("span",{className:yi("font-bold","text-gray-500"),children:[s,":"]}),z.jsx("div",{className:"ml-1 ",children:E?z.jsxs("div",{className:"flex flex-row items-center  gap-1 text-sm font-bold text-green-600",children:["Plätze frei",z.jsx(N4,{})]}):z.jsxs("div",{color:"danger",className:"flex flex-row items-center  gap-1 text-sm font-bold text-red-600",children:["Ausgebucht",z.jsx(V4,{})]})})]}),!E&&z.jsx(z.Fragment,{children:z.jsx(ro,{color:"info",variant:"plain",size:"sm",onClick:()=>p(),sx:A=>({padding:0,justifyContent:"flex-start",width:"fit-content"}),startDecorator:z.jsx(G4,{}),children:z.jsx("span",{className:"underline underline-offset-2",children:"Erhalte Benachrichtigungen"})})})]}),z.jsx("div",{className:"flex flex-col md:ml-auto",children:z.jsx(ro,{color:"info",variant:"outlined",size:Pie()?"sm":"md",href:`https://kita-navigator.berlin.de/einrichtungen/${e.uuid}`,onClick:()=>{window.open(`https://kita-navigator.berlin.de/einrichtungen/${e.uuid}`,"_blank")},target:"_blank",sx:A=>({paddingTop:1,paddingBottom:1,paddingLeft:2,paddingRight:2,borderRadius:4}),endDecorator:z.jsx(iie,{}),children:"Details ansehen"})})]},"kita"+e.uuid)},kB=({className:e,animate:t=!0,index:n=0})=>z.jsxs("div",{className:yi("flex w-full flex-col gap-6 rounded-2xl bg-white p-6 pl-9 sm:p-9 sm:pl-12 lg:flex-row lg:p-6 lg:pl-9",e),children:[z.jsxs("div",{className:"flex flex-col gap-2",children:[z.jsx("div",{className:yi(t&&"animate-pulse","h-6 w-64 bg-gray-100 text-xl font-extrabold underline-offset-4")}),z.jsx("div",{className:"mb-4 flex flex-row items-center gap-3",children:z.jsx("div",{className:yi(t&&"animate-pulse","text-bl h-6 w-64 bg-gray-100 text-sm font-bold text-deep-blue")})}),z.jsxs("div",{className:"flex flex-row items-center text-sm",children:[z.jsx("div",{className:yi(t&&"animate-pulse","h-6 w-32 bg-gray-100 font-bold")}),z.jsx("div",{className:yi(t&&"animate-pulse","ml-1 h-6 w-32 bg-gray-100")})]})]}),z.jsx("div",{className:"flex flex-col md:ml-auto",children:z.jsx("div",{className:yi(t&&"animate-pulse","h-6 w-32 bg-gray-100")})})]},"kitaskeleton"+n),IB=({kitas:e,className:t})=>{const{generateElementScrollAnchor:n}=YT(),i=At.useMemo(()=>{if(e===null)return null;const c=e.length;return c<3?null:c<5?2:c<10?3:4},[e]);return z.jsx("div",{className:yi("gap flex flex-col gap-2 px-4 sm:px-6 md:px-8 lg:px-0",t),children:e!==null?e.length>0?e.map((c,d)=>i===d?z.jsxs(z.Fragment,{children:[z.jsx(Jie,{}),z.jsx(GD,{id:n(c.uuid),kita:c})]}):z.jsx(GD,{id:n(c.uuid),kita:c})):z.jsx("div",{className:"text-center text-gray-500",children:"Keine Kitas gefunden"}):Array.from({length:15}).map((c,d)=>z.jsx(kB,{index:d},"kitaitemskeleton"+d))})},jw=({children:e,...t})=>z.jsx(ni.div,{className:"flex w-full items-center justify-center rounded-lg bg-slate-200 py-8",...t,children:z.jsx("span",{className:"text-left w-96",children:e})}),Yie=()=>z.jsx(lS,{children:z.jsx("div",{className:"flex w-full flex-col",children:z.jsxs(ni.div,{className:"mb-20 mt-6",exit:{height:0,margin:0},children:[z.jsx("h3",{className:"mb-3 text-3xl font-black",children:"Starten Sie mit uns Ihre Suche"}),z.jsxs("p",{className:"text-base font-medium",children:["Entdecken Sie mit unserer innovativen Web-Applikation spielend leicht die 50 nächstgelegenen Kindergärten basierend auf Ihrer Adresse, sortiert nach Entfernung. Verfolgen Sie mühelos den Verfügbarkeitsstatus der Einrichtungen gemäß berlin.de. Und falls Ihre Wunsch-Kita keinen Platz hat, können Sie sich für Benachrichtigungen über neu verfügbare Plätze eintragen.",z.jsx("br",{}),z.jsx("br",{}),"Kitaplatz, Kinderleicht."]}),z.jsx("h5",{className:"mb-2 mt-8 text-sm font-black uppercase",children:"So geht's"}),z.jsxs("div",{className:"flex flex-col gap-2",children:[z.jsx(jw,{transition:{type:"spring",bounce:0},initial:{opacity:0,x:-75},animate:{opacity:1,x:0},exit:{opacity:0,x:-75},children:"1. Geben Sie Ihre Adresse ein"},"start-search-information-step-1"),z.jsx(jw,{transition:{type:"spring",bounce:0},initial:{opacity:0,x:-50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},children:"2. Wählen Sie den Start-Monat aus"},"start-search-information-step-2"),z.jsx(jw,{transition:{type:"spring",bounce:0},initial:{opacity:0,x:-25},animate:{opacity:1,x:0},exit:{opacity:0,x:-25},children:"3. Erhalten Sie eine Liste von Kitas in Ihrer Nähe"},"start-search-information-step-3")]})]},"start-search-information")})}),Qie=({children:e})=>{const{kitas:t}=Td(),{listRef:n}=YT(),{submitted:i}=Yc(),c=!i,d=!t||(t==null?void 0:t.length)===0;return z.jsx("div",{className:"xs:page-padding sm:page-padding md:page-padding lg:page-padding absolute z-50 flex h-full w-full flex-col rounded-t-xl px-5 py-8 lg:relative lg:z-0 lg:max-w-[900px] xl:w-1/2 xl:pl-0 xl:pr-6",children:z.jsxs(lS,{children:[c&&z.jsx(ni.div,{transition:{type:"spring",bounce:"0"},initial:{x:-100},animate:{x:0},exit:{height:0,opacity:0},children:z.jsx(Yie,{})},"start-search-information-container"),z.jsx(ni.div,{ref:n,className:"flex flex-col gap-2 overflow-y-scroll",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"spring",bounce:0,delay:.1},children:z.jsx(lS,{children:d?z.jsxs(ni.div,{className:"flex w-full flex-col items-start gap-2",style:{overflow:"hidden"},children:[!c&&z.jsxs(ni.div,{transition:{type:"spring",bounce:0},initial:{opacity:0,x:-100,height:0},animate:{opacity:1,x:0,height:"auto"},exit:{opacity:0,x:-100,height:"auto"},className:"w-full",children:[z.jsx("div",{className:"mb-2 mt-2 h-7 w-1/2 animate-pulse bg-slate-200"}),z.jsx("div",{className:"mb-4 h-5 w-2/3 animate-pulse bg-slate-200"})]},"start-search-information-skeleton-headline"),[.95,.6,.3,.15,.05,.05,.05,.05,.05].map((p,s)=>z.jsx(ni.div,{transition:{type:"spring",delay:s*.05,bounce:0},initial:{opacity:0,y:200},animate:{y:0,opacity:c?p:1},className:"w-full",children:z.jsx(kB,{animate:!c})},`start-search-information-skeleton-${s}`))]},"start-search-information-skeletons"):z.jsxs(ni.div,{initial:{opacity:0},animate:{opacity:1},transition:{type:"spring",bounce:0},children:[z.jsxs("div",{className:"mb-4 flex flex-col gap-1",children:[z.jsxs("span",{className:"text-xl font-extrabold text-gray-800",children:[(t==null?void 0:t.length)||0," Einrichtungen in der Nähe"]}),z.jsxs("span",{className:"text-gray-500",children:["Informationen und Verfügbarkeiten nach"," ",z.jsx("a",{className:"font-bold text-happy-blue",target:"_blank",href:"https://berlin.de",children:"berlin.de"})]})]}),z.jsx("div",{className:"flex flex-row items-start",children:z.jsx(IB,{className:"w-full",kitas:t})})]},"desktop-kita-list-")})},"desktop-kita-list")]})})},eoe="modulepreload",toe=function(e){return"/"+e},HD={},noe=function(t,n,i){if(!n||n.length===0)return t();const c=document.getElementsByTagName("link");return Promise.all(n.map(d=>{if(d=toe(d),d in HD)return;HD[d]=!0;const p=d.endsWith(".css"),s=p?'[rel="stylesheet"]':"";if(!!i)for(let E=c.length-1;E>=0;E--){const A=c[E];if(A.href===d&&(!p||A.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${s}`))return;const S=document.createElement("link");if(S.rel=p?"stylesheet":eoe,p||(S.as="script",S.crossOrigin=""),S.href=d,document.head.appendChild(S),p)return new Promise((E,A)=>{S.addEventListener("load",E),S.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})})).then(()=>t()).catch(d=>{const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d})},QT=q.createContext(null),roe=e=>{const[t,n]=q.useState({}),i=q.useCallback((d,p="default")=>{n(s=>{if(p==="current")throw new Error("'current' cannot be used as map id");if(s[p])throw new Error(`Multiple maps with the same id: ${p}`);return{...s,[p]:d}})},[]),c=q.useCallback((d="default")=>{n(p=>{if(p[d]){const s={...p};return delete s[d],s}return p})},[]);return q.createElement(QT.Provider,{value:{maps:t,onMapMount:i,onMapUnmount:c}},e.children)};function ioe(){var e;const t=(e=q.useContext(QT))===null||e===void 0?void 0:e.maps,n=q.useContext(uy);return q.useMemo(()=>({...t,current:n==null?void 0:n.map}),[t,n])}function ooe(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,i=Array.isArray(e)?e[1]:e?e.y:0,c=Array.isArray(t)?t[0]:t?t.x:0,d=Array.isArray(t)?t[1]:t?t.y:0;return n===c&&i===d}function El(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!El(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(const c of n)if(!t.hasOwnProperty(c)||!El(e[c],t[c]))return!1;return!0}return!1}function soe(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function ZD(e,t){if(!e.getProjection)return;const n=e.getProjection(),i=t.getProjection();El(n,i)||t.setProjection(n)}function qD(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function KD(e,t){const n=t.viewState||t;let i=!1;if("longitude"in n&&"latitude"in n){const c=e.center;e.center=new c.constructor(n.longitude,n.latitude),i=i||c!==e.center}if("zoom"in n){const c=e.zoom;e.zoom=n.zoom,i=i||c!==e.zoom}if("bearing"in n){const c=e.bearing;e.bearing=n.bearing,i=i||c!==e.bearing}if("pitch"in n){const c=e.pitch;e.pitch=n.pitch,i=i||c!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(i=!0,e.padding=n.padding),i}const aoe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function XD(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const i of e.layers)t[i.id]=i;const n=e.layers.map(i=>{let c=null;"interactive"in i&&(c=Object.assign({},i),delete c.interactive);const d=t[i.ref];if(d){c=c||Object.assign({},i),delete c.ref;for(const p of aoe)p in d&&(c[p]=d[p])}return c||i});return{...e,layers:n}}const JD={version:8,sources:{},layers:[]},YD={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Nw={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},QD={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},loe=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],coe=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Af{constructor(t,n,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=c=>{const d=this.props[QD[c.type]];d?d(c):c.type==="error"&&console.error(c.error)},this._onPointerEvent=c=>{(c.type==="mousemove"||c.type==="mouseout")&&this._updateHover(c);const d=this.props[YD[c.type]];d&&(this.props.interactiveLayerIds&&c.type!=="mouseover"&&c.type!=="mouseout"&&(c.features=this._hoveredFeatures||this._queryRenderedFeatures(c.point)),d(c),delete c.features)},this._onCameraEvent=c=>{if(!this._internalUpdate){const d=this.props[Nw[c.type]];d&&d(c)}c.type in this._deferredEvents&&(this._deferredEvents[c.type]=!1)},this._MapClass=t,this.props=n,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const n=this.props;this.props=t;const i=this._updateSettings(t,n);i&&this._createShadowTransform(this._map);const c=this._updateSize(t),d=this._updateViewState(t,!0);this._updateStyle(t,n),this._updateStyleComponents(t,n),this._updateHandlers(t,n),(i||c||d&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const i=Af.savedMaps.pop();if(!i)return null;const c=i.map,d=c.getContainer();for(n.className=d.className;d.childNodes.length>0;)n.appendChild(d.childNodes[0]);c._container=n;const p=c._resizeObserver;p&&(p.disconnect(),p.observe(n)),i.setProps({...t,styleDiffing:!1}),c.resize();const{initialViewState:s}=t;return s&&(s.bounds?c.fitBounds(s.bounds,{...s.fitBoundsOptions,duration:0}):i._updateViewState(s,!1)),c.isStyleLoaded()?c.fire("load"):c.once("styledata",()=>c.fire("load")),c._update(),i}_initialize(t){const{props:n}=this,{mapStyle:i=JD}=n,c={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||uoe()||null,container:t,style:XD(i)},d=c.initialViewState||c.viewState||c;if(Object.assign(c,{center:[d.longitude||0,d.latitude||0],zoom:d.zoom||0,pitch:d.pitch||0,bearing:d.bearing||0}),n.gl){const E=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=E,n.gl)}const p=new this._MapClass(c);d.padding&&p.setPadding(d.padding),n.cursor&&(p.getCanvas().style.cursor=n.cursor),this._createShadowTransform(p);const s=p._render;p._render=E=>{this._inRender=!0,s.call(p,E),this._inRender=!1};const _=p._renderTaskQueue.run;p._renderTaskQueue.run=E=>{_.call(p._renderTaskQueue,E),this._onBeforeRepaint()},p.on("render",()=>this._onAfterRepaint());const S=p.fire;p.fire=this._fireEvent.bind(this,S),p.on("resize",()=>{this._renderTransform.resize(p.transform.width,p.transform.height)}),p.on("styledata",()=>{this._updateStyleComponents(this.props,{}),ZD(p.transform,this._renderTransform)}),p.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const E in YD)p.on(E,this._onPointerEvent);for(const E in Nw)p.on(E,this._onCameraEvent);for(const E in QD)p.on(E,this._onEvent);this._map=p}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),Af.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const n=soe(t.transform);t.painter.transform=n,this._renderTransform=n}_updateSize(t){const{viewState:n}=t;if(n){const i=this._map;if(n.width!==i.transform.width||n.height!==i.transform.height)return i.resize(),!0}return!1}_updateViewState(t,n){if(this._internalUpdate)return!1;const i=this._map,c=this._renderTransform,{zoom:d,pitch:p,bearing:s}=c,_=i.isMoving();_&&(c.cameraElevationReference="sea");const S=KD(c,{...qD(i.transform),...t});if(_&&(c.cameraElevationReference="ground"),S&&n){const E=this._deferredEvents;E.move=!0,E.zoom||(E.zoom=d!==c.zoom),E.rotate||(E.rotate=s!==c.bearing),E.pitch||(E.pitch=p!==c.pitch)}return _||KD(i.transform,t),S}_updateSettings(t,n){const i=this._map;let c=!1;for(const d of loe)if(d in t&&!El(t[d],n[d])){c=!0;const p=i[`set${d[0].toUpperCase()}${d.slice(1)}`];p==null||p.call(i,t[d])}return c}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==n.mapStyle){const{mapStyle:i=JD,styleDiffing:c=!0}=t,d={diff:c};return"localIdeographFontFamily"in t&&(d.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(XD(i),d),!0}return!1}_updateStyleComponents(t,n){const i=this._map;let c=!1;return i.isStyleLoaded()&&("light"in t&&i.setLight&&!El(t.light,n.light)&&(c=!0,i.setLight(t.light)),"fog"in t&&i.setFog&&!El(t.fog,n.fog)&&(c=!0,i.setFog(t.fog)),"terrain"in t&&i.setTerrain&&!El(t.terrain,n.terrain)&&(!t.terrain||i.getSource(t.terrain.source))&&(c=!0,i.setTerrain(t.terrain))),c}_updateHandlers(t,n){var i,c;const d=this._map;let p=!1;for(const s of coe){const _=(i=t[s])!==null&&i!==void 0?i:!0,S=(c=n[s])!==null&&c!==void 0?c:!0;El(_,S)||(p=!0,_?d[s].enable(_):d[s].disable())}return p}_queryRenderedFeatures(t){const n=this._map,i=n.transform,{interactiveLayerIds:c=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(t,{layers:c.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=i}}_updateHover(t){var n;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const d=t.type,p=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,s=this._queryRenderedFeatures(t.point),_=s.length>0;!_&&p&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=s,_&&!p&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=d}else this._hoveredFeatures=null}_fireEvent(t,n,i){const c=this._map,d=c.transform,p=typeof n=="string"?n:n.type;return p==="move"&&this._updateViewState(this.props,!1),p in Nw&&(typeof n=="object"&&(n.viewState=qD(d)),this._map.isMoving())?(c.transform=this._renderTransform,t.call(c,n,i),c.transform=d,c):(t.call(c,n,i),c)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const i in this._deferredEvents)this._deferredEvents[i]&&t.fire(i);this._internalUpdate=!1;const n=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{ZD(this._renderTransform,n),t.transform=n}}}Af.savedMaps=[];function uoe(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const doe=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function hoe(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:i=>{const c=t.transform;t.transform=e.transform;const d=t.project(i);return t.transform=c,d},unproject:i=>{const c=t.transform;t.transform=e.transform;const d=t.unproject(i);return t.transform=c,d},queryTerrainElevation:(i,c)=>{const d=t.transform;t.transform=e.transform;const p=t.queryTerrainElevation(i,c);return t.transform=d,p},queryRenderedFeatures:(i,c)=>{const d=t.transform;t.transform=e.transform;const p=t.queryRenderedFeatures(i,c);return t.transform=d,p}};for(const i of foe(t))!(i in n)&&!doe.includes(i)&&(n[i]=t[i].bind(t));return n}function foe(e){const t=new Set;let n=e;for(;n;){for(const i of Object.getOwnPropertyNames(n))i[0]!=="_"&&typeof e[i]=="function"&&i!=="fire"&&i!=="setEventedParent"&&t.add(i);n=Object.getPrototypeOf(n)}return Array.from(t)}const poe=typeof document<"u"?q.useLayoutEffect:q.useEffect,moe=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function goe(e,t){for(const i of moe)i in t&&(e[i]=t[i]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(n,i=>{i&&console.error(i)},!0)}const uy=q.createContext(null);function yoe(e,t,n){const i=q.useContext(QT),[c,d]=q.useState(null),p=q.useRef(),{current:s}=q.useRef({mapLib:null,map:null});q.useEffect(()=>{const E=e.mapLib;let A=!0,I;return Promise.resolve(E||n).then(O=>{if(!A)return;if(!O)throw new Error("Invalid mapLib");const N="Map"in O?O:O.default;if(!N.Map)throw new Error("Invalid mapLib");if(goe(N,e),!N.supported||N.supported(e))e.reuseMaps&&(I=Af.reuse(e,p.current)),I||(I=new Af(N.Map,e,p.current)),s.map=hoe(I),s.mapLib=N,d(I),i==null||i.onMapMount(s.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(O=>{const{onError:N}=e;N?N({type:"error",target:null,originalEvent:null,error:O}):console.error(O)}),()=>{A=!1,I&&(i==null||i.onMapUnmount(e.id),e.reuseMaps?I.recycle():I.destroy())}},[]),poe(()=>{c&&c.setProps(e)}),q.useImperativeHandle(t,()=>s.map,[c]);const _=q.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),S={height:"100%"};return q.createElement("div",{id:e.id,ref:p,style:_},c&&q.createElement(uy.Provider,{value:s},q.createElement("div",{"mapboxgl-children":"",style:S},e.children)))}const voe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Cd(e,t){if(!e||!t)return;const n=e.style;for(const i in t){const c=t[i];Number.isFinite(c)&&!voe.test(i)?n[i]=`${c}px`:n[i]=c}}function _oe(e,t){const{map:n,mapLib:i}=q.useContext(uy),c=q.useRef({props:e});c.current.props=e;const d=q.useMemo(()=>{let $=!1;q.Children.forEach(e.children,B=>{B&&($=!0)});const K={...e,element:$?document.createElement("div"):null},W=new i.Marker(K);return W.setLngLat([e.longitude,e.latitude]),W.getElement().addEventListener("click",B=>{var U,J;(J=(U=c.current.props).onClick)===null||J===void 0||J.call(U,{type:"click",target:W,originalEvent:B})}),W.on("dragstart",B=>{var U,J;const ee=B;ee.lngLat=d.getLngLat(),(J=(U=c.current.props).onDragStart)===null||J===void 0||J.call(U,ee)}),W.on("drag",B=>{var U,J;const ee=B;ee.lngLat=d.getLngLat(),(J=(U=c.current.props).onDrag)===null||J===void 0||J.call(U,ee)}),W.on("dragend",B=>{var U,J;const ee=B;ee.lngLat=d.getLngLat(),(J=(U=c.current.props).onDragEnd)===null||J===void 0||J.call(U,ee)}),W},[]);q.useEffect(()=>(d.addTo(n.getMap()),()=>{d.remove()}),[]);const{longitude:p,latitude:s,offset:_,style:S,draggable:E=!1,popup:A=null,rotation:I=0,rotationAlignment:O="auto",pitchAlignment:N="auto"}=e;return q.useEffect(()=>{Cd(d.getElement(),S)},[S]),q.useImperativeHandle(t,()=>d,[]),(d.getLngLat().lng!==p||d.getLngLat().lat!==s)&&d.setLngLat([p,s]),_&&!ooe(d.getOffset(),_)&&d.setOffset(_),d.isDraggable()!==E&&d.setDraggable(E),d.getRotation()!==I&&d.setRotation(I),d.getRotationAlignment()!==O&&d.setRotationAlignment(O),d.getPitchAlignment()!==N&&d.setPitchAlignment(N),d.getPopup()!==A&&d.setPopup(A),zf.createPortal(e.children,d.getElement())}const xoe=q.memo(q.forwardRef(_oe));function e3(e){return new Set(e?e.trim().split(/\s+/):[])}function boe(e,t){const{map:n,mapLib:i}=q.useContext(uy),c=q.useMemo(()=>document.createElement("div"),[]),d=q.useRef({props:e});d.current.props=e;const p=q.useMemo(()=>{const s={...e},_=new i.Popup(s);return _.setLngLat([e.longitude,e.latitude]),_.once("open",S=>{var E,A;(A=(E=d.current.props).onOpen)===null||A===void 0||A.call(E,S)}),_},[]);if(q.useEffect(()=>{const s=_=>{var S,E;(E=(S=d.current.props).onClose)===null||E===void 0||E.call(S,_)};return p.on("close",s),p.setDOMContent(c).addTo(n.getMap()),()=>{p.off("close",s),p.isOpen()&&p.remove()}},[]),q.useEffect(()=>{Cd(p.getElement(),e.style)},[e.style]),q.useImperativeHandle(t,()=>p,[]),p.isOpen()&&((p.getLngLat().lng!==e.longitude||p.getLngLat().lat!==e.latitude)&&p.setLngLat([e.longitude,e.latitude]),e.offset&&!El(p.options.offset,e.offset)&&p.setOffset(e.offset),(p.options.anchor!==e.anchor||p.options.maxWidth!==e.maxWidth)&&(p.options.anchor=e.anchor,p.setMaxWidth(e.maxWidth)),p.options.className!==e.className)){const s=e3(p.options.className),_=e3(e.className);for(const S of s)_.has(S)||p.removeClassName(S);for(const S of _)s.has(S)||p.addClassName(S);p.options.className=e.className}return zf.createPortal(e.children,c)}const woe=q.memo(q.forwardRef(boe));function dy(e,t,n,i){const c=q.useContext(uy),d=q.useMemo(()=>e(c),[]);return q.useEffect(()=>{const p=i||n||t,s=typeof t=="function"&&typeof n=="function"?t:null,_=typeof n=="function"?n:typeof t=="function"?t:null,{map:S}=c;return S.hasControl(d)||(S.addControl(d,p==null?void 0:p.position),s&&s(c)),()=>{_&&_(c),S.hasControl(d)&&S.removeControl(d)}},[]),d}function Soe(e){const t=dy(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return q.useEffect(()=>{Cd(t._container,e.style)},[e.style]),null}q.memo(Soe);function Eoe(e){const t=dy(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return q.useEffect(()=>{Cd(t._controlContainer,e.style)},[e.style]),null}q.memo(Eoe);function Toe(e,t){const n=q.useRef({props:e}),i=dy(({mapLib:c})=>{const d=new c.GeolocateControl(e),p=d._setupUI;return d._setupUI=s=>{d._container.hasChildNodes()||p(s)},d.on("geolocate",s=>{var _,S;(S=(_=n.current.props).onGeolocate)===null||S===void 0||S.call(_,s)}),d.on("error",s=>{var _,S;(S=(_=n.current.props).onError)===null||S===void 0||S.call(_,s)}),d.on("outofmaxbounds",s=>{var _,S;(S=(_=n.current.props).onOutOfMaxBounds)===null||S===void 0||S.call(_,s)}),d.on("trackuserlocationstart",s=>{var _,S;(S=(_=n.current.props).onTrackUserLocationStart)===null||S===void 0||S.call(_,s)}),d.on("trackuserlocationend",s=>{var _,S;(S=(_=n.current.props).onTrackUserLocationEnd)===null||S===void 0||S.call(_,s)}),d},{position:e.position});return n.current.props=e,q.useImperativeHandle(t,()=>i,[]),q.useEffect(()=>{Cd(i._container,e.style)},[e.style]),null}q.memo(q.forwardRef(Toe));function Coe(e){const t=dy(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return q.useEffect(()=>{Cd(t._container,e.style)},[e.style]),null}const Aoe=q.memo(Coe);function koe(e){const t=dy(({mapLib:d})=>new d.ScaleControl(e),{position:e.position}),n=q.useRef(e),i=n.current;n.current=e;const{style:c}=e;return e.maxWidth!==void 0&&e.maxWidth!==i.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==i.unit&&t.setUnit(e.unit),q.useEffect(()=>{Cd(t._container,c)},[c]),null}q.memo(koe);function Ioe(){return ioe()}const Poe=noe(()=>Promise.resolve().then(()=>Loe),void 0),Moe=(()=>q.forwardRef(function(t,n){return yoe(t,n,Poe)}))(),PB=xoe,Doe=woe,zoe=Aoe;var MB={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(fj,function(){var n,i,c;function d(s,_){if(!n)n=_;else if(!i)i=_;else{var S="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",E={};n(E),c=_(E),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([S],{type:"text/javascript"})))}}d(["exports"],function(s){var _=typeof self<"u"?self:{},S="2.15.0";let E;const A={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(E==null){const o=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{E={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):o}catch{E=o}}return E},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!A.API_URL)return null;try{const o=new URL(A.API_URL);return o.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":o.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},I={supported:!1,testSupport:function(o){!$&&N&&(K?W(o):O=o)}};let O,N,$=!1,K=!1;function W(o){const r=o.createTexture();o.bindTexture(o.TEXTURE_2D,r);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,N),o.isContextLost())return;I.supported=!0}catch{}o.deleteTexture(r),$=!0}_.document&&(N=_.document.createElement("img"),N.onload=function(){O&&W(O),O=null,K=!0},N.onerror=function(){$=!0,O=null},N.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const B="01";function U(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var J=ee;function ee(o,r,a,u){this.cx=3*o,this.bx=3*(a-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*r,this.by=3*(u-r)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=r,this.p2x=a,this.p2y=u}ee.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,r){if(r===void 0&&(r=1e-6),o<0)return 0;if(o>1)return 1;for(var a=o,u=0;u<8;u++){var f=this.sampleCurveX(a)-o;if(Math.abs(f)<r)return a;var g=this.sampleCurveDerivativeX(a);if(Math.abs(g)<1e-6)break;a-=f/g}var v=0,b=1;for(a=o,u=0;u<20&&(f=this.sampleCurveX(a),!(Math.abs(f-o)<r));u++)o>f?v=a:b=a,a=.5*(b-v)+v;return a},solve:function(o,r){return this.sampleCurveY(this.solveCurveX(o,r))}};var ye=U(J),Q=be;function be(o,r){this.x=o,this.y=r}be.prototype={clone:function(){return new be(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,r){return this.clone()._rotateAround(o,r)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var r=o.x-this.x,a=o.y-this.y;return r*r+a*a},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,r){return Math.atan2(this.x*r-this.y*o,this.x*o+this.y*r)},_matMult:function(o){var r=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=r,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var r=Math.cos(o),a=Math.sin(o),u=a*this.x+r*this.y;return this.x=r*this.x-a*this.y,this.y=u,this},_rotateAround:function(o,r){var a=Math.cos(o),u=Math.sin(o),f=r.y+u*(this.x-r.x)+a*(this.y-r.y);return this.x=r.x+a*(this.x-r.x)-u*(this.y-r.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},be.convert=function(o){return o instanceof be?o:Array.isArray(o)?new be(o[0],o[1]):o};var re=U(Q);const Ie=Math.PI/180,Be=180/Math.PI;function le(o){return o*Ie}function xe(o){return o*Be}const Se=[[0,0],[1,0],[1,1],[0,1]];function oe(o){if(o<=0)return 0;if(o>=1)return 1;const r=o*o,a=r*o;return 4*(o<.5?a:3*(o-r)+a-.75)}function te(o,r,a,u){const f=new ye(o,r,a,u);return function(g){return f.solve(g)}}const Ce=te(.25,.1,.25,1);function ve(o,r,a){return Math.min(a,Math.max(r,o))}function Fe(o,r,a){return(a=ve((a-o)/(r-o),0,1))*a*(3-2*a)}function Ge(o,r,a){const u=a-r,f=((o-r)%u+u)%u+r;return f===r?a:f}function rt(o,r,a){if(!o.length)return a(null,[]);let u=o.length;const f=new Array(o.length);let g=null;o.forEach((v,b)=>{r(v,(T,C)=>{T&&(g=T),f[b]=C,--u==0&&a(g,f)})})}function Ct(o){const r=[];for(const a in o)r.push(o[a]);return r}function It(o,...r){for(const a of r)for(const u in a)o[u]=a[u];return o}let Pt=1;function Kt(){return Pt++}function nn(){return function o(r){return r?(r^Math.random()*(16>>r/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,o)}()}function an(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))}function ct(o){return!!o&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(o)}function Vt(o,r){o.forEach(a=>{r[a]&&(r[a]=r[a].bind(r))})}function ln(o,r){return o.indexOf(r,o.length-r.length)!==-1}function zt(o,r,a){const u={};for(const f in o)u[f]=r.call(a||this,o[f],f,o);return u}function pn(o,r,a){const u={};for(const f in o)r.call(a||this,o[f],f,o)&&(u[f]=o[f]);return u}function Kn(o){return Array.isArray(o)?o.map(Kn):typeof o=="object"&&o?zt(o,Kn):o}const Fr={};function mn(o){Fr[o]||(typeof console<"u"&&console.warn(o),Fr[o]=!0)}function Ut(o,r,a){return(a.y-o.y)*(r.x-o.x)>(r.y-o.y)*(a.x-o.x)}function Vi(o){let r=0;for(let a,u,f=0,g=o.length,v=g-1;f<g;v=f++)a=o[f],u=o[v],r+=(u.x-a.x)*(a.y+u.y);return r}function Le(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ke(o){const r={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(a,u,f,g)=>{const v=f||g;return r[u]=!v||v.toLowerCase(),""}),r["max-age"]){const a=parseInt(r["max-age"],10);isNaN(a)?delete r["max-age"]:r["max-age"]=a}return r}let et=null;function Ot(o){if(et==null){const r=o.navigator?o.navigator.userAgent:null;et=!!o.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return et}function kt(o){try{const r=_[o];return r.setItem("_mapbox_test_",1),r.removeItem("_mapbox_test_"),!0}catch{return!1}}function yt(o,r){return[o[4*r],o[4*r+1],o[4*r+2],o[4*r+3]]}const Zt="mapbox-tiles";let vn=500,Rn=50,bn,_n;function Mn(){try{return _.caches}catch{}}function Sr(){Mn()&&!bn&&(bn=_.caches.open(Zt))}function Er(o){const r=o.indexOf("?");if(r<0)return o;const a=function(f){const g=f.indexOf("?");return g>0?f.slice(g+1).split("&"):[]}(o),u=a.filter(f=>{const g=f.split("=");return g[0]==="language"||g[0]==="worldview"});return u.length?`${o.slice(0,r)}?${u.join("&")}`:o.slice(0,r)}let Si=1/0;const Qn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Qn);class Xn extends Error{constructor(r,a,u){a===401&&ae(u)&&(r+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(r),this.status=a,this.url=u}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Gn=Le()?()=>self.worker&&self.worker.referrer:()=>(_.location.protocol==="blob:"?_.parent:_).location.href,jr=function(o,r){if(!(/^file:/.test(a=o.url)||/^file:/.test(Gn())&&!/^\w+:/.test(a))){if(_.fetch&&_.Request&&_.AbortController&&_.Request.prototype.hasOwnProperty("signal"))return function(u,f){const g=new _.AbortController,v=new _.Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,referrer:Gn(),referrerPolicy:u.referrerPolicy,signal:g.signal});let b=!1,T=!1;const C=(M=v.url).indexOf("sku=")>0&&ae(M);var M;u.type==="json"&&v.headers.set("Accept","application/json");const L=(V,G,X)=>{if(T)return;if(V&&V.message!=="SecurityError"&&mn(V.toString()),G&&X)return R(G);const se=Date.now();_.fetch(v).then(ge=>{if(ge.ok){const Me=C?ge.clone():null;return R(ge,Me,se)}return f(new Xn(ge.statusText,ge.status,u.url))}).catch(ge=>{ge.name!=="AbortError"&&f(new Error(`${ge.message} ${u.url}`))})},R=(V,G,X)=>{(u.type==="arrayBuffer"?V.arrayBuffer():u.type==="json"?V.json():V.text()).then(se=>{T||(G&&X&&function(ge,Me,_e){if(Sr(),!bn)return;const Pe={status:Me.status,statusText:Me.statusText,headers:new _.Headers};Me.headers.forEach((Ye,qe)=>Pe.headers.set(qe,Ye));const Oe=Ke(Me.headers.get("Cache-Control")||"");if(Oe["no-store"])return;Oe["max-age"]&&Pe.headers.set("Expires",new Date(_e+1e3*Oe["max-age"]).toUTCString());const Re=Pe.headers.get("Expires");Re&&(new Date(Re).getTime()-_e<42e4||function(Ye,qe){if(_n===void 0)try{new Response(new ReadableStream),_n=!0}catch{_n=!1}_n?qe(Ye.body):Ye.blob().then(qe)}(Me,Ye=>{const qe=new _.Response(Ye,Pe);Sr(),bn&&bn.then(lt=>lt.put(Er(ge.url),qe)).catch(lt=>mn(lt.message))}))}(v,G,X),b=!0,f(null,se,V.headers.get("Cache-Control"),V.headers.get("Expires")))}).catch(se=>{T||f(new Error(se.message))})};return C?function(V,G){if(Sr(),!bn)return G(null);const X=Er(V.url);bn.then(se=>{se.match(X).then(ge=>{const Me=function(_e){if(!_e)return!1;const Pe=new Date(_e.headers.get("Expires")||0),Oe=Ke(_e.headers.get("Cache-Control")||"");return Pe>Date.now()&&!Oe["no-cache"]}(ge);se.delete(X),Me&&se.put(X,ge.clone()),G(null,ge,Me)}).catch(G)}).catch(G)}(v,L):L(null,null),{cancel:()=>{T=!0,b||g.abort()}}}(o,r);if(Le()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,r,void 0,!0)}var a;return function(u,f){const g=new _.XMLHttpRequest;g.open(u.method||"GET",u.url,!0),u.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const v in u.headers)g.setRequestHeader(v,u.headers[v]);return u.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=u.credentials==="include",g.onerror=()=>{f(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let v=g.response;if(u.type==="json")try{v=JSON.parse(g.response)}catch(b){return f(b)}f(null,v,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else f(new Xn(g.statusText,g.status,u.url))},g.send(u.body),{cancel:()=>g.abort()}}(o,r)},Li=function(o,r){return jr(It(o,{type:"arrayBuffer"}),r)};function Xo(o){const r=_.document.createElement("a");return r.href=o,r.protocol===_.document.location.protocol&&r.host===_.document.location.host}const ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Y,ne;Y=[],ne=0;const Te=function(o,r){if(I.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),ne>=A.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:o,callback:r,cancelled:!1,cancel(){this.cancelled=!0}};return Y.push(g),g}ne++;let a=!1;const u=()=>{if(!a)for(a=!0,ne--;Y.length&&ne<A.MAX_PARALLEL_IMAGE_REQUESTS;){const g=Y.shift(),{requestParameters:v,callback:b,cancelled:T}=g;T||(g.cancel=Te(v,b).cancel)}},f=Li(o,(g,v,b,T)=>{u(),g?r(g):v&&(_.createImageBitmap?function(C,M){const L=new _.Blob([new Uint8Array(C)],{type:"image/png"});_.createImageBitmap(L).then(R=>{M(null,R)}).catch(R=>{M(new Error(`Could not load image because of ${R.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(v,(C,M)=>r(C,M,b,T)):function(C,M){const L=new _.Image,R=_.URL;L.onload=()=>{M(null,L),R.revokeObjectURL(L.src),L.onload=null,_.requestAnimationFrame(()=>{L.src=ke})},L.onerror=()=>M(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const V=new _.Blob([new Uint8Array(C)],{type:"image/png"});L.src=C.byteLength?R.createObjectURL(V):ke}(v,(C,M)=>r(C,M,b,T)))});return{cancel:()=>{f.cancel(),u()}}},ze="NO_ACCESS_TOKEN";function Ve(o){return o.indexOf("mapbox:")===0}function ae(o){return A.API_URL_REGEX.test(o)}function fe(o){return A.API_CDN_URL_REGEX.test(o)}function de(o){return A.API_STYLE_REGEX.test(o)&&!De(o)}function De(o){return A.API_SPRITE_REGEX.test(o)}const He=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function at(o){const r=o.match(He);if(!r)throw new Error("Unable to parse URL object");return{protocol:r[1],authority:r[2],path:r[3]||"/",params:r[4]?r[4].split("&"):[]}}function Qe(o){const r=o.params.length?`?${o.params.join("&")}`:"";return`${o.protocol}://${o.authority}${o.path}${r}`}const vt="mapbox.eventData";function Lt(o){if(!o)return null;const r=o.split(".");if(!r||r.length!==3)return null;try{return JSON.parse(decodeURIComponent(_.atob(r[1]).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Mt{constructor(r){this.type=r,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(r){const a=Lt(A.ACCESS_TOKEN);let u="";return u=a&&a.u?_.btoa(encodeURIComponent(a.u).replace(/%([0-9A-F]{2})/g,(f,g)=>String.fromCharCode(+("0x"+g)))):A.ACCESS_TOKEN||"",r?`${vt}.${r}:${u}`:`${vt}:${u}`}fetchEventData(){const r=kt("localStorage"),a=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{const f=_.localStorage.getItem(a);f&&(this.eventData=JSON.parse(f));const g=_.localStorage.getItem(u);g&&(this.anonId=g)}catch{mn("Unable to read from LocalStorage")}}saveEventData(){const r=kt("localStorage"),a=this.getStorageKey(),u=this.getStorageKey("uuid");if(r)try{_.localStorage.setItem(u,this.anonId),Object.keys(this.eventData).length>=1&&_.localStorage.setItem(a,JSON.stringify(this.eventData))}catch{mn("Unable to write to LocalStorage")}}processRequests(r){}postEvent(r,a,u,f){if(!A.EVENTS_URL)return;const g=at(A.EVENTS_URL);g.params.push(`access_token=${f||A.ACCESS_TOKEN||""}`);const v={event:this.type,created:new Date(r).toISOString()},b=a?It(v,a):v,T={url:Qe(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(C,M){return jr(It(C,{method:"POST"}),M)}(T,C=>{this.pendingRequest=null,u(C),this.saveEventData(),this.processRequests(f)})}queueRequest(r,a){this.queue.push(r),this.processRequests(a)}}const Xt=new class extends Mt{constructor(o){super("appUserTurnstile"),this._customAccessToken=o}postTurnstileEvent(o,r){A.EVENTS_URL&&A.ACCESS_TOKEN&&Array.isArray(o)&&o.some(a=>Ve(a)||ae(a))&&this.queueRequest(Date.now(),r)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const r=Lt(A.ACCESS_TOKEN),a=r?r.u:A.ACCESS_TOKEN;let u=a!==this.eventData.tokenU;ct(this.anonId)||(this.anonId=nn(),u=!0);const f=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),v=new Date(f),b=(f-this.eventData.lastSuccess)/864e5;u=u||b>=1||b<-1||g.getDate()!==v.getDate()}else u=!0;u?this.postEvent(f,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:B,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=f,this.eventData.tokenU=a)},o):this.processRequests()}},cn=Xt.postTurnstileEvent.bind(Xt),qt=new class extends Mt{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(o,r,a,u){this.skuToken=r,this.errorCb=u,A.EVENTS_URL&&(a||A.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},a):this.errorCb(new Error(ze)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:a}=this.queue.shift();r&&this.success[r]||(this.anonId||this.fetchEventData(),ct(this.anonId)||(this.anonId=nn()),this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:S,skuId:B,skuToken:this.skuToken,userId:this.anonId},u=>{u?this.errorCb(u):r&&(this.success[r]=!0)},o))}},wn=qt.postMapLoadEvent.bind(qt),jn=new class extends Mt{constructor(){super("gljs.performance")}postPerformanceEvent(o,r){A.EVENTS_URL&&(o||A.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:r},o)}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:r,performanceData:a}=this.queue.shift(),u=function(f){const g=_.performance.getEntriesByType("resource"),v=_.performance.getEntriesByType("mark"),b=function(R){const V={};if(R){for(const G in R)if(G!=="other")for(const X of R[G]){const se=`${G}ResolveRangeMin`,ge=`${G}ResolveRangeMax`,Me=`${G}RequestCount`,_e=`${G}RequestCachedCount`;V[se]=Math.min(V[se]||1/0,X.startTime),V[ge]=Math.max(V[ge]||-1/0,X.responseEnd);const Pe=Oe=>{V[Oe]===void 0&&(V[Oe]=0),++V[Oe]};X.transferSize!==void 0&&X.transferSize===0&&Pe(_e),Pe(Me)}}return V}(function(R,V){const G={};if(R)for(const X of R){const se=V(X);G[se]===void 0&&(G[se]=[]),G[se].push(X)}return G}(g,yr)),T=_.devicePixelRatio,C=_.navigator.connection||_.navigator.mozConnection||_.navigator.webkitConnection,M={counters:[],metadata:[],attributes:[]},L=(R,V,G)=>{G!=null&&R.push({name:V,value:G.toString()})};for(const R in b)L(M.counters,R,b[R]);if(f.interactionRange[0]!==1/0&&f.interactionRange[1]!==-1/0&&(L(M.counters,"interactionRangeMin",f.interactionRange[0]),L(M.counters,"interactionRangeMax",f.interactionRange[1])),v)for(const R of Object.keys(hn)){const V=hn[R],G=v.find(X=>X.name===V);G&&L(M.counters,V,G.startTime)}return L(M.counters,"visibilityHidden",f.visibilityHidden),L(M.attributes,"style",function(R){if(R)for(const V of R){const G=V.name.split("?")[0];if(de(G)){const X=G.split("/").slice(-2);if(X.length===2)return`mapbox://styles/${X[0]}/${X[1]}`}}}(g)),L(M.attributes,"terrainEnabled",f.terrainEnabled?"true":"false"),L(M.attributes,"fogEnabled",f.fogEnabled?"true":"false"),L(M.attributes,"projection",f.projection),L(M.attributes,"zoom",f.zoom),L(M.metadata,"devicePixelRatio",T),L(M.metadata,"connectionEffectiveType",C?C.effectiveType:void 0),L(M.metadata,"navigatorUserAgent",_.navigator.userAgent),L(M.metadata,"screenWidth",_.screen.width),L(M.metadata,"screenHeight",_.screen.height),L(M.metadata,"windowWidth",_.innerWidth),L(M.metadata,"windowHeight",_.innerHeight),L(M.metadata,"mapWidth",f.width/T),L(M.metadata,"mapHeight",f.height/T),L(M.metadata,"webglRenderer",f.renderer),L(M.metadata,"webglVendor",f.vendor),L(M.metadata,"sdkVersion",S),L(M.metadata,"sdkIdentifier","mapbox-gl-js"),M}(a);for(const f of u.metadata);for(const f of u.counters);for(const f of u.attributes);this.postEvent(r,u,()=>{},o)}},er=jn.postPerformanceEvent.bind(jn),ut=new class extends Mt{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(o,r,a,u){if(!A.API_URL||!A.SESSION_PATH)return;const f=at(A.API_URL+A.SESSION_PATH);f.params.push(`sku=${r||""}`),f.params.push(`access_token=${u||A.ACCESS_TOKEN||""}`);const g={url:Qe(f),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(v,b){return jr(It(v,{method:"GET"}),b)}(g,v=>{this.pendingRequest=null,a(v),this.saveEventData(),this.processRequests(u)})}getSessionAPI(o,r,a,u){this.skuToken=r,this.errorCb=u,A.SESSION_PATH&&A.API_URL&&(a||A.ACCESS_TOKEN?this.queueRequest({id:o,timestamp:Date.now()},a):this.errorCb(new Error(ze)))}processRequests(o){if(this.pendingRequest||this.queue.length===0)return;const{id:r,timestamp:a}=this.queue.shift();r&&this.success[r]||this.getSession(a,this.skuToken,u=>{u?this.errorCb(u):r&&(this.success[r]=!0)},o)}},it=ut.getSessionAPI.bind(ut),Bt=new Set,hn={create:"create",load:"load",fullLoad:"fullLoad"},kn={mark(o){_.performance.mark(o)},measure(o,r,a){_.performance.measure(o,r,a)}};function yr(o){const r=o.name.split("?")[0];return fe(r)&&r.includes("mapbox-gl.js")?"javascript":fe(r)&&r.includes("mapbox-gl.css")?"css":function(a){return A.API_FONTS_REGEX.test(a)}(r)?"fontRange":De(r)?"sprite":de(r)?"style":function(a){return A.API_TILEJSON_REGEX.test(a)}(r)?"tilejson":"other"}const un=_.performance;function Nr(o){const r=o?o.url.toString():void 0;return un.getEntriesByName(r)}let Dn,Qt,nr,zn;const Dr={now:()=>nr!==void 0?nr:_.performance.now(),setNow(o){nr=o},restoreNow(){nr=void 0},frame(o){const r=_.requestAnimationFrame(o);return{cancel:()=>_.cancelAnimationFrame(r)}},getImageData(o,r=0){const{width:a,height:u}=o;zn||(zn=_.document.createElement("canvas"));const f=zn.getContext("2d",{willReadFrequently:!0});if(!f)throw new Error("failed to create canvas 2d context");return(a>zn.width||u>zn.height)&&(zn.width=a,zn.height=u),f.clearRect(-r,-r,a+2*r,u+2*r),f.drawImage(o,0,0,a,u),f.getImageData(-r,-r,a+2*r,u+2*r)},resolveURL:o=>(Dn||(Dn=_.document.createElement("a")),Dn.href=o,Dn.href),get devicePixelRatio(){return _.devicePixelRatio},get prefersReducedMotion(){return!!_.matchMedia&&(Qt==null&&(Qt=_.matchMedia("(prefers-reduced-motion: reduce)")),Qt.matches)}};function io(o,r,a){a[o]&&a[o].indexOf(r)!==-1||(a[o]=a[o]||[],a[o].push(r))}function el(o,r,a){if(a&&a[o]){const u=a[o].indexOf(r);u!==-1&&a[o].splice(u,1)}}class Ui{constructor(r,a={}){It(this,a),this.type=r}}class Ei extends Ui{constructor(r,a={}){super("error",It({error:r},a))}}class Qc{on(r,a){return this._listeners=this._listeners||{},io(r,a,this._listeners),this}off(r,a){return el(r,a,this._listeners),el(r,a,this._oneTimeListeners),this}once(r,a){return a?(this._oneTimeListeners=this._oneTimeListeners||{},io(r,a,this._oneTimeListeners),this):new Promise(u=>this.once(r,u))}fire(r,a){typeof r=="string"&&(r=new Ui(r,a||{}));const u=r.type;if(this.listens(u)){r.target=this;const f=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const b of f)b.call(this,r);const g=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const b of g)el(u,b,this._oneTimeListeners),b.call(this,r);const v=this._eventedParent;v&&(It(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),v.fire(r))}else r instanceof Ei&&console.error(r.error);return this}listens(r){return!!(this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r))}setEventedParent(r,a){return this._eventedParent=r,this._eventedParentData=a,this}}var st=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function qs(o,...r){for(const a of r)for(const u in a)o[u]=a[u];return o}function Hr(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function Ti(o){if(Array.isArray(o))return o.map(Ti);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const r={};for(const a in o)r[a]=Ti(o[a]);return r}return Hr(o)}class hy extends Error{constructor(r,a){super(a),this.message=a,this.key=r}}var ys=hy;class Bf{constructor(r,a=[]){this.parent=r,this.bindings={};for(const[u,f]of a)this.bindings[u]=f}concat(r){return new Bf(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}var fy=Bf;const Vl={kind:"null"},Nt={kind:"number"},Nn={kind:"string"},On={kind:"boolean"},bo={kind:"color"},Jo={kind:"object"},Bn={kind:"value"},wo={kind:"collator"},eu={kind:"formatted"},tl={kind:"resolvedImage"};function Mo(o,r){return{kind:"array",itemType:o,N:r}}function Tr(o){if(o.kind==="array"){const r=Tr(o.itemType);return typeof o.N=="number"?`array<${r}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${r}>`}return o.kind}const py=[Vl,Nt,Nn,On,bo,eu,Jo,Mo(Bn),tl];function Ks(o,r){if(r.kind==="error")return null;if(o.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Ks(o.itemType,r.itemType))&&(typeof o.N!="number"||o.N===r.N))return null}else{if(o.kind===r.kind)return null;if(o.kind==="value"){for(const a of py)if(!Ks(a,r))return null}}return`Expected ${Tr(o)} but found ${Tr(r)} instead.`}function tu(o,r){return r.some(a=>a.kind===o.kind)}function nu(o,r){return r.some(a=>a==="null"?o===null:a==="array"?Array.isArray(o):a==="object"?o&&!Array.isArray(o)&&typeof o=="object":a===typeof o)}var Ff,my={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ru(o){return(o=Math.round(o))<0?0:o>255?255:o}function iu(o){return ru(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function Ad(o){return(r=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:r>1?1:r;var r}function Ul(o,r,a){return a<0?a+=1:a>1&&(a-=1),6*a<1?o+(r-o)*a*6:2*a<1?r:3*a<2?o+(r-o)*(2/3-a)*6:o}try{Ff={}.parseCSSColor=function(o){var r,a=o.replace(/ /g,"").toLowerCase();if(a in my)return my[a].slice();if(a[0]==="#")return a.length===4?(r=parseInt(a.substr(1),16))>=0&&r<=4095?[(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,1]:null:a.length===7&&(r=parseInt(a.substr(1),16))>=0&&r<=16777215?[(16711680&r)>>16,(65280&r)>>8,255&r,1]:null;var u=a.indexOf("("),f=a.indexOf(")");if(u!==-1&&f+1===a.length){var g=a.substr(0,u),v=a.substr(u+1,f-(u+1)).split(","),b=1;switch(g){case"rgba":if(v.length!==4)return null;b=Ad(v.pop());case"rgb":return v.length!==3?null:[iu(v[0]),iu(v[1]),iu(v[2]),b];case"hsla":if(v.length!==4)return null;b=Ad(v.pop());case"hsl":if(v.length!==3)return null;var T=(parseFloat(v[0])%360+360)%360/360,C=Ad(v[1]),M=Ad(v[2]),L=M<=.5?M*(C+1):M+C-M*C,R=2*M-L;return[ru(255*Ul(R,L,T+1/3)),ru(255*Ul(R,L,T)),ru(255*Ul(R,L,T-1/3)),b];default:return null}}return null}}catch{}class oo{constructor(r,a,u,f=1){this.r=r,this.g=a,this.b=u,this.a=f}static parse(r){if(!r)return;if(r instanceof oo)return r;if(typeof r!="string")return;const a=Ff(r);return a?new oo(a[0]/255*a[3],a[1]/255*a[3],a[2]/255*a[3],a[3]):void 0}toString(){const[r,a,u,f]=this.toArray();return`rgba(${Math.round(r)},${Math.round(a)},${Math.round(u)},${f})`}toArray(){const{r,g:a,b:u,a:f}=this;return f===0?[0,0,0,0]:[255*r/f,255*a/f,255*u/f,f]}toArray01(){const{r,g:a,b:u,a:f}=this;return f===0?[0,0,0,0]:[r/f,a/f,u/f,f]}toArray01PremultipliedAlpha(){const{r,g:a,b:u,a:f}=this;return[r,a,u,f]}}oo.black=new oo(0,0,0,1),oo.white=new oo(1,1,1,1),oo.transparent=new oo(0,0,0,0),oo.red=new oo(1,0,0,1),oo.blue=new oo(0,0,1,1);var $r=oo;class jf{constructor(r,a,u){this.sensitivity=r?a?"variant":"case":a?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,a){return this.collator.compare(r,a)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Nf{constructor(r,a,u,f,g){this.text=r.normalize?r.normalize():r,this.image=a,this.scale=u,this.fontStack=f,this.textColor=g}}class so{constructor(r){this.sections=r}static fromString(r){return new so([new Nf(r,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof so?r:so.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}serialize(){const r=["format"];for(const a of this.sections){if(a.image){r.push(["image",a.image.name]);continue}r.push(a.text);const u={};a.fontStack&&(u["text-font"]=["literal",a.fontStack.split(",")]),a.scale&&(u["font-scale"]=a.scale),a.textColor&&(u["text-color"]=["rgba"].concat(a.textColor.toArray())),r.push(u)}return r}}class Do{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Do({name:r,available:!1}):null}serialize(){return["image",this.name]}}function gy(o,r,a,u){return typeof o=="number"&&o>=0&&o<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof a=="number"&&a>=0&&a<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[o,r,a,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[o,r,a,u]:[o,r,a]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ou(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof $r||o instanceof jf||o instanceof so||o instanceof Do)return!0;if(Array.isArray(o)){for(const r of o)if(!ou(r))return!1;return!0}if(typeof o=="object"){for(const r in o)if(!ou(o[r]))return!1;return!0}return!1}function zr(o){if(o===null)return Vl;if(typeof o=="string")return Nn;if(typeof o=="boolean")return On;if(typeof o=="number")return Nt;if(o instanceof $r)return bo;if(o instanceof jf)return wo;if(o instanceof so)return eu;if(o instanceof Do)return tl;if(Array.isArray(o)){const r=o.length;let a;for(const u of o){const f=zr(u);if(a){if(a===f)continue;a=Bn;break}a=f}return Mo(a||Bn,r)}return Jo}function su(o){const r=typeof o;return o===null?"":r==="string"||r==="number"||r==="boolean"?String(o):o instanceof $r||o instanceof so||o instanceof Do?o.toString():JSON.stringify(o)}class $f{constructor(r,a){this.type=r,this.value=a}static parse(r,a){if(r.length!==2)return a.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!ou(r[1]))return a.error("invalid value");const u=r[1];let f=zr(u);const g=a.expectedType;return f.kind!=="array"||f.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(f=g),new $f(f,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof $r?["rgba"].concat(this.value.toArray()):this.value instanceof so?this.value.serialize():this.value}}var nl=$f,Ri=class{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}};const Vf={string:Nn,number:Nt,boolean:On,object:Jo};class Uf{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");let u,f=1;const g=r[0];if(g==="array"){let b,T;if(r.length>2){const C=r[1];if(typeof C!="string"||!(C in Vf)||C==="object")return a.error('The item type argument of "array" must be one of string, number, boolean',1);b=Vf[C],f++}else b=Bn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return a.error('The length argument to "array" must be a positive integer literal',2);T=r[2],f++}u=Mo(b,T)}else u=Vf[g];const v=[];for(;f<r.length;f++){const b=a.parse(r[f],f,Bn);if(!b)return null;v.push(b)}return new Uf(u,v)}evaluate(r){for(let a=0;a<this.args.length;a++){const u=this.args[a].evaluate(r);if(!Ks(this.type,zr(u)))return u;if(a===this.args.length-1)throw new Ri(`Expected value to be of type ${Tr(this.type)}, but found ${Tr(zr(u))} instead.`)}return null}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=this.type,a=[r.kind];if(r.kind==="array"){const u=r.itemType;if(u.kind==="string"||u.kind==="number"||u.kind==="boolean"){a.push(u.kind);const f=r.N;(typeof f=="number"||this.args.length>1)&&a.push(f)}}return a.concat(this.args.map(u=>u.serialize()))}}var Xs=Uf;class ba{constructor(r){this.type=eu,this.sections=r}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const u=r[1];if(!Array.isArray(u)&&typeof u=="object")return a.error("First argument must be an image or text section.");const f=[];let g=!1;for(let v=1;v<=r.length-1;++v){const b=r[v];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let T=null;if(b["font-scale"]&&(T=a.parse(b["font-scale"],1,Nt),!T))return null;let C=null;if(b["text-font"]&&(C=a.parse(b["text-font"],1,Mo(Nn)),!C))return null;let M=null;if(b["text-color"]&&(M=a.parse(b["text-color"],1,bo),!M))return null;const L=f[f.length-1];L.scale=T,L.font=C,L.textColor=M}else{const T=a.parse(r[v],1,Bn);if(!T)return null;const C=T.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return a.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,f.push({content:T,scale:null,font:null,textColor:null})}}return new ba(f)}evaluate(r){return new so(this.sections.map(a=>{const u=a.content.evaluate(r);return zr(u)===tl?new Nf("",u,null,null,null):new Nf(su(u),null,a.scale?a.scale.evaluate(r):null,a.font?a.font.evaluate(r).join(","):null,a.textColor?a.textColor.evaluate(r):null)}))}eachChild(r){for(const a of this.sections)r(a.content),a.scale&&r(a.scale),a.font&&r(a.font),a.textColor&&r(a.textColor)}outputDefined(){return!1}serialize(){const r=["format"];for(const a of this.sections){r.push(a.content.serialize());const u={};a.scale&&(u["font-scale"]=a.scale.serialize()),a.font&&(u["text-font"]=a.font.serialize()),a.textColor&&(u["text-color"]=a.textColor.serialize()),r.push(u)}return r}}class kd{constructor(r){this.type=tl,this.input=r}static parse(r,a){if(r.length!==2)return a.error("Expected two arguments.");const u=a.parse(r[1],1,Nn);return u?new kd(u):a.error("No image name provided.")}evaluate(r){const a=this.input.evaluate(r),u=Do.fromString(a);return u&&r.availableImages&&(u.available=r.availableImages.indexOf(a)>-1),u}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const n1={"to-boolean":On,"to-color":bo,"to-number":Nt,"to-string":Nn};class Wf{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expected at least one argument.");const u=r[0];if((u==="to-boolean"||u==="to-string")&&r.length!==2)return a.error("Expected one argument.");const f=n1[u],g=[];for(let v=1;v<r.length;v++){const b=a.parse(r[v],v,Bn);if(!b)return null;g.push(b)}return new Wf(f,g)}evaluate(r){if(this.type.kind==="boolean")return!!this.args[0].evaluate(r);if(this.type.kind==="color"){let a,u;for(const f of this.args){if(a=f.evaluate(r),u=null,a instanceof $r)return a;if(typeof a=="string"){const g=r.parseColor(a);if(g)return g}else if(Array.isArray(a)&&(u=a.length<3||a.length>4?`Invalid rbga value ${JSON.stringify(a)}: expected an array containing either three or four numeric values.`:gy(a[0],a[1],a[2],a[3]),!u))return new $r(a[0]/255,a[1]/255,a[2]/255,a[3])}throw new Ri(u||`Could not parse color from value '${typeof a=="string"?a:String(JSON.stringify(a))}'`)}if(this.type.kind==="number"){let a=null;for(const u of this.args){if(a=u.evaluate(r),a===null)return 0;const f=Number(a);if(!isNaN(f))return f}throw new Ri(`Could not convert ${JSON.stringify(a)} to number.`)}return this.type.kind==="formatted"?so.fromString(su(this.args[0].evaluate(r))):this.type.kind==="resolvedImage"?Do.fromString(su(this.args[0].evaluate(r))):su(this.args[0].evaluate(r))}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){if(this.type.kind==="formatted")return new ba([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new kd(this.args[0]).serialize();const r=[`to-${this.type.kind}`];return this.eachChild(a=>{r.push(a.serialize())}),r}}var Wl=Wf;const vs=["Unknown","Point","LineString","Polygon"];var Gf=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?vs[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,r=this.featureDistanceData.scale,{x:a,y:u}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(a*r-o[0])+this.featureDistanceData.bearing[1]*(u*r-o[1])}return 0}parseColor(o){let r=this._parseColorCache[o];return r||(r=this._parseColorCache[o]=$r.parse(o)),r}};class rl{constructor(r,a,u,f){this.name=r,this.type=a,this._evaluate=u,this.args=f}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(r=>r.serialize()))}static parse(r,a){const u=r[0],f=rl.definitions[u];if(!f)return a.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(f)?f[0]:f.type,v=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,b=v.filter(([C])=>!Array.isArray(C)||C.length===r.length-1);let T=null;for(const[C,M]of b){T=new Jf(a.registry,a.path,null,a.scope);const L=[];let R=!1;for(let V=1;V<r.length;V++){const G=r[V],X=Array.isArray(C)?C[V-1]:C.type,se=T.parse(G,1+L.length,X);if(!se){R=!0;break}L.push(se)}if(!R)if(Array.isArray(C)&&C.length!==L.length)T.error(`Expected ${C.length} arguments, but found ${L.length} instead.`);else{for(let V=0;V<L.length;V++){const G=Array.isArray(C)?C[V]:C.type,X=L[V];T.concat(V+1).checkSubtype(G,X.type)}if(T.errors.length===0)return new rl(u,g,M,L)}}if(b.length===1)a.errors.push(...T.errors);else{const C=(b.length?b:v).map(([L])=>{return R=L,Array.isArray(R)?`(${R.map(Tr).join(", ")})`:`(${Tr(R.type)}...)`;var R}).join(" | "),M=[];for(let L=1;L<r.length;L++){const R=a.parse(r[L],1+M.length);if(!R)return null;M.push(Tr(R.type))}a.error(`Expected arguments of type ${C}, but found (${M.join(", ")}) instead.`)}return null}static register(r,a){rl.definitions=a;for(const u in a)r[u]=rl}}var Js=rl;class au{constructor(r,a,u){this.type=wo,this.locale=u,this.caseSensitive=r,this.diacriticSensitive=a}static parse(r,a){if(r.length!==2)return a.error("Expected one argument.");const u=r[1];if(typeof u!="object"||Array.isArray(u))return a.error("Collator options argument must be an object.");const f=a.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,On);if(!f)return null;const g=a.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,On);if(!g)return null;let v=null;return u.locale&&(v=a.parse(u.locale,1,Nn),!v)?null:new au(f,g,v)}evaluate(r){return new jf(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}serialize(){const r={};return r["case-sensitive"]=this.caseSensitive.serialize(),r["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(r.locale=this.locale.serialize()),["collator",r]}}const Ys=8192;function Id(o,r){o[0]=Math.min(o[0],r[0]),o[1]=Math.min(o[1],r[1]),o[2]=Math.max(o[2],r[0]),o[3]=Math.max(o[3],r[1])}function Gl(o,r){return!(o[0]<=r[0]||o[2]>=r[2]||o[1]<=r[1]||o[3]>=r[3])}function lu(o,r){const a=(180+o[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,f=Math.pow(2,r.z);return[Math.round(a*f*Ys),Math.round(u*f*Ys)]}function yy(o,r,a){const u=o[0]-r[0],f=o[1]-r[1],g=o[0]-a[0],v=o[1]-a[1];return u*v-g*f==0&&u*g<=0&&f*v<=0}function Pd(o,r){let a=!1;for(let v=0,b=r.length;v<b;v++){const T=r[v];for(let C=0,M=T.length;C<M-1;C++){if(yy(o,T[C],T[C+1]))return!1;(f=T[C])[1]>(u=o)[1]!=(g=T[C+1])[1]>u[1]&&u[0]<(g[0]-f[0])*(u[1]-f[1])/(g[1]-f[1])+f[0]&&(a=!a)}}var u,f,g;return a}function Hf(o,r){for(let a=0;a<r.length;a++)if(Pd(o,r[a]))return!0;return!1}function Zf(o,r,a,u){const f=u[0]-a[0],g=u[1]-a[1],v=(o[0]-a[0])*g-f*(o[1]-a[1]),b=(r[0]-a[0])*g-f*(r[1]-a[1]);return v>0&&b<0||v<0&&b>0}function Hl(o,r,a){for(const C of a)for(let M=0;M<C.length-1;++M)if((b=[(v=C[M+1])[0]-(g=C[M])[0],v[1]-g[1]])[0]*(T=[(f=r)[0]-(u=o)[0],f[1]-u[1]])[1]-b[1]*T[0]!=0&&Zf(u,f,g,v)&&Zf(g,v,u,f))return!0;var u,f,g,v,b,T;return!1}function Jn(o,r){for(let a=0;a<o.length;++a)if(!Pd(o[a],r))return!1;for(let a=0;a<o.length-1;++a)if(Hl(o[a],o[a+1],r))return!1;return!0}function r1(o,r){for(let a=0;a<r.length;a++)if(Jn(o,r[a]))return!0;return!1}function qf(o,r,a){const u=[];for(let f=0;f<o.length;f++){const g=[];for(let v=0;v<o[f].length;v++){const b=lu(o[f][v],a);Id(r,b),g.push(b)}u.push(g)}return u}function vy(o,r,a){const u=[];for(let f=0;f<o.length;f++){const g=qf(o[f],r,a);u.push(g)}return u}function Kf(o,r,a,u){if(o[0]<a[0]||o[0]>a[2]){const f=.5*u;let g=o[0]-a[0]>f?-u:a[0]-o[0]>f?u:0;g===0&&(g=o[0]-a[2]>f?-u:a[2]-o[0]>f?u:0),o[0]+=g}Id(r,o)}function _y(o,r,a,u){const f=Math.pow(2,u.z)*Ys,g=[u.x*Ys,u.y*Ys],v=[];if(!o)return v;for(const b of o)for(const T of b){const C=[T.x+g[0],T.y+g[1]];Kf(C,r,a,f),v.push(C)}return v}function Xf(o,r,a,u){const f=Math.pow(2,u.z)*Ys,g=[u.x*Ys,u.y*Ys],v=[];if(!o)return v;for(const T of o){const C=[];for(const M of T){const L=[M.x+g[0],M.y+g[1]];Id(r,L),C.push(L)}v.push(C)}if(r[2]-r[0]<=f/2){(b=r)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const T of v)for(const C of T)Kf(C,r,a,f)}var b;return v}class Zl{constructor(r,a){this.type=On,this.geojson=r,this.geometries=a}static parse(r,a){if(r.length!==2)return a.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(ou(r[1])){const u=r[1];if(u.type==="FeatureCollection")for(let f=0;f<u.features.length;++f){const g=u.features[f].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Zl(u,u.features[f].geometry)}else if(u.type==="Feature"){const f=u.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Zl(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new Zl(u,u)}return a.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(a,u){const f=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const b=qf(u.coordinates,g,v),T=_y(a.geometry(),f,g,v);if(!Gl(f,g))return!1;for(const C of T)if(!Pd(C,b))return!1}if(u.type==="MultiPolygon"){const b=vy(u.coordinates,g,v),T=_y(a.geometry(),f,g,v);if(!Gl(f,g))return!1;for(const C of T)if(!Hf(C,b))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(a,u){const f=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],v=a.canonicalID();if(!v)return!1;if(u.type==="Polygon"){const b=qf(u.coordinates,g,v),T=Xf(a.geometry(),f,g,v);if(!Gl(f,g))return!1;for(const C of T)if(!Jn(C,b))return!1}if(u.type==="MultiPolygon"){const b=vy(u.coordinates,g,v),T=Xf(a.geometry(),f,g,v);if(!Gl(f,g))return!1;for(const C of T)if(!r1(C,b))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Md=Zl;function ql(o){if(o instanceof Js&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof Md)return!1;let r=!0;return o.eachChild(a=>{r&&!ql(a)&&(r=!1)}),r}function Qs(o){if(o instanceof Js&&o.name==="feature-state")return!1;let r=!0;return o.eachChild(a=>{r&&!Qs(a)&&(r=!1)}),r}function il(o,r){if(o instanceof Js&&r.indexOf(o.name)>=0)return!1;let a=!0;return o.eachChild(u=>{a&&!il(u,r)&&(a=!1)}),a}class Dd{constructor(r,a){this.type=a.type,this.name=r,this.boundExpression=a}static parse(r,a){if(r.length!==2||typeof r[1]!="string")return a.error("'var' expression requires exactly one string literal argument.");const u=r[1];return a.scope.has(u)?new Dd(u,a.scope.get(u)):a.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var xy=Dd;class cu{constructor(r,a=[],u,f=new fy,g=[]){this.registry=r,this.path=a,this.key=a.map(v=>`[${v}]`).join(""),this.scope=f,this.errors=g,this.expectedType=u}parse(r,a,u,f,g={}){return a?this.concat(a,u,f)._parse(r,g):this._parse(r,g)}_parse(r,a){function u(f,g,v){return v==="assert"?new Xs(g,[f]):v==="coerce"?new Wl(g,[f]):f}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=r[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[f];if(g){let v=g.parse(r,this);if(!v)return null;if(this.expectedType){const b=this.expectedType,T=v.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||T.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string"){if(this.checkSubtype(b,T))return null}else v=u(v,b,a.typeAnnotation||"coerce");else v=u(v,b,a.typeAnnotation||"assert")}if(!(v instanceof nl)&&v.type.kind!=="resolvedImage"&&Yf(v)){const b=new Gf;try{v=new nl(v.type,v.evaluate(b))}catch(T){return this.error(T.message),null}}return v}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,a,u){const f=typeof r=="number"?this.path.concat(r):this.path,g=u?this.scope.concat(u):this.scope;return new cu(this.registry,f,a||null,g,this.errors)}error(r,...a){const u=`${this.key}${a.map(f=>`[${f}]`).join("")}`;this.errors.push(new ys(u,r))}checkSubtype(r,a){const u=Ks(r,a);return u&&this.error(u),u}}var Jf=cu;function Yf(o){if(o instanceof xy)return Yf(o.boundExpression);if(o instanceof Js&&o.name==="error"||o instanceof au||o instanceof Md)return!1;const r=o instanceof Wl||o instanceof Xs;let a=!0;return o.eachChild(u=>{a=r?a&&Yf(u):a&&u instanceof nl}),!!a&&ql(o)&&il(o,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function zd(o,r){const a=o.length-1;let u,f,g=0,v=a,b=0;for(;g<=v;)if(b=Math.floor((g+v)/2),u=o[b],f=o[b+1],u<=r){if(b===a||r<f)return b;g=b+1}else{if(!(u>r))throw new Ri("Input is not a number.");v=b-1}return 0}class Ld{constructor(r,a,u){this.type=r,this.input=a,this.labels=[],this.outputs=[];for(const[f,g]of u)this.labels.push(f),this.outputs.push(g)}static parse(r,a){if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");const u=a.parse(r[1],1,Nt);if(!u)return null;const f=[];let g=null;a.expectedType&&a.expectedType.kind!=="value"&&(g=a.expectedType);for(let v=1;v<r.length;v+=2){const b=v===1?-1/0:r[v],T=r[v+1],C=v,M=v+1;if(typeof b!="number")return a.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(f.length&&f[f.length-1][0]>=b)return a.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const L=a.parse(T,M,g);if(!L)return null;g=g||L.type,f.push([b,L])}return new Ld(g,u,f)}evaluate(r){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(r);const f=this.input.evaluate(r);if(f<=a[0])return u[0].evaluate(r);const g=a.length;return f>=a[g-1]?u[g-1].evaluate(r):u[zd(a,f)].evaluate(r)}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){const r=["step",this.input.serialize()];for(let a=0;a<this.labels.length;a++)a>0&&r.push(this.labels[a]),r.push(this.outputs[a].serialize());return r}}var Qf=Ld;function Vn(o,r,a){return o*(1-a)+r*a}var uu=Object.freeze({__proto__:null,array:function(o,r,a){return o.map((u,f)=>Vn(u,r[f],a))},color:function(o,r,a){return new $r(Vn(o.r,r.r,a),Vn(o.g,r.g,a),Vn(o.b,r.b,a),Vn(o.a,r.a,a))},number:Vn});const by=.95047,ep=1.08883,wy=4/29,ol=6/29,tp=3*ol*ol,i1=ol*ol*ol,o1=Math.PI/180,s1=180/Math.PI;function np(o){return o>i1?Math.pow(o,1/3):o/tp+wy}function rp(o){return o>ol?o*o*o:tp*(o-wy)}function ip(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function Rd(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Sy(o){const r=Rd(o.r),a=Rd(o.g),u=Rd(o.b),f=np((.4124564*r+.3575761*a+.1804375*u)/by),g=np((.2126729*r+.7151522*a+.072175*u)/1);return{l:116*g-16,a:500*(f-g),b:200*(g-np((.0193339*r+.119192*a+.9503041*u)/ep)),alpha:o.a}}function Ey(o){let r=(o.l+16)/116,a=isNaN(o.a)?r:r+o.a/500,u=isNaN(o.b)?r:r-o.b/200;return r=1*rp(r),a=by*rp(a),u=ep*rp(u),new $r(ip(3.2404542*a-1.5371385*r-.4985314*u),ip(-.969266*a+1.8760108*r+.041556*u),ip(.0556434*a-.2040259*r+1.0572252*u),o.alpha)}function a1(o,r,a){const u=r-o;return o+a*(u>180||u<-180?u-360*Math.round(u/360):u)}const du={forward:Sy,reverse:Ey,interpolate:function(o,r,a){return{l:Vn(o.l,r.l,a),a:Vn(o.a,r.a,a),b:Vn(o.b,r.b,a),alpha:Vn(o.alpha,r.alpha,a)}}},Kl={forward:function(o){const{l:r,a,b:u}=Sy(o),f=Math.atan2(u,a)*s1;return{h:f<0?f+360:f,c:Math.sqrt(a*a+u*u),l:r,alpha:o.a}},reverse:function(o){const r=o.h*o1,a=o.c;return Ey({l:o.l,a:Math.cos(r)*a,b:Math.sin(r)*a,alpha:o.alpha})},interpolate:function(o,r,a){return{h:a1(o.h,r.h,a),c:Vn(o.c,r.c,a),l:Vn(o.l,r.l,a),alpha:Vn(o.alpha,r.alpha,a)}}};var op=Object.freeze({__proto__:null,hcl:Kl,lab:du});class hu{constructor(r,a,u,f,g){this.type=r,this.operator=a,this.interpolation=u,this.input=f,this.labels=[],this.outputs=[];for(const[v,b]of g)this.labels.push(v),this.outputs.push(b)}static interpolationFactor(r,a,u,f){let g=0;if(r.name==="exponential")g=sp(a,r.base,u,f);else if(r.name==="linear")g=sp(a,1,u,f);else if(r.name==="cubic-bezier"){const v=r.controlPoints;g=new ye(v[0],v[1],v[2],v[3]).solve(sp(a,1,u,f))}return g}static parse(r,a){let[u,f,g,...v]=r;if(!Array.isArray(f)||f.length===0)return a.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const C=f[1];if(typeof C!="number")return a.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:C}}else{if(f[0]!=="cubic-bezier")return a.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const C=f.slice(1);if(C.length!==4||C.some(M=>typeof M!="number"||M<0||M>1))return a.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:C}}}if(r.length-1<4)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return a.error("Expected an even number of arguments.");if(g=a.parse(g,2,Nt),!g)return null;const b=[];let T=null;u==="interpolate-hcl"||u==="interpolate-lab"?T=bo:a.expectedType&&a.expectedType.kind!=="value"&&(T=a.expectedType);for(let C=0;C<v.length;C+=2){const M=v[C],L=v[C+1],R=C+3,V=C+4;if(typeof M!="number")return a.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',R);if(b.length&&b[b.length-1][0]>=M)return a.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',R);const G=a.parse(L,V,T);if(!G)return null;T=T||G.type,b.push([M,G])}return T.kind==="number"||T.kind==="color"||T.kind==="array"&&T.itemType.kind==="number"&&typeof T.N=="number"?new hu(T,u,f,g,b):a.error(`Type ${Tr(T)} is not interpolatable.`)}evaluate(r){const a=this.labels,u=this.outputs;if(a.length===1)return u[0].evaluate(r);const f=this.input.evaluate(r);if(f<=a[0])return u[0].evaluate(r);const g=a.length;if(f>=a[g-1])return u[g-1].evaluate(r);const v=zd(a,f),b=hu.interpolationFactor(this.interpolation,f,a[v],a[v+1]),T=u[v].evaluate(r),C=u[v+1].evaluate(r);return this.operator==="interpolate"?uu[this.type.kind.toLowerCase()](T,C,b):this.operator==="interpolate-hcl"?Kl.reverse(Kl.interpolate(Kl.forward(T),Kl.forward(C),b)):du.reverse(du.interpolate(du.forward(T),du.forward(C),b))}eachChild(r){r(this.input);for(const a of this.outputs)r(a)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}serialize(){let r;r=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const a=[this.operator,r,this.input.serialize()];for(let u=0;u<this.labels.length;u++)a.push(this.labels[u],this.outputs[u].serialize());return a}}function sp(o,r,a,u){const f=u-a,g=o-a;return f===0?0:r===1?g/f:(Math.pow(r,g)-1)/(Math.pow(r,f)-1)}var _s=hu;class Od{constructor(r,a){this.type=r,this.args=a}static parse(r,a){if(r.length<2)return a.error("Expectected at least one argument.");let u=null;const f=a.expectedType;f&&f.kind!=="value"&&(u=f);const g=[];for(const b of r.slice(1)){const T=a.parse(b,1+g.length,u,void 0,{typeAnnotation:"omit"});if(!T)return null;u=u||T.type,g.push(T)}const v=f&&g.some(b=>Ks(f,b.type));return new Od(v?Bn:u,g)}evaluate(r){let a,u=null,f=0;for(const g of this.args){if(f++,u=g.evaluate(r),u&&u instanceof Do&&!u.available&&(a||(a=u),u=null,f===this.args.length))return a;if(u!==null)break}return u}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}serialize(){const r=["coalesce"];return this.eachChild(a=>{r.push(a.serialize())}),r}}var ap=Od;class Bd{constructor(r,a){this.type=a.type,this.bindings=[].concat(r),this.result=a}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const a of this.bindings)r(a[1]);r(this.result)}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const u=[];for(let g=1;g<r.length-1;g+=2){const v=r[g];if(typeof v!="string")return a.error(`Expected string, but found ${typeof v} instead.`,g);if(/[^a-zA-Z0-9_]/.test(v))return a.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=a.parse(r[g+1],g+1);if(!b)return null;u.push([v,b])}const f=a.parse(r[r.length-1],r.length-1,a.expectedType,u);return f?new Bd(u,f):null}outputDefined(){return this.result.outputDefined()}serialize(){const r=["let"];for(const[a,u]of this.bindings)r.push(a,u.serialize());return r.push(this.result.serialize()),r}}var Ty=Bd;class lp{constructor(r,a,u){this.type=r,this.index=a,this.input=u}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=a.parse(r[1],1,Nt),f=a.parse(r[2],2,Mo(a.expectedType||Bn));return u&&f?new lp(f.type.itemType,u,f):null}evaluate(r){const a=this.index.evaluate(r),u=this.input.evaluate(r);if(a<0)throw new Ri(`Array index out of bounds: ${a} < 0.`);if(a>=u.length)throw new Ri(`Array index out of bounds: ${a} > ${u.length-1}.`);if(a!==Math.floor(a))throw new Ri(`Array index must be an integer, but found ${a} instead.`);return u[a]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var l1=lp;class cp{constructor(r,a){this.type=On,this.needle=r,this.haystack=a}static parse(r,a){if(r.length!==3)return a.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const u=a.parse(r[1],1,Bn),f=a.parse(r[2],2,Bn);return u&&f?tu(u.type,[On,Nn,Nt,Vl,Bn])?new cp(u,f):a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(u.type)} instead`):null}evaluate(r){const a=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(u==null)return!1;if(!nu(a,["boolean","string","number","null"]))throw new Ri(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(zr(a))} instead.`);if(!nu(u,["string","array"]))throw new Ri(`Expected second argument to be of type array or string, but found ${Tr(zr(u))} instead.`);return u.indexOf(a)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var Fd=cp;class fu{constructor(r,a,u){this.type=Nt,this.needle=r,this.haystack=a,this.fromIndex=u}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=a.parse(r[1],1,Bn),f=a.parse(r[2],2,Bn);if(!u||!f)return null;if(!tu(u.type,[On,Nn,Nt,Vl,Bn]))return a.error(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(u.type)} instead`);if(r.length===4){const g=a.parse(r[3],3,Nt);return g?new fu(u,f,g):null}return new fu(u,f)}evaluate(r){const a=this.needle.evaluate(r),u=this.haystack.evaluate(r);if(!nu(a,["boolean","string","number","null"]))throw new Ri(`Expected first argument to be of type boolean, string, number or null, but found ${Tr(zr(a))} instead.`);if(!nu(u,["string","array"]))throw new Ri(`Expected second argument to be of type array or string, but found ${Tr(zr(u))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(r);return u.indexOf(a,f)}return u.indexOf(a)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const r=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),r]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var Cy=fu;class up{constructor(r,a,u,f,g,v){this.inputType=r,this.type=a,this.input=u,this.cases=f,this.outputs=g,this.otherwise=v}static parse(r,a){if(r.length<5)return a.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return a.error("Expected an even number of arguments.");let u,f;a.expectedType&&a.expectedType.kind!=="value"&&(f=a.expectedType);const g={},v=[];for(let C=2;C<r.length-1;C+=2){let M=r[C];const L=r[C+1];Array.isArray(M)||(M=[M]);const R=a.concat(C);if(M.length===0)return R.error("Expected at least one branch label.");for(const G of M){if(typeof G!="number"&&typeof G!="string")return R.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return R.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return R.error("Numeric branch labels must be integer values.");if(u){if(R.checkSubtype(u,zr(G)))return null}else u=zr(G);if(g[String(G)]!==void 0)return R.error("Branch labels must be unique.");g[String(G)]=v.length}const V=a.parse(L,C,f);if(!V)return null;f=f||V.type,v.push(V)}const b=a.parse(r[1],1,Bn);if(!b)return null;const T=a.parse(r[r.length-1],r.length-1,f);return T?b.type.kind!=="value"&&a.concat(1).checkSubtype(u,b.type)?null:new up(u,f,b,g,v,T):null}evaluate(r){const a=this.input.evaluate(r);return(zr(a)===this.inputType&&this.outputs[this.cases[a]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["match",this.input.serialize()],a=Object.keys(this.cases).sort(),u=[],f={};for(const v of a){const b=f[this.cases[v]];b===void 0?(f[this.cases[v]]=u.length,u.push([this.cases[v],[v]])):u[b][1].push(v)}const g=v=>this.inputType.kind==="number"?Number(v):v;for(const[v,b]of u)r.push(b.length===1?g(b[0]):b.map(g)),r.push(this.outputs[v].serialize());return r.push(this.otherwise.serialize()),r}}var c1=up;class dp{constructor(r,a,u){this.type=r,this.branches=a,this.otherwise=u}static parse(r,a){if(r.length<4)return a.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return a.error("Expected an odd number of arguments.");let u;a.expectedType&&a.expectedType.kind!=="value"&&(u=a.expectedType);const f=[];for(let v=1;v<r.length-1;v+=2){const b=a.parse(r[v],v,On);if(!b)return null;const T=a.parse(r[v+1],v+1,u);if(!T)return null;f.push([b,T]),u=u||T.type}const g=a.parse(r[r.length-1],r.length-1,u);return g?new dp(u,f,g):null}evaluate(r){for(const[a,u]of this.branches)if(a.evaluate(r))return u.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[a,u]of this.branches)r(a),r(u);r(this.otherwise)}outputDefined(){return this.branches.every(([r,a])=>a.outputDefined())&&this.otherwise.outputDefined()}serialize(){const r=["case"];return this.eachChild(a=>{r.push(a.serialize())}),r}}var Ay=dp;class pu{constructor(r,a,u,f){this.type=r,this.input=a,this.beginIndex=u,this.endIndex=f}static parse(r,a){if(r.length<=2||r.length>=5)return a.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const u=a.parse(r[1],1,Bn),f=a.parse(r[2],2,Nt);if(!u||!f)return null;if(!tu(u.type,[Mo(Bn),Nn,Bn]))return a.error(`Expected first argument to be of type array or string, but found ${Tr(u.type)} instead`);if(r.length===4){const g=a.parse(r[3],3,Nt);return g?new pu(u.type,u,f,g):null}return new pu(u.type,u,f)}evaluate(r){const a=this.input.evaluate(r),u=this.beginIndex.evaluate(r);if(!nu(a,["string","array"]))throw new Ri(`Expected first argument to be of type array or string, but found ${Tr(zr(a))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(r);return a.slice(u,f)}return a.slice(u)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const r=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),r]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var ky=pu;function jd(o,r){return o==="=="||o==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function Iy(o,r,a,u){return u.compare(r,a)===0}function Xl(o,r,a){const u=o!=="=="&&o!=="!=";return class DB{constructor(g,v,b){this.type=On,this.lhs=g,this.rhs=v,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||v.type.kind==="value"}static parse(g,v){if(g.length!==3&&g.length!==4)return v.error("Expected two or three arguments.");const b=g[0];let T=v.parse(g[1],1,Bn);if(!T)return null;if(!jd(b,T.type))return v.concat(1).error(`"${b}" comparisons are not supported for type '${Tr(T.type)}'.`);let C=v.parse(g[2],2,Bn);if(!C)return null;if(!jd(b,C.type))return v.concat(2).error(`"${b}" comparisons are not supported for type '${Tr(C.type)}'.`);if(T.type.kind!==C.type.kind&&T.type.kind!=="value"&&C.type.kind!=="value")return v.error(`Cannot compare types '${Tr(T.type)}' and '${Tr(C.type)}'.`);u&&(T.type.kind==="value"&&C.type.kind!=="value"?T=new Xs(C.type,[T]):T.type.kind!=="value"&&C.type.kind==="value"&&(C=new Xs(T.type,[C])));let M=null;if(g.length===4){if(T.type.kind!=="string"&&C.type.kind!=="string"&&T.type.kind!=="value"&&C.type.kind!=="value")return v.error("Cannot use collator to compare non-string types.");if(M=v.parse(g[3],3,wo),!M)return null}return new DB(T,C,M)}evaluate(g){const v=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(u&&this.hasUntypedArgument){const T=zr(v),C=zr(b);if(T.kind!==C.kind||T.kind!=="string"&&T.kind!=="number")throw new Ri(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${T.kind}, ${C.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const T=zr(v),C=zr(b);if(T.kind!=="string"||C.kind!=="string")return r(g,v,b)}return this.collator?a(g,v,b,this.collator.evaluate(g)):r(g,v,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[o];return this.eachChild(v=>{g.push(v.serialize())}),g}}}const u1=Xl("==",function(o,r,a){return r===a},Iy),d1=Xl("!=",function(o,r,a){return r!==a},function(o,r,a,u){return!Iy(0,r,a,u)}),h1=Xl("<",function(o,r,a){return r<a},function(o,r,a,u){return u.compare(r,a)<0}),f1=Xl(">",function(o,r,a){return r>a},function(o,r,a,u){return u.compare(r,a)>0}),p1=Xl("<=",function(o,r,a){return r<=a},function(o,r,a,u){return u.compare(r,a)<=0}),Py=Xl(">=",function(o,r,a){return r>=a},function(o,r,a,u){return u.compare(r,a)>=0});class Nd{constructor(r,a,u,f,g,v){this.type=Nn,this.number=r,this.locale=a,this.currency=u,this.unit=f,this.minFractionDigits=g,this.maxFractionDigits=v}static parse(r,a){if(r.length!==3)return a.error("Expected two arguments.");const u=a.parse(r[1],1,Nt);if(!u)return null;const f=r[2];if(typeof f!="object"||Array.isArray(f))return a.error("NumberFormat options argument must be an object.");let g=null;if(f.locale&&(g=a.parse(f.locale,1,Nn),!g))return null;let v=null;if(f.currency&&(v=a.parse(f.currency,1,Nn),!v))return null;let b=null;if(f.unit&&(b=a.parse(f.unit,1,Nn),!b))return null;let T=null;if(f["min-fraction-digits"]&&(T=a.parse(f["min-fraction-digits"],1,Nt),!T))return null;let C=null;return f["max-fraction-digits"]&&(C=a.parse(f["max-fraction-digits"],1,Nt),!C)?null:new Nd(u,g,v,b,T,C)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(r):void 0,unit:this.unit?this.unit.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.unit&&r(this.unit),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const r={};return this.locale&&(r.locale=this.locale.serialize()),this.currency&&(r.currency=this.currency.serialize()),this.unit&&(r.unit=this.unit.serialize()),this.minFractionDigits&&(r["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(r["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),r]}}class Jl{constructor(r){this.type=Nt,this.input=r}static parse(r,a){if(r.length!==2)return a.error(`Expected 1 argument, but found ${r.length-1} instead.`);const u=a.parse(r[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?a.error(`Expected argument of type string or array, but found ${Tr(u.type)} instead.`):new Jl(u):null}evaluate(r){const a=this.input.evaluate(r);if(typeof a=="string"||Array.isArray(a))return a.length;throw new Ri(`Expected value to be of type string or array, but found ${Tr(zr(a))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}serialize(){const r=["length"];return this.eachChild(a=>{r.push(a.serialize())}),r}}const My={"==":u1,"!=":d1,">":f1,"<":h1,">=":Py,"<=":p1,array:Xs,at:l1,boolean:Xs,case:Ay,coalesce:ap,collator:au,format:ba,image:kd,in:Fd,"index-of":Cy,interpolate:_s,"interpolate-hcl":_s,"interpolate-lab":_s,length:Jl,let:Ty,literal:nl,match:c1,number:Xs,"number-format":Nd,object:Xs,slice:ky,step:Qf,string:Xs,"to-boolean":Wl,"to-color":Wl,"to-number":Wl,"to-string":Wl,var:xy,within:Md};function Dy(o,[r,a,u,f]){r=r.evaluate(o),a=a.evaluate(o),u=u.evaluate(o);const g=f?f.evaluate(o):1,v=gy(r,a,u,g);if(v)throw new Ri(v);return new $r(r/255*g,a/255*g,u/255*g,g)}function ea(o,r){return o in r}function $d(o,r){const a=r[o];return a===void 0?null:a}function zo(o){return{type:o}}Js.register(My,{error:[{kind:"error"},[Nn],(o,[r])=>{throw new Ri(r.evaluate(o))}],typeof:[Nn,[Bn],(o,[r])=>Tr(zr(r.evaluate(o)))],"to-rgba":[Mo(Nt,4),[bo],(o,[r])=>r.evaluate(o).toArray()],rgb:[bo,[Nt,Nt,Nt],Dy],rgba:[bo,[Nt,Nt,Nt,Nt],Dy],has:{type:On,overloads:[[[Nn],(o,[r])=>ea(r.evaluate(o),o.properties())],[[Nn,Jo],(o,[r,a])=>ea(r.evaluate(o),a.evaluate(o))]]},get:{type:Bn,overloads:[[[Nn],(o,[r])=>$d(r.evaluate(o),o.properties())],[[Nn,Jo],(o,[r,a])=>$d(r.evaluate(o),a.evaluate(o))]]},"feature-state":[Bn,[Nn],(o,[r])=>$d(r.evaluate(o),o.featureState||{})],properties:[Jo,[],o=>o.properties()],"geometry-type":[Nn,[],o=>o.geometryType()],id:[Bn,[],o=>o.id()],zoom:[Nt,[],o=>o.globals.zoom],pitch:[Nt,[],o=>o.globals.pitch||0],"distance-from-center":[Nt,[],o=>o.distanceFromCenter()],"heatmap-density":[Nt,[],o=>o.globals.heatmapDensity||0],"line-progress":[Nt,[],o=>o.globals.lineProgress||0],"sky-radial-progress":[Nt,[],o=>o.globals.skyRadialProgress||0],accumulated:[Bn,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[Nt,zo(Nt),(o,r)=>{let a=0;for(const u of r)a+=u.evaluate(o);return a}],"*":[Nt,zo(Nt),(o,r)=>{let a=1;for(const u of r)a*=u.evaluate(o);return a}],"-":{type:Nt,overloads:[[[Nt,Nt],(o,[r,a])=>r.evaluate(o)-a.evaluate(o)],[[Nt],(o,[r])=>-r.evaluate(o)]]},"/":[Nt,[Nt,Nt],(o,[r,a])=>r.evaluate(o)/a.evaluate(o)],"%":[Nt,[Nt,Nt],(o,[r,a])=>r.evaluate(o)%a.evaluate(o)],ln2:[Nt,[],()=>Math.LN2],pi:[Nt,[],()=>Math.PI],e:[Nt,[],()=>Math.E],"^":[Nt,[Nt,Nt],(o,[r,a])=>Math.pow(r.evaluate(o),a.evaluate(o))],sqrt:[Nt,[Nt],(o,[r])=>Math.sqrt(r.evaluate(o))],log10:[Nt,[Nt],(o,[r])=>Math.log(r.evaluate(o))/Math.LN10],ln:[Nt,[Nt],(o,[r])=>Math.log(r.evaluate(o))],log2:[Nt,[Nt],(o,[r])=>Math.log(r.evaluate(o))/Math.LN2],sin:[Nt,[Nt],(o,[r])=>Math.sin(r.evaluate(o))],cos:[Nt,[Nt],(o,[r])=>Math.cos(r.evaluate(o))],tan:[Nt,[Nt],(o,[r])=>Math.tan(r.evaluate(o))],asin:[Nt,[Nt],(o,[r])=>Math.asin(r.evaluate(o))],acos:[Nt,[Nt],(o,[r])=>Math.acos(r.evaluate(o))],atan:[Nt,[Nt],(o,[r])=>Math.atan(r.evaluate(o))],min:[Nt,zo(Nt),(o,r)=>Math.min(...r.map(a=>a.evaluate(o)))],max:[Nt,zo(Nt),(o,r)=>Math.max(...r.map(a=>a.evaluate(o)))],abs:[Nt,[Nt],(o,[r])=>Math.abs(r.evaluate(o))],round:[Nt,[Nt],(o,[r])=>{const a=r.evaluate(o);return a<0?-Math.round(-a):Math.round(a)}],floor:[Nt,[Nt],(o,[r])=>Math.floor(r.evaluate(o))],ceil:[Nt,[Nt],(o,[r])=>Math.ceil(r.evaluate(o))],"filter-==":[On,[Nn,Bn],(o,[r,a])=>o.properties()[r.value]===a.value],"filter-id-==":[On,[Bn],(o,[r])=>o.id()===r.value],"filter-type-==":[On,[Nn],(o,[r])=>o.geometryType()===r.value],"filter-<":[On,[Nn,Bn],(o,[r,a])=>{const u=o.properties()[r.value],f=a.value;return typeof u==typeof f&&u<f}],"filter-id-<":[On,[Bn],(o,[r])=>{const a=o.id(),u=r.value;return typeof a==typeof u&&a<u}],"filter->":[On,[Nn,Bn],(o,[r,a])=>{const u=o.properties()[r.value],f=a.value;return typeof u==typeof f&&u>f}],"filter-id->":[On,[Bn],(o,[r])=>{const a=o.id(),u=r.value;return typeof a==typeof u&&a>u}],"filter-<=":[On,[Nn,Bn],(o,[r,a])=>{const u=o.properties()[r.value],f=a.value;return typeof u==typeof f&&u<=f}],"filter-id-<=":[On,[Bn],(o,[r])=>{const a=o.id(),u=r.value;return typeof a==typeof u&&a<=u}],"filter->=":[On,[Nn,Bn],(o,[r,a])=>{const u=o.properties()[r.value],f=a.value;return typeof u==typeof f&&u>=f}],"filter-id->=":[On,[Bn],(o,[r])=>{const a=o.id(),u=r.value;return typeof a==typeof u&&a>=u}],"filter-has":[On,[Bn],(o,[r])=>r.value in o.properties()],"filter-has-id":[On,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[On,[Mo(Nn)],(o,[r])=>r.value.indexOf(o.geometryType())>=0],"filter-id-in":[On,[Mo(Bn)],(o,[r])=>r.value.indexOf(o.id())>=0],"filter-in-small":[On,[Nn,Mo(Bn)],(o,[r,a])=>a.value.indexOf(o.properties()[r.value])>=0],"filter-in-large":[On,[Nn,Mo(Bn)],(o,[r,a])=>function(u,f,g,v){for(;g<=v;){const b=g+v>>1;if(f[b]===u)return!0;f[b]>u?v=b-1:g=b+1}return!1}(o.properties()[r.value],a.value,0,a.value.length-1)],all:{type:On,overloads:[[[On,On],(o,[r,a])=>r.evaluate(o)&&a.evaluate(o)],[zo(On),(o,r)=>{for(const a of r)if(!a.evaluate(o))return!1;return!0}]]},any:{type:On,overloads:[[[On,On],(o,[r,a])=>r.evaluate(o)||a.evaluate(o)],[zo(On),(o,r)=>{for(const a of r)if(a.evaluate(o))return!0;return!1}]]},"!":[On,[On],(o,[r])=>!r.evaluate(o)],"is-supported-script":[On,[Nn],(o,[r])=>{const a=o.globals&&o.globals.isSupportedScript;return!a||a(r.evaluate(o))}],upcase:[Nn,[Nn],(o,[r])=>r.evaluate(o).toUpperCase()],downcase:[Nn,[Nn],(o,[r])=>r.evaluate(o).toLowerCase()],concat:[Nn,zo(Bn),(o,r)=>r.map(a=>su(a.evaluate(o))).join("")],"resolved-locale":[Nn,[wo],(o,[r])=>r.evaluate(o).resolvedLocale()]});var mu=My;function zy(o){return{result:"success",value:o}}function sl(o){return{result:"error",value:o}}function Yl(o){return o["property-type"]==="data-driven"}function Vd(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function Ud(o){return!!o.expression&&o.expression.interpolated}function Un(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function gu(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function Ly(o){return o}function Wd(o,r){const a=r.type==="color",u=o.stops&&typeof o.stops[0][0]=="object",f=u||!(u||o.property!==void 0),g=o.type||(Ud(r)?"exponential":"interval");if(a&&((o=qs({},o)).stops&&(o.stops=o.stops.map(C=>[C[0],$r.parse(C[1])])),o.default=$r.parse(o.default?o.default:r.default)),o.colorSpace&&o.colorSpace!=="rgb"&&!op[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let v,b,T;if(g==="exponential")v=ta;else if(g==="interval")v=Gd;else if(g==="categorical"){v=Ry,b=Object.create(null);for(const C of o.stops)b[C[0]]=C[1];T=typeof o.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);v=Oy}if(u){const C={},M=[];for(let V=0;V<o.stops.length;V++){const G=o.stops[V],X=G[0].zoom;C[X]===void 0&&(C[X]={zoom:X,type:o.type,property:o.property,default:o.default,stops:[]},M.push(X)),C[X].stops.push([G[0].value,G[1]])}const L=[];for(const V of M)L.push([C[V].zoom,Wd(C[V],r)]);const R={name:"linear"};return{kind:"composite",interpolationType:R,interpolationFactor:_s.interpolationFactor.bind(void 0,R),zoomStops:L.map(V=>V[0]),evaluate:({zoom:V},G)=>ta({stops:L,base:o.base},r,V).evaluate(V,G)}}if(f){const C=g==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:_s.interpolationFactor.bind(void 0,C),zoomStops:o.stops.map(M=>M[0]),evaluate:({zoom:M})=>v(o,r,M,b,T)}}return{kind:"source",evaluate(C,M){const L=M&&M.properties?M.properties[o.property]:void 0;return L===void 0?Ql(o.default,r.default):v(o,r,L,b,T)}}}function Ql(o,r,a){return o!==void 0?o:r!==void 0?r:a!==void 0?a:void 0}function Ry(o,r,a,u,f){return Ql(typeof a===f?u[a]:void 0,o.default,r.default)}function Gd(o,r,a){if(Un(a)!=="number")return Ql(o.default,r.default);const u=o.stops.length;if(u===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[u-1][0])return o.stops[u-1][1];const f=zd(o.stops.map(g=>g[0]),a);return o.stops[f][1]}function ta(o,r,a){const u=o.base!==void 0?o.base:1;if(Un(a)!=="number")return Ql(o.default,r.default);const f=o.stops.length;if(f===1||a<=o.stops[0][0])return o.stops[0][1];if(a>=o.stops[f-1][0])return o.stops[f-1][1];const g=zd(o.stops.map(M=>M[0]),a),v=function(M,L,R,V){const G=V-R,X=M-R;return G===0?0:L===1?X/G:(Math.pow(L,X)-1)/(Math.pow(L,G)-1)}(a,u,o.stops[g][0],o.stops[g+1][0]),b=o.stops[g][1],T=o.stops[g+1][1];let C=uu[r.type]||Ly;if(o.colorSpace&&o.colorSpace!=="rgb"){const M=op[o.colorSpace];C=(L,R)=>M.reverse(M.interpolate(M.forward(L),M.forward(R),v))}return typeof b.evaluate=="function"?{evaluate(...M){const L=b.evaluate.apply(void 0,M),R=T.evaluate.apply(void 0,M);if(L!==void 0&&R!==void 0)return C(L,R,v)}}:C(b,T,v)}function Oy(o,r,a){return r.type==="color"?a=$r.parse(a):r.type==="formatted"?a=so.fromString(a.toString()):r.type==="resolvedImage"?a=Do.fromString(a.toString()):Un(a)===r.type||r.type==="enum"&&r.values[a]||(a=void 0),Ql(a,o.default,r.default)}class Hd{constructor(r,a){this.expression=r,this._warningHistory={},this._evaluator=new Gf,this._defaultValue=a?function(u){return u.type==="color"&&(gu(u.default)||Array.isArray(u.default))?new $r(0,0,0,0):u.type==="color"?$r.parse(u.default)||null:u.default===void 0?null:u.default}(a):null,this._enumValues=a&&a.type==="enum"?a.values:null}evaluateWithoutErrorHandling(r,a,u,f,g,v,b,T){return this._evaluator.globals=r,this._evaluator.feature=a,this._evaluator.featureState=u,this._evaluator.canonical=f||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=T||null,this.expression.evaluate(this._evaluator)}evaluate(r,a,u,f,g,v,b,T){this._evaluator.globals=r,this._evaluator.feature=a||null,this._evaluator.featureState=u||null,this._evaluator.canonical=f||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=v||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=T||null;try{const C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Ri(`Expected value to be one of ${Object.keys(this._enumValues).map(M=>JSON.stringify(M)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function ec(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in mu}function tc(o,r){const a=new Jf(mu,[],r?function(f){const g={color:bo,string:Nn,number:Nt,enum:Nn,boolean:On,formatted:eu,resolvedImage:tl};return f.type==="array"?Mo(g[f.value]||Bn,f.length):g[f.type]}(r):void 0),u=a.parse(o,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?zy(new Hd(u,r)):sl(a.errors)}class hp{constructor(r,a){this.kind=r,this._styleExpression=a,this.isStateDependent=r!=="constant"&&!Qs(a.expression)}evaluateWithoutErrorHandling(r,a,u,f,g,v){return this._styleExpression.evaluateWithoutErrorHandling(r,a,u,f,g,v)}evaluate(r,a,u,f,g,v){return this._styleExpression.evaluate(r,a,u,f,g,v)}}class yu{constructor(r,a,u,f){this.kind=r,this.zoomStops=u,this._styleExpression=a,this.isStateDependent=r!=="camera"&&!Qs(a.expression),this.interpolationType=f}evaluateWithoutErrorHandling(r,a,u,f,g,v){return this._styleExpression.evaluateWithoutErrorHandling(r,a,u,f,g,v)}evaluate(r,a,u,f,g,v){return this._styleExpression.evaluate(r,a,u,f,g,v)}interpolationFactor(r,a,u){return this.interpolationType?_s.interpolationFactor(this.interpolationType,r,a,u):0}}function vu(o,r){if((o=tc(o,r)).result==="error")return o;const a=o.value.expression,u=ql(a);if(!u&&!Yl(r))return sl([new ys("","data expressions not supported")]);const f=il(a,["zoom","pitch","distance-from-center"]);if(!f&&!Vd(r))return sl([new ys("","zoom expressions not supported")]);const g=qd(a);return g||f?g instanceof ys?sl([g]):g instanceof _s&&!Ud(r)?sl([new ys("",'"interpolate" expressions cannot be used with this property')]):zy(g?new yu(u?"camera":"composite",o.value,g.labels,g instanceof _s?g.interpolation:void 0):new hp(u?"constant":"source",o.value)):sl([new ys("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Zd{constructor(r,a){this._parameters=r,this._specification=a,qs(this,Wd(this._parameters,this._specification))}static deserialize(r){return new Zd(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function qd(o){let r=null;if(o instanceof Ty)r=qd(o.result);else if(o instanceof ap){for(const a of o.args)if(r=qd(a),r)break}else(o instanceof Qf||o instanceof _s)&&o.input instanceof Js&&o.input.name==="zoom"&&(r=o);return r instanceof ys||o.eachChild(a=>{const u=qd(a);u instanceof ys?r=u:!r&&u?r=new ys("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&u&&r!==u&&(r=new ys("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}class $t{constructor(r,a,u,f){this.message=(r?`${r}: `:"")+u,f&&(this.identifier=f),a!=null&&a.__line__&&(this.line=a.__line__)}}function Yo(o){const r=o.key,a=o.value,u=o.valueSpec||{},f=o.objectElementValidators||{},g=o.style,v=o.styleSpec;let b=[];const T=Un(a);if(T!=="object")return[new $t(r,a,`object expected, ${T} found`)];for(const C in a){const M=C.split(".")[0];let L;f[M]?L=f[M]:u[M]?L=Wi:f["*"]?L=f["*"]:u["*"]&&(L=Wi),L?b=b.concat(L({key:(r&&`${r}.`)+C,value:a[C],valueSpec:u[M]||u["*"],style:g,styleSpec:v,object:a,objectKey:C},a)):b.push(new $t(r,a[C],`unknown property "${C}"`))}for(const C in u)f[C]||u[C].required&&u[C].default===void 0&&a[C]===void 0&&b.push(new $t(r,a,`missing required property "${C}"`));return b}function By(o){const r=o.value,a=o.valueSpec,u=o.style,f=o.styleSpec,g=o.key,v=o.arrayElementValidator||Wi;if(Un(r)!=="array")return[new $t(g,r,`array expected, ${Un(r)} found`)];if(a.length&&r.length!==a.length)return[new $t(g,r,`array length ${a.length} expected, length ${r.length} found`)];if(a["min-length"]&&r.length<a["min-length"])return[new $t(g,r,`array length at least ${a["min-length"]} expected, length ${r.length} found`)];let b={type:a.value,values:a.values,minimum:a.minimum,maximum:a.maximum,function:void 0};f.$version<7&&(b.function=a.function),Un(a.value)==="object"&&(b=a.value);let T=[];for(let C=0;C<r.length;C++)T=T.concat(v({array:r,arrayIndex:C,value:r[C],valueSpec:b,style:u,styleSpec:f,key:`${g}[${C}]`}));return T}function _u(o){const r=o.key,a=o.value,u=o.valueSpec;let f=Un(a);if(f==="number"&&a!=a&&(f="NaN"),f!=="number")return[new $t(r,a,`number expected, ${f} found`)];if("minimum"in u){let g=u.minimum;if(Un(u.minimum)==="array"&&(g=u.minimum[o.arrayIndex]),a<g)return[new $t(r,a,`${a} is less than the minimum value ${g}`)]}if("maximum"in u){let g=u.maximum;if(Un(u.maximum)==="array"&&(g=u.maximum[o.arrayIndex]),a>g)return[new $t(r,a,`${a} is greater than the maximum value ${g}`)]}return[]}function xu(o){const r=o.valueSpec,a=Hr(o.value.type);let u,f,g,v={};const b=a!=="categorical"&&o.value.property===void 0,T=!b,C=Un(o.value.stops)==="array"&&Un(o.value.stops[0])==="array"&&Un(o.value.stops[0][0])==="object",M=Yo({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(V){if(a==="identity")return[new $t(V.key,V.value,'identity function may not have a "stops" property')];let G=[];const X=V.value;return G=G.concat(By({key:V.key,value:X,valueSpec:V.valueSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:L})),Un(X)==="array"&&X.length===0&&G.push(new $t(V.key,X,"array must have at least one stop")),G},default:function(V){return Wi({key:V.key,value:V.value,valueSpec:r,style:V.style,styleSpec:V.styleSpec})}}});return a==="identity"&&b&&M.push(new $t(o.key,o.value,'missing required property "property"')),a==="identity"||o.value.stops||M.push(new $t(o.key,o.value,'missing required property "stops"')),a==="exponential"&&o.valueSpec.expression&&!Ud(o.valueSpec)&&M.push(new $t(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(T&&!Yl(o.valueSpec)?M.push(new $t(o.key,o.value,"property functions not supported")):b&&!Vd(o.valueSpec)&&M.push(new $t(o.key,o.value,"zoom functions not supported"))),a!=="categorical"&&!C||o.value.property!==void 0||M.push(new $t(o.key,o.value,'"property" property is required')),M;function L(V){let G=[];const X=V.value,se=V.key;if(Un(X)!=="array")return[new $t(se,X,`array expected, ${Un(X)} found`)];if(X.length!==2)return[new $t(se,X,`array length 2 expected, length ${X.length} found`)];if(C){if(Un(X[0])!=="object")return[new $t(se,X,`object expected, ${Un(X[0])} found`)];if(X[0].zoom===void 0)return[new $t(se,X,"object stop key must have zoom")];if(X[0].value===void 0)return[new $t(se,X,"object stop key must have value")];const ge=Hr(X[0].zoom);if(typeof ge!="number")return[new $t(se,X[0].zoom,"stop zoom values must be numbers")];if(g&&g>ge)return[new $t(se,X[0].zoom,"stop zoom values must appear in ascending order")];ge!==g&&(g=ge,f=void 0,v={}),G=G.concat(Yo({key:`${se}[0]`,value:X[0],valueSpec:{zoom:{}},style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:_u,value:R}}))}else G=G.concat(R({key:`${se}[0]`,value:X[0],valueSpec:{},style:V.style,styleSpec:V.styleSpec},X));return ec(Ti(X[1]))?G.concat([new $t(`${se}[1]`,X[1],"expressions are not allowed in function stops.")]):G.concat(Wi({key:`${se}[1]`,value:X[1],valueSpec:r,style:V.style,styleSpec:V.styleSpec}))}function R(V,G){const X=Un(V.value),se=Hr(V.value),ge=V.value!==null?V.value:G;if(u){if(X!==u)return[new $t(V.key,ge,`${X} stop domain type must match previous stop domain type ${u}`)]}else u=X;if(X!=="number"&&X!=="string"&&X!=="boolean"&&typeof se!="number"&&typeof se!="string"&&typeof se!="boolean")return[new $t(V.key,ge,"stop domain value must be a number, string, or boolean")];if(X!=="number"&&a!=="categorical"){let Me=`number expected, ${X} found`;return Yl(r)&&a===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $t(V.key,ge,Me)]}return a!=="categorical"||X!=="number"||typeof se=="number"&&isFinite(se)&&Math.floor(se)===se?a!=="categorical"&&X==="number"&&typeof se=="number"&&typeof f=="number"&&f!==void 0&&se<f?[new $t(V.key,ge,"stop domain values must appear in ascending order")]:(f=se,a==="categorical"&&se in v?[new $t(V.key,ge,"stop domain values must be unique")]:(v[se]=!0,[])):[new $t(V.key,ge,`integer expected, found ${String(se)}`)]}}function Ci(o){const r=(o.expressionContext==="property"?vu:tc)(Ti(o.value),o.valueSpec);if(r.result==="error")return r.value.map(u=>new $t(`${o.key}${u.key}`,o.value,u.message));const a=r.value.expression||r.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!a.outputDefined())return[new $t(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Qs(a))return[new $t(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter")return bu(a,o);if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!il(a,["zoom","feature-state"]))return[new $t(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!ql(a))return[new $t(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function bu(o,r){const a=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(r.valueSpec&&r.valueSpec.expression)for(const f of r.valueSpec.expression.parameters)a.delete(f);if(a.size===0)return[];const u=[];return o instanceof Js&&a.has(o.name)?[new $t(r.key,r.value,`["${o.name}"] expression is not supported in a filter for a ${r.object.type} layer with id: ${r.object.id}`)]:(o.eachChild(f=>{u.push(...bu(f,r))}),u)}function Kd(o){const r=o.key,a=o.value,u=o.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(Hr(a))===-1&&f.push(new $t(r,a,`expected one of [${u.values.join(", ")}], ${JSON.stringify(a)} found`)):Object.keys(u.values).indexOf(Hr(a))===-1&&f.push(new $t(r,a,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(a)} found`)),f}function fp(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const r of o.slice(1))if(!fp(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}function Xd(o,r="fill"){if(o==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};fp(o)||(o=rc(o));const a=o;let u=!0;try{u=function(C){if(!nc(C))return C;let M=Ti(C);return Jd(M),M=Fy(M),M}(a)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(a,null,2)}
        `)}const f=st[`filter_${r}`],g=tc(u,f);let v=null;if(g.result==="error")throw new Error(g.value.map(C=>`${C.key}: ${C.message}`).join(", "));v=(C,M,L)=>g.value.evaluate(C,M,{},L);let b=null,T=null;if(u!==a){const C=tc(a,f);if(C.result==="error")throw new Error(C.value.map(M=>`${M.key}: ${M.message}`).join(", "));b=(M,L,R,V,G)=>C.value.evaluate(M,L,{},R,void 0,void 0,V,G),T=!ql(C.value.expression)}return{filter:v,dynamicFilter:b||void 0,needGeometry:jy(u),needFeature:!!T}}function Fy(o){if(!Array.isArray(o))return o;const r=function(a){if(pp.has(a[0])){for(let u=1;u<a.length;u++)if(nc(a[u]))return!0}return a}(o);return r===!0?r:r.map(a=>Fy(a))}function Jd(o){let r=!1;const a=[];if(o[0]==="case"){for(let u=1;u<o.length-1;u+=2)r=r||nc(o[u]),a.push(o[u+1]);a.push(o[o.length-1])}else if(o[0]==="match"){r=r||nc(o[1]);for(let u=2;u<o.length-1;u+=2)a.push(o[u+1]);a.push(o[o.length-1])}else if(o[0]==="step"){r=r||nc(o[1]);for(let u=1;u<o.length-1;u+=2)a.push(o[u+1])}r&&(o.length=0,o.push("any",...a));for(let u=1;u<o.length;u++)Jd(o[u])}function nc(o){if(!Array.isArray(o))return!1;if((r=o[0])==="pitch"||r==="distance-from-center")return!0;var r;for(let a=1;a<o.length;a++)if(nc(o[a]))return!0;return!1}const pp=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function m1(o,r){return o<r?-1:o>r?1:0}function jy(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let r=1;r<o.length;r++)if(jy(o[r]))return!0;return!1}function rc(o){if(!o)return!0;const r=o[0];return o.length<=1?r!=="any":r==="=="?mp(o[1],o[2],"=="):r==="!="?Yd(mp(o[1],o[2],"==")):r==="<"||r===">"||r==="<="||r===">="?mp(o[1],o[2],r):r==="any"?(a=o.slice(1),["any"].concat(a.map(rc))):r==="all"?["all"].concat(o.slice(1).map(rc)):r==="none"?["all"].concat(o.slice(1).map(rc).map(Yd)):r==="in"?gp(o[1],o.slice(2)):r==="!in"?Yd(gp(o[1],o.slice(2))):r==="has"?yp(o[1]):r==="!has"?Yd(yp(o[1])):r!=="within"||o;var a}function mp(o,r,a){switch(o){case"$type":return[`filter-type-${a}`,r];case"$id":return[`filter-id-${a}`,r];default:return[`filter-${a}`,o,r]}}function gp(o,r){if(r.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(a=>typeof a!=typeof r[0])?["filter-in-large",o,["literal",r.sort(m1)]]:["filter-in-small",o,["literal",r]]}}function yp(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function Yd(o){return["!",o]}function wu(o){return fp(Ti(o.value))?Ci(qs({},o,{expressionContext:"filter",valueSpec:o.styleSpec[`filter_${o.layerType||"fill"}`]})):Su(o)}function Su(o){const r=o.value,a=o.key;if(Un(r)!=="array")return[new $t(a,r,`array expected, ${Un(r)} found`)];const u=o.styleSpec;let f,g=[];if(r.length<1)return[new $t(a,r,"filter array must have at least 1 element")];switch(g=g.concat(Kd({key:`${a}[0]`,value:r[0],valueSpec:u.filter_operator,style:o.style,styleSpec:o.styleSpec})),Hr(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Hr(r[1])==="$type"&&g.push(new $t(a,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&g.push(new $t(a,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(f=Un(r[1]),f!=="string"&&g.push(new $t(`${a}[1]`,r[1],`string expected, ${f} found`)));for(let v=2;v<r.length;v++)f=Un(r[v]),Hr(r[1])==="$type"?g=g.concat(Kd({key:`${a}[${v}]`,value:r[v],valueSpec:u.geometry_type,style:o.style,styleSpec:o.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&g.push(new $t(`${a}[${v}]`,r[v],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let v=1;v<r.length;v++)g=g.concat(Su({key:`${a}[${v}]`,value:r[v],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":f=Un(r[1]),r.length!==2?g.push(new $t(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):f!=="string"&&g.push(new $t(`${a}[1]`,r[1],`string expected, ${f} found`));break;case"within":f=Un(r[1]),r.length!==2?g.push(new $t(a,r,`filter array for "${r[0]}" operator must have 2 elements`)):f!=="object"&&g.push(new $t(`${a}[1]`,r[1],`object expected, ${f} found`))}return g}function vp(o,r){const a=o.key,u=o.style,f=o.styleSpec,g=o.value,v=o.objectKey,b=f[`${r}_${o.layerType}`];if(!b)return[];const T=v.match(/^(.*)-transition$/);if(r==="paint"&&T&&b[T[1]]&&b[T[1]].transition)return Wi({key:a,value:g,valueSpec:f.transition,style:u,styleSpec:f});const C=o.valueSpec||b[v];if(!C)return[new $t(a,g,`unknown property "${v}"`)];let M;if(Un(g)==="string"&&Yl(C)&&!C.tokens&&(M=/^{([^}]+)}$/.exec(g))){const R=`\`{ "type": "identity", "property": ${M?JSON.stringify(M[1]):'"_"'} }\``;return[new $t(a,g,`"${v}" does not support interpolation syntax
Use an identity property function instead: ${R}.`)]}const L=[];return o.layerType==="symbol"&&(v==="text-field"&&u&&!u.glyphs&&L.push(new $t(a,g,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&gu(Ti(g))&&Hr(g.type)==="identity"&&L.push(new $t(a,g,'"text-font" does not support identity functions'))),L.concat(Wi({key:o.key,value:g,valueSpec:C,style:u,styleSpec:f,expressionContext:"property",propertyType:r,propertyKey:v}))}function Ny(o){return vp(o,"paint")}function _p(o){return vp(o,"layout")}function $y(o){let r=[];const a=o.value,u=o.key,f=o.style,g=o.styleSpec;a.type||a.ref||r.push(new $t(u,a,'either "type" or "ref" is required'));let v=Hr(a.type);const b=Hr(a.ref);if(a.id){const T=Hr(a.id);for(let C=0;C<o.arrayIndex;C++){const M=f.layers[C];Hr(M.id)===T&&r.push(new $t(u,a.id,`duplicate layer id "${a.id}", previously used at line ${M.id.__line__}`))}}if("ref"in a){let T;["type","source","source-layer","filter","layout"].forEach(C=>{C in a&&r.push(new $t(u,a[C],`"${C}" is prohibited for ref layers`))}),f.layers.forEach(C=>{Hr(C.id)===b&&(T=C)}),T?T.ref?r.push(new $t(u,a.ref,"ref cannot reference another ref layer")):v=Hr(T.type):typeof b=="string"&&r.push(new $t(u,a.ref,`ref layer "${b}" not found`))}else if(v!=="background"&&v!=="sky")if(a.source){const T=f.sources&&f.sources[a.source],C=T&&Hr(T.type);T?C==="vector"&&v==="raster"?r.push(new $t(u,a.source,`layer "${a.id}" requires a raster source`)):C==="raster"&&v!=="raster"?r.push(new $t(u,a.source,`layer "${a.id}" requires a vector source`)):C!=="vector"||a["source-layer"]?C==="raster-dem"&&v!=="hillshade"?r.push(new $t(u,a.source,"raster-dem source can only be used with layer type 'hillshade'.")):v!=="line"||!a.paint||!a.paint["line-gradient"]&&!a.paint["line-trim-offset"]||C==="geojson"&&T.lineMetrics||r.push(new $t(u,a,`layer "${a.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new $t(u,a,`layer "${a.id}" must specify a "source-layer"`)):r.push(new $t(u,a.source,`source "${a.source}" not found`))}else r.push(new $t(u,a,'missing required property "source"'));return r=r.concat(Yo({key:u,value:a,valueSpec:g.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Wi({key:`${u}.type`,value:a.type,valueSpec:g.layer.type,style:o.style,styleSpec:o.styleSpec,object:a,objectKey:"type"}),filter:T=>wu(qs({layerType:v},T)),layout:T=>Yo({layer:a,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":C=>_p(qs({layerType:v},C))}}),paint:T=>Yo({layer:a,key:T.key,value:T.value,valueSpec:{},style:T.style,styleSpec:T.styleSpec,objectElementValidators:{"*":C=>Ny(qs({layerType:v},C))}})}})),r}function wa(o){const r=o.value,a=o.key,u=Un(r);return u!=="string"?[new $t(a,r,`string expected, ${u} found`)]:[]}const Vy={promoteId:function({key:o,value:r}){if(Un(r)==="string")return wa({key:o,value:r});{const a=[];for(const u in r)a.push(...wa({key:`${o}.${u}`,value:r[u]}));return a}}};function Uy(o){const r=o.value,a=o.key,u=o.styleSpec,f=o.style;if(!r.type)return[new $t(a,r,'"type" is required')];const g=Hr(r.type);let v;switch(g){case"vector":case"raster":case"raster-dem":return v=Yo({key:a,value:r,valueSpec:u[`source_${g.replace("-","_")}`],style:o.style,styleSpec:u,objectElementValidators:Vy}),v;case"geojson":if(v=Yo({key:a,value:r,valueSpec:u.source_geojson,style:f,styleSpec:u,objectElementValidators:Vy}),r.cluster)for(const b in r.clusterProperties){const[T,C]=r.clusterProperties[b],M=typeof T=="string"?[T,["accumulated"],["get",b]]:T;v.push(...Ci({key:`${a}.${b}.map`,value:C,expressionContext:"cluster-map"})),v.push(...Ci({key:`${a}.${b}.reduce`,value:M,expressionContext:"cluster-reduce"}))}return v;case"video":return Yo({key:a,value:r,valueSpec:u.source_video,style:f,styleSpec:u});case"image":return Yo({key:a,value:r,valueSpec:u.source_image,style:f,styleSpec:u});case"canvas":return[new $t(a,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Kd({key:`${a}.type`,value:r.type,valueSpec:{values:g1(u)},style:f,styleSpec:u})}}function g1(o){return o.source.reduce((r,a)=>{const u=o[a];return u.type.type==="enum"&&(r=r.concat(Object.keys(u.type.values))),r},[])}function Wy(o){const r=o.value,a=o.styleSpec,u=a.light,f=o.style;let g=[];const v=Un(r);if(r===void 0)return g;if(v!=="object")return g=g.concat([new $t("light",r,`object expected, ${v} found`)]),g;for(const b in r){const T=b.match(/^(.*)-transition$/);g=g.concat(T&&u[T[1]]&&u[T[1]].transition?Wi({key:b,value:r[b],valueSpec:a.transition,style:f,styleSpec:a}):u[b]?Wi({key:b,value:r[b],valueSpec:u[b],style:f,styleSpec:a}):[new $t(b,r[b],`unknown property "${b}"`)])}return g}function xp(o){const r=o.value,a=o.key,u=o.style,f=o.styleSpec,g=f.terrain;let v=[];const b=Un(r);if(r===void 0)return v;if(b!=="object")return v=v.concat([new $t("terrain",r,`object expected, ${b} found`)]),v;for(const T in r){const C=T.match(/^(.*)-transition$/);v=v.concat(C&&g[C[1]]&&g[C[1]].transition?Wi({key:T,value:r[T],valueSpec:f.transition,style:u,styleSpec:f}):g[T]?Wi({key:T,value:r[T],valueSpec:g[T],style:u,styleSpec:f}):[new $t(T,r[T],`unknown property "${T}"`)])}if(r.source){const T=u.sources&&u.sources[r.source],C=T&&Hr(T.type);T?C!=="raster-dem"&&v.push(new $t(a,r.source,`terrain cannot be used with a source of type ${String(C)}, it only be used with a "raster-dem" source type`)):v.push(new $t(a,r.source,`source "${r.source}" not found`))}else v.push(new $t(a,r,'terrain is missing required property "source"'));return v}function Gy(o){const r=o.value,a=o.style,u=o.styleSpec,f=u.fog;let g=[];const v=Un(r);if(r===void 0)return g;if(v!=="object")return g=g.concat([new $t("fog",r,`object expected, ${v} found`)]),g;for(const b in r){const T=b.match(/^(.*)-transition$/);g=g.concat(T&&f[T[1]]&&f[T[1]].transition?Wi({key:b,value:r[b],valueSpec:u.transition,style:a,styleSpec:u}):f[b]?Wi({key:b,value:r[b],valueSpec:f[b],style:a,styleSpec:u}):[new $t(b,r[b],`unknown property "${b}"`)])}return g}const Hy={"*":()=>[],array:By,boolean:function(o){const r=o.value,a=o.key,u=Un(r);return u!=="boolean"?[new $t(a,r,`boolean expected, ${u} found`)]:[]},number:_u,color:function(o){const r=o.key,a=o.value,u=Un(a);return u!=="string"?[new $t(r,a,`color expected, ${u} found`)]:Ff(a)===null?[new $t(r,a,`color expected, "${a}" found`)]:[]},enum:Kd,filter:wu,function:xu,layer:$y,object:Yo,source:Uy,light:Wy,terrain:xp,fog:Gy,string:wa,formatted:function(o){return wa(o).length===0?[]:Ci(o)},resolvedImage:function(o){return wa(o).length===0?[]:Ci(o)},projection:function(o){const r=o.value,a=o.styleSpec,u=a.projection,f=o.style;let g=[];const v=Un(r);if(v==="object")for(const b in r)g=g.concat(Wi({key:b,value:r[b],valueSpec:u[b],style:f,styleSpec:a}));else v!=="string"&&(g=g.concat([new $t("projection",r,`object or string expected, ${v} found`)]));return g}};function Wi(o){const r=o.value,a=o.valueSpec,u=o.styleSpec;return a.expression&&gu(Hr(r))?xu(o):a.expression&&ec(Ti(r))?Ci(o):a.type&&Hy[a.type]?Hy[a.type](o):Yo(qs({},o,{valueSpec:a.type?u[a.type]:a}))}function y1(o){const r=o.value,a=o.key,u=wa(o);return u.length||(r.indexOf("{fontstack}")===-1&&u.push(new $t(a,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&u.push(new $t(a,r,'"glyphs" url must include a "{range}" token'))),u}function Zy(o,r=st){return Lo(Wi({key:"",value:o,valueSpec:r.$root,styleSpec:r,style:o,objectElementValidators:{glyphs:y1,"*":()=>[]}}))}const v1=o=>Lo(Ny(o)),_1=o=>Lo(_p(o));function Lo(o){return o.slice().sort((r,a)=>r.line&&a.line?r.line-a.line:0)}function qy(o,r){let a=!1;if(r&&r.length)for(const u of r)o.fire(new Ei(new Error(u.message))),a=!0;return a}var x1=xs,Qo=3;function xs(o,r,a){var u=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;var f=new Int32Array(this.arrayBuffer);o=f[0],this.d=(r=f[1])+2*(a=f[2]);for(var g=0;g<this.d*this.d;g++){var v=f[Qo+g],b=f[Qo+g+1];u.push(v===b?null:f.subarray(v,b))}var T=f[Qo+u.length+1];this.keys=f.subarray(f[Qo+u.length],T),this.bboxes=f.subarray(T),this.insert=this._insertReadonly}else{this.d=r+2*a;for(var C=0;C<this.d*this.d;C++)u.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=o,this.padding=a,this.scale=r/o,this.uid=0;var M=a/r*o;this.min=-M,this.max=o+M}xs.prototype.insert=function(o,r,a,u,f){this._forEachCell(r,a,u,f,this._insertCell,this.uid++),this.keys.push(o),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(u),this.bboxes.push(f)},xs.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},xs.prototype._insertCell=function(o,r,a,u,f,g){this.cells[f].push(g)},xs.prototype.query=function(o,r,a,u,f){var g=this.min,v=this.max;if(o<=g&&r<=g&&v<=a&&v<=u&&!f)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(o,r,a,u,this._queryCell,b,{},f),b},xs.prototype._queryCell=function(o,r,a,u,f,g,v,b){var T=this.cells[f];if(T!==null)for(var C=this.keys,M=this.bboxes,L=0;L<T.length;L++){var R=T[L];if(v[R]===void 0){var V=4*R;(b?b(M[V+0],M[V+1],M[V+2],M[V+3]):o<=M[V+2]&&r<=M[V+3]&&a>=M[V+0]&&u>=M[V+1])?(v[R]=!0,g.push(C[R])):v[R]=!1}}},xs.prototype._forEachCell=function(o,r,a,u,f,g,v,b){for(var T=this._convertToCellCoord(o),C=this._convertToCellCoord(r),M=this._convertToCellCoord(a),L=this._convertToCellCoord(u),R=T;R<=M;R++)for(var V=C;V<=L;V++){var G=this.d*V+R;if((!b||b(this._convertFromCellCoord(R),this._convertFromCellCoord(V),this._convertFromCellCoord(R+1),this._convertFromCellCoord(V+1)))&&f.call(this,o,r,a,u,G,g,v,b))return}},xs.prototype._convertFromCellCoord=function(o){return(o-this.padding)/this.scale},xs.prototype._convertToCellCoord=function(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))},xs.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var o=this.cells,r=Qo+this.cells.length+1+1,a=0,u=0;u<this.cells.length;u++)a+=this.cells[u].length;var f=new Int32Array(r+a+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;for(var g=r,v=0;v<o.length;v++){var b=o[v];f[Qo+v]=g,f.set(b,g),g+=b.length}return f[Qo+o.length]=g,f.set(this.keys,g),f[Qo+o.length+1]=g+=this.keys.length,f.set(this.bboxes,g),g+=this.bboxes.length,f.buffer};var al=U(x1);const Qd={};function Wt(o,r,a={}){Object.defineProperty(o,"_classRegistryKey",{value:r,writeable:!1}),Qd[r]={klass:o,omit:a.omit||[]}}Wt(Object,"Object"),al.serialize=function(o,r){const a=o.toArrayBuffer();return r&&r.push(a),{buffer:a}},al.deserialize=function(o){return new al(o.buffer)},Object.defineProperty(al,"name",{value:"Grid"}),Wt(al,"Grid"),Wt($r,"Color"),Wt(Error,"Error"),Wt(Xn,"AJAXError"),Wt(Do,"ResolvedImage"),Wt(Zd,"StylePropertyFunction"),Wt(Hd,"StyleExpression",{omit:["_evaluator"]}),Wt(yu,"ZoomDependentExpression"),Wt(hp,"ZoomConstantExpression"),Wt(Js,"CompoundExpression",{omit:["_evaluate"]});for(const o in mu)Qd[mu[o]._classRegistryKey]||Wt(mu[o],`Expression${o}`);function bp(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function wp(o){return _.ImageBitmap&&o instanceof _.ImageBitmap}function ic(o,r){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp)return o;if(bp(o)||wp(o))return r&&r.push(o),o;if(ArrayBuffer.isView(o)){const a=o;return r&&r.push(a.buffer),a}if(o instanceof _.ImageData)return r&&r.push(o.data.buffer),o;if(Array.isArray(o)){const a=[];for(const u of o)a.push(ic(u,r));return a}if(typeof o=="object"){const a=o.constructor,u=a._classRegistryKey;if(!u)throw new Error(`can't serialize object of unregistered class ${u}`);const f=a.serialize?a.serialize(o,r):{};if(!a.serialize){for(const g in o)o.hasOwnProperty(g)&&(Qd[u].omit.indexOf(g)>=0||(f[g]=ic(o[g],r)));o instanceof Error&&(f.message=o.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(f.$name=u),f}throw new Error("can't serialize object of type "+typeof o)}function ll(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||bp(o)||wp(o)||ArrayBuffer.isView(o)||o instanceof _.ImageData)return o;if(Array.isArray(o))return o.map(ll);if(typeof o=="object"){const r=o.$name||"Object",{klass:a}=Qd[r];if(!a)throw new Error(`can't deserialize unregistered class ${r}`);if(a.deserialize)return a.deserialize(o);const u=Object.create(a.prototype);for(const f of Object.keys(o))f!=="$name"&&(u[f]=ll(o[f]));return u}throw new Error("can't deserialize object of type "+typeof o)}const jt={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Sp(o){for(const r of o)if(Ep(r.charCodeAt(0)))return!0;return!1}function b1(o){for(const r of o)if(!Ky(r.charCodeAt(0)))return!1;return!0}function Ky(o){return!(jt.Arabic(o)||jt["Arabic Supplement"](o)||jt["Arabic Extended-A"](o)||jt["Arabic Presentation Forms-A"](o)||jt["Arabic Presentation Forms-B"](o))}function Ep(o){return!(o!==746&&o!==747&&(o<4352||!(jt["Bopomofo Extended"](o)||jt.Bopomofo(o)||jt["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||jt["CJK Compatibility Ideographs"](o)||jt["CJK Compatibility"](o)||jt["CJK Radicals Supplement"](o)||jt["CJK Strokes"](o)||!(!jt["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||jt["CJK Unified Ideographs Extension A"](o)||jt["CJK Unified Ideographs"](o)||jt["Enclosed CJK Letters and Months"](o)||jt["Hangul Compatibility Jamo"](o)||jt["Hangul Jamo Extended-A"](o)||jt["Hangul Jamo Extended-B"](o)||jt["Hangul Jamo"](o)||jt["Hangul Syllables"](o)||jt.Hiragana(o)||jt["Ideographic Description Characters"](o)||jt.Kanbun(o)||jt["Kangxi Radicals"](o)||jt["Katakana Phonetic Extensions"](o)||jt.Katakana(o)&&o!==12540||!(!jt["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!jt["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||jt["Unified Canadian Aboriginal Syllabics"](o)||jt["Unified Canadian Aboriginal Syllabics Extended"](o)||jt["Vertical Forms"](o)||jt["Yijing Hexagram Symbols"](o)||jt["Yi Syllables"](o)||jt["Yi Radicals"](o))))}function Xy(o){return!(Ep(o)||function(r){return!!(jt["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||jt["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||jt["Letterlike Symbols"](r)||jt["Number Forms"](r)||jt["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||jt["Control Pictures"](r)&&r!==9251||jt["Optical Character Recognition"](r)||jt["Enclosed Alphanumerics"](r)||jt["Geometric Shapes"](r)||jt["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||jt["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||jt["CJK Symbols and Punctuation"](r)||jt.Katakana(r)||jt["Private Use Area"](r)||jt["CJK Compatibility Forms"](r)||jt["Small Form Variants"](r)||jt["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(o))}function Jy(o){return o>=1424&&o<=2303||jt["Arabic Presentation Forms-A"](o)||jt["Arabic Presentation Forms-B"](o)}function w1(o,r){return!(!r&&Jy(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||jt.Khmer(o))}function S1(o){for(const r of o)if(Jy(r.charCodeAt(0)))return!0;return!1}const Tp="deferred",Cp="loading",Ap="loaded";let oc=null,m="unavailable",l=null;const h=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(m="error"),oc&&oc(o)};function y(){x.fire(new Ui("pluginStateChange",{pluginStatus:m,pluginURL:l}))}const x=new Qc,w=function(){return m},k=function(){if(m!==Tp||!l)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");m=Cp,y(),l&&Li({url:l},o=>{o?h(o):(m=Ap,y())})},P={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>m===Ap||P.applyArabicShaping!=null,isLoading:()=>m===Cp,setState(o){m=o.pluginStatus,l=o.pluginURL},isParsed:()=>P.applyArabicShaping!=null&&P.processBidirectionalText!=null&&P.processStyledBidirectionalText!=null,getPluginURL:()=>l};class D{constructor(r,a){this.zoom=r,a?(this.now=a.now,this.fadeDuration=a.fadeDuration,this.transition=a.transition,this.pitch=a.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(r){return function(a,u){for(const f of a)if(!w1(f.charCodeAt(0),u))return!1;return!0}(r,P.isLoaded())}}class j{constructor(r,a){this.property=r,this.value=a,this.expression=function(u,f){if(gu(u))return new Zd(u,f);if(ec(u)){const g=vu(u,f);if(g.result==="error")throw new Error(g.value.map(v=>`${v.key}: ${v.message}`).join(", "));return g.value}{let g=u;return typeof u=="string"&&f.type==="color"&&(g=$r.parse(u)),{kind:"constant",evaluate:()=>g}}}(a===void 0?r.specification.default:a,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,a,u){return this.property.possiblyEvaluate(this,r,a,u)}}class F{constructor(r){this.property=r,this.value=new j(r,void 0)}transitioned(r,a){return new ie(this.property,this.value,a,It({},r.transition,this.transition),r.now)}untransitioned(){return new ie(this.property,this.value,null,{},0)}}class H{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Kn(this._values[r].value.value)}setValue(r,a){this._values.hasOwnProperty(r)||(this._values[r]=new F(this._values[r].property)),this._values[r].value=new j(this._values[r].property,a===null?void 0:Kn(a))}getTransition(r){return Kn(this._values[r].transition)}setTransition(r,a){this._values.hasOwnProperty(r)||(this._values[r]=new F(this._values[r].property)),this._values[r].transition=Kn(a)||void 0}serialize(){const r={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(r[a]=u);const f=this.getTransition(a);f!==void 0&&(r[`${a}-transition`]=f)}return r}transitioned(r,a){const u=new ue(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].transitioned(r,a._values[f]);return u}untransitioned(){const r=new ue(this._properties);for(const a of Object.keys(this._values))r._values[a]=this._values[a].untransitioned();return r}}class ie{constructor(r,a,u,f,g){const v=f.delay||0,b=f.duration||0;g=g||0,this.property=r,this.value=a,this.begin=g+v,this.end=this.begin+b,r.specification.transition&&(f.delay||f.duration)&&(this.prior=u)}possiblyEvaluate(r,a,u){const f=r.now||0,g=this.value.possiblyEvaluate(r,a,u),v=this.prior;if(v){if(f>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(f<this.begin)return v.possiblyEvaluate(r,a,u);{const b=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(v.possiblyEvaluate(r,a,u),g,oe(b))}}return g}}class ue{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,a,u){const f=new me(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].possiblyEvaluate(r,a,u);return f}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class pe{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}getValue(r){return Kn(this._values[r].value)}setValue(r,a){this._values[r]=new j(this._values[r].property,a===null?void 0:Kn(a))}serialize(){const r={};for(const a of Object.keys(this._values)){const u=this.getValue(a);u!==void 0&&(r[a]=u)}return r}possiblyEvaluate(r,a,u){const f=new me(this._properties);for(const g of Object.keys(this._values))f._values[g]=this._values[g].possiblyEvaluate(r,a,u);return f}}class he{constructor(r,a,u){this.property=r,this.value=a,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,a,u,f){return this.property.evaluate(this.value,this.parameters,r,a,u,f)}}class me{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class Z{constructor(r){this.specification=r}possiblyEvaluate(r,a){return r.expression.evaluate(a)}interpolate(r,a,u){const f=uu[this.specification.type];return f?f(r,a,u):r}}class ce{constructor(r,a){this.specification=r,this.overrides=a}possiblyEvaluate(r,a,u,f){return new he(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(a,null,{},u,f)}:r.expression,a)}interpolate(r,a,u){if(r.value.kind!=="constant"||a.value.kind!=="constant")return r;if(r.value.value===void 0||a.value.value===void 0)return new he(this,{kind:"constant",value:void 0},r.parameters);const f=uu[this.specification.type];return f?new he(this,{kind:"constant",value:f(r.value.value,a.value.value,u)},r.parameters):r}evaluate(r,a,u,f,g,v){return r.kind==="constant"?r.value:r.evaluate(a,u,f,g,v)}}class Ee{constructor(r){this.specification=r}possiblyEvaluate(r,a,u,f){return!!r.expression.evaluate(a,null,{},u,f)}interpolate(){return!1}}class Ae{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const a=new D(0,{});for(const u in r){const f=r[u];f.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new j(f,void 0),v=this.defaultTransitionablePropertyValues[u]=new F(f);this.defaultTransitioningPropertyValues[u]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate(a)}}}function je(o,r){return 256*(o=ve(Math.floor(o),0,255))+ve(Math.floor(r),0,255)}Wt(ce,"DataDrivenProperty"),Wt(Z,"DataConstantProperty"),Wt(Ee,"ColorRampProperty");const $e={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ne{constructor(r,a){this._structArray=r,this._pos1=a*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class We{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,a){return r._trim(),a&&(r.isTransferred=!0,a.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const a=Object.create(this.prototype);return a.arrayBuffer=r.arrayBuffer,a.length=r.length,a.capacity=r.arrayBuffer.byteLength/a.bytesPerElement,a._refreshViews(),a}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const a=this.uint8;this._refreshViews(),a&&this.uint8.set(a)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Ue(o,r=1){let a=0,u=0;return{members:o.map(f=>{const g=$e[f.type].BYTES_PER_ELEMENT,v=a=Je(a,Math.max(r,g)),b=f.components||1;return u=Math.max(u,g),a+=g*b,{name:f.name,type:f.type,components:b,offset:v}}),size:Je(a,Math.max(u,r)),alignment:r}}function Je(o,r){return Math.ceil(o/r)*r}class xt extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a){const u=this.length;return this.resize(u+1),this.emplace(u,r,a)}emplace(r,a,u){const f=2*r;return this.int16[f+0]=a,this.int16[f+1]=u,r}}xt.prototype.bytesPerElement=4,Wt(xt,"StructArrayLayout2i4");class Ze extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,r,a,u)}emplace(r,a,u,f){const g=3*r;return this.int16[g+0]=a,this.int16[g+1]=u,this.int16[g+2]=f,r}}Ze.prototype.bytesPerElement=6,Wt(Ze,"StructArrayLayout3i6");class ht extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,f)}emplace(r,a,u,f,g){const v=4*r;return this.int16[v+0]=a,this.int16[v+1]=u,this.int16[v+2]=f,this.int16[v+3]=g,r}}ht.prototype.bytesPerElement=8,Wt(ht,"StructArrayLayout4i8");class tt extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g,v,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,u,f,g,v,b)}emplace(r,a,u,f,g,v,b,T){const C=6*r,M=12*r,L=3*r;return this.int16[C+0]=a,this.int16[C+1]=u,this.uint8[M+4]=f,this.uint8[M+5]=g,this.uint8[M+6]=v,this.uint8[M+7]=b,this.float32[L+2]=T,r}}tt.prototype.bytesPerElement=12,Wt(tt,"StructArrayLayout2i4ub1f12");class _t extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,f)}emplace(r,a,u,f,g){const v=4*r;return this.float32[v+0]=a,this.float32[v+1]=u,this.float32[v+2]=f,this.float32[v+3]=g,r}}_t.prototype.bytesPerElement=16,Wt(_t,"StructArrayLayout4f16");class Xe extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,u,f,g)}emplace(r,a,u,f,g,v){const b=6*r,T=3*r;return this.uint16[b+0]=a,this.uint16[b+1]=u,this.uint16[b+2]=f,this.uint16[b+3]=g,this.float32[T+2]=v,r}}Xe.prototype.bytesPerElement=12,Wt(Xe,"StructArrayLayout4ui1f12");class dt extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,f)}emplace(r,a,u,f,g){const v=4*r;return this.uint16[v+0]=a,this.uint16[v+1]=u,this.uint16[v+2]=f,this.uint16[v+3]=g,r}}dt.prototype.bytesPerElement=8,Wt(dt,"StructArrayLayout4ui8");class wt extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g,v){const b=this.length;return this.resize(b+1),this.emplace(b,r,a,u,f,g,v)}emplace(r,a,u,f,g,v,b){const T=6*r;return this.int16[T+0]=a,this.int16[T+1]=u,this.int16[T+2]=f,this.int16[T+3]=g,this.int16[T+4]=v,this.int16[T+5]=b,r}}wt.prototype.bytesPerElement=12,Wt(wt,"StructArrayLayout6i12");class mt extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g,v,b,T,C,M,L,R){const V=this.length;return this.resize(V+1),this.emplace(V,r,a,u,f,g,v,b,T,C,M,L,R)}emplace(r,a,u,f,g,v,b,T,C,M,L,R,V){const G=12*r;return this.int16[G+0]=a,this.int16[G+1]=u,this.int16[G+2]=f,this.int16[G+3]=g,this.uint16[G+4]=v,this.uint16[G+5]=b,this.uint16[G+6]=T,this.uint16[G+7]=C,this.int16[G+8]=M,this.int16[G+9]=L,this.int16[G+10]=R,this.int16[G+11]=V,r}}mt.prototype.bytesPerElement=24,Wt(mt,"StructArrayLayout4i4ui4i24");class St extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g,v){const b=this.length;return this.resize(b+1),this.emplace(b,r,a,u,f,g,v)}emplace(r,a,u,f,g,v,b){const T=10*r,C=5*r;return this.int16[T+0]=a,this.int16[T+1]=u,this.int16[T+2]=f,this.float32[C+2]=g,this.float32[C+3]=v,this.float32[C+4]=b,r}}St.prototype.bytesPerElement=20,Wt(St,"StructArrayLayout3i3f20");class en extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint32[1*r+0]=a,r}}en.prototype.bytesPerElement=4,Wt(en,"StructArrayLayout1ul4");class yn extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g,v,b,T,C,M,L,R,V){const G=this.length;return this.resize(G+1),this.emplace(G,r,a,u,f,g,v,b,T,C,M,L,R,V)}emplace(r,a,u,f,g,v,b,T,C,M,L,R,V,G){const X=20*r,se=10*r;return this.int16[X+0]=a,this.int16[X+1]=u,this.int16[X+2]=f,this.int16[X+3]=g,this.int16[X+4]=v,this.float32[se+3]=b,this.float32[se+4]=T,this.float32[se+5]=C,this.float32[se+6]=M,this.int16[X+14]=L,this.uint32[se+8]=R,this.uint16[X+18]=V,this.uint16[X+19]=G,r}}yn.prototype.bytesPerElement=40,Wt(yn,"StructArrayLayout5i4f1i1ul2ui40");class Gt extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g,v,b){const T=this.length;return this.resize(T+1),this.emplace(T,r,a,u,f,g,v,b)}emplace(r,a,u,f,g,v,b,T){const C=8*r;return this.int16[C+0]=a,this.int16[C+1]=u,this.int16[C+2]=f,this.int16[C+4]=g,this.int16[C+5]=v,this.int16[C+6]=b,this.int16[C+7]=T,r}}Gt.prototype.bytesPerElement=16,Wt(Gt,"StructArrayLayout3i2i2i16");class dn extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,u,f,g)}emplace(r,a,u,f,g,v){const b=4*r,T=8*r;return this.float32[b+0]=a,this.float32[b+1]=u,this.float32[b+2]=f,this.int16[T+6]=g,this.int16[T+7]=v,r}}dn.prototype.bytesPerElement=16,Wt(dn,"StructArrayLayout2f1f2i16");class Fn extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,f)}emplace(r,a,u,f,g){const v=12*r,b=3*r;return this.uint8[v+0]=a,this.uint8[v+1]=u,this.float32[b+1]=f,this.float32[b+2]=g,r}}Fn.prototype.bytesPerElement=12,Wt(Fn,"StructArrayLayout2ub2f12");class Ln extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,r,a,u)}emplace(r,a,u,f){const g=3*r;return this.float32[g+0]=a,this.float32[g+1]=u,this.float32[g+2]=f,r}}Ln.prototype.bytesPerElement=12,Wt(Ln,"StructArrayLayout3f12");class Jt extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u){const f=this.length;return this.resize(f+1),this.emplace(f,r,a,u)}emplace(r,a,u,f){const g=3*r;return this.uint16[g+0]=a,this.uint16[g+1]=u,this.uint16[g+2]=f,r}}Jt.prototype.bytesPerElement=6,Wt(Jt,"StructArrayLayout3ui6");class Yn extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g,v,b,T,C,M,L,R,V,G,X,se,ge,Me,_e,Pe,Oe){const Re=this.length;return this.resize(Re+1),this.emplace(Re,r,a,u,f,g,v,b,T,C,M,L,R,V,G,X,se,ge,Me,_e,Pe,Oe)}emplace(r,a,u,f,g,v,b,T,C,M,L,R,V,G,X,se,ge,Me,_e,Pe,Oe,Re){const Ye=30*r,qe=15*r,lt=60*r;return this.int16[Ye+0]=a,this.int16[Ye+1]=u,this.int16[Ye+2]=f,this.float32[qe+2]=g,this.float32[qe+3]=v,this.uint16[Ye+8]=b,this.uint16[Ye+9]=T,this.uint32[qe+5]=C,this.uint32[qe+6]=M,this.uint32[qe+7]=L,this.uint16[Ye+16]=R,this.uint16[Ye+17]=V,this.uint16[Ye+18]=G,this.float32[qe+10]=X,this.float32[qe+11]=se,this.uint8[lt+48]=ge,this.uint8[lt+49]=Me,this.uint8[lt+50]=_e,this.uint32[qe+13]=Pe,this.int16[Ye+28]=Oe,this.uint8[lt+58]=Re,r}}Yn.prototype.bytesPerElement=60,Wt(Yn,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class rr extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g,v,b,T,C,M,L,R,V,G,X,se,ge,Me,_e,Pe,Oe,Re,Ye,qe,lt,bt,nt,ft,pt,gt){const Et=this.length;return this.resize(Et+1),this.emplace(Et,r,a,u,f,g,v,b,T,C,M,L,R,V,G,X,se,ge,Me,_e,Pe,Oe,Re,Ye,qe,lt,bt,nt,ft,pt,gt)}emplace(r,a,u,f,g,v,b,T,C,M,L,R,V,G,X,se,ge,Me,_e,Pe,Oe,Re,Ye,qe,lt,bt,nt,ft,pt,gt,Et){const ot=38*r,Rt=19*r;return this.int16[ot+0]=a,this.int16[ot+1]=u,this.int16[ot+2]=f,this.float32[Rt+2]=g,this.float32[Rt+3]=v,this.int16[ot+8]=b,this.int16[ot+9]=T,this.int16[ot+10]=C,this.int16[ot+11]=M,this.int16[ot+12]=L,this.int16[ot+13]=R,this.uint16[ot+14]=V,this.uint16[ot+15]=G,this.uint16[ot+16]=X,this.uint16[ot+17]=se,this.uint16[ot+18]=ge,this.uint16[ot+19]=Me,this.uint16[ot+20]=_e,this.uint16[ot+21]=Pe,this.uint16[ot+22]=Oe,this.uint16[ot+23]=Re,this.uint16[ot+24]=Ye,this.uint16[ot+25]=qe,this.uint16[ot+26]=lt,this.uint16[ot+27]=bt,this.uint16[ot+28]=nt,this.uint32[Rt+15]=ft,this.float32[Rt+16]=pt,this.float32[Rt+17]=gt,this.float32[Rt+18]=Et,r}}rr.prototype.bytesPerElement=76,Wt(rr,"StructArrayLayout3i2f6i15ui1ul3f76");class ir extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.float32[1*r+0]=a,r}}ir.prototype.bytesPerElement=4,Wt(ir,"StructArrayLayout1f4");class or extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a,u,f,g){const v=this.length;return this.resize(v+1),this.emplace(v,r,a,u,f,g)}emplace(r,a,u,f,g,v){const b=5*r;return this.float32[b+0]=a,this.float32[b+1]=u,this.float32[b+2]=f,this.float32[b+3]=g,this.float32[b+4]=v,r}}or.prototype.bytesPerElement=20,Wt(or,"StructArrayLayout5f20");class Gi extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a,u,f){const g=this.length;return this.resize(g+1),this.emplace(g,r,a,u,f)}emplace(r,a,u,f,g){const v=6*r;return this.uint32[3*r+0]=a,this.uint16[v+2]=u,this.uint16[v+3]=f,this.uint16[v+4]=g,r}}Gi.prototype.bytesPerElement=12,Wt(Gi,"StructArrayLayout1ul3ui12");class Ai extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,a){const u=this.length;return this.resize(u+1),this.emplace(u,r,a)}emplace(r,a,u){const f=2*r;return this.uint16[f+0]=a,this.uint16[f+1]=u,r}}Ai.prototype.bytesPerElement=4,Wt(Ai,"StructArrayLayout2ui4");class Ro extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const a=this.length;return this.resize(a+1),this.emplace(a,r)}emplace(r,a){return this.uint16[1*r+0]=a,r}}Ro.prototype.bytesPerElement=2,Wt(Ro,"StructArrayLayout1ui2");class bs extends We{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,a){const u=this.length;return this.resize(u+1),this.emplace(u,r,a)}emplace(r,a,u){const f=2*r;return this.float32[f+0]=a,this.float32[f+1]=u,r}}bs.prototype.bytesPerElement=8,Wt(bs,"StructArrayLayout2f8");class Cr extends Ne{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Cr.prototype.size=40;class sr extends yn{get(r){return new Cr(this,r)}}Wt(sr,"CollisionBoxArray");class Hn extends Ne{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(r){this._structArray.uint8[this._pos1+49]=r}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(r){this._structArray.uint8[this._pos1+50]=r}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(r){this._structArray.uint32[this._pos4+13]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(r){this._structArray.uint8[this._pos1+58]=r}}Hn.prototype.size=60;class Zr extends Yn{get(r){return new Hn(this,r)}}Wt(Zr,"PlacedSymbolArray");class Yi extends Ne{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(r){this._structArray.uint32[this._pos4+15]=r}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Yi.prototype.size=76;class _r extends rr{get(r){return new Yi(this,r)}}Wt(_r,"SymbolInstanceArray");class ao extends ir{getoffsetX(r){return this.float32[1*r+0]}}Wt(ao,"GlyphOffsetArray");class eh extends xt{getx(r){return this.int16[2*r+0]}gety(r){return this.int16[2*r+1]}}Wt(eh,"SymbolLineVertexArray");class cl extends Ne{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}cl.prototype.size=12;class Eu extends Gi{get(r){return new cl(this,r)}}Wt(Eu,"FeatureIndexArray");class na extends Ai{geta_centroid_pos0(r){return this.uint16[2*r+0]}geta_centroid_pos1(r){return this.uint16[2*r+1]}}Wt(na,"FillExtrusionCentroidArray");const Sa=Ue([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),ul=Ue([{name:"a_dash",components:4,type:"Uint16"}]);var th={exports:{}},Tu={exports:{}};Tu.exports=function(o,r){var a,u,f,g,v,b,T,C;for(u=o.length-(a=3&o.length),f=r,v=3432918353,b=461845907,C=0;C<u;)T=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24,++C,f=27492+(65535&(g=5*(65535&(f=(f^=T=(65535&(T=(T=(65535&T)*v+(((T>>>16)*v&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(T=0,a){case 3:T^=(255&o.charCodeAt(C+2))<<16;case 2:T^=(255&o.charCodeAt(C+1))<<8;case 1:f^=T=(65535&(T=(T=(65535&(T^=255&o.charCodeAt(C)))*v+(((T>>>16)*v&65535)<<16)&4294967295)<<15|T>>>17))*b+(((T>>>16)*b&65535)<<16)&4294967295}return f^=o.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var kp=Tu.exports,tC={exports:{}};tC.exports=function(o,r){for(var a,u=o.length,f=r^u,g=0;u>=4;)a=1540483477*(65535&(a=255&o.charCodeAt(g)|(255&o.charCodeAt(++g))<<8|(255&o.charCodeAt(++g))<<16|(255&o.charCodeAt(++g))<<24))+((1540483477*(a>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(a=1540483477*(65535&(a^=a>>>24))+((1540483477*(a>>>16)&65535)<<16)),u-=4,++g;switch(u){case 3:f^=(255&o.charCodeAt(g+2))<<16;case 2:f^=(255&o.charCodeAt(g+1))<<8;case 1:f=1540483477*(65535&(f^=255&o.charCodeAt(g)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var nC=kp,jB=tC.exports;th.exports=nC,th.exports.murmur3=nC,th.exports.murmur2=jB;var E1=U(th.exports);class Yy{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,a,u,f){this.ids.push(rC(r)),this.positions.push(a,u,f)}getPositions(r){const a=rC(r);let u=0,f=this.ids.length-1;for(;u<f;){const v=u+f>>1;this.ids[v]>=a?f=v:u=v+1}const g=[];for(;this.ids[u]===a;)g.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return g}static serialize(r,a){const u=new Float64Array(r.ids),f=new Uint32Array(r.positions);return T1(u,f,0,u.length-1),a&&a.push(u.buffer,f.buffer),{ids:u,positions:f}}static deserialize(r){const a=new Yy;return a.ids=r.ids,a.positions=r.positions,a.indexed=!0,a}}function rC(o){const r=+o;return!isNaN(r)&&Number.MIN_SAFE_INTEGER<=r&&r<=Number.MAX_SAFE_INTEGER?r:E1(String(o))}function T1(o,r,a,u){for(;a<u;){const f=o[a+u>>1];let g=a-1,v=u+1;for(;;){do g++;while(o[g]<f);do v--;while(o[v]>f);if(g>=v)break;Qy(o,g,v),Qy(r,3*g,3*v),Qy(r,3*g+1,3*v+1),Qy(r,3*g+2,3*v+2)}v-a<u-v?(T1(o,r,a,v),a=v+1):(T1(o,r,v+1,u),u=v)}}function Qy(o,r,a){const u=o[r];o[r]=o[a],o[a]=u}Wt(Yy,"FeaturePositionMap");class dl{constructor(r){this.gl=r.gl,this.initialized=!1}fetchUniformLocation(r,a){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(r,a),this.initialized=!0),!!this.location}}class e0 extends dl{constructor(r){super(r),this.current=0}set(r,a,u){this.fetchUniformLocation(r,a)&&this.current!==u&&(this.current=u,this.gl.uniform1f(this.location,u))}}class iC extends dl{constructor(r){super(r),this.current=[0,0,0,0]}set(r,a,u){this.fetchUniformLocation(r,a)&&(u[0]===this.current[0]&&u[1]===this.current[1]&&u[2]===this.current[2]&&u[3]===this.current[3]||(this.current=u,this.gl.uniform4f(this.location,u[0],u[1],u[2],u[3])))}}class oC extends dl{constructor(r){super(r),this.current=$r.transparent}set(r,a,u){this.fetchUniformLocation(r,a)&&(u.r===this.current.r&&u.g===this.current.g&&u.b===this.current.b&&u.a===this.current.a||(this.current=u,this.gl.uniform4f(this.location,u.r,u.g,u.b,u.a)))}}const NB=new Float32Array(16),$B=new Float32Array(9),VB=new Float32Array(4);function C1(o){return[je(255*o.r,255*o.g),je(255*o.b,255*o.a)]}class Ip{constructor(r,a,u){this.value=r,this.uniformNames=a.map(f=>`u_${f}`),this.type=u}setUniform(r,a,u,f,g){a.set(r,g,f.constantOr(this.value))}getBinding(r,a){return this.type==="color"?new oC(r):new e0(r)}}class nh{constructor(r,a){this.uniformNames=a.map(u=>`u_${u}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(r){this.pixelRatio=r.pixelRatio||1,this.pattern=r.tl.concat(r.br)}setUniform(r,a,u,f,g){const v=g==="u_pattern"||g==="u_dash"?this.pattern:g==="u_pixel_ratio"?this.pixelRatio:null;v&&a.set(r,g,v)}getBinding(r,a){return a==="u_pattern"||a==="u_dash"?new iC(r):new e0(r)}}class hl{constructor(r,a,u,f){this.expression=r,this.type=u,this.maxValue=0,this.paintVertexAttributes=a.map(g=>({name:`a_${g}`,type:"Float32",components:u==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(r,a,u,f,g,v){const b=this.paintVertexArray.length,T=this.expression.evaluate(new D(0),a,{},g,f,v);this.paintVertexArray.resize(r),this._setPaintValue(b,r,T)}updatePaintArray(r,a,u,f,g){const v=this.expression.evaluate({zoom:0},u,f,void 0,g);this._setPaintValue(r,a,v)}_setPaintValue(r,a,u){if(this.type==="color"){const f=C1(u);for(let g=r;g<a;g++)this.paintVertexArray.emplace(g,f[0],f[1])}else{for(let f=r;f<a;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ra{constructor(r,a,u,f,g,v){this.expression=r,this.uniformNames=a.map(b=>`u_${b}_t`),this.type=u,this.useIntegerZoom=f,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=a.map(b=>({name:`a_${b}`,type:"Float32",components:u==="color"?4:2,offset:0})),this.paintVertexArray=new v}populatePaintArray(r,a,u,f,g,v){const b=this.expression.evaluate(new D(this.zoom),a,{},g,f,v),T=this.expression.evaluate(new D(this.zoom+1),a,{},g,f,v),C=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(C,r,b,T)}updatePaintArray(r,a,u,f,g){const v=this.expression.evaluate({zoom:this.zoom},u,f,void 0,g),b=this.expression.evaluate({zoom:this.zoom+1},u,f,void 0,g);this._setPaintValue(r,a,v,b)}_setPaintValue(r,a,u,f){if(this.type==="color"){const g=C1(u),v=C1(f);for(let b=r;b<a;b++)this.paintVertexArray.emplace(b,g[0],g[1],v[0],v[1])}else{for(let g=r;g<a;g++)this.paintVertexArray.emplace(g,u,f);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(f))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,a,u,f,g){const v=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,b=ve(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);a.set(r,g,b)}getBinding(r,a){return new e0(r)}}class sc{constructor(r,a,u,f,g){this.expression=r,this.layerId=g,this.paintVertexAttributes=(u==="array"?ul:Sa).members;for(let v=0;v<a.length;++v);this.paintVertexArray=new f}populatePaintArray(r,a,u){const f=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValues(f,r,a.patterns&&a.patterns[this.layerId],u)}updatePaintArray(r,a,u,f,g,v){this._setPaintValues(r,a,u.patterns&&u.patterns[this.layerId],v)}_setPaintValues(r,a,u,f){if(!f||!u)return;const g=f[u];if(!g)return;const{tl:v,br:b,pixelRatio:T}=g;for(let C=r;C<a;C++)this.paintVertexArray.emplace(C,v[0],v[1],b[0],b[1],T)}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ac{constructor(r,a,u=()=>!0){this.binders={},this._buffers=[];const f=[];for(const g in r.paint._values){if(!u(g))continue;const v=r.paint.get(g);if(!(v instanceof he&&Yl(v.property.specification)))continue;const b=WB(g,r.type),T=v.value,C=v.property.specification.type,M=!!v.property.useIntegerZoom,L=g==="line-dasharray"||g.endsWith("pattern"),R=g==="line-dasharray"&&r.layout.get("line-cap").value.kind!=="constant";if(T.kind!=="constant"||R)if(T.kind==="source"||R||L){const V=sC(g,C,"source");this.binders[g]=L?new sc(T,b,C,V,r.id):new hl(T,b,C,V),f.push(`/a_${g}`)}else{const V=sC(g,C,"composite");this.binders[g]=new ra(T,b,C,M,a,V),f.push(`/z_${g}`)}else this.binders[g]=L?new nh(T.value,b):new Ip(T.value,b,C),f.push(`/u_${g}`)}this.cacheKey=f.sort().join("")}getMaxValue(r){const a=this.binders[r];return a instanceof hl||a instanceof ra?a.maxValue:0}populatePaintArrays(r,a,u,f,g,v){for(const b in this.binders){const T=this.binders[b];(T instanceof hl||T instanceof ra||T instanceof sc)&&T.populatePaintArray(r,a,u,f,g,v)}}setConstantPatternPositions(r){for(const a in this.binders){const u=this.binders[a];u instanceof nh&&u.setConstantPatternPositions(r)}}updatePaintArrays(r,a,u,f,g,v){let b=!1;for(const T in r){const C=a.getPositions(T);for(const M of C){const L=u.feature(M.index);for(const R in this.binders){const V=this.binders[R];if((V instanceof hl||V instanceof ra||V instanceof sc)&&V.expression.isStateDependent===!0){const G=f.paint.get(R);V.expression=G.value,V.updatePaintArray(M.start,M.end,L,r[T],g,v),b=!0}}}}return b}defines(){const r=[];for(const a in this.binders){const u=this.binders[a];(u instanceof Ip||u instanceof nh)&&r.push(...u.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return r}getBinderAttributes(){const r=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof hl||u instanceof ra||u instanceof sc)for(let f=0;f<u.paintVertexAttributes.length;f++)r.push(u.paintVertexAttributes[f].name)}return r}getBinderUniforms(){const r=[];for(const a in this.binders){const u=this.binders[a];if(u instanceof Ip||u instanceof nh||u instanceof ra)for(const f of u.uniformNames)r.push(f)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r){const a=[];for(const u in this.binders){const f=this.binders[u];if(f instanceof Ip||f instanceof nh||f instanceof ra)for(const g of f.uniformNames)a.push({name:g,property:u,binding:f.getBinding(r,g)})}return a}setUniforms(r,a,u,f,g){for(const{name:v,property:b,binding:T}of u)this.binders[b].setUniform(r,T,g,f.get(b),v)}updatePaintBuffers(){this._buffers=[];for(const r in this.binders){const a=this.binders[r];(a instanceof hl||a instanceof ra||a instanceof sc)&&a.paintVertexBuffer&&this._buffers.push(a.paintVertexBuffer)}}upload(r){for(const a in this.binders){const u=this.binders[a];(u instanceof hl||u instanceof ra||u instanceof sc)&&u.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const a=this.binders[r];(a instanceof hl||a instanceof ra||a instanceof sc)&&a.destroy()}}}class Cu{constructor(r,a,u=()=>!0){this.programConfigurations={};for(const f of r)this.programConfigurations[f.id]=new ac(f,a,u);this.needsUpload=!1,this._featureMap=new Yy,this._bufferOffset=0}populatePaintArrays(r,a,u,f,g,v,b){for(const T in this.programConfigurations)this.programConfigurations[T].populatePaintArrays(r,a,f,g,v,b);a.id!==void 0&&this._featureMap.add(a.id,u,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,a,u,f,g){for(const v of u)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(r,this._featureMap,a,v,f,g)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const a in this.programConfigurations)this.programConfigurations[a].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}const UB={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function WB(o,r){return UB[o]||[o.replace(`${r}-`,"").replace(/-/g,"_")]}const GB={"line-pattern":{source:Xe,composite:Xe},"fill-pattern":{source:Xe,composite:Xe},"fill-extrusion-pattern":{source:Xe,composite:Xe},"line-dasharray":{source:dt,composite:dt}},HB={color:{source:bs,composite:_t},number:{source:ir,composite:bs}};function sC(o,r,a){const u=GB[o];return u&&u[a]||HB[r][a]}Wt(Ip,"ConstantBinder"),Wt(nh,"PatternConstantBinder"),Wt(hl,"SourceExpressionBinder"),Wt(sc,"PatternCompositeBinder"),Wt(ra,"CompositeExpressionBinder"),Wt(ac,"ProgramConfiguration",{omit:["_buffers"]}),Wt(Cu,"ProgramConfigurationSet");const aC="-transition";class ia extends Qc{constructor(r,a){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&r.type!=="sky"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),a.layout&&(this._unevaluatedLayout=new pe(a.layout)),a.paint)){this._transitionablePaint=new H(a.paint);for(const u in r.paint)this.setPaintProperty(u,r.paint[u],{validate:!1});for(const u in r.layout)this.setLayoutProperty(u,r.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new me(a.paint)}}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,a,u={}){a!=null&&this._validate(_1,`layers.${this.id}.layout.${r}`,r,a,u)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,a):this.visibility=a)}getPaintProperty(r){return ln(r,aC)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,a,u={}){if(a!=null&&this._validate(v1,`layers.${this.id}.paint.${r}`,r,a,u))return!1;if(ln(r,aC))return this._transitionablePaint.setTransition(r.slice(0,-11),a||void 0),!1;{const f=this._transitionablePaint._values[r],g=f.value.isDataDriven(),v=f.value;this._transitionablePaint.setValue(r,a),this._handleSpecialPaintPropertyUpdate(r);const b=this._transitionablePaint._values[r].value,T=b.isDataDriven(),C=ln(r,"pattern")||r==="line-dasharray";return T||g||C||this._handleOverridablePaintPropertyUpdate(r,v,b)}}_handleSpecialPaintPropertyUpdate(r){}getProgramIds(){return null}getProgramConfiguration(r){return null}_handleOverridablePaintPropertyUpdate(r,a,u){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,a){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,a)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,a)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),pn(r,(a,u)=>!(a===void 0||u==="layout"&&!Object.keys(a).length||u==="paint"&&!Object.keys(a).length))}_validate(r,a,u,f,g={}){return(!g||g.validate!==!1)&&qy(this,r.call(Zy,{key:a,layerType:this.type,objectKey:u,value:f,styleSpec:st,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const a=this.paint.get(r);if(a instanceof he&&Yl(a.property.specification)&&(a.value.kind==="source"||a.value.kind==="composite")&&a.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Xd(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const ZB=Ue([{name:"a_pos",components:2,type:"Int16"}],4),qB=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class qr{constructor(r=[]){this.segments=r}prepareSegment(r,a,u,f){let g=this.segments[this.segments.length-1];return r>qr.MAX_VERTEX_ARRAY_LENGTH&&mn(`Max vertices per segment is ${qr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}`),(!g||g.vertexLength+r>qr.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==f)&&(g={vertexOffset:a.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},f!==void 0&&(g.sortKey=f),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const r of this.segments)for(const a in r.vaos)r.vaos[a].destroy()}static simpleSegment(r,a,u,f){return new qr([{vertexOffset:r,primitiveOffset:a,vertexLength:u,primitiveLength:f,vaos:{},sortKey:0}])}}qr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wt(qr,"SegmentVector");var on=8192;class lc{constructor(r,a){r&&(a?this.setSouthWest(r).setNorthEast(a):r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1]))}setNorthEast(r){return this._ne=r instanceof ar?new ar(r.lng,r.lat):ar.convert(r),this}setSouthWest(r){return this._sw=r instanceof ar?new ar(r.lng,r.lat):ar.convert(r),this}extend(r){const a=this._sw,u=this._ne;let f,g;if(r instanceof ar)f=r,g=r;else{if(!(r instanceof lc))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(lc.convert(r)):this.extend(ar.convert(r)):typeof r=="object"&&r!==null&&r.hasOwnProperty("lat")&&(r.hasOwnProperty("lon")||r.hasOwnProperty("lng"))?this.extend(ar.convert(r)):this;if(f=r._sw,g=r._ne,!f||!g)return this}return a||u?(a.lng=Math.min(f.lng,a.lng),a.lat=Math.min(f.lat,a.lat),u.lng=Math.max(g.lng,u.lng),u.lat=Math.max(g.lat,u.lat)):(this._sw=new ar(f.lng,f.lat),this._ne=new ar(g.lng,g.lat)),this}getCenter(){return new ar((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new ar(this.getWest(),this.getNorth())}getSouthEast(){return new ar(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:a,lat:u}=ar.convert(r);let f=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(f=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=u&&u<=this._ne.lat&&f}static convert(r){return!r||r instanceof lc?r:new lc(r)}}var t0=1e-6,Oo=typeof Float32Array<"u"?Float32Array:Array;function lC(){var o=new Oo(9);return Oo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function cC(o,r,a){var u=r[0],f=r[1],g=r[2],v=r[3],b=r[4],T=r[5],C=r[6],M=r[7],L=r[8],R=a[0],V=a[1],G=a[2],X=a[3],se=a[4],ge=a[5],Me=a[6],_e=a[7],Pe=a[8];return o[0]=R*u+V*v+G*C,o[1]=R*f+V*b+G*M,o[2]=R*g+V*T+G*L,o[3]=X*u+se*v+ge*C,o[4]=X*f+se*b+ge*M,o[5]=X*g+se*T+ge*L,o[6]=Me*u+_e*v+Pe*C,o[7]=Me*f+_e*b+Pe*M,o[8]=Me*g+_e*T+Pe*L,o}function oa(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function A1(o,r){var a=r[0],u=r[1],f=r[2],g=r[3],v=r[4],b=r[5],T=r[6],C=r[7],M=r[8],L=r[9],R=r[10],V=r[11],G=r[12],X=r[13],se=r[14],ge=r[15],Me=a*b-u*v,_e=a*T-f*v,Pe=a*C-g*v,Oe=u*T-f*b,Re=u*C-g*b,Ye=f*C-g*T,qe=M*X-L*G,lt=M*se-R*G,bt=M*ge-V*G,nt=L*se-R*X,ft=L*ge-V*X,pt=R*ge-V*se,gt=Me*pt-_e*ft+Pe*nt+Oe*bt-Re*lt+Ye*qe;return gt?(o[0]=(b*pt-T*ft+C*nt)*(gt=1/gt),o[1]=(f*ft-u*pt-g*nt)*gt,o[2]=(X*Ye-se*Re+ge*Oe)*gt,o[3]=(R*Re-L*Ye-V*Oe)*gt,o[4]=(T*bt-v*pt-C*lt)*gt,o[5]=(a*pt-f*bt+g*lt)*gt,o[6]=(se*Pe-G*Ye-ge*_e)*gt,o[7]=(M*Ye-R*Pe+V*_e)*gt,o[8]=(v*ft-b*bt+C*qe)*gt,o[9]=(u*bt-a*ft-g*qe)*gt,o[10]=(G*Re-X*Pe+ge*Me)*gt,o[11]=(L*Pe-M*Re-V*Me)*gt,o[12]=(b*lt-v*nt-T*qe)*gt,o[13]=(a*nt-u*lt+f*qe)*gt,o[14]=(X*_e-G*Oe-se*Me)*gt,o[15]=(M*Oe-L*_e+R*Me)*gt,o):null}function Au(o,r,a){var u=r[0],f=r[1],g=r[2],v=r[3],b=r[4],T=r[5],C=r[6],M=r[7],L=r[8],R=r[9],V=r[10],G=r[11],X=r[12],se=r[13],ge=r[14],Me=r[15],_e=a[0],Pe=a[1],Oe=a[2],Re=a[3];return o[0]=_e*u+Pe*b+Oe*L+Re*X,o[1]=_e*f+Pe*T+Oe*R+Re*se,o[2]=_e*g+Pe*C+Oe*V+Re*ge,o[3]=_e*v+Pe*M+Oe*G+Re*Me,o[4]=(_e=a[4])*u+(Pe=a[5])*b+(Oe=a[6])*L+(Re=a[7])*X,o[5]=_e*f+Pe*T+Oe*R+Re*se,o[6]=_e*g+Pe*C+Oe*V+Re*ge,o[7]=_e*v+Pe*M+Oe*G+Re*Me,o[8]=(_e=a[8])*u+(Pe=a[9])*b+(Oe=a[10])*L+(Re=a[11])*X,o[9]=_e*f+Pe*T+Oe*R+Re*se,o[10]=_e*g+Pe*C+Oe*V+Re*ge,o[11]=_e*v+Pe*M+Oe*G+Re*Me,o[12]=(_e=a[12])*u+(Pe=a[13])*b+(Oe=a[14])*L+(Re=a[15])*X,o[13]=_e*f+Pe*T+Oe*R+Re*se,o[14]=_e*g+Pe*C+Oe*V+Re*ge,o[15]=_e*v+Pe*M+Oe*G+Re*Me,o}function Pp(o,r,a){var u,f,g,v,b,T,C,M,L,R,V,G,X=a[0],se=a[1],ge=a[2];return r===o?(o[12]=r[0]*X+r[4]*se+r[8]*ge+r[12],o[13]=r[1]*X+r[5]*se+r[9]*ge+r[13],o[14]=r[2]*X+r[6]*se+r[10]*ge+r[14],o[15]=r[3]*X+r[7]*se+r[11]*ge+r[15]):(f=r[1],g=r[2],v=r[3],b=r[4],T=r[5],C=r[6],M=r[7],L=r[8],R=r[9],V=r[10],G=r[11],o[0]=u=r[0],o[1]=f,o[2]=g,o[3]=v,o[4]=b,o[5]=T,o[6]=C,o[7]=M,o[8]=L,o[9]=R,o[10]=V,o[11]=G,o[12]=u*X+b*se+L*ge+r[12],o[13]=f*X+T*se+R*ge+r[13],o[14]=g*X+C*se+V*ge+r[14],o[15]=v*X+M*se+G*ge+r[15]),o}function ku(o,r,a){var u=a[0],f=a[1],g=a[2];return o[0]=r[0]*u,o[1]=r[1]*u,o[2]=r[2]*u,o[3]=r[3]*u,o[4]=r[4]*f,o[5]=r[5]*f,o[6]=r[6]*f,o[7]=r[7]*f,o[8]=r[8]*g,o[9]=r[9]*g,o[10]=r[10]*g,o[11]=r[11]*g,o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15],o}function k1(o,r,a){var u=Math.sin(a),f=Math.cos(a),g=r[4],v=r[5],b=r[6],T=r[7],C=r[8],M=r[9],L=r[10],R=r[11];return r!==o&&(o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[4]=g*f+C*u,o[5]=v*f+M*u,o[6]=b*f+L*u,o[7]=T*f+R*u,o[8]=C*f-g*u,o[9]=M*f-v*u,o[10]=L*f-b*u,o[11]=R*f-T*u,o}function n0(o,r,a){var u=Math.sin(a),f=Math.cos(a),g=r[0],v=r[1],b=r[2],T=r[3],C=r[8],M=r[9],L=r[10],R=r[11];return r!==o&&(o[4]=r[4],o[5]=r[5],o[6]=r[6],o[7]=r[7],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=g*f-C*u,o[1]=v*f-M*u,o[2]=b*f-L*u,o[3]=T*f-R*u,o[8]=g*u+C*f,o[9]=v*u+M*f,o[10]=b*u+L*f,o[11]=T*u+R*f,o}function uC(o,r){return o[0]=r[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=r[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=r[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function dC(o,r,a){var u,f,g,v=a[0],b=a[1],T=a[2],C=Math.hypot(v,b,T);return C<t0?null:(v*=C=1/C,b*=C,T*=C,u=Math.sin(r),f=Math.cos(r),o[0]=v*v*(g=1-f)+f,o[1]=b*v*g+T*u,o[2]=T*v*g-b*u,o[3]=0,o[4]=v*b*g-T*u,o[5]=b*b*g+f,o[6]=T*b*g+v*u,o[7]=0,o[8]=v*T*g+b*u,o[9]=b*T*g-v*u,o[10]=T*T*g+f,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o)}Math.hypot||(Math.hypot=function(){for(var o=0,r=arguments.length;r--;)o+=arguments[r]*arguments[r];return Math.sqrt(o)});var KB=Au;function I1(){var o=new Oo(3);return Oo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function hC(o){var r=new Oo(3);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r}function Mp(o){return Math.hypot(o[0],o[1],o[2])}function rh(o,r,a){var u=new Oo(3);return u[0]=o,u[1]=r,u[2]=a,u}function fl(o,r,a){return o[0]=r[0]+a[0],o[1]=r[1]+a[1],o[2]=r[2]+a[2],o}function P1(o,r,a){return o[0]=r[0]-a[0],o[1]=r[1]-a[1],o[2]=r[2]-a[2],o}function fC(o,r,a){return o[0]=r[0]*a[0],o[1]=r[1]*a[1],o[2]=r[2]*a[2],o}function Dp(o,r,a){return o[0]=Math.min(r[0],a[0]),o[1]=Math.min(r[1],a[1]),o[2]=Math.min(r[2],a[2]),o}function zp(o,r,a){return o[0]=Math.max(r[0],a[0]),o[1]=Math.max(r[1],a[1]),o[2]=Math.max(r[2],a[2]),o}function es(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o}function Lp(o,r,a,u){return o[0]=r[0]+a[0]*u,o[1]=r[1]+a[1]*u,o[2]=r[2]+a[2]*u,o}function lo(o,r){var a=r[0],u=r[1],f=r[2],g=a*a+u*u+f*f;return g>0&&(g=1/Math.sqrt(g)),o[0]=r[0]*g,o[1]=r[1]*g,o[2]=r[2]*g,o}function ws(o,r){return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]}function M1(o,r,a){var u=r[0],f=r[1],g=r[2],v=a[0],b=a[1],T=a[2];return o[0]=f*T-g*b,o[1]=g*v-u*T,o[2]=u*b-f*v,o}function Vr(o,r,a){var u=r[0],f=r[1],g=r[2],v=a[3]*u+a[7]*f+a[11]*g+a[15];return o[0]=(a[0]*u+a[4]*f+a[8]*g+a[12])/(v=v||1),o[1]=(a[1]*u+a[5]*f+a[9]*g+a[13])/v,o[2]=(a[2]*u+a[6]*f+a[10]*g+a[14])/v,o}function pC(o,r,a){var u=a[0],f=a[1],g=a[2],v=r[0],b=r[1],T=r[2],C=f*T-g*b,M=g*v-u*T,L=u*b-f*v,R=f*L-g*M,V=g*C-u*L,G=u*M-f*C,X=2*a[3];return M*=X,L*=X,V*=2,G*=2,o[0]=v+(C*=X)+(R*=2),o[1]=b+M+V,o[2]=T+L+G,o}var Rp,sa=P1,XB=fC,JB=Mp;function mC(o,r,a){return o[0]=r[0]*a,o[1]=r[1]*a,o[2]=r[2]*a,o[3]=r[3]*a,o}function gC(o,r){var a=r[0],u=r[1],f=r[2],g=r[3],v=a*a+u*u+f*f+g*g;return v>0&&(v=1/Math.sqrt(v)),o[0]=a*v,o[1]=u*v,o[2]=f*v,o[3]=g*v,o}function Iu(o,r,a){var u=r[0],f=r[1],g=r[2],v=r[3];return o[0]=a[0]*u+a[4]*f+a[8]*g+a[12]*v,o[1]=a[1]*u+a[5]*f+a[9]*g+a[13]*v,o[2]=a[2]*u+a[6]*f+a[10]*g+a[14]*v,o[3]=a[3]*u+a[7]*f+a[11]*g+a[15]*v,o}function yC(){var o=new Oo(4);return Oo!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function vC(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o}function _C(o,r,a){a*=.5;var u=r[0],f=r[1],g=r[2],v=r[3],b=Math.sin(a),T=Math.cos(a);return o[0]=u*T+v*b,o[1]=f*T+g*b,o[2]=g*T-f*b,o[3]=v*T-u*b,o}function xC(o,r,a){a*=.5;var u=r[0],f=r[1],g=r[2],v=r[3],b=Math.sin(a),T=Math.cos(a);return o[0]=u*T-g*b,o[1]=f*T+v*b,o[2]=g*T+u*b,o[3]=v*T-f*b,o}I1(),Rp=new Oo(4),Oo!=Float32Array&&(Rp[0]=0,Rp[1]=0,Rp[2]=0,Rp[3]=0);var YB=gC;I1(),rh(1,0,0),rh(0,1,0),yC(),yC(),lC();const QB=Ue([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:bC}=QB,wC=Ue([{name:"a_pos_3",components:3,type:"Int16"}]);var Op=Ue([{name:"a_pos",type:"Int16",components:2}]);class D1{constructor(r,a){this.pos=r,this.dir=a}intersectsPlane(r,a,u){const f=ws(a,this.dir);if(Math.abs(f)<1e-6)return!1;const g=((r[0]-this.pos[0])*a[0]+(r[1]-this.pos[1])*a[1]+(r[2]-this.pos[2])*a[2])/f;return u[0]=this.pos[0]+this.dir[0]*g,u[1]=this.pos[1]+this.dir[1]*g,u[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(r,a,u){if(function(V,G){var X=V[0],se=V[1],ge=V[2],Me=G[0],_e=G[1],Pe=G[2];return Math.abs(X-Me)<=t0*Math.max(1,Math.abs(X),Math.abs(Me))&&Math.abs(se-_e)<=t0*Math.max(1,Math.abs(se),Math.abs(_e))&&Math.abs(ge-Pe)<=t0*Math.max(1,Math.abs(ge),Math.abs(Pe))}(this.pos,r)||a===0)return u[0]=u[1]=u[2]=0,!1;const[f,g,v]=this.dir,b=this.pos[0]-r[0],T=this.pos[1]-r[1],C=this.pos[2]-r[2],M=f*f+g*g+v*v,L=2*(b*f+T*g+C*v),R=L*L-4*M*(b*b+T*T+C*C-a*a);if(R<0){const V=Math.max(-L/2,0),G=b+f*V,X=T+g*V,se=C+v*V,ge=Math.hypot(G,X,se);return u[0]=G*a/ge,u[1]=X*a/ge,u[2]=se*a/ge,!1}{const V=(-L-Math.sqrt(R))/(2*M);if(V<0){const G=Math.hypot(b,T,C);return u[0]=b*a/G,u[1]=T*a/G,u[2]=C*a/G,!1}return u[0]=b+f*V,u[1]=T+g*V,u[2]=C+v*V,!0}}}class z1{constructor(r,a,u,f,g){this.TL=r,this.TR=a,this.BR=u,this.BL=f,this.horizon=g}static fromInvProjectionMatrix(r,a,u){const f=[-1,1,1],g=[1,1,1],v=[1,-1,1],b=[-1,-1,1],T=Vr(f,f,r),C=Vr(g,g,r),M=Vr(v,v,r),L=Vr(b,b,r);return new z1(T,C,M,L,a/u)}}class L1{constructor(r,a){this.points=r,this.planes=a}static fromInvProjectionMatrix(r,a,u,f){const g=Math.pow(2,u),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const C=Iu([],T,r),M=1/C[3]/a*g;return function(L,R,V){return L[0]=R[0]*V[0],L[1]=R[1]*V[1],L[2]=R[2]*V[2],L[3]=R[3]*V[3],L}(C,C,[M,M,f?1/C[3]:M,M])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const C=lo([],M1([],sa([],v[T[0]],v[T[1]]),sa([],v[T[2]],v[T[1]]))),M=-ws(C,v[T[1]]);return C.concat(M)});return new L1(v,b)}}class co{static fromPoints(r){const a=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0];for(const f of r)Dp(a,a,f),zp(u,u,f);return new co(a,u)}static applyTransform(r,a){const u=r.getCorners();for(let f=0;f<u.length;++f)Vr(u[f],u[f],a);return co.fromPoints(u)}constructor(r,a){this.min=r,this.max=a,this.center=es([],fl([],this.min,this.max),.5)}quadrant(r){const a=[r%2==0,r<2],u=hC(this.min),f=hC(this.max);for(let g=0;g<a.length;g++)u[g]=a[g]?this.min[g]:this.center[g],f[g]=a[g]?this.center[g]:this.max[g];return f[2]=this.max[2],new co(u,f)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}distanceZ(r){return Math.max(Math.min(this.max[2],r[2]),this.min[2])-r[2]}getCorners(){const r=this.min,a=this.max;return[[r[0],r[1],r[2]],[a[0],r[1],r[2]],[a[0],a[1],r[2]],[r[0],a[1],r[2]],[r[0],r[1],a[2]],[a[0],r[1],a[2]],[a[0],a[1],a[2]],[r[0],a[1],a[2]]]}intersects(r){const a=this.getCorners();let u=!0;for(let f=0;f<r.planes.length;f++){const g=r.planes[f];let v=0;for(let b=0;b<a.length;b++)v+=ws(g,a[b])+g[3]>=0;if(v===0)return 0;v!==a.length&&(u=!1)}if(u)return 2;for(let f=0;f<3;f++){let g=Number.MAX_VALUE,v=-Number.MAX_VALUE;for(let b=0;b<r.points.length;b++){const T=r.points[b][f]-this.min[f];g=Math.min(g,T),v=Math.max(v,T)}if(v<0||g>this.max[f]-this.min[f])return 0}return 1}}const R1=5,SC=6,Ea=on/Math.PI/2,eF=16383,Pu=64,Bp=[Pu,32,16],Ss=-Ea,Es=Ea,tF=[new co([Ss,Ss,Ss],[Es,Es,Es]),new co([Ss,Ss,Ss],[0,0,Es]),new co([0,Ss,Ss],[Es,0,Es]),new co([Ss,0,Ss],[0,Es,Es]),new co([0,0,Ss],[Es,Es,Es])];function r0(o){return o*Ea/Np}function EC(o,r,a,u=!0){const f=es([],o._camera.position,o.worldSize),g=[r,a,1,1];Iu(g,g,o.pixelMatrixInverse),mC(g,g,1/g[3]);const v=lo([],sa([],g,f)),b=o.globeMatrix,T=[b[12],b[13],b[14]],C=sa([],T,f),M=Mp(C),L=lo([],C),R=o.worldSize/(2*Math.PI),V=ws(L,v),G=Math.asin(R/M);if(G<Math.acos(V)){if(!u)return null;const bt=[],nt=[];es(bt,v,M/V),lo(nt,sa(nt,bt,C)),lo(v,fl(v,C,es(v,nt,Math.tan(G)*M)))}const X=[];new D1(f,v).closestPointOnSphere(T,R,X);const se=lo([],yt(b,0)),ge=lo([],yt(b,1)),Me=lo([],yt(b,2)),_e=ws(se,X),Pe=ws(ge,X),Oe=ws(Me,X),Re=xe(Math.asin(-Pe/R));let Ye=xe(Math.atan2(_e,Oe));Ye=o.center.lng+function(bt,nt){const ft=(nt-bt+180)%360-180;return ft<-180?ft+360:ft}(o.center.lng,Ye);const qe=Ca(Ye),lt=ve(Aa(Re),0,1);return new ah(qe,lt)}class nF{constructor(r,a,u){this.a=sa([],r,u),this.b=sa([],a,u),this.center=u;const f=lo([],this.a),g=lo([],this.b);this.angle=Math.acos(ws(f,g))}}function O1(o,r){if(o.angle===0)return null;let a;return a=o.a[r]===0?1/o.angle*.5*Math.PI:1/o.angle*Math.atan(o.b[r]/o.a[r]/Math.sin(o.angle)-1/Math.tan(o.angle)),a<0||a>1?null:function(u,f,g,v){const b=Math.sin(g);return u*(Math.sin((1-v)*g)/b)+f*(Math.sin(v*g)/b)}(o.a[r],o.b[r],o.angle,ve(a,0,1))+o.center[r]}function Ta(o){if(o.z<=1)return tF[o.z+2*o.y+o.x];const r=B1(i0(o));return co.fromPoints(r)}function Mu(o,r,a){return es(o,o,1-a),Lp(o,o,r,a)}function TC(o,r){const a=sh(r.zoom);if(a===0)return Ta(o);const u=i0(o),f=B1(u),g=Ca(u.getWest())*r.worldSize,v=Ca(u.getEast())*r.worldSize,b=Aa(u.getNorth())*r.worldSize,T=Aa(u.getSouth())*r.worldSize,C=[g,b,0],M=[v,b,0],L=[g,T,0],R=[v,T,0],V=A1([],r.globeMatrix);return Vr(C,C,V),Vr(M,M,V),Vr(L,L,V),Vr(R,R,V),f[0]=Mu(f[0],L,a),f[1]=Mu(f[1],R,a),f[2]=Mu(f[2],M,a),f[3]=Mu(f[3],C,a),co.fromPoints(f)}function CC(o,r,a){for(const u of o)Vr(u,u,r),es(u,u,a)}function rF(o,r,a){const u=r/o.worldSize,f=o.globeMatrix;if(a.z<=1){const qe=Ta(a).getCorners();return CC(qe,f,u),co.fromPoints(qe)}const g=i0(a),v=B1(g);CC(v,f,u);const b=Number.MAX_VALUE,T=[-b,-b,-b],C=[b,b,b];if(g.contains(o.center)){for(const bt of v)Dp(C,C,bt),zp(T,T,bt);T[2]=0;const qe=o.point,lt=[qe.x*u,qe.y*u,0];return Dp(C,C,lt),zp(T,T,lt),new co(C,T)}const M=[f[12]*u,f[13]*u,f[14]*u],L=g.getCenter(),R=ve(o.center.lat,-Zi,Zi),V=ve(L.lat,-Zi,Zi),G=Ca(o.center.lng),X=Aa(R);let se=G-Ca(L.lng);const ge=X-Aa(V);se>.5?se-=1:se<-.5&&(se+=1);let Me=0;Math.abs(se)>Math.abs(ge)?Me=se>=0?1:3:(Me=ge>=0?0:2,Lp(M,M,[f[4]*u,f[5]*u,f[6]*u],-Math.sin(le(ge>=0?g.getSouth():g.getNorth()))*Ea));const _e=v[Me],Pe=v[(Me+1)%4],Oe=new nF(_e,Pe,M),Re=[O1(Oe,0)||_e[0],O1(Oe,1)||_e[1],O1(Oe,2)||_e[2]],Ye=sh(o.zoom);if(Ye>0){const qe=function({x:bt,y:nt,z:ft},pt,gt,Et,ot){const Rt=1/(1<<ft);let Ht=bt*Rt,Ft=Ht+Rt,Sn=nt*Rt,Tt=Sn+Rt,tn=0;const En=(Ht+Ft)/2-Et;return En>.5?tn=-1:En<-.5&&(tn=1),Ht=((Ht+tn)*pt-(Et*=pt))*gt+Et,Ft=((Ft+tn)*pt-Et)*gt+Et,Sn=(Sn*pt-(ot*=pt))*gt+ot,Tt=(Tt*pt-ot)*gt+ot,[[Ht,Tt,0],[Ft,Tt,0],[Ft,Sn,0],[Ht,Sn,0]]}(a,r,o._pixelsPerMercatorPixel,G,X);for(let bt=0;bt<v.length;bt++)Mu(v[bt],qe[bt],Ye);const lt=fl([],qe[Me],qe[(Me+1)%4]);es(lt,lt,.5),Mu(Re,lt,Ye)}for(const qe of v)Dp(C,C,qe),zp(T,T,qe);return C[2]=Math.min(_e[2],Pe[2]),Dp(C,C,Re),zp(T,T,Re),new co(C,T)}function i0({x:o,y:r,z:a}){const u=1/(1<<a),f=new ar(ts(o*u),Hi((r+1)*u)),g=new ar(ts((o+1)*u),Hi(r*u));return new lc(f,g)}function B1(o){const r=le(o.getNorth()),a=le(o.getSouth()),u=Math.cos(r),f=Math.cos(a),g=Math.sin(r),v=Math.sin(a),b=o.getWest(),T=o.getEast();return[ih(f,v,b),ih(f,v,T),ih(u,g,T),ih(u,g,b)]}function ih(o,r,a,u=Ea){return a=le(a),[o*Math.sin(a)*u,-r*u,o*Math.cos(a)*u]}function oh(o,r,a){return ih(Math.cos(le(o)),Math.sin(le(o)),r,a)}function Fp(o,r,a,u){const f=1<<a.z,g=(o/on+a.x)/f;return oh(Hi((r/on+a.y)/f),ts(g),u)}function o0({min:o,max:r}){return eF/Math.max(r[0]-o[0],r[1]-o[1],r[2]-o[2])}const AC=new Float64Array(16);function jp(o){const r=o0(o),a=uC(AC,[r,r,r]);return Pp(a,a,((u=[])[0]=-(f=o.min)[0],u[1]=-f[1],u[2]=-f[2],u));var u,f}function F1(o){const r=(u=o.min,(a=AC)[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=u[0],a[13]=u[1],a[14]=u[2],a[15]=1,a);var a,u;const f=1/o0(o);return ku(r,r,[f,f,f])}function kC(o,r,a,u,f){const g=function(T){const C=on/(2*Math.PI);return T/(2*Math.PI)/C}(a),v=[o,r,-a/(2*Math.PI)],b=oa(new Float64Array(16));return Pp(b,b,v),ku(b,b,[g,g,g]),k1(b,b,le(-f)),n0(b,b,le(-u)),b}function sh(o){return Fe(R1,SC,o)}function IC(o,r){const a=oh(r.lat,r.lng),u=function(G){const X=oh(G._center.lat,G._center.lng);let se=M1([],rh(0,1,0),X);const ge=dC([],-G.angle,X);se=Vr(se,se,ge),dC(ge,-G._pitch,se);const Me=lo([],X);return es(Me,Me,r0(G.cameraToCenterDistance/G.pixelsPerMeter)),Vr(Me,Me,ge),fl([],X,Me)}(o);return v=(f=P1([],u,a))[0],b=f[1],T=f[2],C=(g=a)[0],M=g[1],L=g[2],V=(R=Math.sqrt(v*v+b*b+T*T)*Math.sqrt(C*C+M*M+L*L))&&ws(f,g)/R,Math.acos(Math.min(Math.max(V,-1),1));var f,g,v,b,T,C,M,L,R,V}function j1(o,r){return IC(o,r)>Math.PI/2*1.01}const PC=le(85),iF=Math.cos(PC),oF=Math.sin(PC),Np=63710088e-1,MC=2*Math.PI*Np;class cc{constructor(r,a){if(isNaN(r)||isNaN(a))throw new Error(`Invalid LngLat object: (${r}, ${a})`);if(this.lng=+r,this.lat=+a,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new cc(Ge(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const a=Math.PI/180,u=this.lat*a,f=r.lat*a,g=Math.sin(u)*Math.sin(f)+Math.cos(u)*Math.cos(f)*Math.cos((r.lng-this.lng)*a);return Np*Math.acos(Math.min(g,1))}toBounds(r=0){const a=360*r/40075017,u=a/Math.cos(Math.PI/180*this.lat);return new lc(new cc(this.lng-u,this.lat-a),new cc(this.lng+u,this.lat+a))}toEcef(r){const a=r0(r);return oh(this.lat,this.lng,Ea+a)}static convert(r){if(r instanceof cc)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new cc(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new cc(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var ar=cc;function N1(o){return MC*Math.cos(o*Math.PI/180)}function Ca(o){return(180+o)/360}function Aa(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function aa(o,r){return o/N1(r)}function ts(o){return 360*o-180}function Hi(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}function DC(o,r){return o*N1(Hi(r))}const Zi=85.051129;function zC(o){return 1/Math.cos(o*Math.PI/180)}class ah{constructor(r,a,u=0){this.x=+r,this.y=+a,this.z=+u}static fromLngLat(r,a=0){const u=ar.convert(r);return new ah(Ca(u.lng),Aa(u.lat),aa(a,u.lat))}toLngLat(){return new ar(ts(this.x),Hi(this.y))}toAltitude(){return DC(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/MC*zC(Hi(this.y))}}function $1(o,r,a,u,f,g,v,b,T){const C=(r+u)/2,M=(a+f)/2,L=new re(C,M);b(L),function(R,V,G,X,se,ge){const Me=G-se,_e=X-ge;return Math.abs((X-V)*Me-(G-R)*_e)/Math.hypot(Me,_e)}(L.x,L.y,g.x,g.y,v.x,v.y)>=T?($1(o,r,a,C,M,g,L,b,T),$1(o,C,M,u,f,L,v,b,T)):o.push(v)}function LC(o,r,a){let u=o[0],f=u.x,g=u.y;r(u);const v=[u];for(let b=1;b<o.length;b++){const T=o[b],{x:C,y:M}=T;r(T),$1(v,f,g,C,M,u,T,r,a),f=C,g=M,u=T}return v}function V1(o,r,a,u){if(u(r,a)){const f=r.add(a)._mult(.5);V1(o,r,f,u),V1(o,f,a,u)}else o.push(a)}function sF(o,r){let a=o[0];const u=[a];for(let f=1;f<o.length;f++){const g=o[f];V1(u,a,g,r),a=g}return u}const U1=Math.pow(2,14)-1,RC=-U1-1;function aF(o,r){const a=Math.round(o.x*r),u=Math.round(o.y*r);return o.x=ve(a,RC,U1),o.y=ve(u,RC,U1),(a<o.x||a>o.x+1||u<o.y||u>o.y+1)&&mn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),o}function pl(o,r,a){const u=o.loadGeometry(),f=o.extent,g=on/f;if(r&&a&&a.projection.isReprojectedInTileSpace){const v=1<<r.z,{scale:b,x:T,y:C,projection:M}=a,L=R=>{const V=ts((r.x+R.x/f)/v),G=Hi((r.y+R.y/f)/v),X=M.project(V,G);R.x=(X.x*b-T)*f,R.y=(X.y*b-C)*f};for(let R=0;R<u.length;R++)if(o.type!==1)u[R]=LC(u[R],L,1);else{const V=[];for(const G of u[R])G.x<0||G.x>=f||G.y<0||G.y>=f||(L(G),V.push(G));u[R]=V}}for(const v of u)for(const b of v)aF(b,g);return u}function Du(o,r){return{type:o.type,id:o.id,properties:o.properties,geometry:r?pl(o):[]}}function s0(o,r,a,u,f){o.emplaceBack(2*r+(u+1)/2,2*a+(f+1)/2)}function a0(o,r,a){o.emplaceBack(r.x,r.y,r.z,a[0]*16384,a[1]*16384,a[2]*16384)}class W1{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.projection=r.projection,this.layoutVertexArray=new xt,this.indexArray=new Jt,this.segments=new qr,this.programConfigurations=new Cu(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,u,f){const g=this.layers[0],v=[];let b=null;g.type==="circle"&&(b=g.layout.get("circle-sort-key"));for(const{feature:C,id:M,index:L,sourceLayerIndex:R}of r){const V=this.layers[0]._featureFilter.needGeometry,G=Du(C,V);if(!this.layers[0]._featureFilter.filter(new D(this.zoom),G,u))continue;const X=b?b.evaluate(G,{},u):void 0,se={id:M,properties:C.properties,type:C.type,sourceLayerIndex:R,index:L,geometry:V?G.geometry:pl(C,u,f),patterns:{},sortKey:X};v.push(se)}b&&v.sort((C,M)=>C.sortKey-M.sortKey);let T=null;f.projection.name==="globe"&&(this.globeExtVertexArray=new wt,T=f.projection);for(const C of v){const{geometry:M,index:L,sourceLayerIndex:R}=C,V=r[L].feature;this.addFeature(C,M,L,a.availableImages,u,T),a.featureIndex.insert(V,M,L,R,this.index)}}update(r,a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,ZB.members),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,qB.members))),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(r,a,u,f,g,v){for(const b of a)for(const T of b){const C=T.x,M=T.y;if(C<0||C>=on||M<0||M>=on)continue;if(v){const V=v.projectTilePoint(C,M,g),G=v.upVector(g,C,M),X=this.globeExtVertexArray;a0(X,V,G),a0(X,V,G),a0(X,V,G),a0(X,V,G)}const L=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,r.sortKey),R=L.vertexLength;s0(this.layoutVertexArray,C,M,-1,-1),s0(this.layoutVertexArray,C,M,1,-1),s0(this.layoutVertexArray,C,M,1,1),s0(this.layoutVertexArray,C,M,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+2,R+3),L.vertexLength+=4,L.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,{},f,g)}}function OC(o,r){for(let a=0;a<o.length;a++)if(zu(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(zu(o,r[a]))return!0;return!!G1(o,r)}function lF(o,r,a){return!!zu(o,r)||!!H1(r,o,a)}function BC(o,r){if(o.length===1)return jC(r,o[0]);for(let a=0;a<r.length;a++){const u=r[a];for(let f=0;f<u.length;f++)if(zu(o,u[f]))return!0}for(let a=0;a<o.length;a++)if(jC(r,o[a]))return!0;for(let a=0;a<r.length;a++)if(G1(o,r[a]))return!0;return!1}function cF(o,r,a){if(o.length>1){if(G1(o,r))return!0;for(let u=0;u<r.length;u++)if(H1(r[u],o,a))return!0}for(let u=0;u<o.length;u++)if(H1(o[u],r,a))return!0;return!1}function G1(o,r){if(o.length===0||r.length===0)return!1;for(let a=0;a<o.length-1;a++){const u=o[a],f=o[a+1];for(let g=0;g<r.length-1;g++)if(uF(u,f,r[g],r[g+1]))return!0}return!1}function uF(o,r,a,u){return Ut(o,a,u)!==Ut(r,a,u)&&Ut(o,r,a)!==Ut(o,r,u)}function H1(o,r,a){const u=a*a;if(r.length===1)return o.distSqr(r[0])<u;for(let f=1;f<r.length;f++)if(FC(o,r[f-1],r[f])<u)return!0;return!1}function FC(o,r,a){const u=r.distSqr(a);if(u===0)return o.distSqr(r);const f=((o.x-r.x)*(a.x-r.x)+(o.y-r.y)*(a.y-r.y))/u;return o.distSqr(f<0?r:f>1?a:a.sub(r)._mult(f)._add(r))}function jC(o,r){let a,u,f,g=!1;for(let v=0;v<o.length;v++){a=o[v];for(let b=0,T=a.length-1;b<a.length;T=b++)u=a[b],f=a[T],u.y>r.y!=f.y>r.y&&r.x<(f.x-u.x)*(r.y-u.y)/(f.y-u.y)+u.x&&(g=!g)}return g}function zu(o,r){let a=!1;for(let u=0,f=o.length-1;u<o.length;f=u++){const g=o[u],v=o[f];g.y>r.y!=v.y>r.y&&r.x<(v.x-g.x)*(r.y-g.y)/(v.y-g.y)+g.x&&(a=!a)}return a}function NC(o,r,a,u,f){for(const v of o)if(r<=v.x&&a<=v.y&&u>=v.x&&f>=v.y)return!0;const g=[new re(r,a),new re(r,f),new re(u,f),new re(u,a)];if(o.length>2){for(const v of g)if(zu(o,v))return!0}for(let v=0;v<o.length-1;v++)if(dF(o[v],o[v+1],g))return!0;return!1}function dF(o,r,a){const u=a[0],f=a[2];if(o.x<u.x&&r.x<u.x||o.x>f.x&&r.x>f.x||o.y<u.y&&r.y<u.y||o.y>f.y&&r.y>f.y)return!1;const g=Ut(o,r,a[0]);return g!==Ut(o,r,a[1])||g!==Ut(o,r,a[2])||g!==Ut(o,r,a[3])}function lh(o,r,a){const u=r.paint.get(o).value;return u.kind==="constant"?u.value:a.programConfigurations.get(r.id).getMaxValue(o)}function l0(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function $C(o,r,a,u,f){if(!r[0]&&!r[1])return o;const g=re.convert(r)._mult(f);a==="viewport"&&g._rotate(-u);const v=[];for(let b=0;b<o.length;b++)v.push(o[b].sub(g));return v}function VC(o,r,a,u){const f=re.convert(o)._mult(u);return r==="viewport"&&f._rotate(-a),f}Wt(W1,"CircleBucket",{omit:["layers"]});const hF=new Ae({"circle-sort-key":new ce(st.layout_circle["circle-sort-key"])});var fF={paint:new Ae({"circle-radius":new ce(st.paint_circle["circle-radius"]),"circle-color":new ce(st.paint_circle["circle-color"]),"circle-blur":new ce(st.paint_circle["circle-blur"]),"circle-opacity":new ce(st.paint_circle["circle-opacity"]),"circle-translate":new Z(st.paint_circle["circle-translate"]),"circle-translate-anchor":new Z(st.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Z(st.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Z(st.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ce(st.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ce(st.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ce(st.paint_circle["circle-stroke-opacity"])}),layout:hF};function UC(o,r,a,u,f,g,v,b,T){if(g&&o.queryGeometry.isAboveHorizon)return!1;g&&(T*=o.pixelToTileUnitsFactor);const C=o.tileID.canonical,M=a.projection.upVectorScale(C,a.center.lat,a.worldSize).metersToTile;for(const L of r)for(const R of L){const V=R.add(b),G=f&&a.elevation?a.elevation.exaggeration()*f.getElevationAt(V.x,V.y,!0):0,X=a.projection.projectTilePoint(V.x,V.y,C);if(G>0){const _e=a.projection.upVector(C,V.x,V.y);X.x+=_e[0]*M*G,X.y+=_e[1]*M*G,X.z+=_e[2]*M*G}const se=g?V:pF(X.x,X.y,X.z,u),ge=g?o.tilespaceRays.map(_e=>gF(_e,G)):o.queryGeometry.screenGeometry,Me=Iu([],[X.x,X.y,X.z,1],u);if(!v&&g?T*=Me[3]/a.cameraToCenterDistance:v&&!g&&(T*=a.cameraToCenterDistance/Me[3]),g){const _e=Hi((R.y/on+C.y)/(1<<C.z));T/=a.projection.pixelsPerMeter(_e,1)/aa(1,_e)}if(lF(ge,se,T))return!0}return!1}function pF(o,r,a,u){const f=Iu([],[o,r,a,1],u);return new re(f[0]/f[3],f[1]/f[3])}const WC=rh(0,0,0),mF=rh(0,0,1);function gF(o,r){const a=I1();return WC[2]=r,o.intersectsPlane(WC,mF,a),new re(a[0],a[1])}class GC extends W1{}function HC(o,{width:r,height:a},u,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==r*a*u)throw new RangeError("mismatched image size")}else f=new Uint8Array(r*a*u);return o.width=r,o.height=a,o.data=f,o}function ZC(o,r,a){const{width:u,height:f}=r;u===o.width&&f===o.height||(Z1(o,r,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,u),height:Math.min(o.height,f)},a),o.width=u,o.height=f,o.data=r.data)}function Z1(o,r,a,u,f,g){if(f.width===0||f.height===0)return r;if(f.width>o.width||f.height>o.height||a.x>o.width-f.width||a.y>o.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>r.width||f.height>r.height||u.x>r.width-f.width||u.y>r.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const v=o.data,b=r.data;for(let T=0;T<f.height;T++){const C=((a.y+T)*o.width+a.x)*g,M=((u.y+T)*r.width+u.x)*g;for(let L=0;L<f.width*g;L++)b[M+L]=v[C+L]}return r}Wt(GC,"HeatmapBucket",{omit:["layers"]});class ml{constructor(r,a){HC(this,r,1,a)}resize(r){ZC(this,new ml(r),1)}clone(){return new ml({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,u,f,g){Z1(r,a,u,f,g,1)}}class Bo{constructor(r,a){HC(this,r,4,a)}resize(r){ZC(this,new Bo(r),4)}replace(r,a){a?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new Bo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,a,u,f,g){Z1(r,a,u,f,g,4)}}Wt(ml,"AlphaImage"),Wt(Bo,"RGBAImage");var yF={paint:new Ae({"heatmap-radius":new ce(st.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ce(st.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Z(st.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ee(st.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Z(st.paint_heatmap["heatmap-opacity"])})};function q1(o){const r={},a=o.resolution||256,u=o.clips?o.clips.length:1,f=o.image||new Bo({width:a,height:u}),g=(v,b,T)=>{r[o.evaluationKey]=T;const C=o.expression.evaluate(r);f.data[v+b+0]=Math.floor(255*C.r/C.a),f.data[v+b+1]=Math.floor(255*C.g/C.a),f.data[v+b+2]=Math.floor(255*C.b/C.a),f.data[v+b+3]=Math.floor(255*C.a)};if(o.clips)for(let v=0,b=0;v<u;++v,b+=4*a)for(let T=0,C=0;T<a;T++,C+=4){const M=T/(a-1),{start:L,end:R}=o.clips[v];g(b,C,L*(1-M)+R*M)}else for(let v=0,b=0;v<a;v++,b+=4)g(0,b,v/(a-1));return f}var vF={paint:new Ae({"hillshade-illumination-direction":new Z(st.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Z(st.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Z(st.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Z(st.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Z(st.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Z(st.paint_hillshade["hillshade-accent-color"])})};const _F=Ue([{name:"a_pos",components:2,type:"Int16"}],4),{members:xF}=_F;var K1={exports:{}};function c0(o,r,a){a=a||2;var u,f,g,v,b,T,C,M=r&&r.length,L=M?r[0]*a:o.length,R=qC(o,0,L,a,!0),V=[];if(!R||R.next===R.prev)return V;if(M&&(R=function(X,se,ge,Me){var _e,Pe,Oe,Re=[];for(_e=0,Pe=se.length;_e<Pe;_e++)(Oe=qC(X,se[_e]*Me,_e<Pe-1?se[_e+1]*Me:X.length,Me,!1))===Oe.next&&(Oe.steiner=!0),Re.push(kF(Oe));for(Re.sort(TF),_e=0;_e<Re.length;_e++)ge=CF(Re[_e],ge);return ge}(o,r,R,a)),o.length>80*a){u=g=o[0],f=v=o[1];for(var G=a;G<L;G+=a)(b=o[G])<u&&(u=b),(T=o[G+1])<f&&(f=T),b>g&&(g=b),T>v&&(v=T);C=(C=Math.max(g-u,v-f))!==0?32767/C:0}return $p(R,V,a,u,f,C,0),V}function qC(o,r,a,u,f){var g,v;if(f===Y1(o,r,a,u)>0)for(g=r;g<a;g+=u)v=JC(g,o[g],o[g+1],v);else for(g=a-u;g>=r;g-=u)v=JC(g,o[g],o[g+1],v);return v&&u0(v,v.next)&&(Up(v),v=v.next),v}function Lu(o,r){if(!o)return o;r||(r=o);var a,u=o;do if(a=!1,u.steiner||!u0(u,u.next)&&Kr(u.prev,u,u.next)!==0)u=u.next;else{if(Up(u),(u=r=u.prev)===u.next)break;a=!0}while(a||u!==r);return r}function $p(o,r,a,u,f,g,v){if(o){!v&&g&&function(M,L,R,V){var G=M;do G.z===0&&(G.z=X1(G.x,G.y,L,R,V)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==M);G.prevZ.nextZ=null,G.prevZ=null,function(X){var se,ge,Me,_e,Pe,Oe,Re,Ye,qe=1;do{for(ge=X,X=null,Pe=null,Oe=0;ge;){for(Oe++,Me=ge,Re=0,se=0;se<qe&&(Re++,Me=Me.nextZ);se++);for(Ye=qe;Re>0||Ye>0&&Me;)Re!==0&&(Ye===0||!Me||ge.z<=Me.z)?(_e=ge,ge=ge.nextZ,Re--):(_e=Me,Me=Me.nextZ,Ye--),Pe?Pe.nextZ=_e:X=_e,_e.prevZ=Pe,Pe=_e;ge=Me}Pe.nextZ=null,qe*=2}while(Oe>1)}(G)}(o,u,f,g);for(var b,T,C=o;o.prev!==o.next;)if(b=o.prev,T=o.next,g?wF(o,u,f,g):bF(o))r.push(b.i/a|0),r.push(o.i/a|0),r.push(T.i/a|0),Up(o),o=T.next,C=T.next;else if((o=T)===C){v?v===1?$p(o=SF(Lu(o),r,a),r,a,u,f,g,2):v===2&&EF(o,r,a,u,f,g):$p(Lu(o),r,a,u,f,g,1);break}}}function bF(o){var r=o.prev,a=o,u=o.next;if(Kr(r,a,u)>=0)return!1;for(var f=r.x,g=a.x,v=u.x,b=r.y,T=a.y,C=u.y,M=f<g?f<v?f:v:g<v?g:v,L=b<T?b<C?b:C:T<C?T:C,R=f>g?f>v?f:v:g>v?g:v,V=b>T?b>C?b:C:T>C?T:C,G=u.next;G!==r;){if(G.x>=M&&G.x<=R&&G.y>=L&&G.y<=V&&ch(f,b,g,T,v,C,G.x,G.y)&&Kr(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function wF(o,r,a,u){var f=o.prev,g=o,v=o.next;if(Kr(f,g,v)>=0)return!1;for(var b=f.x,T=g.x,C=v.x,M=f.y,L=g.y,R=v.y,V=b<T?b<C?b:C:T<C?T:C,G=M<L?M<R?M:R:L<R?L:R,X=b>T?b>C?b:C:T>C?T:C,se=M>L?M>R?M:R:L>R?L:R,ge=X1(V,G,r,a,u),Me=X1(X,se,r,a,u),_e=o.prevZ,Pe=o.nextZ;_e&&_e.z>=ge&&Pe&&Pe.z<=Me;){if(_e.x>=V&&_e.x<=X&&_e.y>=G&&_e.y<=se&&_e!==f&&_e!==v&&ch(b,M,T,L,C,R,_e.x,_e.y)&&Kr(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,Pe.x>=V&&Pe.x<=X&&Pe.y>=G&&Pe.y<=se&&Pe!==f&&Pe!==v&&ch(b,M,T,L,C,R,Pe.x,Pe.y)&&Kr(Pe.prev,Pe,Pe.next)>=0))return!1;Pe=Pe.nextZ}for(;_e&&_e.z>=ge;){if(_e.x>=V&&_e.x<=X&&_e.y>=G&&_e.y<=se&&_e!==f&&_e!==v&&ch(b,M,T,L,C,R,_e.x,_e.y)&&Kr(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;Pe&&Pe.z<=Me;){if(Pe.x>=V&&Pe.x<=X&&Pe.y>=G&&Pe.y<=se&&Pe!==f&&Pe!==v&&ch(b,M,T,L,C,R,Pe.x,Pe.y)&&Kr(Pe.prev,Pe,Pe.next)>=0)return!1;Pe=Pe.nextZ}return!0}function SF(o,r,a){var u=o;do{var f=u.prev,g=u.next.next;!u0(f,g)&&KC(f,u,u.next,g)&&Vp(f,g)&&Vp(g,f)&&(r.push(f.i/a|0),r.push(u.i/a|0),r.push(g.i/a|0),Up(u),Up(u.next),u=o=g),u=u.next}while(u!==o);return Lu(u)}function EF(o,r,a,u,f,g){var v=o;do{for(var b=v.next.next;b!==v.prev;){if(v.i!==b.i&&IF(v,b)){var T=XC(v,b);return v=Lu(v,v.next),T=Lu(T,T.next),$p(v,r,a,u,f,g,0),void $p(T,r,a,u,f,g,0)}b=b.next}v=v.next}while(v!==o)}function TF(o,r){return o.x-r.x}function CF(o,r){var a=function(f,g){var v,b=g,T=f.x,C=f.y,M=-1/0;do{if(C<=b.y&&C>=b.next.y&&b.next.y!==b.y){var L=b.x+(C-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(L<=T&&L>M&&(M=L,v=b.x<b.next.x?b:b.next,L===T))return v}b=b.next}while(b!==g);if(!v)return null;var R,V=v,G=v.x,X=v.y,se=1/0;b=v;do T>=b.x&&b.x>=G&&T!==b.x&&ch(C<X?T:M,C,G,X,C<X?M:T,C,b.x,b.y)&&(R=Math.abs(C-b.y)/(T-b.x),Vp(b,f)&&(R<se||R===se&&(b.x>v.x||b.x===v.x&&AF(v,b)))&&(v=b,se=R)),b=b.next;while(b!==V);return v}(o,r);if(!a)return r;var u=XC(a,o);return Lu(u,u.next),Lu(a,a.next)}function AF(o,r){return Kr(o.prev,o,r.prev)<0&&Kr(r.next,o,o.next)<0}function X1(o,r,a,u,f){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-a)*f|0)|o<<8))|o<<4))|o<<2))|o<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-u)*f|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function kF(o){var r=o,a=o;do(r.x<a.x||r.x===a.x&&r.y<a.y)&&(a=r),r=r.next;while(r!==o);return a}function ch(o,r,a,u,f,g,v,b){return(f-v)*(r-b)>=(o-v)*(g-b)&&(o-v)*(u-b)>=(a-v)*(r-b)&&(a-v)*(g-b)>=(f-v)*(u-b)}function IF(o,r){return o.next.i!==r.i&&o.prev.i!==r.i&&!function(a,u){var f=a;do{if(f.i!==a.i&&f.next.i!==a.i&&f.i!==u.i&&f.next.i!==u.i&&KC(f,f.next,a,u))return!0;f=f.next}while(f!==a);return!1}(o,r)&&(Vp(o,r)&&Vp(r,o)&&function(a,u){var f=a,g=!1,v=(a.x+u.x)/2,b=(a.y+u.y)/2;do f.y>b!=f.next.y>b&&f.next.y!==f.y&&v<(f.next.x-f.x)*(b-f.y)/(f.next.y-f.y)+f.x&&(g=!g),f=f.next;while(f!==a);return g}(o,r)&&(Kr(o.prev,o,r.prev)||Kr(o,r.prev,r))||u0(o,r)&&Kr(o.prev,o,o.next)>0&&Kr(r.prev,r,r.next)>0)}function Kr(o,r,a){return(r.y-o.y)*(a.x-r.x)-(r.x-o.x)*(a.y-r.y)}function u0(o,r){return o.x===r.x&&o.y===r.y}function KC(o,r,a,u){var f=h0(Kr(o,r,a)),g=h0(Kr(o,r,u)),v=h0(Kr(a,u,o)),b=h0(Kr(a,u,r));return f!==g&&v!==b||!(f!==0||!d0(o,a,r))||!(g!==0||!d0(o,u,r))||!(v!==0||!d0(a,o,u))||!(b!==0||!d0(a,r,u))}function d0(o,r,a){return r.x<=Math.max(o.x,a.x)&&r.x>=Math.min(o.x,a.x)&&r.y<=Math.max(o.y,a.y)&&r.y>=Math.min(o.y,a.y)}function h0(o){return o>0?1:o<0?-1:0}function Vp(o,r){return Kr(o.prev,o,o.next)<0?Kr(o,r,o.next)>=0&&Kr(o,o.prev,r)>=0:Kr(o,r,o.prev)<0||Kr(o,o.next,r)<0}function XC(o,r){var a=new J1(o.i,o.x,o.y),u=new J1(r.i,r.x,r.y),f=o.next,g=r.prev;return o.next=r,r.prev=o,a.next=f,f.prev=a,u.next=a,a.prev=u,g.next=u,u.prev=g,u}function JC(o,r,a,u){var f=new J1(o,r,a);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function Up(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function J1(o,r,a){this.i=o,this.x=r,this.y=a,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Y1(o,r,a,u){for(var f=0,g=r,v=a-u;g<a;g+=u)f+=(o[v]-o[g])*(o[g+1]+o[v+1]),v=g;return f}K1.exports=c0,K1.exports.default=c0,c0.deviation=function(o,r,a,u){var f=r&&r.length,g=Math.abs(Y1(o,0,f?r[0]*a:o.length,a));if(f)for(var v=0,b=r.length;v<b;v++)g-=Math.abs(Y1(o,r[v]*a,v<b-1?r[v+1]*a:o.length,a));var T=0;for(v=0;v<u.length;v+=3){var C=u[v]*a,M=u[v+1]*a,L=u[v+2]*a;T+=Math.abs((o[C]-o[L])*(o[M+1]-o[C+1])-(o[C]-o[M])*(o[L+1]-o[C+1]))}return g===0&&T===0?0:Math.abs((T-g)/g)},c0.flatten=function(o){for(var r=o[0][0].length,a={vertices:[],holes:[],dimensions:r},u=0,f=0;f<o.length;f++){for(var g=0;g<o[f].length;g++)for(var v=0;v<r;v++)a.vertices.push(o[f][g][v]);f>0&&a.holes.push(u+=o[f-1].length)}return a};var Q1=U(K1.exports);function PF(o,r,a,u,f){YC(o,r,a||0,u||o.length-1,f||MF)}function YC(o,r,a,u,f){for(;u>a;){if(u-a>600){var g=u-a+1,v=r-a+1,b=Math.log(g),T=.5*Math.exp(2*b/3),C=.5*Math.sqrt(b*T*(g-T)/g)*(v-g/2<0?-1:1);YC(o,r,Math.max(a,Math.floor(r-v*T/g+C)),Math.min(u,Math.floor(r+(g-v)*T/g+C)),f)}var M=o[r],L=a,R=u;for(Wp(o,a,r),f(o[u],M)>0&&Wp(o,a,u);L<R;){for(Wp(o,L,R),L++,R--;f(o[L],M)<0;)L++;for(;f(o[R],M)>0;)R--}f(o[a],M)===0?Wp(o,a,R):Wp(o,++R,u),R<=r&&(a=R+1),r<=R&&(u=R-1)}}function Wp(o,r,a){var u=o[r];o[r]=o[a],o[a]=u}function MF(o,r){return o<r?-1:o>r?1:0}function eb(o,r){const a=o.length;if(a<=1)return[o];const u=[];let f,g;for(let v=0;v<a;v++){const b=Vi(o[v]);b!==0&&(o[v].area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(f&&u.push(f),f=[o[v]]):f.push(o[v]))}if(f&&u.push(f),r>1)for(let v=0;v<u.length;v++)u[v].length<=r||(PF(u[v],r,1,u[v].length-1,DF),u[v]=u[v].slice(0,r));return u}function DF(o,r){return r.area-o.area}function tb(o,r,a){const u=a.patternDependencies;let f=!1;for(const g of r){const v=g.paint.get(`${o}-pattern`);v.isConstant()||(f=!0);const b=v.constantOr(null);b&&(f=!0,u[b]=!0)}return f}function nb(o,r,a,u,f){const g=f.patternDependencies;for(const v of r){const b=v.paint.get(`${o}-pattern`).value;if(b.kind!=="constant"){let T=b.evaluate({zoom:u},a,{},f.availableImages);T=T&&T.name?T.name:T,g[T]=!0,a.patterns[v.id]=T}}return a}class f0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xt,this.indexArray=new Jt,this.indexArray2=new Ai,this.programConfigurations=new Cu(r.layers,r.zoom),this.segments=new qr,this.segments2=new qr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.projection=r.projection}populate(r,a,u,f){this.hasPattern=tb("fill",this.layers,a);const g=this.layers[0].layout.get("fill-sort-key"),v=[];for(const{feature:b,id:T,index:C,sourceLayerIndex:M}of r){const L=this.layers[0]._featureFilter.needGeometry,R=Du(b,L);if(!this.layers[0]._featureFilter.filter(new D(this.zoom),R,u))continue;const V=g?g.evaluate(R,{},u,a.availableImages):void 0,G={id:T,properties:b.properties,type:b.type,sourceLayerIndex:M,index:C,geometry:L?R.geometry:pl(b,u,f),patterns:{},sortKey:V};v.push(G)}g&&v.sort((b,T)=>b.sortKey-T.sortKey);for(const b of v){const{geometry:T,index:C,sourceLayerIndex:M}=b;if(this.hasPattern){const L=nb("fill",this.layers,b,this.zoom,a);this.patternFeatures.push(L)}else this.addFeature(b,T,C,u,{},a.availableImages);a.featureIndex.insert(r[C].feature,T,C,M,this.index)}}update(r,a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,u,f)}addFeatures(r,a,u,f,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,xF),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,a,u,f,g,v=[]){for(const b of eb(a,500)){let T=0;for(const G of b)T+=G.length;const C=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray),M=C.vertexLength,L=[],R=[];for(const G of b){if(G.length===0)continue;G!==b[0]&&R.push(L.length/2);const X=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),se=X.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(se+G.length-1,se),L.push(G[0].x),L.push(G[0].y);for(let ge=1;ge<G.length;ge++)this.layoutVertexArray.emplaceBack(G[ge].x,G[ge].y),this.indexArray2.emplaceBack(se+ge-1,se+ge),L.push(G[ge].x),L.push(G[ge].y);X.vertexLength+=G.length,X.primitiveLength+=G.length}const V=Q1(L,R);for(let G=0;G<V.length;G+=3)this.indexArray.emplaceBack(M+V[G],M+V[G+1],M+V[G+2]);C.vertexLength+=T,C.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,v,f)}}Wt(f0,"FillBucket",{omit:["layers","patternFeatures"]});const zF=new Ae({"fill-sort-key":new ce(st.layout_fill["fill-sort-key"])});var LF={paint:new Ae({"fill-antialias":new Z(st.paint_fill["fill-antialias"]),"fill-opacity":new ce(st.paint_fill["fill-opacity"]),"fill-color":new ce(st.paint_fill["fill-color"]),"fill-outline-color":new ce(st.paint_fill["fill-outline-color"]),"fill-translate":new Z(st.paint_fill["fill-translate"]),"fill-translate-anchor":new Z(st.paint_fill["fill-translate-anchor"]),"fill-pattern":new ce(st.paint_fill["fill-pattern"])}),layout:zF};const RF=Ue([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),OF=Ue([{name:"a_centroid_pos",components:2,type:"Uint16"}]),BF=Ue([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:FF}=RF;var p0={},jF=Q,QC=uh;function uh(o,r,a,u,f){this.properties={},this.extent=a,this.type=0,this._pbf=o,this._geometry=-1,this._keys=u,this._values=f,o.readFields(NF,this,r)}function NF(o,r,a){o==1?r.id=a.readVarint():o==2?function(u,f){for(var g=u.readVarint()+u.pos;u.pos<g;){var v=f._keys[u.readVarint()],b=f._values[u.readVarint()];f.properties[v]=b}}(a,r):o==3?r.type=a.readVarint():o==4&&(r._geometry=a.pos)}function $F(o){for(var r,a,u=0,f=0,g=o.length,v=g-1;f<g;v=f++)u+=((a=o[v]).x-(r=o[f]).x)*(r.y+a.y);return u}uh.types=["Unknown","Point","LineString","Polygon"],uh.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var r,a=o.readVarint()+o.pos,u=1,f=0,g=0,v=0,b=[];o.pos<a;){if(f<=0){var T=o.readVarint();u=7&T,f=T>>3}if(f--,u===1||u===2)g+=o.readSVarint(),v+=o.readSVarint(),u===1&&(r&&b.push(r),r=[]),r.push(new jF(g,v));else{if(u!==7)throw new Error("unknown command "+u);r&&r.push(r[0].clone())}}return r&&b.push(r),b},uh.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var r=o.readVarint()+o.pos,a=1,u=0,f=0,g=0,v=1/0,b=-1/0,T=1/0,C=-1/0;o.pos<r;){if(u<=0){var M=o.readVarint();a=7&M,u=M>>3}if(u--,a===1||a===2)(f+=o.readSVarint())<v&&(v=f),f>b&&(b=f),(g+=o.readSVarint())<T&&(T=g),g>C&&(C=g);else if(a!==7)throw new Error("unknown command "+a)}return[v,T,b,C]},uh.prototype.toGeoJSON=function(o,r,a){var u,f,g=this.extent*Math.pow(2,a),v=this.extent*o,b=this.extent*r,T=this.loadGeometry(),C=uh.types[this.type];function M(V){for(var G=0;G<V.length;G++){var X=V[G];V[G]=[360*(X.x+v)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(X.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var L=[];for(u=0;u<T.length;u++)L[u]=T[u][0];M(T=L);break;case 2:for(u=0;u<T.length;u++)M(T[u]);break;case 3:for(T=function(V){var G=V.length;if(G<=1)return[V];for(var X,se,ge=[],Me=0;Me<G;Me++){var _e=$F(V[Me]);_e!==0&&(se===void 0&&(se=_e<0),se===_e<0?(X&&ge.push(X),X=[V[Me]]):X.push(V[Me]))}return X&&ge.push(X),ge}(T),u=0;u<T.length;u++)for(f=0;f<T[u].length;f++)M(T[u][f])}T.length===1?T=T[0]:C="Multi"+C;var R={type:"Feature",geometry:{type:C,coordinates:T},properties:this.properties};return"id"in this&&(R.id=this.id),R};var VF=QC,eA=tA;function tA(o,r){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(UF,this,r),this.length=this._features.length}function UF(o,r,a){o===15?r.version=a.readVarint():o===1?r.name=a.readString():o===5?r.extent=a.readVarint():o===2?r._features.push(a.pos):o===3?r._keys.push(a.readString()):o===4&&r._values.push(function(u){for(var f=null,g=u.readVarint()+u.pos;u.pos<g;){var v=u.readVarint()>>3;f=v===1?u.readString():v===2?u.readFloat():v===3?u.readDouble():v===4?u.readVarint64():v===5?u.readVarint():v===6?u.readSVarint():v===7?u.readBoolean():null}return f}(a))}tA.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var r=this._pbf.readVarint()+this._pbf.pos;return new VF(this._pbf,r,this.extent,this._keys,this._values)};var WF=eA;function GF(o,r,a){if(o===3){var u=new WF(a,a.readVarint()+a.pos);u.length&&(r[u.name]=u)}}var rb=p0.VectorTile=function(o,r){this.layers=o.readFields(GF,{},r)},m0=p0.VectorTileFeature=QC;function g0(o,r,a,u){const f=[],g=u===0?(v,b,T,C,M,L)=>{v.push(new re(L,T+(L-b)/(C-b)*(M-T)))}:(v,b,T,C,M,L)=>{v.push(new re(b+(L-T)/(M-T)*(C-b),L))};for(const v of o){const b=[];for(const T of v){if(T.length<=2)continue;const C=[];for(let R=0;R<T.length-1;R++){const V=T[R].x,G=T[R].y,X=T[R+1].x,se=T[R+1].y,ge=u===0?V:G,Me=u===0?X:se;ge<r?Me>r&&g(C,V,G,X,se,r):ge>a?Me<a&&g(C,V,G,X,se,a):C.push(T[R]),Me<r&&ge>=r&&g(C,V,G,X,se,r),Me>a&&ge<=a&&g(C,V,G,X,se,a)}let M=T[T.length-1];const L=u===0?M.x:M.y;L>=r&&L<=a&&C.push(M),C.length&&(M=C[C.length-1],C[0].x===M.x&&C[0].y===M.y||C.push(C[0]),b.push(C))}b.length&&f.push(b)}return f}p0.VectorTileLayer=eA;const HF=m0.types,ZF=Math.pow(2,13);function Gp(o,r,a,u,f,g,v,b){o.emplaceBack((r<<1)+v,(a<<1)+g,(Math.floor(u*ZF)<<1)+f,Math.round(b))}function Hp(o,r,a){o.emplaceBack(r.x,r.y,r.z,a[0]*16384,a[1]*16384,a[2]*16384)}class nA{constructor(){this.acc=new re(0,0),this.polyCount=[]}startRing(r){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new re(r.x,r.y),this.max=new re(r.x,r.y))}append(r,a){this.currentPolyCount.edges++,this.acc._add(r);const u=this.min,f=this.max;r.x<u.x?u.x=r.x:r.x>f.x&&(f.x=r.x),r.y<u.y?u.y=r.y:r.y>f.y&&(f.y=r.y),((r.x===0||r.x===on)&&r.x===a.x)!=((r.y===0||r.y===on)&&r.y===a.y)&&this.processBorderOverlap(r,a),a.x<0!=r.x<0&&this.addBorderIntersection(0,Vn(a.y,r.y,(0-a.x)/(r.x-a.x))),a.x>on!=r.x>on&&this.addBorderIntersection(1,Vn(a.y,r.y,(on-a.x)/(r.x-a.x))),a.y<0!=r.y<0&&this.addBorderIntersection(2,Vn(a.x,r.x,(0-a.y)/(r.y-a.y))),a.y>on!=r.y>on&&this.addBorderIntersection(3,Vn(a.x,r.x,(on-a.y)/(r.y-a.y)))}addBorderIntersection(r,a){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const u=this.borders[r];a<u[0]&&(u[0]=a),a>u[1]&&(u[1]=a)}processBorderOverlap(r,a){if(r.x===a.x){if(r.y===a.y)return;const u=r.x===0?0:1;this.addBorderIntersection(u,a.y),this.addBorderIntersection(u,r.y)}else{const u=r.y===0?2:3;this.addBorderIntersection(u,a.x),this.addBorderIntersection(u,r.x)}}centroid(){const r=this.polyCount.reduce((a,u)=>a+u.edges,0);return r!==0?this.acc.div(r)._round():new re(0,0)}span(){return new re(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((r,a)=>r+ +(a[0]!==Number.MAX_VALUE),0)}}class Zp{constructor(r){this.zoom=r.zoom,this.canonical=r.canonical,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=r.projection,this.layoutVertexArray=new ht,this.centroidVertexArray=new na,this.indexArray=new Jt,this.programConfigurations=new Cu(r.layers,r.zoom),this.segments=new qr,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id),this.enableTerrain=r.enableTerrain}populate(r,a,u,f){this.features=[],this.hasPattern=tb("fill-extrusion",this.layers,a),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const v=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*v/(v*v+1)/on/(1<<g.z)}(u),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:v,index:b,sourceLayerIndex:T}of r){const C=this.layers[0]._featureFilter.needGeometry,M=Du(g,C);if(!this.layers[0]._featureFilter.filter(new D(this.zoom),M,u))continue;const L={id:v,sourceLayerIndex:T,index:b,geometry:C?M.geometry:pl(g,u,f),properties:g.properties,type:g.type,patterns:{}},R=this.layoutVertexArray.length;this.hasPattern?this.features.push(nb("fill-extrusion",this.layers,L,this.zoom,a)):this.addFeature(L,L.geometry,b,u,{},a.availableImages,f),a.featureIndex.insert(g,L.geometry,b,T,this.index,R)}this.sortBorders()}addFeatures(r,a,u,f,g){for(const v of this.features){const{geometry:b}=v;this.addFeature(v,b,v.index,a,u,f,g)}this.sortBorders()}update(r,a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,FF),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=r.createVertexBuffer(this.layoutVertexExtArray,BF.members,!0))),this.programConfigurations.upload(r),this.uploaded=!0}uploadCentroid(r){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,OF.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,a,u,f,g,v,b){const T=[new re(0,0),new re(on,on)],C=b.projection,M=C.name==="globe",L=this.enableTerrain&&!M?new nA:null,R=HF[r.type]==="Polygon";M&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new wt);const V=eb(a,500);for(let ge=V.length-1;ge>=0;ge--){const Me=V[ge];(Me.length===0||(G=Me[0]).every(_e=>_e.x<=0)||G.every(_e=>_e.x>=on)||G.every(_e=>_e.y<=0)||G.every(_e=>_e.y>=on))&&V.splice(ge,1)}var G;let X;if(M)X=cA(V,T,f);else{X=[];for(const ge of V)X.push({polygon:ge,bounds:T})}const se=R?this.edgeRadius:0;for(const{polygon:ge,bounds:Me}of X){let _e=0,Pe=0;for(const Re of ge)R&&!Re[0].equals(Re[Re.length-1])&&Re.push(Re[0]),Pe+=R?Re.length-1:Re.length;const Oe=this.segments.prepareSegment((R?5:4)*Pe,this.layoutVertexArray,this.indexArray);if(R){const Re=[],Ye=[];_e=Oe.vertexLength;for(const lt of ge){let bt,nt;lt.length&&lt!==ge[0]&&Ye.push(Re.length/2),bt=lt[1].sub(lt[0])._perp()._unit();for(let ft=1;ft<lt.length;ft++){const pt=lt[ft],gt=lt[ft===lt.length-1?1:ft+1];let{x:Et,y:ot}=pt;if(se){nt=gt.sub(pt)._perp()._unit();const Rt=bt.add(nt)._unit(),Ht=se*Math.min(4,1/(bt.x*Rt.x+bt.y*Rt.y));Et+=Ht*Rt.x,ot+=Ht*Rt.y,bt=nt}Gp(this.layoutVertexArray,Et,ot,0,0,1,1,0),Oe.vertexLength++,Re.push(pt.x,pt.y),M&&Hp(this.layoutVertexExtArray,C.projectTilePoint(Et,ot,f),C.upVector(f,Et,ot))}}const qe=Q1(Re,Ye);for(let lt=0;lt<qe.length;lt+=3)this.indexArray.emplaceBack(_e+qe[lt],_e+qe[lt+2],_e+qe[lt+1]),Oe.primitiveLength++}for(const Re of ge){L&&Re.length&&L.startRing(Re[0]);let Ye,qe,lt,bt=Re.length>4&&sA(Re[Re.length-2],Re[0],Re[1]),nt=se?qF(Re[Re.length-2],Re[0],Re[1],se):0;qe=Re[1].sub(Re[0])._perp()._unit();let ft=!0;for(let pt=1,gt=0;pt<Re.length;pt++){let Et=Re[pt-1],ot=Re[pt];const Rt=Re[pt===Re.length-1?1:pt+1];if(L&&R&&L.currentPolyCount.top++,oA(ot,Et,Me)){se&&(qe=Rt.sub(ot)._perp()._unit(),ft=!ft);continue}L&&L.append(ot,Et);const Ht=ot.sub(Et)._perp(),Ft=Ht.x/(Math.abs(Ht.x)+Math.abs(Ht.y)),Sn=Ht.y>0?1:0,Tt=Et.dist(ot);if(gt+Tt>32768&&(gt=0),se){lt=Rt.sub(ot)._perp()._unit();let Tn=iA(Et,ot,Rt,rA(qe,lt),se);isNaN(Tn)&&(Tn=0);const fn=ot.sub(Et)._unit();Et=Et.add(fn.mult(nt))._round(),ot=ot.add(fn.mult(-Tn))._round(),nt=Tn,qe=lt}const tn=Oe.vertexLength,En=Re.length>4&&sA(Et,ot,Rt);let Wn=aA(gt,bt,ft);if(Gp(this.layoutVertexArray,Et.x,Et.y,Ft,Sn,0,0,Wn),Gp(this.layoutVertexArray,Et.x,Et.y,Ft,Sn,0,1,Wn),gt+=Tt,Wn=aA(gt,En,!ft),bt=En,Gp(this.layoutVertexArray,ot.x,ot.y,Ft,Sn,0,0,Wn),Gp(this.layoutVertexArray,ot.x,ot.y,Ft,Sn,0,1,Wn),Oe.vertexLength+=4,this.indexArray.emplaceBack(tn+0,tn+1,tn+2),this.indexArray.emplaceBack(tn+1,tn+3,tn+2),Oe.primitiveLength+=2,se){const Tn=_e+(pt===1?Re.length-2:pt-2),fn=pt===1?_e:Tn+1;if(this.indexArray.emplaceBack(tn+1,Tn,tn+3),this.indexArray.emplaceBack(Tn,fn,tn+3),Oe.primitiveLength+=2,Ye===void 0&&(Ye=tn),!oA(Rt,Re[pt],Me)){const vr=pt===Re.length-1?Ye:Oe.vertexLength;this.indexArray.emplaceBack(tn+2,tn+3,vr),this.indexArray.emplaceBack(tn+3,vr+1,vr),this.indexArray.emplaceBack(tn+3,fn,vr+1),Oe.primitiveLength+=3}ft=!ft}if(M){const Tn=this.layoutVertexExtArray,fn=C.projectTilePoint(Et.x,Et.y,f),vr=C.projectTilePoint(ot.x,ot.y,f),Cn=C.upVector(f,Et.x,Et.y),An=C.upVector(f,ot.x,ot.y);Hp(Tn,fn,Cn),Hp(Tn,fn,Cn),Hp(Tn,vr,An),Hp(Tn,vr,An)}}R&&(_e+=Re.length-1)}}if(L&&L.polyCount.length>0){if(L.borders){L.vertexArrayOffset=this.centroidVertexArray.length;const ge=L.borders,Me=this.featuresOnBorder.push(L)-1;for(let _e=0;_e<4;_e++)ge[_e][0]!==Number.MAX_VALUE&&this.borders[_e].push(Me)}this.encodeCentroid(L.borders?void 0:L.centroid(),L)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,v,f)}sortBorders(){for(let r=0;r<4;r++)this.borders[r].sort((a,u)=>this.featuresOnBorder[a].borders[r][0]-this.featuresOnBorder[u].borders[r][0])}encodeCentroid(r,a,u=!0){let f,g;if(r)if(r.y!==0){const b=a.span()._mult(this.tileToMeter);f=(Math.max(r.x,1)<<3)+Math.min(7,Math.round(b.x/10)),g=(Math.max(r.y,1)<<3)+Math.min(7,Math.round(b.y/10))}else f=Math.ceil(7*(r.x+450)),g=0;else f=0,g=+u;let v=u?this.centroidVertexArray.length:a.vertexArrayOffset;for(const b of a.polyCount){u&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*b.edges+b.top);for(let T=0;T<b.top;T++)this.centroidVertexArray.emplace(v++,f,g);for(let T=0;T<2*b.edges;T++)this.centroidVertexArray.emplace(v++,0,g),this.centroidVertexArray.emplace(v++,f,g)}}}function rA(o,r){const a=o.add(r)._unit();return o.x*a.x+o.y*a.y}function qF(o,r,a,u){const f=r.sub(o)._perp()._unit(),g=a.sub(r)._perp()._unit();return iA(o,r,a,rA(f,g),u)}function iA(o,r,a,u,f){const g=Math.sqrt(1-u*u);return Math.min(o.dist(r)/3,r.dist(a)/3,f*g/u)}function oA(o,r,a){return o.x<a[0].x&&r.x<a[0].x||o.x>a[1].x&&r.x>a[1].x||o.y<a[0].y&&r.y<a[0].y||o.y>a[1].y&&r.y>a[1].y}function sA(o,r,a){if(o.x<0||o.x>=on||r.x<0||r.x>=on||a.x<0||a.x>=on)return!1;const u=a.sub(r),f=u.perp(),g=o.sub(r);return(u.x*g.x+u.y*g.y)/Math.sqrt((u.x*u.x+u.y*u.y)*(g.x*g.x+g.y*g.y))>-.866&&f.x*g.x+f.y*g.y<0}function aA(o,r,a){const u=r?2|o:-3&o;return a?1|u:-2&u}function lA(){const o=Math.PI/32,r=Math.tan(o),a=Np;return a*Math.sqrt(1+2*r*r)-a}function cA(o,r,a){const u=1<<a.z,f=ts(a.x/u),g=ts((a.x+1)/u),v=Hi(a.y/u),b=Hi((a.y+1)/u);return function(T,C,M,L,R=0,V){const G=[];if(!T.length||!M||!L)return G;const X=(Re,Ye)=>{for(const qe of Re)G.push({polygon:qe,bounds:Ye})},se=Math.ceil(Math.log2(M)),ge=Math.ceil(Math.log2(L)),Me=se-ge,_e=[];for(let Re=0;Re<Math.abs(Me);Re++)_e.push(Me>0?0:1);for(let Re=0;Re<Math.min(se,ge);Re++)_e.push(0),_e.push(1);let Pe=T;if(Pe=g0(Pe,C[0].y-R,C[1].y+R,1),Pe=g0(Pe,C[0].x-R,C[1].x+R,0),!Pe.length)return G;const Oe=[];for(_e.length?Oe.push({polygons:Pe,bounds:C,depth:0}):X(Pe,C);Oe.length;){const Re=Oe.pop(),Ye=Re.depth,qe=_e[Ye],lt=Re.bounds[0],bt=Re.bounds[1],nt=qe===0?lt.x:lt.y,ft=qe===0?bt.x:bt.y,pt=V?V(qe,nt,ft):.5*(nt+ft),gt=g0(Re.polygons,nt-R,pt+R,qe),Et=g0(Re.polygons,pt-R,ft+R,qe);if(gt.length){const ot=[lt,new re(qe===0?pt:bt.x,qe===1?pt:bt.y)];_e.length>Ye+1?Oe.push({polygons:gt,bounds:ot,depth:Ye+1}):X(gt,ot)}if(Et.length){const ot=[new re(qe===0?pt:lt.x,qe===1?pt:lt.y),bt];_e.length>Ye+1?Oe.push({polygons:Et,bounds:ot,depth:Ye+1}):X(Et,ot)}}return G}(o,r,Math.ceil((g-f)/11.25),Math.ceil((v-b)/11.25),1,(T,C,M)=>{if(T===0)return .5*(C+M);{const L=Hi((a.y+C/on)/u);return(Aa(.5*(Hi((a.y+M/on)/u)+L))*u-a.y)*on}})}Wt(Zp,"FillExtrusionBucket",{omit:["layers","features"]}),Wt(nA,"PartMetadata");const KF=new Ae({"fill-extrusion-edge-radius":new Z(st["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var XF={paint:new Ae({"fill-extrusion-opacity":new Z(st["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ce(st["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Z(st["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Z(st["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ce(st["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ce(st["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ce(st["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Z(st["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Z(st["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Z(st["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Z(st["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:KF};function uA(o,r,a){var u=2*Math.PI*6378137/256/Math.pow(2,a);return[o*u-2*Math.PI*6378137/2,r*u-2*Math.PI*6378137/2]}class y0{constructor(r,a,u){this.z=r,this.x=a,this.y=u,this.key=qp(0,r,r,a,u)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,a){const u=function(g,v,b){var T=uA(256*g,256*(v=Math.pow(2,b)-v-1),b),C=uA(256*(g+1),256*(v+1),b);return T[0]+","+T[1]+","+C[0]+","+C[1]}(this.x,this.y,this.z),f=function(g,v,b){let T,C="";for(let M=g;M>0;M--)T=1<<M-1,C+=(v&T?1:0)+(b&T?2:0);return C}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(a==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",f).replace("{bbox-epsg-3857}",u)}toString(){return`${this.z}/${this.x}/${this.y}`}}class dA{constructor(r,a){this.wrap=r,this.canonical=a,this.key=qp(r,a.z,a.z,a.x,a.y)}}class uo{constructor(r,a,u,f,g){this.overscaledZ=r,this.wrap=a,this.canonical=new y0(u,+f,+g),this.key=a===0&&r===u?this.canonical.key:qp(a,r,u,f,g)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){const a=this.canonical.z-r;return r>this.canonical.z?new uo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new uo(r,this.wrap,r,this.canonical.x>>a,this.canonical.y>>a)}calculateScaledKey(r,a=!0){if(this.overscaledZ===r&&a)return this.key;if(r>this.canonical.z)return qp(this.wrap*+a,r,this.canonical.z,this.canonical.x,this.canonical.y);{const u=this.canonical.z-r;return qp(this.wrap*+a,r,r,this.canonical.x>>u,this.canonical.y>>u)}}isChildOf(r){if(r.wrap!==this.wrap)return!1;const a=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>a&&r.canonical.y===this.canonical.y>>a}children(r){if(this.overscaledZ>=r)return[new uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const a=this.canonical.z+1,u=2*this.canonical.x,f=2*this.canonical.y;return[new uo(a,this.wrap,a,u,f),new uo(a,this.wrap,a,u+1,f),new uo(a,this.wrap,a,u,f+1),new uo(a,this.wrap,a,u+1,f+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new uo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new dA(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function qp(o,r,a,u,f){const g=1<<Math.min(a,22);let v=g*(f%g)+u%g;return o&&a<22&&(v+=g*g*((o<0?-2*o-1:2*o)%(1<<2*(22-a)))),16*(32*v+a)+(r-a)}Wt(y0,"CanonicalTileID"),Wt(uo,"OverscaledTileID",{omit:["projMatrix"]});class dh extends re{constructor(r,a,u){super(r,a),this.z=u}}function Kp(o,r){return o.x*r.x+o.y*r.y}function hA(o,r){if(o.length===1){let a=0;const u=r[a++];let f;for(;!f||u.equals(f);)if(f=r[a++],!f)return 1/0;for(;a<r.length;a++){const g=r[a],v=o[0],b=f.sub(u),T=g.sub(u),C=v.sub(u),M=Kp(b,b),L=Kp(b,T),R=Kp(T,T),V=Kp(C,b),G=Kp(C,T),X=M*R-L*L,se=(R*V-L*G)/X,ge=(M*G-L*V)/X,Me=u.z*(1-se-ge)+f.z*se+g.z*ge;if(isFinite(Me))return Me}return 1/0}{let a=1/0;for(const u of r)a=Math.min(a,u.z);return a}}function fA(o,r,a,u,f,g,v,b){const T=v*f.getElevationAt(o,r,!0,!0),C=g[0]!==0,M=C?g[1]===0?v*(g[0]/7-450):v*function(L,R,V){const G=Math.floor(R[0]/8),X=Math.floor(R[1]/8),se=10*(R[0]-8*G),ge=10*(R[1]-8*X),Me=L.getElevationAt(G,X,!0,!0),_e=L.getMeterToDEM(V),Pe=Math.floor(.5*(se*_e-1)),Oe=Math.floor(.5*(ge*_e-1)),Re=L.tileCoordToPixel(G,X),Ye=2*Pe+1,qe=2*Oe+1,lt=function(Et,ot,Rt,Ht,Ft){return[Et.getElevationAtPixel(ot,Rt,!0),Et.getElevationAtPixel(ot+Ft,Rt,!0),Et.getElevationAtPixel(ot,Rt+Ft,!0),Et.getElevationAtPixel(ot+Ht,Rt+Ft,!0)]}(L,Re.x-Pe,Re.y-Oe,Ye,qe),bt=Math.abs(lt[0]-lt[1]),nt=Math.abs(lt[2]-lt[3]),ft=Math.abs(lt[0]-lt[2])+Math.abs(lt[1]-lt[3]),pt=Math.min(.25,.5*_e*(bt+nt)/Ye),gt=Math.min(.25,.5*_e*ft/qe);return Me+Math.max(pt*se,gt*ge)}(f,g,b):T;return{base:T+(a===0)?-1:a,top:C?Math.max(M+u,T+a+2):T+u}}const JF=Ue([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:YF}=JF,QF=Ue([{name:"a_packed",components:4,type:"Float32"}]),{members:e6}=QF,t6=m0.types,n6=Math.cos(Math.PI/180*37.5);class v0{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(a=>a.id),this.index=r.index,this.projection=r.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(a=>{this.gradients[a.id]={}}),this.layoutVertexArray=new tt,this.layoutVertexArray2=new _t,this.indexArray=new Jt,this.programConfigurations=new Cu(r.layers,r.zoom),this.segments=new qr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(a=>a.isStateDependent()).map(a=>a.id)}populate(r,a,u,f){this.hasPattern=tb("line",this.layers,a);const g=this.layers[0].layout.get("line-sort-key"),v=[];for(const{feature:M,id:L,index:R,sourceLayerIndex:V}of r){const G=this.layers[0]._featureFilter.needGeometry,X=Du(M,G);if(!this.layers[0]._featureFilter.filter(new D(this.zoom),X,u))continue;const se=g?g.evaluate(X,{},u):void 0,ge={id:L,properties:M.properties,type:M.type,sourceLayerIndex:V,index:R,geometry:G?X.geometry:pl(M,u,f),patterns:{},sortKey:se};v.push(ge)}g&&v.sort((M,L)=>M.sortKey-L.sortKey);const{lineAtlas:b,featureIndex:T}=a,C=this.addConstantDashes(b);for(const M of v){const{geometry:L,index:R,sourceLayerIndex:V}=M;if(C&&this.addFeatureDashes(M,b),this.hasPattern){const G=nb("line",this.layers,M,this.zoom,a);this.patternFeatures.push(G)}else this.addFeature(M,L,R,u,b.positions,a.availableImages);T.insert(r[R].feature,L,R,V,this.index)}}addConstantDashes(r){let a=!1;for(const u of this.layers){const f=u.paint.get("line-dasharray").value,g=u.layout.get("line-cap").value;if(f.kind!=="constant"||g.kind!=="constant")a=!0;else{const v=g.value,b=f.value;if(!b)continue;r.addDash(b,v)}}return a}addFeatureDashes(r,a){const u=this.zoom;for(const f of this.layers){const g=f.paint.get("line-dasharray").value,v=f.layout.get("line-cap").value;if(g.kind==="constant"&&v.kind==="constant")continue;let b,T;if(g.kind==="constant"){if(b=g.value,!b)continue}else b=g.evaluate({zoom:u},r);T=v.kind==="constant"?v.value:v.evaluate({zoom:u},r),a.addDash(b,T),r.patterns[f.id]=a.getKey(b,T)}}update(r,a,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,a,this.stateDependentLayers,u,f)}addFeatures(r,a,u,f,g){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,a,u,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,e6)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,YF),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&r.properties.hasOwnProperty("mapbox_clip_start")&&r.properties.hasOwnProperty("mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,a,u,f,g,v){const b=this.layers[0].layout,T=b.get("line-join").evaluate(r,{}),C=b.get("line-cap").evaluate(r,{}),M=b.get("line-miter-limit"),L=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const R of a)this.addLine(R,r,T,C,M,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,u,g,v,f)}addLine(r,a,u,f,g,v){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ge=0;ge<r.length-1;ge++)this.totalDistance+=r[ge].dist(r[ge+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=t6[a.type]==="Polygon";let T=r.length;for(;T>=2&&r[T-1].equals(r[T-2]);)T--;let C=0;for(;C<T-1&&r[C].equals(r[C+1]);)C++;if(T<(b?3:2))return;u==="bevel"&&(g=1.05);const M=this.overscaling<=16?15*on/(512*this.overscaling):0,L=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let R,V,G,X,se;this.e1=this.e2=-1,b&&(R=r[T-2],se=r[C].sub(R)._unit()._perp());for(let ge=C;ge<T;ge++){if(G=ge===T-1?b?r[C+1]:void 0:r[ge+1],G&&r[ge].equals(G))continue;se&&(X=se),R&&(V=R),R=r[ge],se=G?G.sub(R)._unit()._perp():X,X=X||se;let Me=X.add(se);Me.x===0&&Me.y===0||Me._unit();const _e=X.x*se.x+X.y*se.y,Pe=Me.x*se.x+Me.y*se.y,Oe=Pe!==0?1/Pe:1/0,Re=2*Math.sqrt(2-2*Pe),Ye=Pe<n6&&V&&G,qe=X.x*se.y-X.y*se.x>0;if(Ye&&ge>C){const nt=R.dist(V);if(nt>2*M){const ft=R.sub(R.sub(V)._mult(M/nt)._round());this.updateDistance(V,ft),this.addCurrentVertex(ft,X,0,0,L),V=ft}}const lt=V&&G;let bt=lt?u:b?"butt":f;if(lt&&bt==="round"&&(Oe<v?bt="miter":Oe<=2&&(bt="fakeround")),bt==="miter"&&Oe>g&&(bt="bevel"),bt==="bevel"&&(Oe>2&&(bt="flipbevel"),Oe<g&&(bt="miter")),V&&this.updateDistance(V,R),bt==="miter")Me._mult(Oe),this.addCurrentVertex(R,Me,0,0,L);else if(bt==="flipbevel"){if(Oe>100)Me=se.mult(-1);else{const nt=Oe*X.add(se).mag()/X.sub(se).mag();Me._perp()._mult(nt*(qe?-1:1))}this.addCurrentVertex(R,Me,0,0,L),this.addCurrentVertex(R,Me.mult(-1),0,0,L)}else if(bt==="bevel"||bt==="fakeround"){const nt=-Math.sqrt(Oe*Oe-1),ft=qe?nt:0,pt=qe?0:nt;if(V&&this.addCurrentVertex(R,X,ft,pt,L),bt==="fakeround"){const gt=Math.round(180*Re/Math.PI/20);for(let Et=1;Et<gt;Et++){let ot=Et/gt;if(ot!==.5){const Ht=ot-.5;ot+=ot*Ht*(ot-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*Ht*Ht+(.848013+_e*(.215638*_e-1.06021)))}const Rt=se.sub(X)._mult(ot)._add(X)._unit()._mult(qe?-1:1);this.addHalfVertex(R,Rt.x,Rt.y,!1,qe,0,L)}}G&&this.addCurrentVertex(R,se,-ft,-pt,L)}else if(bt==="butt")this.addCurrentVertex(R,Me,0,0,L);else if(bt==="square"){const nt=V?1:-1;V||this.addCurrentVertex(R,Me,nt,nt,L),this.addCurrentVertex(R,Me,0,0,L),V&&this.addCurrentVertex(R,Me,nt,nt,L)}else bt==="round"&&(V&&(this.addCurrentVertex(R,X,0,0,L),this.addCurrentVertex(R,X,1,1,L,!0)),G&&(this.addCurrentVertex(R,se,-1,-1,L,!0),this.addCurrentVertex(R,se,0,0,L)));if(Ye&&ge<T-1){const nt=R.dist(G);if(nt>2*M){const ft=R.add(G.sub(R)._mult(M/nt)._round());this.updateDistance(R,ft),this.addCurrentVertex(ft,se,0,0,L),R=ft}}}}addCurrentVertex(r,a,u,f,g,v=!1){const b=a.y*f-a.x,T=-a.y-a.x*f;this.addHalfVertex(r,a.x+a.y*u,a.y-a.x*u,v,!1,u,g),this.addHalfVertex(r,b,T,v,!0,-f,g)}addHalfVertex({x:r,y:a},u,f,g,v,b,T){this.layoutVertexArray.emplaceBack((r<<1)+(g?1:0),(a<<1)+(v?1:0),Math.round(63*u)+128,Math.round(63*f)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const C=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,C),T.primitiveLength++),v?this.e2=C:this.e1=C}updateScaledDistance(){if(this.lineClips){const r=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=r*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(r,a){this.distance+=r.dist(a),this.updateScaledDistance()}}Wt(v0,"LineBucket",{omit:["layers","patternFeatures"]});const r6=new Ae({"line-cap":new ce(st.layout_line["line-cap"]),"line-join":new ce(st.layout_line["line-join"]),"line-miter-limit":new Z(st.layout_line["line-miter-limit"]),"line-round-limit":new Z(st.layout_line["line-round-limit"]),"line-sort-key":new ce(st.layout_line["line-sort-key"])});var pA={paint:new Ae({"line-opacity":new ce(st.paint_line["line-opacity"]),"line-color":new ce(st.paint_line["line-color"]),"line-translate":new Z(st.paint_line["line-translate"]),"line-translate-anchor":new Z(st.paint_line["line-translate-anchor"]),"line-width":new ce(st.paint_line["line-width"]),"line-gap-width":new ce(st.paint_line["line-gap-width"]),"line-offset":new ce(st.paint_line["line-offset"]),"line-blur":new ce(st.paint_line["line-blur"]),"line-dasharray":new ce(st.paint_line["line-dasharray"]),"line-pattern":new ce(st.paint_line["line-pattern"]),"line-gradient":new Ee(st.paint_line["line-gradient"]),"line-trim-offset":new Z(st.paint_line["line-trim-offset"])}),layout:r6};const mA=new class extends ce{possiblyEvaluate(o,r){return r=new D(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,transition:r.transition}),super.possiblyEvaluate(o,r)}evaluate(o,r,a,u){return r=It({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(o,r,a,u)}}(pA.paint.properties["line-width"].specification);function gA(o,r){return r>0?r+2*o:o}mA.useIntegerZoom=!0;const i6=Ue([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),o6=Ue([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),s6=Ue([{name:"a_projected_pos",components:4,type:"Float32"}],4);Ue([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const a6=Ue([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),l6=Ue([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const yA=Ue([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),c6=Ue([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Ue([{name:"triangle",components:3,type:"Uint16"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Ue([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ue([{type:"Float32",name:"offsetX"}]),Ue([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Oi=24;const la=128;function ib(o,r){const{expression:a}=r;if(a.kind==="constant")return{kind:"constant",layoutSize:a.evaluate(new D(o+1))};if(a.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:f}=a;let g=0;for(;g<u.length&&u[g]<=o;)g++;g=Math.max(0,g-1);let v=g;for(;v<u.length&&u[v]<o+1;)v++;v=Math.min(u.length-1,v);const b=u[g],T=u[v];return a.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:T,interpolationType:f}:{kind:"camera",minZoom:b,maxZoom:T,minSize:a.evaluate(new D(b)),maxSize:a.evaluate(new D(T)),interpolationType:f}}}function _0(o,{uSize:r,uSizeT:a},{lowerSize:u,upperSize:f}){return o.kind==="source"?u/la:o.kind==="composite"?Vn(u/la,f/la,a):r}function hh(o,r){let a=0,u=0;if(o.kind==="constant")u=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:f,minZoom:g,maxZoom:v}=o,b=f?ve(_s.interpolationFactor(f,r,g,v),0,1):0;o.kind==="camera"?u=Vn(o.minSize,o.maxSize,b):a=b}return{uSizeT:a,uSize:u}}var u6=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:la,evaluateSizeForFeature:_0,evaluateSizeForZoom:hh,getSizeData:ib});function d6(o,r,a){return o.sections.forEach(u=>{u.text=function(f,g,v){const b=g.layout.get("text-transform").evaluate(v,{});return b==="uppercase"?f=f.toLocaleUpperCase():b==="lowercase"&&(f=f.toLocaleLowerCase()),P.applyArabicShaping&&(f=P.applyArabicShaping(f)),f}(u.text,r,a)}),o}const Xp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function h6(o){return o==="︶"||o==="﹈"||o==="︸"||o==="﹄"||o==="﹂"||o==="︾"||o==="︼"||o==="︺"||o==="︘"||o==="﹀"||o==="︐"||o==="︓"||o==="︔"||o==="｀"||o==="￣"||o==="︑"||o==="︒"}function f6(o){return o==="︵"||o==="﹇"||o==="︷"||o==="﹃"||o==="﹁"||o==="︽"||o==="︻"||o==="︹"||o==="︗"||o==="︿"}var vA=dr,_A=function(o,r,a,u,f){var g,v,b=8*f-u-1,T=(1<<b)-1,C=T>>1,M=-7,L=a?f-1:0,R=a?-1:1,V=o[r+L];for(L+=R,g=V&(1<<-M)-1,V>>=-M,M+=b;M>0;g=256*g+o[r+L],L+=R,M-=8);for(v=g&(1<<-M)-1,g>>=-M,M+=u;M>0;v=256*v+o[r+L],L+=R,M-=8);if(g===0)g=1-C;else{if(g===T)return v?NaN:1/0*(V?-1:1);v+=Math.pow(2,u),g-=C}return(V?-1:1)*v*Math.pow(2,g-u)},xA=function(o,r,a,u,f,g){var v,b,T,C=8*g-f-1,M=(1<<C)-1,L=M>>1,R=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=u?0:g-1,G=u?1:-1,X=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(b=isNaN(r)?1:0,v=M):(v=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-v))<1&&(v--,T*=2),(r+=v+L>=1?R/T:R*Math.pow(2,1-L))*T>=2&&(v++,T/=2),v+L>=M?(b=0,v=M):v+L>=1?(b=(r*T-1)*Math.pow(2,f),v+=L):(b=r*Math.pow(2,L-1)*Math.pow(2,f),v=0));f>=8;o[a+V]=255&b,V+=G,b/=256,f-=8);for(v=v<<f|b,C+=f;C>0;o[a+V]=255&v,V+=G,v/=256,C-=8);o[a+V-G]|=128*X};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function dr(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}dr.Varint=0,dr.Fixed64=1,dr.Bytes=2,dr.Fixed32=5;var ob=4294967296,bA=1/ob,wA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function gl(o){return o.type===dr.Bytes?o.readVarint()+o.pos:o.pos+1}function fh(o,r,a){return a?4294967296*r+(o>>>0):4294967296*(r>>>0)+(o>>>0)}function SA(o,r,a){var u=r<=16383?1:r<=2097151?2:r<=268435455?3:Math.floor(Math.log(r)/(7*Math.LN2));a.realloc(u);for(var f=a.pos-1;f>=o;f--)a.buf[f+u]=a.buf[f]}function p6(o,r){for(var a=0;a<o.length;a++)r.writeVarint(o[a])}function m6(o,r){for(var a=0;a<o.length;a++)r.writeSVarint(o[a])}function g6(o,r){for(var a=0;a<o.length;a++)r.writeFloat(o[a])}function y6(o,r){for(var a=0;a<o.length;a++)r.writeDouble(o[a])}function v6(o,r){for(var a=0;a<o.length;a++)r.writeBoolean(o[a])}function _6(o,r){for(var a=0;a<o.length;a++)r.writeFixed32(o[a])}function x6(o,r){for(var a=0;a<o.length;a++)r.writeSFixed32(o[a])}function b6(o,r){for(var a=0;a<o.length;a++)r.writeFixed64(o[a])}function w6(o,r){for(var a=0;a<o.length;a++)r.writeSFixed64(o[a])}function x0(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+16777216*o[r+3]}function ph(o,r,a){o[a]=r,o[a+1]=r>>>8,o[a+2]=r>>>16,o[a+3]=r>>>24}function EA(o,r){return(o[r]|o[r+1]<<8|o[r+2]<<16)+(o[r+3]<<24)}dr.prototype={destroy:function(){this.buf=null},readFields:function(o,r,a){for(a=a||this.length;this.pos<a;){var u=this.readVarint(),f=u>>3,g=this.pos;this.type=7&u,o(f,r,this),this.pos===g&&this.skip(u)}return r},readMessage:function(o,r){return this.readFields(o,r,this.readVarint()+this.pos)},readFixed32:function(){var o=x0(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=EA(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=x0(this.buf,this.pos)+x0(this.buf,this.pos+4)*ob;return this.pos+=8,o},readSFixed64:function(){var o=x0(this.buf,this.pos)+EA(this.buf,this.pos+4)*ob;return this.pos+=8,o},readFloat:function(){var o=_A(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=_A(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var r,a,u=this.buf;return r=127&(a=u[this.pos++]),a<128?r:(r|=(127&(a=u[this.pos++]))<<7,a<128?r:(r|=(127&(a=u[this.pos++]))<<14,a<128?r:(r|=(127&(a=u[this.pos++]))<<21,a<128?r:function(f,g,v){var b,T,C=v.buf;if(b=(112&(T=C[v.pos++]))>>4,T<128||(b|=(127&(T=C[v.pos++]))<<3,T<128)||(b|=(127&(T=C[v.pos++]))<<10,T<128)||(b|=(127&(T=C[v.pos++]))<<17,T<128)||(b|=(127&(T=C[v.pos++]))<<24,T<128)||(b|=(1&(T=C[v.pos++]))<<31,T<128))return fh(f,b,g);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&(a=u[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var o=this.readVarint()+this.pos,r=this.pos;return this.pos=o,o-r>=12&&wA?function(a,u,f){return wA.decode(a.subarray(u,f))}(this.buf,r,o):function(a,u,f){for(var g="",v=u;v<f;){var b,T,C,M=a[v],L=null,R=M>239?4:M>223?3:M>191?2:1;if(v+R>f)break;R===1?M<128&&(L=M):R===2?(192&(b=a[v+1]))==128&&(L=(31&M)<<6|63&b)<=127&&(L=null):R===3?(T=a[v+2],(192&(b=a[v+1]))==128&&(192&T)==128&&((L=(15&M)<<12|(63&b)<<6|63&T)<=2047||L>=55296&&L<=57343)&&(L=null)):R===4&&(T=a[v+2],C=a[v+3],(192&(b=a[v+1]))==128&&(192&T)==128&&(192&C)==128&&((L=(15&M)<<18|(63&b)<<12|(63&T)<<6|63&C)<=65535||L>=1114112)&&(L=null)),L===null?(L=65533,R=1):L>65535&&(L-=65536,g+=String.fromCharCode(L>>>10&1023|55296),L=56320|1023&L),g+=String.fromCharCode(L),v+=R}return g}(this.buf,r,o)},readBytes:function(){var o=this.readVarint()+this.pos,r=this.buf.subarray(this.pos,o);return this.pos=o,r},readPackedVarint:function(o,r){if(this.type!==dr.Bytes)return o.push(this.readVarint(r));var a=gl(this);for(o=o||[];this.pos<a;)o.push(this.readVarint(r));return o},readPackedSVarint:function(o){if(this.type!==dr.Bytes)return o.push(this.readSVarint());var r=gl(this);for(o=o||[];this.pos<r;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==dr.Bytes)return o.push(this.readBoolean());var r=gl(this);for(o=o||[];this.pos<r;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==dr.Bytes)return o.push(this.readFloat());var r=gl(this);for(o=o||[];this.pos<r;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==dr.Bytes)return o.push(this.readDouble());var r=gl(this);for(o=o||[];this.pos<r;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==dr.Bytes)return o.push(this.readFixed32());var r=gl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==dr.Bytes)return o.push(this.readSFixed32());var r=gl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==dr.Bytes)return o.push(this.readFixed64());var r=gl(this);for(o=o||[];this.pos<r;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==dr.Bytes)return o.push(this.readSFixed64());var r=gl(this);for(o=o||[];this.pos<r;)o.push(this.readSFixed64());return o},skip:function(o){var r=7&o;if(r===dr.Varint)for(;this.buf[this.pos++]>127;);else if(r===dr.Bytes)this.pos=this.readVarint()+this.pos;else if(r===dr.Fixed32)this.pos+=4;else{if(r!==dr.Fixed64)throw new Error("Unimplemented type: "+r);this.pos+=8}},writeTag:function(o,r){this.writeVarint(o<<3|r)},realloc:function(o){for(var r=this.length||16;r<this.pos+o;)r*=2;if(r!==this.length){var a=new Uint8Array(r);a.set(this.buf),this.buf=a,this.length=r}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),ph(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),ph(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),ph(this.buf,-1&o,this.pos),ph(this.buf,Math.floor(o*bA),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),ph(this.buf,-1&o,this.pos),ph(this.buf,Math.floor(o*bA),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(r,a){var u,f;if(r>=0?(u=r%4294967296|0,f=r/4294967296|0):(f=~(-r/4294967296),4294967295^(u=~(-r%4294967296))?u=u+1|0:(u=0,f=f+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");a.realloc(10),function(g,v,b){b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7)}(u,0,a),function(g,v){var b=(7&g)<<4;v.buf[v.pos++]|=b|((g>>>=3)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g|((g>>>=7)?128:0),g&&(v.buf[v.pos++]=127&g)))))}(f,a)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(!!o)},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var r=this.pos;this.pos=function(u,f,g){for(var v,b,T=0;T<f.length;T++){if((v=f.charCodeAt(T))>55295&&v<57344){if(!b){v>56319||T+1===f.length?(u[g++]=239,u[g++]=191,u[g++]=189):b=v;continue}if(v<56320){u[g++]=239,u[g++]=191,u[g++]=189,b=v;continue}v=b-55296<<10|v-56320|65536,b=null}else b&&(u[g++]=239,u[g++]=191,u[g++]=189,b=null);v<128?u[g++]=v:(v<2048?u[g++]=v>>6|192:(v<65536?u[g++]=v>>12|224:(u[g++]=v>>18|240,u[g++]=v>>12&63|128),u[g++]=v>>6&63|128),u[g++]=63&v|128)}return g}(this.buf,o,this.pos);var a=this.pos-r;a>=128&&SA(r,a,this),this.pos=r-1,this.writeVarint(a),this.pos+=a},writeFloat:function(o){this.realloc(4),xA(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),xA(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var r=o.length;this.writeVarint(r),this.realloc(r);for(var a=0;a<r;a++)this.buf[this.pos++]=o[a]},writeRawMessage:function(o,r){this.pos++;var a=this.pos;o(r,this);var u=this.pos-a;u>=128&&SA(a,u,this),this.pos=a-1,this.writeVarint(u),this.pos+=u},writeMessage:function(o,r,a){this.writeTag(o,dr.Bytes),this.writeRawMessage(r,a)},writePackedVarint:function(o,r){r.length&&this.writeMessage(o,p6,r)},writePackedSVarint:function(o,r){r.length&&this.writeMessage(o,m6,r)},writePackedBoolean:function(o,r){r.length&&this.writeMessage(o,v6,r)},writePackedFloat:function(o,r){r.length&&this.writeMessage(o,g6,r)},writePackedDouble:function(o,r){r.length&&this.writeMessage(o,y6,r)},writePackedFixed32:function(o,r){r.length&&this.writeMessage(o,_6,r)},writePackedSFixed32:function(o,r){r.length&&this.writeMessage(o,x6,r)},writePackedFixed64:function(o,r){r.length&&this.writeMessage(o,b6,r)},writePackedSFixed64:function(o,r){r.length&&this.writeMessage(o,w6,r)},writeBytesField:function(o,r){this.writeTag(o,dr.Bytes),this.writeBytes(r)},writeFixed32Field:function(o,r){this.writeTag(o,dr.Fixed32),this.writeFixed32(r)},writeSFixed32Field:function(o,r){this.writeTag(o,dr.Fixed32),this.writeSFixed32(r)},writeFixed64Field:function(o,r){this.writeTag(o,dr.Fixed64),this.writeFixed64(r)},writeSFixed64Field:function(o,r){this.writeTag(o,dr.Fixed64),this.writeSFixed64(r)},writeVarintField:function(o,r){this.writeTag(o,dr.Varint),this.writeVarint(r)},writeSVarintField:function(o,r){this.writeTag(o,dr.Varint),this.writeSVarint(r)},writeStringField:function(o,r){this.writeTag(o,dr.Bytes),this.writeString(r)},writeFloatField:function(o,r){this.writeTag(o,dr.Fixed32),this.writeFloat(r)},writeDoubleField:function(o,r){this.writeTag(o,dr.Fixed64),this.writeDouble(r)},writeBooleanField:function(o,r){this.writeVarintField(o,!!r)}};var b0=U(vA);const sb=3;function S6(o,r,a){r.glyphs=[],o===1&&a.readMessage(E6,r)}function E6(o,r,a){if(o===3){const{id:u,bitmap:f,width:g,height:v,left:b,top:T,advance:C}=a.readMessage(T6,{});r.glyphs.push({id:u,bitmap:new ml({width:g+2*sb,height:v+2*sb},f),metrics:{width:g,height:v,left:b,top:T,advance:C}})}else o===4?r.ascender=a.readSVarint():o===5&&(r.descender=a.readSVarint())}function T6(o,r,a){o===1?r.id=a.readVarint():o===2?r.bitmap=a.readBytes():o===3?r.width=a.readVarint():o===4?r.height=a.readVarint():o===5?r.left=a.readSVarint():o===6?r.top=a.readSVarint():o===7&&(r.advance=a.readVarint())}const TA=sb;function ab(o){let r=0,a=0;for(const v of o)r+=v.w*v.h,a=Math.max(a,v.w);o.sort((v,b)=>b.h-v.h);const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),a),h:1/0}];let f=0,g=0;for(const v of o)for(let b=u.length-1;b>=0;b--){const T=u[b];if(!(v.w>T.w||v.h>T.h)){if(v.x=T.x,v.y=T.y,g=Math.max(g,v.y+v.h),f=Math.max(f,v.x+v.w),v.w===T.w&&v.h===T.h){const C=u.pop();b<u.length&&(u[b]=C)}else v.h===T.h?(T.x+=v.w,T.w-=v.w):v.w===T.w?(T.y+=v.h,T.h-=v.h):(u.push({x:T.x+v.w,y:T.y,w:T.w-v.w,h:v.h}),T.y+=v.h,T.h-=v.h);break}}return{w:f,h:g,fill:r/(f*g)||0}}const So=1;class lb{constructor(r,{pixelRatio:a,version:u,stretchX:f,stretchY:g,content:v}){this.paddedRect=r,this.pixelRatio=a,this.stretchX=f,this.stretchY=g,this.content=v,this.version=u}get tl(){return[this.paddedRect.x+So,this.paddedRect.y+So]}get br(){return[this.paddedRect.x+this.paddedRect.w-So,this.paddedRect.y+this.paddedRect.h-So]}get displaySize(){return[(this.paddedRect.w-2*So)/this.pixelRatio,(this.paddedRect.h-2*So)/this.pixelRatio]}}class CA{constructor(r,a){const u={},f={};this.haveRenderCallbacks=[];const g=[];this.addImages(r,u,g),this.addImages(a,f,g);const{w:v,h:b}=ab(g),T=new Bo({width:v||1,height:b||1});for(const C in r){const M=r[C],L=u[C].paddedRect;Bo.copy(M.data,T,{x:0,y:0},{x:L.x+So,y:L.y+So},M.data)}for(const C in a){const M=a[C],L=f[C].paddedRect,R=L.x+So,V=L.y+So,G=M.data.width,X=M.data.height;Bo.copy(M.data,T,{x:0,y:0},{x:R,y:V},M.data),Bo.copy(M.data,T,{x:0,y:X-1},{x:R,y:V-1},{width:G,height:1}),Bo.copy(M.data,T,{x:0,y:0},{x:R,y:V+X},{width:G,height:1}),Bo.copy(M.data,T,{x:G-1,y:0},{x:R-1,y:V},{width:1,height:X}),Bo.copy(M.data,T,{x:0,y:0},{x:R+G,y:V},{width:1,height:X})}this.image=T,this.iconPositions=u,this.patternPositions=f}addImages(r,a,u){for(const f in r){const g=r[f],v={x:0,y:0,w:g.data.width+2*So,h:g.data.height+2*So};u.push(v),a[f]=new lb(v,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(r,a){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(u=>r.hasImage(u)),r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in r.updatedImages)this.patchUpdatedImage(this.iconPositions[u],r.getImage(u),a),this.patchUpdatedImage(this.patternPositions[u],r.getImage(u),a)}patchUpdatedImage(r,a,u){if(!r||!a||r.version===a.version)return;r.version=a.version;const[f,g]=r.tl;u.update(a.data,void 0,{x:f,y:g})}}Wt(lb,"ImagePosition"),Wt(CA,"ImageAtlas");const ns={horizontal:1,vertical:2,horizontalOnly:3},AA=-17;class Jp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(r,a){const u=new Jp;return u.scale=r||1,u.fontStack=a,u}static forImage(r){const a=new Jp;return a.imageName=r,a}}class mh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,a){const u=new mh;for(let f=0;f<r.sections.length;f++){const g=r.sections[f];g.image?u.addImageSection(g):u.addTextSection(g,a)}return u}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSections(){return this.sections}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(r){this.text=function(a,u){let f="";for(let g=0;g<a.length;g++){const v=a.charCodeAt(g+1)||null,b=a.charCodeAt(g-1)||null;f+=!u&&(v&&Xy(v)&&!Xp[a[g+1]]||b&&Xy(b)&&!Xp[a[g-1]])||!Xp[a[g]]?a[g]:Xp[a[g]]}return f}(this.text,r)}trim(){let r=0;for(let u=0;u<this.text.length&&w0[this.text.charCodeAt(u)];u++)r++;let a=this.text.length;for(let u=this.text.length-1;u>=0&&u>=r&&w0[this.text.charCodeAt(u)];u--)a--;this.text=this.text.substring(r,a),this.sectionIndex=this.sectionIndex.slice(r,a)}substring(r,a){const u=new mh;return u.text=this.text.substring(r,a),u.sectionIndex=this.sectionIndex.slice(r,a),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,a)=>Math.max(r,this.sections[a].scale),0)}addTextSection(r,a){this.text+=r.text,this.sections.push(Jp.forText(r.scale,r.fontStack||a));const u=this.sections.length-1;for(let f=0;f<r.text.length;++f)this.sectionIndex.push(u)}addImageSection(r){const a=r.image?r.image.name:"";if(a.length===0)return void mn("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(Jp.forImage(a)),this.sectionIndex.push(this.sections.length-1)):mn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function cb(o,r,a,u,f,g,v,b,T,C,M,L,R,V,G){const X=mh.fromFeature(o,f);L===ns.vertical&&X.verticalizePunctuation(R);let se=[];const ge=function(Re,Ye,qe,lt,bt,nt){if(!Re)return[];const ft=[],pt=function(Rt,Ht,Ft,Sn,Tt,tn){let En=0;for(let Wn=0;Wn<Rt.length();Wn++){const Tn=Rt.getSection(Wn);En+=kA(Rt.getCharCode(Wn),Tn,Sn,Tt,Ht,tn)}return En/Math.max(1,Math.ceil(En/Ft))}(Re,Ye,qe,lt,bt,nt),gt=Re.text.indexOf("​")>=0;let Et=0;for(let Rt=0;Rt<Re.length();Rt++){const Ht=Re.getSection(Rt),Ft=Re.getCharCode(Rt);if(w0[Ft]||(Et+=kA(Ft,Ht,lt,bt,Ye,nt)),Rt<Re.length()-1){const Sn=!((ot=Ft)<11904||!(jt["Bopomofo Extended"](ot)||jt.Bopomofo(ot)||jt["CJK Compatibility Forms"](ot)||jt["CJK Compatibility Ideographs"](ot)||jt["CJK Compatibility"](ot)||jt["CJK Radicals Supplement"](ot)||jt["CJK Strokes"](ot)||jt["CJK Symbols and Punctuation"](ot)||jt["CJK Unified Ideographs Extension A"](ot)||jt["CJK Unified Ideographs"](ot)||jt["Enclosed CJK Letters and Months"](ot)||jt["Halfwidth and Fullwidth Forms"](ot)||jt.Hiragana(ot)||jt["Ideographic Description Characters"](ot)||jt["Kangxi Radicals"](ot)||jt["Katakana Phonetic Extensions"](ot)||jt.Katakana(ot)||jt["Vertical Forms"](ot)||jt["Yi Radicals"](ot)||jt["Yi Syllables"](ot)));(C6[Ft]||Sn||Ht.imageName)&&ft.push(PA(Rt+1,Et,pt,ft,A6(Ft,Re.getCharCode(Rt+1),Sn&&gt),!1))}}var ot;return MA(PA(Re.length(),Et,pt,ft,0,!0))}(X,C,g,r,u,V),{processBidirectionalText:Me,processStyledBidirectionalText:_e}=P;if(Me&&X.sections.length===1){const Re=Me(X.toString(),ge);for(const Ye of Re){const qe=new mh;qe.text=Ye,qe.sections=X.sections;for(let lt=0;lt<Ye.length;lt++)qe.sectionIndex.push(0);se.push(qe)}}else if(_e){const Re=_e(X.text,X.sectionIndex,ge);for(const Ye of Re){const qe=new mh;qe.text=Ye[0],qe.sectionIndex=Ye[1],qe.sections=X.sections,se.push(qe)}}else se=function(Re,Ye){const qe=[],lt=Re.text;let bt=0;for(const nt of Ye)qe.push(Re.substring(bt,nt)),bt=nt;return bt<lt.length&&qe.push(Re.substring(bt,lt.length)),qe}(X,ge);const Pe=[],Oe={positionedLines:Pe,text:X.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:L,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Re,Ye,qe,lt,bt,nt,ft,pt,gt,Et,ot,Rt){let Ht=0,Ft=0,Sn=0;const Tt=pt==="right"?1:pt==="left"?0:.5;let tn=!1;for(const Cn of bt){const An=Cn.getSections();for(const lr of An){if(lr.imageName)continue;const hr=Ye[lr.fontStack];if(hr&&(tn=hr.ascender!==void 0&&hr.descender!==void 0,!tn))break}if(!tn)break}let En=0;for(const Cn of bt){Cn.trim();const An=Cn.getMaxScale(),lr=(An-1)*Oi,hr={positionedGlyphs:[],lineOffset:0};Re.positionedLines[En]=hr;const fr=hr.positionedGlyphs;let cr=0;if(!Cn.length()){Ft+=nt,++En;continue}let kr=0,Lr=0;for(let ur=0;ur<Cn.length();ur++){const si=Cn.getSection(ur),Jr=Cn.getSectionIndex(ur),Pr=Cn.getCharCode(ur);let Zn=si.scale,Yr=null,pr=null,ho=null,Qr=Oi,Bi=0;const ki=!(gt===ns.horizontal||!ot&&!Ep(Pr)||ot&&(w0[Pr]||(Wn=Pr,jt.Arabic(Wn)||jt["Arabic Supplement"](Wn)||jt["Arabic Extended-A"](Wn)||jt["Arabic Presentation Forms-A"](Wn)||jt["Arabic Presentation Forms-B"](Wn))));if(si.imageName){const fo=lt[si.imageName];if(!fo)continue;ho=si.imageName,Re.iconsInText=Re.iconsInText||!0,pr=fo.paddedRect;const Ii=fo.displaySize;Zn=Zn*Oi/Rt,Yr={width:Ii[0],height:Ii[1],left:So,top:-TA,advance:ki?Ii[1]:Ii[0],localGlyph:!1},Bi=tn?-Yr.height*Zn:AA+An*Oi-Ii[1]*Zn,Qr=Yr.advance;const da=(ki?Ii[0]:Ii[1])*Zn-Oi*An;da>0&&da>cr&&(cr=da)}else{const fo=qe[si.fontStack];if(!fo)continue;fo[Pr]&&(pr=fo[Pr]);const Ii=Ye[si.fontStack];if(!Ii)continue;const da=Ii.glyphs[Pr];if(!da)continue;if(Yr=da.metrics,Qr=Pr!==8203?Oi:0,tn){const wh=Ii.ascender!==void 0?Math.abs(Ii.ascender):0,am=Ii.descender!==void 0?Math.abs(Ii.descender):0,lm=(wh+am)*Zn;kr<lm&&(kr=lm,Lr=(wh-am)/2*Zn),Bi=-wh*Zn}else Bi=AA+(An-Zn)*Oi}ki?(Re.verticalizable=!0,fr.push({glyph:Pr,imageName:ho,x:Ht,y:Ft+Bi,vertical:ki,scale:Zn,localGlyph:Yr.localGlyph,fontStack:si.fontStack,sectionIndex:Jr,metrics:Yr,rect:pr}),Ht+=Qr*Zn+Et):(fr.push({glyph:Pr,imageName:ho,x:Ht,y:Ft+Bi,vertical:ki,scale:Zn,localGlyph:Yr.localGlyph,fontStack:si.fontStack,sectionIndex:Jr,metrics:Yr,rect:pr}),Ht+=Yr.advance*Zn+Et)}fr.length!==0&&(Sn=Math.max(Ht-Et,Sn),tn?DA(fr,Tt,cr,Lr,nt*An/2):DA(fr,Tt,cr,0,nt/2)),Ht=0;const Xr=nt*An+cr;hr.lineOffset=Math.max(cr,lr),Ft+=Xr,++En}var Wn;const Tn=Ft,{horizontalAlign:fn,verticalAlign:vr}=ub(ft);(function(Cn,An,lr,hr,fr,cr){const kr=(An-lr)*fr,Lr=-cr*hr;for(const Xr of Cn)for(const ur of Xr.positionedGlyphs)ur.x+=kr,ur.y+=Lr})(Re.positionedLines,Tt,fn,vr,Sn,Tn),Re.top+=-vr*Tn,Re.bottom=Re.top+Tn,Re.left+=-fn*Sn,Re.right=Re.left+Sn,Re.hasBaseline=tn}(Oe,r,a,u,se,v,b,T,L,C,R,G),!function(Re){for(const Ye of Re)if(Ye.positionedGlyphs.length!==0)return!1;return!0}(Pe)&&Oe}const w0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},C6={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function kA(o,r,a,u,f,g){if(r.imageName){const v=u[r.imageName];return v?v.displaySize[0]*r.scale*Oi/g+f:0}{const v=a[r.fontStack],b=v&&v.glyphs[o];return b?b.metrics.advance*r.scale+f:0}}function IA(o,r,a,u){const f=Math.pow(o-r,2);return u?o<r?f/2:2*f:f+Math.abs(a)*a}function A6(o,r,a){let u=0;return o===10&&(u-=1e4),a&&(u+=150),o!==40&&o!==65288||(u+=50),r!==41&&r!==65289||(u+=50),u}function PA(o,r,a,u,f,g){let v=null,b=IA(r,a,f,g);for(const T of u){const C=IA(r-T.x,a,f,g)+T.badness;C<=b&&(v=T,b=C)}return{index:o,x:r,priorBreak:v,badness:b}}function MA(o){return o?MA(o.priorBreak).concat(o.index):[]}function ub(o){let r=.5,a=.5;switch(o){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}return{horizontalAlign:r,verticalAlign:a}}function DA(o,r,a,u,f){if(!(r||a||u||f))return;const g=o.length-1,v=o[g],b=(v.x+v.metrics.advance*v.scale)*r;for(let T=0;T<=g;T++)o[T].x-=b,o[T].y+=a+u+f}function k6(o,r,a){const{horizontalAlign:u,verticalAlign:f}=ub(a),g=r[0]-o.displaySize[0]*u,v=r[1]-o.displaySize[1]*f;return{image:o,top:v,bottom:v+o.displaySize[1],left:g,right:g+o.displaySize[0]}}function zA(o,r,a,u,f,g){const v=o.image;let b;if(v.content){const se=v.content,ge=v.pixelRatio||1;b=[se[0]/ge,se[1]/ge,v.displaySize[0]-se[2]/ge,v.displaySize[1]-se[3]/ge]}const T=r.left*g,C=r.right*g;let M,L,R,V;a==="width"||a==="both"?(V=f[0]+T-u[3],L=f[0]+C+u[1]):(V=f[0]+(T+C-v.displaySize[0])/2,L=V+v.displaySize[0]);const G=r.top*g,X=r.bottom*g;return a==="height"||a==="both"?(M=f[1]+G-u[0],R=f[1]+X+u[2]):(M=f[1]+(G+X-v.displaySize[1])/2,R=M+v.displaySize[1]),{image:v,top:M,right:L,bottom:R,left:V,collisionPadding:b}}class yl extends re{constructor(r,a,u,f,g){super(r,a),this.angle=f,this.z=u,g!==void 0&&(this.segment=g)}clone(){return new yl(this.x,this.y,this.z,this.angle,this.segment)}}function LA(o,r,a,u,f){if(r.segment===void 0)return!0;let g=r,v=r.segment+1,b=0;for(;b>-a/2;){if(v--,v<0)return!1;b-=o[v].dist(g),g=o[v]}b+=o[v].dist(o[v+1]),v++;const T=[];let C=0;for(;b<a/2;){const M=o[v],L=o[v+1];if(!L)return!1;let R=o[v-1].angleTo(M)-M.angleTo(L);for(R=Math.abs((R+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:b,angleDelta:R}),C+=R;b-T[0].distance>u;)C-=T.shift().angleDelta;if(C>f)return!1;v++,b+=M.dist(L)}return!0}function RA(o){let r=0;for(let a=0;a<o.length-1;a++)r+=o[a].dist(o[a+1]);return r}function OA(o,r,a){return o?.6*r*a:0}function BA(o,r){return Math.max(o?o.right-o.left:0,r?r.right-r.left:0)}function I6(o,r,a,u,f,g){const v=OA(a,f,g),b=BA(a,u)*g;let T=0;const C=RA(o)/2;for(let M=0;M<o.length-1;M++){const L=o[M],R=o[M+1],V=L.dist(R);if(T+V>C){const G=(C-T)/V,X=Vn(L.x,R.x,G),se=Vn(L.y,R.y,G),ge=new yl(X,se,0,R.angleTo(L),M);return!v||LA(o,ge,b,v,r)?ge:void 0}T+=V}}function P6(o,r,a,u,f,g,v,b,T){const C=OA(u,g,v),M=BA(u,f),L=M*v,R=o[0].x===0||o[0].x===T||o[0].y===0||o[0].y===T;return r-L<r/4&&(r=L+r/4),FA(o,R?r/2*b%r:(M/2+2*g)*v*b%r,r,C,a,L,R,!1,T)}function FA(o,r,a,u,f,g,v,b,T){const C=g/2,M=RA(o);let L=0,R=r-a,V=[];for(let G=0;G<o.length-1;G++){const X=o[G],se=o[G+1],ge=X.dist(se),Me=se.angleTo(X);for(;R+a<L+ge;){R+=a;const _e=(R-L)/ge,Pe=Vn(X.x,se.x,_e),Oe=Vn(X.y,se.y,_e);if(Pe>=0&&Pe<T&&Oe>=0&&Oe<T&&R-C>=0&&R+C<=M){const Re=new yl(Pe,Oe,0,Me,G);Re._round(),u&&!LA(o,Re,g,u,f)||V.push(Re)}}L+=ge}return b||V.length||v||(V=FA(o,L/2,a,u,f,g,v,!0,T)),V}function jA(o,r,a,u,f){const g=[];for(let v=0;v<o.length;v++){const b=o[v];let T;for(let C=0;C<b.length-1;C++){let M=b[C],L=b[C+1];M.x<r&&L.x<r||(M.x<r?M=new re(r,M.y+(r-M.x)/(L.x-M.x)*(L.y-M.y))._round():L.x<r&&(L=new re(r,M.y+(r-M.x)/(L.x-M.x)*(L.y-M.y))._round()),M.y<a&&L.y<a||(M.y<a?M=new re(M.x+(a-M.y)/(L.y-M.y)*(L.x-M.x),a)._round():L.y<a&&(L=new re(M.x+(a-M.y)/(L.y-M.y)*(L.x-M.x),a)._round()),M.x>=u&&L.x>=u||(M.x>=u?M=new re(u,M.y+(u-M.x)/(L.x-M.x)*(L.y-M.y))._round():L.x>=u&&(L=new re(u,M.y+(u-M.x)/(L.x-M.x)*(L.y-M.y))._round()),M.y>=f&&L.y>=f||(M.y>=f?M=new re(M.x+(f-M.y)/(L.y-M.y)*(L.x-M.x),f)._round():L.y>=f&&(L=new re(M.x+(f-M.y)/(L.y-M.y)*(L.x-M.x),f)._round()),T&&M.equals(T[T.length-1])||(T=[M],g.push(T)),T.push(L)))))}}return g}Wt(yl,"Anchor");const Yp=1e20;function NA(o,r,a,u,f,g,v,b,T){for(let C=r;C<r+u;C++)$A(o,a*g+C,g,f,v,b,T);for(let C=a;C<a+f;C++)$A(o,C*g+r,1,u,v,b,T)}function $A(o,r,a,u,f,g,v){g[0]=0,v[0]=-Yp,v[1]=Yp,f[0]=o[r];for(let b=1,T=0,C=0;b<u;b++){f[b]=o[r+b*a];const M=b*b;do{const L=g[T];C=(f[b]-f[L]+M-L*L)/(b-L)/2}while(C<=v[T]&&--T>-1);T++,g[T]=b,v[T]=C,v[T+1]=Yp}for(let b=0,T=0;b<u;b++){for(;v[T+1]<b;)T++;const C=g[T],M=b-C;o[r+b*a]=f[C]+M*M}}const ca=2,db={none:0,ideographs:1,all:2};class gh{constructor(r,a,u){this.requestManager=r,this.localGlyphMode=a,this.localFontFamily=u,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(r){this.url=r}getGlyphs(r,a){const u=[];for(const f in r)for(const g of r[f])u.push({stack:f,id:g});rt(u,({stack:f,id:g},v)=>{let b=this.entries[f];b||(b=this.entries[f]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let T=b.glyphs[g];if(T!==void 0)return void v(null,{stack:f,id:g,glyph:T});if(T=this._tinySDF(b,f,g),T)return b.glyphs[g]=T,void v(null,{stack:f,id:g,glyph:T});const C=Math.floor(g/256);if(256*C>65535)return void v(new Error("glyphs > 65535 not supported"));if(b.ranges[C])return void v(null,{stack:f,id:g,glyph:T});let M=b.requests[C];M||(M=b.requests[C]=[],gh.loadGlyphRange(f,C,this.url,this.requestManager,(L,R)=>{if(R){b.ascender=R.ascender,b.descender=R.descender;for(const V in R.glyphs)this._doesCharSupportLocalGlyph(+V)||(b.glyphs[+V]=R.glyphs[+V]);b.ranges[C]=!0}for(const V of M)V(L,R);delete b.requests[C]})),M.push((L,R)=>{L?v(L):R&&v(null,{stack:f,id:g,glyph:R.glyphs[g]||null})})},(f,g)=>{if(f)a(f);else if(g){const v={};for(const{stack:b,id:T,glyph:C}of g)v[b]===void 0&&(v[b]={}),v[b].glyphs===void 0&&(v[b].glyphs={}),v[b].glyphs[T]=C&&{id:C.id,bitmap:C.bitmap.clone(),metrics:C.metrics},v[b].ascender=this.entries[b].ascender,v[b].descender=this.entries[b].descender;a(null,v)}})}_doesCharSupportLocalGlyph(r){return this.localGlyphMode!==db.none&&(this.localGlyphMode===db.all?!!this.localFontFamily:!!this.localFontFamily&&(jt["CJK Unified Ideographs"](r)||jt["Hangul Syllables"](r)||jt.Hiragana(r)||jt.Katakana(r)||jt["CJK Symbols and Punctuation"](r)))}_tinySDF(r,a,u){const f=this.localFontFamily;if(!f||!this._doesCharSupportLocalGlyph(u))return;let g=r.tinySDF;if(!g){let X="400";/bold/i.test(a)?X="900":/medium/i.test(a)?X="500":/light/i.test(a)&&(X="200"),g=r.tinySDF=new gh.TinySDF({fontFamily:f,fontWeight:X,fontSize:24*ca,buffer:3*ca,radius:8*ca}),g.fontWeight=X}if(this.localGlyphs[g.fontWeight][u])return this.localGlyphs[g.fontWeight][u];const v=String.fromCharCode(u),{data:b,width:T,height:C,glyphWidth:M,glyphHeight:L,glyphLeft:R,glyphTop:V,glyphAdvance:G}=g.draw(v);return this.localGlyphs[g.fontWeight][u]={id:u,bitmap:new ml({width:T,height:C},b),metrics:{width:M/ca,height:L/ca,left:R/ca,top:V/ca-27,advance:G/ca,localGlyph:!0}}}}gh.loadGlyphRange=function(o,r,a,u,f){const g=256*r,v=g+255,b=u.transformRequest(u.normalizeGlyphsURL(a).replace("{fontstack}",o).replace("{range}",`${g}-${v}`),Qn.Glyphs);Li(b,(T,C)=>{if(T)f(T);else if(C){const M={},L=function(R){return new b0(R).readFields(S6,{})}(C);for(const R of L.glyphs)M[R.id]=R;f(null,{glyphs:M,ascender:L.ascender,descender:L.descender})}})},gh.TinySDF=class{constructor({fontSize:o=24,buffer:r=3,radius:a=8,cutoff:u=.25,fontFamily:f="sans-serif",fontWeight:g="normal",fontStyle:v="normal"}={}){this.buffer=r,this.cutoff=u,this.radius=a;const b=this.size=o+4*r,T=this._createCanvas(b),C=this.ctx=T.getContext("2d",{willReadFrequently:!0});C.font=`${v} ${g} ${o}px ${f}`,C.textBaseline="alphabetic",C.textAlign="left",C.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(o){const r=document.createElement("canvas");return r.width=r.height=o,r}draw(o){const{width:r,actualBoundingBoxAscent:a,actualBoundingBoxDescent:u,actualBoundingBoxLeft:f,actualBoundingBoxRight:g}=this.ctx.measureText(o),v=Math.ceil(a),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-f))),T=Math.min(this.size-this.buffer,v+Math.ceil(u)),C=b+2*this.buffer,M=T+2*this.buffer,L=Math.max(C*M,0),R=new Uint8ClampedArray(L),V={data:R,width:C,height:M,glyphWidth:b,glyphHeight:T,glyphTop:v,glyphLeft:0,glyphAdvance:r};if(b===0||T===0)return V;const{ctx:G,buffer:X,gridInner:se,gridOuter:ge}=this;G.clearRect(X,X,b,T),G.fillText(o,X,X+v);const Me=G.getImageData(X,X,b,T);ge.fill(Yp,0,L),se.fill(0,0,L);for(let _e=0;_e<T;_e++)for(let Pe=0;Pe<b;Pe++){const Oe=Me.data[4*(_e*b+Pe)+3]/255;if(Oe===0)continue;const Re=(_e+X)*C+Pe+X;if(Oe===1)ge[Re]=0,se[Re]=Yp;else{const Ye=.5-Oe;ge[Re]=Ye>0?Ye*Ye:0,se[Re]=Ye<0?Ye*Ye:0}}NA(ge,0,0,C,M,C,this.f,this.v,this.z),NA(se,X,X,b,T,C,this.f,this.v,this.z);for(let _e=0;_e<L;_e++){const Pe=Math.sqrt(ge[_e])-Math.sqrt(se[_e]);R[_e]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return V}};const yh=So;function VA(o,r,a,u){const f=[],g=o.image,v=g.pixelRatio,b=g.paddedRect.w-2*yh,T=g.paddedRect.h-2*yh,C=o.right-o.left,M=o.bottom-o.top,L=g.stretchX||[[0,b]],R=g.stretchY||[[0,T]],V=(nt,ft)=>nt+ft[1]-ft[0],G=L.reduce(V,0),X=R.reduce(V,0),se=b-G,ge=T-X;let Me=0,_e=G,Pe=0,Oe=X,Re=0,Ye=se,qe=0,lt=ge;if(g.content&&u){const nt=g.content;Me=S0(L,0,nt[0]),Pe=S0(R,0,nt[1]),_e=S0(L,nt[0],nt[2]),Oe=S0(R,nt[1],nt[3]),Re=nt[0]-Me,qe=nt[1]-Pe,Ye=nt[2]-nt[0]-_e,lt=nt[3]-nt[1]-Oe}const bt=(nt,ft,pt,gt)=>{const Et=E0(nt.stretch-Me,_e,C,o.left),ot=T0(nt.fixed-Re,Ye,nt.stretch,G),Rt=E0(ft.stretch-Pe,Oe,M,o.top),Ht=T0(ft.fixed-qe,lt,ft.stretch,X),Ft=E0(pt.stretch-Me,_e,C,o.left),Sn=T0(pt.fixed-Re,Ye,pt.stretch,G),Tt=E0(gt.stretch-Pe,Oe,M,o.top),tn=T0(gt.fixed-qe,lt,gt.stretch,X),En=new re(Et,Rt),Wn=new re(Ft,Rt),Tn=new re(Ft,Tt),fn=new re(Et,Tt),vr=new re(ot/v,Ht/v),Cn=new re(Sn/v,tn/v),An=r*Math.PI/180;if(An){const fr=Math.sin(An),cr=Math.cos(An),kr=[cr,-fr,fr,cr];En._matMult(kr),Wn._matMult(kr),fn._matMult(kr),Tn._matMult(kr)}const lr=nt.stretch+nt.fixed,hr=ft.stretch+ft.fixed;return{tl:En,tr:Wn,bl:fn,br:Tn,tex:{x:g.paddedRect.x+yh+lr,y:g.paddedRect.y+yh+hr,w:pt.stretch+pt.fixed-lr,h:gt.stretch+gt.fixed-hr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vr,pixelOffsetBR:Cn,minFontScaleX:Ye/v/C,minFontScaleY:lt/v/M,isSDF:a}};if(u&&(g.stretchX||g.stretchY)){const nt=UA(L,se,G),ft=UA(R,ge,X);for(let pt=0;pt<nt.length-1;pt++){const gt=nt[pt],Et=nt[pt+1];for(let ot=0;ot<ft.length-1;ot++)f.push(bt(gt,ft[ot],Et,ft[ot+1]))}}else f.push(bt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:T+1}));return f}function S0(o,r,a){let u=0;for(const f of o)u+=Math.max(r,Math.min(a,f[1]))-Math.max(r,Math.min(a,f[0]));return u}function UA(o,r,a){const u=[{fixed:-yh,stretch:0}];for(const[f,g]of o){const v=u[u.length-1];u.push({fixed:f-v.stretch,stretch:v.stretch}),u.push({fixed:f-v.stretch,stretch:v.stretch+(g-f)})}return u.push({fixed:r+yh,stretch:a}),u}function E0(o,r,a,u){return o/r*a+u}function T0(o,r,a,u){return o-r*a/u}function M6(o,r,a,u){const f=r+o.positionedLines[u].lineOffset;return u===0?a+f/2:a+(f+(r+o.positionedLines[u-1].lineOffset))/2}class D6{constructor(r=[],a=z6){if(this.data=r,this.length=this.data.length,this.compare=a,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],a=this.data.pop();return this.length--,this.length>0&&(this.data[0]=a,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:a,compare:u}=this,f=a[r];for(;r>0;){const g=r-1>>1,v=a[g];if(u(f,v)>=0)break;a[r]=v,r=g}a[r]=f}_down(r){const{data:a,compare:u}=this,f=this.length>>1,g=a[r];for(;r<f;){let v=1+(r<<1),b=a[v];const T=v+1;if(T<this.length&&u(a[T],b)<0&&(v=T,b=a[T]),u(b,g)>=0)break;a[r]=b,r=v}a[r]=g}}function z6(o,r){return o<r?-1:o>r?1:0}function L6(o,r=1,a=!1){let u=1/0,f=1/0,g=-1/0,v=-1/0;const b=o[0];for(let V=0;V<b.length;V++){const G=b[V];(!V||G.x<u)&&(u=G.x),(!V||G.y<f)&&(f=G.y),(!V||G.x>g)&&(g=G.x),(!V||G.y>v)&&(v=G.y)}const T=Math.min(g-u,v-f);let C=T/2;const M=new D6([],R6);if(T===0)return new re(u,f);for(let V=u;V<g;V+=T)for(let G=f;G<v;G+=T)M.push(new vh(V+C,G+C,C,o));let L=function(V){let G=0,X=0,se=0;const ge=V[0];for(let Me=0,_e=ge.length,Pe=_e-1;Me<_e;Pe=Me++){const Oe=ge[Me],Re=ge[Pe],Ye=Oe.x*Re.y-Re.x*Oe.y;X+=(Oe.x+Re.x)*Ye,se+=(Oe.y+Re.y)*Ye,G+=3*Ye}return new vh(X/G,se/G,0,V)}(o),R=M.length;for(;M.length;){const V=M.pop();(V.d>L.d||!L.d)&&(L=V,a&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,R)),V.max-L.d<=r||(C=V.h/2,M.push(new vh(V.p.x-C,V.p.y-C,C,o)),M.push(new vh(V.p.x+C,V.p.y-C,C,o)),M.push(new vh(V.p.x-C,V.p.y+C,C,o)),M.push(new vh(V.p.x+C,V.p.y+C,C,o)),R+=4)}return a&&(console.log(`num probes: ${R}`),console.log(`best distance: ${L.d}`)),L.p}function R6(o,r){return r.max-o.max}class vh{constructor(r,a,u,f){this.p=new re(r,a),this.h=u,this.d=function(g,v){let b=!1,T=1/0;for(let C=0;C<v.length;C++){const M=v[C];for(let L=0,R=M.length,V=R-1;L<R;V=L++){const G=M[L],X=M[V];G.y>g.y!=X.y>g.y&&g.x<(X.x-G.x)*(g.y-G.y)/(X.y-G.y)+G.x&&(b=!b),T=Math.min(T,FC(g,G,X))}}return(b?1:-1)*Math.sqrt(T)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}}const _h=7,hb=Number.POSITIVE_INFINITY,O6=Math.sqrt(2);function WA(o,[r,a]){let u=0,f=0;if(a===hb){r<0&&(r=0);const g=r/O6;switch(o){case"top-right":case"top-left":f=g-_h;break;case"bottom-right":case"bottom-left":f=-g+_h;break;case"bottom":f=-r+_h;break;case"top":f=r-_h}switch(o){case"top-right":case"bottom-right":u=-g;break;case"top-left":case"bottom-left":u=g;break;case"left":u=r;break;case"right":u=-r}}else{switch(r=Math.abs(r),a=Math.abs(a),o){case"top-right":case"top-left":case"top":f=a-_h;break;case"bottom-right":case"bottom-left":case"bottom":f=-a+_h}switch(o){case"top-right":case"bottom-right":case"right":u=-r;break;case"top-left":case"bottom-left":case"left":u=r}}return[u,f]}function B6(o,r,a,u,f,g,v,b,T,C){o.createArrays(),o.tilePixelRatio=on/(512*o.overscaling),o.compareText={},o.iconsNeedLinear=!1;const M=o.layers[0].layout,L=o.layers[0]._unevaluatedLayout._values,R={};if(o.textSizeData.kind==="composite"){const{minZoom:X,maxZoom:se}=o.textSizeData;R.compositeTextSizes=[L["text-size"].possiblyEvaluate(new D(X),b),L["text-size"].possiblyEvaluate(new D(se),b)]}if(o.iconSizeData.kind==="composite"){const{minZoom:X,maxZoom:se}=o.iconSizeData;R.compositeIconSizes=[L["icon-size"].possiblyEvaluate(new D(X),b),L["icon-size"].possiblyEvaluate(new D(se),b)]}R.layoutTextSize=L["text-size"].possiblyEvaluate(new D(T+1),b),R.layoutIconSize=L["icon-size"].possiblyEvaluate(new D(T+1),b),R.textMaxSize=L["text-size"].possiblyEvaluate(new D(18),b);const V=M.get("text-rotation-alignment")==="map"&&M.get("symbol-placement")!=="point",G=M.get("text-size");for(const X of o.features){const se=M.get("text-font").evaluate(X,{},b).join(","),ge=G.evaluate(X,{},b),Me=R.layoutTextSize.evaluate(X,{},b),_e=(R.layoutIconSize.evaluate(X,{},b),{horizontal:{},vertical:void 0}),Pe=X.text;let Oe,Re=[0,0];if(Pe){const lt=Pe.toString(),bt=M.get("text-letter-spacing").evaluate(X,{},b)*Oi,nt=M.get("text-line-height").evaluate(X,{},b)*Oi,ft=b1(lt)?bt:0,pt=M.get("text-anchor").evaluate(X,{},b),gt=M.get("text-variable-anchor");if(!gt){const Ft=M.get("text-radial-offset").evaluate(X,{},b);Re=Ft?WA(pt,[Ft*Oi,hb]):M.get("text-offset").evaluate(X,{},b).map(Sn=>Sn*Oi)}let Et=V?"center":M.get("text-justify").evaluate(X,{},b);const ot=M.get("symbol-placement")==="point",Rt=ot?M.get("text-max-width").evaluate(X,{},b)*Oi:1/0,Ht=Ft=>{o.allowVerticalPlacement&&Sp(lt)&&(_e.vertical=cb(Pe,r,a,f,se,Rt,nt,pt,Ft,ft,Re,ns.vertical,!0,Me,ge))};if(!V&&gt){const Ft=Et==="auto"?gt.map(Tt=>fb(Tt)):[Et];let Sn=!1;for(let Tt=0;Tt<Ft.length;Tt++){const tn=Ft[Tt];if(!_e.horizontal[tn])if(Sn)_e.horizontal[tn]=_e.horizontal[0];else{const En=cb(Pe,r,a,f,se,Rt,nt,"center",tn,ft,Re,ns.horizontal,!1,Me,ge);En&&(_e.horizontal[tn]=En,Sn=En.positionedLines.length===1)}}Ht("left")}else{if(Et==="auto"&&(Et=fb(pt)),ot||M.get("text-writing-mode").indexOf("horizontal")>=0||!Sp(lt)){const Ft=cb(Pe,r,a,f,se,Rt,nt,pt,Et,ft,Re,ns.horizontal,!1,Me,ge);Ft&&(_e.horizontal[Et]=Ft)}Ht(ot?"left":Et)}}let Ye=!1;if(X.icon&&X.icon.name){const lt=u[X.icon.name];lt&&(Oe=k6(f[X.icon.name],M.get("icon-offset").evaluate(X,{},b),M.get("icon-anchor").evaluate(X,{},b)),Ye=lt.sdf,o.sdfIcons===void 0?o.sdfIcons=lt.sdf:o.sdfIcons!==lt.sdf&&mn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(lt.pixelRatio!==o.pixelRatio||M.get("icon-rotate").constantOr(1)!==0)&&(o.iconsNeedLinear=!0))}const qe=HA(_e.horizontal)||_e.vertical;o.iconsInText||(o.iconsInText=!!qe&&qe.iconsInText),(qe||Oe)&&F6(o,X,_e,Oe,u,R,Me,0,Re,Ye,v,b,C)}g&&o.generateCollisionDebugBuffers(T,o.collisionBoxArray)}function fb(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function F6(o,r,a,u,f,g,v,b,T,C,M,L,R){let V=g.textMaxSize.evaluate(r,{},L);V===void 0&&(V=v);const G=o.layers[0].layout,X=G.get("icon-offset").evaluate(r,{},L),se=HA(a.horizontal)||a.vertical,ge=R.name==="globe",Me=Oi,_e=v/Me,Pe=o.tilePixelRatio*V/Me,Oe=(pt=o.overscaling,o.zoom>18&&pt>2&&(pt>>=1),Math.max(on/(512*pt),1)*G.get("symbol-spacing")),Re=G.get("text-padding")*o.tilePixelRatio,Ye=G.get("icon-padding")*o.tilePixelRatio,qe=le(G.get("text-max-angle")),lt=G.get("text-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",bt=G.get("icon-rotation-alignment")==="map"&&G.get("symbol-placement")!=="point",nt=G.get("symbol-placement"),ft=Oe/2;var pt;const gt=G.get("icon-text-fit");let Et;u&&gt!=="none"&&(o.allowVerticalPlacement&&a.vertical&&(Et=zA(u,a.vertical,gt,G.get("icon-text-fit-padding"),X,_e)),se&&(u=zA(u,se,gt,G.get("icon-text-fit-padding"),X,_e)));const ot=(Rt,Ht,Ft)=>{if(Ht.x<0||Ht.x>=on||Ht.y<0||Ht.y>=on)return;let Sn=null;if(ge){const{x:Tt,y:tn,z:En}=R.projectTilePoint(Ht.x,Ht.y,Ft);Sn={anchor:new yl(Tt,tn,En,0,void 0),up:R.upVector(Ft,Ht.x,Ht.y)}}(function(Tt,tn,En,Wn,Tn,fn,vr,Cn,An,lr,hr,fr,cr,kr,Lr,Xr,ur,si,Jr,Pr,Zn,Yr,pr,ho,Qr){const Bi=Tt.addToLineVertexArray(tn,Wn);let ki,fo,Ii,da,wh,am,lm,Tk=0,Ck=0,Ak=0,kk=0,kb=-1,Ib=-1;const Ma={};let Ik=E1("");const Bu=En?En.anchor:tn;let Pb=0,Mb=0;if(An._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Pb,Mb]=An.layout.get("text-offset").evaluate(Zn,{},Qr).map(Fo=>Fo*Oi):(Pb=An.layout.get("text-radial-offset").evaluate(Zn,{},Qr)*Oi,Mb=hb),Tt.allowVerticalPlacement&&Tn.vertical){const Fo=Tn.vertical;if(Lr)am=pb(Fo),Cn&&(lm=pb(Cn));else{const jo=An.layout.get("text-rotate").evaluate(Zn,{},Qr)+90;Ii=C0(lr,Bu,tn,hr,fr,cr,Fo,kr,jo,Xr),Cn&&(da=C0(lr,Bu,tn,hr,fr,cr,Cn,si,jo))}}if(fn){const Fo=An.layout.get("icon-rotate").evaluate(Zn,{},Qr),jo=An.layout.get("icon-text-fit")!=="none",cm=VA(fn,Fo,pr,jo),zb=Cn?VA(Cn,Fo,pr,jo):void 0;fo=C0(lr,Bu,tn,hr,fr,cr,fn,si,Fo),Tk=4*cm.length;const Pk=Tt.iconSizeData;let Fu=null;Pk.kind==="source"?(Fu=[la*An.layout.get("icon-size").evaluate(Zn,{},Qr)],Fu[0]>uc&&mn(`${Tt.layerIds[0]}: Value for "icon-size" is >= ${Qp}. Reduce your "icon-size".`)):Pk.kind==="composite"&&(Fu=[la*Yr.compositeIconSizes[0].evaluate(Zn,{},Qr),la*Yr.compositeIconSizes[1].evaluate(Zn,{},Qr)],(Fu[0]>uc||Fu[1]>uc)&&mn(`${Tt.layerIds[0]}: Value for "icon-size" is >= ${Qp}. Reduce your "icon-size".`)),Tt.addSymbols(Tt.icon,cm,Fu,Pr,Jr,Zn,!1,En,tn,Bi.lineStartIndex,Bi.lineLength,-1,ho,Qr),kb=Tt.icon.placedSymbolArray.length-1,zb&&(Ck=4*zb.length,Tt.addSymbols(Tt.icon,zb,Fu,Pr,Jr,Zn,ns.vertical,En,tn,Bi.lineStartIndex,Bi.lineLength,-1,ho,Qr),Ib=Tt.icon.placedSymbolArray.length-1)}for(const Fo in Tn.horizontal){const jo=Tn.horizontal[Fo];ki||(Ik=E1(jo.text),Lr?wh=pb(jo):ki=C0(lr,Bu,tn,hr,fr,cr,jo,kr,An.layout.get("text-rotate").evaluate(Zn,{},Qr),Xr));const cm=jo.positionedLines.length===1;if(Ak+=GA(Tt,En,tn,jo,vr,An,Lr,Zn,Xr,Bi,Tn.vertical?ns.horizontal:ns.horizontalOnly,cm?Object.keys(Tn.horizontal):[Fo],Ma,kb,Yr,ho,Qr),cm)break}Tn.vertical&&(kk+=GA(Tt,En,tn,Tn.vertical,vr,An,Lr,Zn,Xr,Bi,ns.vertical,["vertical"],Ma,Ib,Yr,ho,Qr));let gc=-1;const Db=(Fo,jo)=>Fo?Math.max(Fo,jo):jo;gc=Db(wh,gc),gc=Db(am,gc),gc=Db(lm,gc);const hj=gc>-1?1:0;Tt.glyphOffsetArray.length>=hc.MAX_GLYPHS&&mn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Zn.sortKey!==void 0&&Tt.addToSortKeyRanges(Tt.symbolInstances.length,Zn.sortKey),Tt.symbolInstances.emplaceBack(Bu.x,Bu.y,Bu.z,tn.x,tn.y,Ma.right>=0?Ma.right:-1,Ma.center>=0?Ma.center:-1,Ma.left>=0?Ma.left:-1,Ma.vertical>=0?Ma.vertical:-1,kb,Ib,Ik,ki!==void 0?ki:Tt.collisionBoxArray.length,ki!==void 0?ki+1:Tt.collisionBoxArray.length,Ii!==void 0?Ii:Tt.collisionBoxArray.length,Ii!==void 0?Ii+1:Tt.collisionBoxArray.length,fo!==void 0?fo:Tt.collisionBoxArray.length,fo!==void 0?fo+1:Tt.collisionBoxArray.length,da||Tt.collisionBoxArray.length,da?da+1:Tt.collisionBoxArray.length,hr,Ak,kk,Tk,Ck,hj,0,Pb,Mb,gc)})(o,Ht,Sn,Rt,a,u,f,Et,o.layers[0],o.collisionBoxArray,r.index,r.sourceLayerIndex,o.index,Re,lt,T,0,Ye,bt,X,r,g,C,M,L)};if(nt==="line")for(const Rt of jA(r.geometry,0,0,on,on)){const Ht=P6(Rt,Oe,qe,a.vertical||se,u,Me,Pe,o.overscaling,on);for(const Ft of Ht)se&&j6(o,se.text,ft,Ft)||ot(Rt,Ft,L)}else if(nt==="line-center"){for(const Rt of r.geometry)if(Rt.length>1){const Ht=I6(Rt,qe,a.vertical||se,u,Me,Pe);Ht&&ot(Rt,Ht,L)}}else if(r.type==="Polygon")for(const Rt of eb(r.geometry,0)){const Ht=L6(Rt,16);ot(Rt[0],new yl(Ht.x,Ht.y,0,0,void 0),L)}else if(r.type==="LineString")for(const Rt of r.geometry)ot(Rt,new yl(Rt[0].x,Rt[0].y,0,0,void 0),L);else if(r.type==="Point")for(const Rt of r.geometry)for(const Ht of Rt)ot([Ht],new yl(Ht.x,Ht.y,0,0,void 0),L)}const Qp=255,uc=Qp*la;function GA(o,r,a,u,f,g,v,b,T,C,M,L,R,V,G,X,se){const ge=function(Pe,Oe,Re,Ye,qe,lt,bt,nt){const ft=[];if(Oe.positionedLines.length===0)return ft;const pt=Ye.layout.get("text-rotate").evaluate(lt,{})*Math.PI/180,gt=function(Ft){const Sn=Ft[0],Tt=Ft[1],tn=Sn*Tt;return tn>0?[Sn,-Tt]:tn<0?[-Sn,Tt]:Sn===0?[Tt,Sn]:[Tt,-Sn]}(Re);let Et=Math.abs(Oe.top-Oe.bottom);for(const Ft of Oe.positionedLines)Et-=Ft.lineOffset;const ot=Oe.positionedLines.length,Rt=Et/ot;let Ht=Oe.top-Re[1];for(let Ft=0;Ft<ot;++Ft){const Sn=Oe.positionedLines[Ft];Ht=M6(Oe,Rt,Ht,Ft);for(const Tt of Sn.positionedGlyphs){if(!Tt.rect)continue;const tn=Tt.rect||{};let En=TA+1,Wn=!0,Tn=1,fn=0;if(Tt.imageName){const pr=bt[Tt.imageName];if(!pr)continue;if(pr.sdf){mn("SDF images are not supported in formatted text and will be ignored.");continue}Wn=!1,Tn=pr.pixelRatio,En=So/Tn}const vr=(qe||nt)&&Tt.vertical,Cn=Tt.metrics.advance*Tt.scale/2,An=Tt.metrics,lr=Tt.rect;if(lr===null)continue;nt&&Oe.verticalizable&&(fn=Tt.imageName?Cn-Tt.metrics.width*Tt.scale/2:0);const hr=qe?[Tt.x+Cn,Tt.y]:[0,0];let fr=[0,0],cr=[0,0],kr=!1;qe||(vr?(cr=[Tt.x+Cn+gt[0],Tt.y+gt[1]-fn],kr=!0):fr=[Tt.x+Cn+Re[0],Tt.y+Re[1]-fn]);const Lr=lr.w*Tt.scale/(Tn*(Tt.localGlyph?ca:1)),Xr=lr.h*Tt.scale/(Tn*(Tt.localGlyph?ca:1));let ur,si,Jr,Pr;if(vr){const pr=Tt.y-Ht,ho=new re(-Cn,Cn-pr),Qr=-Math.PI/2,Bi=new re(...cr);ur=new re(-Cn+fr[0],fr[1]),ur._rotateAround(Qr,ho)._add(Bi),ur.x+=-pr+Cn,ur.y-=(An.left-En)*Tt.scale;const ki=Tt.imageName?An.advance*Tt.scale:Oi*Tt.scale,fo=String.fromCharCode(Tt.glyph);h6(fo)?ur.x+=(1-En)*Tt.scale:f6(fo)?ur.x+=ki-An.height*Tt.scale+(-En-1)*Tt.scale:ur.x+=Tt.imageName||An.width+2*En===lr.w&&An.height+2*En===lr.h?(ki-Xr)/2:(ki-(An.height+2*En)*Tt.scale)/2,si=new re(ur.x,ur.y-Lr),Jr=new re(ur.x+Xr,ur.y),Pr=new re(ur.x+Xr,ur.y-Lr)}else{const pr=(An.left-En)*Tt.scale-Cn+fr[0],ho=(-An.top-En)*Tt.scale+fr[1],Qr=pr+Lr,Bi=ho+Xr;ur=new re(pr,ho),si=new re(Qr,ho),Jr=new re(pr,Bi),Pr=new re(Qr,Bi)}if(pt){let pr;pr=qe?new re(0,0):kr?new re(gt[0],gt[1]):new re(Re[0],Re[1]),ur._rotateAround(pt,pr),si._rotateAround(pt,pr),Jr._rotateAround(pt,pr),Pr._rotateAround(pt,pr)}const Zn=new re(0,0),Yr=new re(0,0);ft.push({tl:ur,tr:si,bl:Jr,br:Pr,tex:tn,writingMode:Oe.writingMode,glyphOffset:hr,sectionIndex:Tt.sectionIndex,isSDF:Wn,pixelOffsetTL:Zn,pixelOffsetBR:Yr,minFontScaleX:0,minFontScaleY:0})}}return ft}(0,u,T,g,v,b,f,o.allowVerticalPlacement),Me=o.textSizeData;let _e=null;Me.kind==="source"?(_e=[la*g.layout.get("text-size").evaluate(b,{},se)],_e[0]>uc&&mn(`${o.layerIds[0]}: Value for "text-size" is >= ${Qp}. Reduce your "text-size".`)):Me.kind==="composite"&&(_e=[la*G.compositeTextSizes[0].evaluate(b,{},se),la*G.compositeTextSizes[1].evaluate(b,{},se)],(_e[0]>uc||_e[1]>uc)&&mn(`${o.layerIds[0]}: Value for "text-size" is >= ${Qp}. Reduce your "text-size".`)),o.addSymbols(o.text,ge,_e,T,v,b,M,r,a,C.lineStartIndex,C.lineLength,V,X,se);for(const Pe of L)R[Pe]=o.text.placedSymbolArray.length-1;return 4*ge.length}function HA(o){for(const r in o)return o[r];return null}function C0(o,r,a,u,f,g,v,b,T,C){let M=v.top,L=v.bottom,R=v.left,V=v.right;const G=v.collisionPadding;if(G&&(R-=G[0],M-=G[1],V+=G[2],L+=G[3]),T){const X=new re(R,M),se=new re(V,M),ge=new re(R,L),Me=new re(V,L),_e=le(T);let Pe=new re(0,0);C&&(Pe=new re(C[0],C[1])),X._rotateAround(_e,Pe),se._rotateAround(_e,Pe),ge._rotateAround(_e,Pe),Me._rotateAround(_e,Pe),R=Math.min(X.x,se.x,ge.x,Me.x),V=Math.max(X.x,se.x,ge.x,Me.x),M=Math.min(X.y,se.y,ge.y,Me.y),L=Math.max(X.y,se.y,ge.y,Me.y)}return o.emplaceBack(r.x,r.y,r.z,a.x,a.y,R,M,V,L,b,u,f,g),o.length-1}function pb(o){o.collisionPadding&&(o.top-=o.collisionPadding[1],o.bottom+=o.collisionPadding[3]);const r=o.bottom-o.top;return r>0?Math.max(10,r):null}function j6(o,r,a,u){const f=o.compareText;if(r in f){const g=f[r];for(let v=g.length-1;v>=0;v--)if(u.dist(g[v])<a)return!0}else f[r]=[];return f[r].push(u),!1}function ZA(o,r){const a=o.fovAboveCenter,u=o.elevation?o.elevation.getMinElevationBelowMSL()*r:0,f=(o._camera.position[2]*o.worldSize-u)/Math.cos(o._pitch),g=Math.sin(a)*f/Math.sin(Math.max(Math.PI/2-o._pitch-a,.01)),v=Math.sin(o._pitch)*g+f;return Math.min(1.01*v,f*(1/o._horizonShift))}function Ru(o,r){if(!r.isReprojectedInTileSpace)return{scale:1<<o.z,x:o.x,y:o.y,x2:o.x+1,y2:o.y+1,projection:r};const a=Math.pow(2,-o.z),u=o.x*a,f=(o.x+1)*a,g=o.y*a,v=(o.y+1)*a,b=ts(u),T=ts(f),C=Hi(g),M=Hi(v),L=r.project(b,C),R=r.project(T,C),V=r.project(T,M),G=r.project(b,M);let X=Math.min(L.x,R.x,V.x,G.x),se=Math.min(L.y,R.y,V.y,G.y),ge=Math.max(L.x,R.x,V.x,G.x),Me=Math.max(L.y,R.y,V.y,G.y);const _e=a/16;function Pe(Re,Ye,qe,lt,bt,nt){const ft=(qe+bt)/2,pt=(lt+nt)/2,gt=r.project(ts(ft),Hi(pt)),Et=Math.max(0,X-gt.x,se-gt.y,gt.x-ge,gt.y-Me);X=Math.min(X,gt.x),ge=Math.max(ge,gt.x),se=Math.min(se,gt.y),Me=Math.max(Me,gt.y),Et>_e&&(Pe(Re,gt,qe,lt,ft,pt),Pe(gt,Ye,ft,pt,bt,nt))}Pe(L,R,u,g,f,g),Pe(R,V,f,g,f,v),Pe(V,G,f,v,u,v),Pe(G,L,u,v,u,g),X-=_e,se-=_e,ge+=_e,Me+=_e;const Oe=1/Math.max(ge-X,Me-se);return{scale:Oe,x:X*Oe,y:se*Oe,x2:ge*Oe,y2:Me*Oe,projection:r}}const N6=oa(new Float32Array(16));class dc{constructor(r){this.spec=r,this.name=r.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(r,a){return{x:0,y:0,z:0}}unproject(r,a){return new ar(0,0)}projectTilePoint(r,a,u){return{x:r,y:a,z:0}}locationPoint(r,a,u=!0){return r._coordinatePoint(r.locationCoordinate(a),u)}pixelsPerMeter(r,a){return aa(1,r)*a}pixelSpaceConversion(r,a,u){return 1}farthestPixelDistance(r){return ZA(r,r.pixelsPerMeter)}pointCoordinate(r,a,u,f){const g=r.horizonLineFromTop(!1),v=new re(a,Math.max(g,u));return r.rayIntersectionCoordinate(r.pointRayIntersection(v,f))}pointCoordinate3D(r,a,u){const f=new re(a,u);if(r.elevation)return r.elevation.pointCoordinate(f);{const g=this.pointCoordinate(r,f.x,f.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(r,a){if(r.elevation)return!this.pointCoordinate3D(r,a.x,a.y);const u=r.horizonLineFromTop();return a.y<u}createInversionMatrix(r,a){return N6}createTileMatrix(r,a,u){let f,g,v;const b=u.canonical,T=oa(new Float64Array(16));if(this.isReprojectedInTileSpace){const C=Ru(b,this);f=1,g=C.x+u.wrap*C.scale,v=C.y,ku(T,T,[f/C.scale,f/C.scale,r.pixelsPerMeter/a])}else f=a/r.zoomScale(b.z),g=(b.x+Math.pow(2,b.z)*u.wrap)*f,v=b.y*f;return Pp(T,T,[g,v,0]),ku(T,T,[f/on,f/on,1]),T}upVector(r,a,u){return[0,0,1]}upVectorScale(r,a,u){return{metersToTile:1}}}class $6 extends dc{constructor(r){super(r),this.range=[4,7],this.center=r.center||[-96,37.5];const[a,u]=this.parallels=r.parallels||[29.5,45.5],f=Math.sin(le(a));this.n=(f+Math.sin(le(u)))/2,this.c=1+f*(2*this.n-f),this.r0=Math.sqrt(this.c)/this.n}project(r,a){const{n:u,c:f,r0:g}=this,v=le(r-this.center[0]),b=le(a),T=Math.sqrt(f-2*u*Math.sin(b))/u;return{x:T*Math.sin(v*u),y:T*Math.cos(v*u)-g,z:0}}unproject(r,a){const{n:u,c:f,r0:g}=this,v=g+a;let b=Math.atan2(r,Math.abs(v))*Math.sign(v);v*u<0&&(b-=Math.PI*Math.sign(r)*Math.sign(v));const T=le(this.center[0])*u;b=Ge(b,-Math.PI-T,Math.PI-T);const C=ve(xe(b/u)+this.center[0],-180,180),M=Math.asin(ve((f-(r*r+v*v)*u*u)/(2*u),-1,1)),L=ve(xe(M),-Zi,Zi);return new ar(C,L)}}const em=1.340264,tm=-.081106,nm=893e-6,rm=.003796,A0=Math.sqrt(3)/2;class V6 extends dc{project(r,a){a=a/180*Math.PI,r=r/180*Math.PI;const u=Math.asin(A0*Math.sin(a)),f=u*u,g=f*f*f;return{x:.5*(r*Math.cos(u)/(A0*(em+3*tm*f+g*(7*nm+9*rm*f)))/Math.PI+.5),y:1-.5*(u*(em+tm*f+g*(nm+rm*f))/Math.PI+1),z:0}}unproject(r,a){r=(2*r-.5)*Math.PI;let u=a=(2*(1-a)-1)*Math.PI,f=u*u,g=f*f*f;for(let M,L,R,V=0;V<12&&(L=u*(em+tm*f+g*(nm+rm*f))-a,R=em+3*tm*f+g*(7*nm+9*rm*f),M=L/R,u=ve(u-M,-Math.PI/3,Math.PI/3),f=u*u,g=f*f*f,!(Math.abs(M)<1e-12));++V);const v=A0*r*(em+3*tm*f+g*(7*nm+9*rm*f))/Math.cos(u),b=Math.asin(Math.sin(u)/A0),T=ve(180*v/Math.PI,-180,180),C=ve(180*b/Math.PI,-Zi,Zi);return new ar(T,C)}}class U6 extends dc{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0}project(r,a){return{x:.5+r/360,y:.5-a/360,z:0}}unproject(r,a){const u=360*(r-.5),f=ve(360*(.5-a),-Zi,Zi);return new ar(u,f)}}const xh=Math.PI/2;function k0(o){return Math.tan((xh+o)/2)}class W6 extends dc{constructor(r){super(r),this.center=r.center||[0,30];const[a,u]=this.parallels=r.parallels||[30,30];let f=le(a),g=le(u);this.southernCenter=f+g<0,this.southernCenter&&(f=-f,g=-g);const v=Math.cos(f),b=k0(f);this.n=f===g?Math.sin(f):Math.log(v/Math.cos(g))/Math.log(k0(g)/b),this.f=v*Math.pow(k0(f),this.n)/this.n}project(r,a){a=le(a),this.southernCenter&&(a=-a),r=le(r-this.center[0]);const u=1e-6,{n:f,f:g}=this;g>0?a<-xh+u&&(a=-xh+u):a>xh-u&&(a=xh-u);const v=g/Math.pow(k0(a),f);let b=v*Math.sin(f*r),T=g-v*Math.cos(f*r);return b=.5*(b/Math.PI+.5),T=.5*(T/Math.PI+.5),{x:b,y:this.southernCenter?T:1-T,z:0}}unproject(r,a){r=(2*r-.5)*Math.PI,this.southernCenter&&(a=1-a),a=(2*(1-a)-.5)*Math.PI;const{n:u,f}=this,g=f-a,v=Math.sign(g),b=Math.sign(u)*Math.sqrt(r*r+g*g);let T=Math.atan2(r,Math.abs(g))*v;g*u<0&&(T-=Math.PI*Math.sign(r)*v);const C=ve(xe(T/u)+this.center[0],-180,180),M=ve(xe(2*Math.atan(Math.pow(f/b,1/u))-xh),-Zi,Zi);return new ar(C,this.southernCenter?-M:M)}}class qA extends dc{constructor(r){super(r),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(r,a){return{x:Ca(r),y:Aa(a),z:0}}unproject(r,a){const u=ts(r),f=Hi(a);return new ar(u,f)}}const KA=le(Zi);class G6 extends dc{project(r,a){const u=(a=le(a))*a,f=u*u;return{x:.5*((r=le(r))*(.8707-.131979*u+f*(f*(.003971*u-.001529*f)-.013791))/Math.PI+.5),y:1-.5*(a*(1.007226+u*(.015085+f*(.028874*u-.044475-.005916*f)))/Math.PI+1),z:0}}unproject(r,a){r=(2*r-.5)*Math.PI;let u=a=(2*(1-a)-1)*Math.PI,f=25,g=0,v=u*u;do{v=u*u;const C=v*v;g=(u*(1.007226+v*(.015085+C*(.028874*v-.044475-.005916*C)))-a)/(1.007226+v*(.045255+C*(.259866*v-.311325-.005916*11*C))),u=ve(u-g,-KA,KA)}while(Math.abs(g)>1e-6&&--f>0);v=u*u;const b=ve(xe(r/(.8707+v*(v*(v*v*v*(.003971-.001529*v)-.013791)-.131979))),-180,180),T=xe(u);return new ar(b,T)}}const XA=le(Zi);class H6 extends dc{project(r,a){a=le(a),r=le(r);const u=Math.cos(a),f=2/Math.PI,g=Math.acos(u*Math.cos(r/2)),v=Math.sin(g)/g,b=.5*(r*f+2*u*Math.sin(r/2)/v)||0,T=.5*(a+Math.sin(a)/v)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(T/Math.PI+1),z:0}}unproject(r,a){let u=r=(2*r-.5)*Math.PI,f=a=(2*(1-a)-1)*Math.PI,g=25;const v=1e-6;let b=0,T=0;do{const C=Math.cos(f),M=Math.sin(f),L=2*M*C,R=M*M,V=C*C,G=Math.cos(u/2),X=Math.sin(u/2),se=2*G*X,ge=X*X,Me=1-V*G*G,_e=Me?1/Me:0,Pe=Me?Math.acos(C*G)*Math.sqrt(1/Me):0,Oe=.5*(2*Pe*C*X+2*u/Math.PI)-r,Re=.5*(Pe*M+f)-a,Ye=.5*_e*(V*ge+Pe*C*G*R)+1/Math.PI,qe=_e*(se*L/4-Pe*M*X),lt=.125*_e*(L*X-Pe*M*V*se),bt=.5*_e*(R*G+Pe*ge*C)+.5,nt=qe*lt-bt*Ye;b=(Re*qe-Oe*bt)/nt,T=(Oe*lt-Re*Ye)/nt,u=ve(u-b,-Math.PI,Math.PI),f=ve(f-T,-XA,XA)}while((Math.abs(b)>v||Math.abs(T)>v)&&--g>0);return new ar(xe(u),xe(f))}}class JA extends dc{constructor(r){super(r),this.center=r.center||[0,0],this.parallels=r.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(le(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(r,a){const{scale:u,cosPhi:f}=this;return{x:le(r)*f*u+.5,y:-Math.sin(le(a))/f*u+.5,z:0}}unproject(r,a){const{scale:u,cosPhi:f}=this,g=-(a-.5)/u,v=ve(xe((r-.5)/u)/f,-180,180),b=Math.asin(ve(g*f,-1,1)),T=ve(xe(b),-Zi,Zi);return new ar(v,T)}}class Z6 extends qA{constructor(r){super(r),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(r,a,u){const f=Fp(r,a,u);return Vr(f,f,jp(Ta(u))),{x:f[0],y:f[1],z:f[2]}}locationPoint(r,a){const u=oh(a.lat,a.lng),f=lo([],u),g=r.elevation?r.elevation.getAtPointOrZero(r.locationCoordinate(a),r._centerAltitude):r._centerAltitude;Lp(u,u,f,aa(1,0)*on*g);const v=oa(new Float64Array(16));return Au(v,r.pixelMatrix,r.globeMatrix),Vr(u,u,v),new re(u[0],u[1])}pixelsPerMeter(r,a){return aa(1,0)*a}pixelSpaceConversion(r,a,u){const f=aa(1,r)*a,g=Vn(aa(1,45)*a,f,u);return this.pixelsPerMeter(r,a)/g}createTileMatrix(r,a,u){const f=F1(Ta(u.canonical));return Au(new Float64Array(16),r.globeMatrix,f)}createInversionMatrix(r,a){const{center:u}=r,f=jp(Ta(a));return n0(f,f,le(u.lng)),k1(f,f,le(u.lat)),ku(f,f,[r._pixelsPerMercatorPixel,r._pixelsPerMercatorPixel,1]),Float32Array.from(f)}pointCoordinate(r,a,u,f){return EC(r,a,u,!0)||new ah(0,0)}pointCoordinate3D(r,a,u){const f=this.pointCoordinate(r,a,u,0);return[f.x,f.y,f.z]}isPointAboveHorizon(r,a){return!EC(r,a.x,a.y,!1)}farthestPixelDistance(r){const a=function(f,g){const v=f.cameraToCenterDistance,b=f._centerAltitude*g,T=f._camera,C=f._camera.forward(),M=fl([],es([],C,-v),[0,0,b]),L=f.worldSize/(2*Math.PI),R=[0,0,-L],V=f.width/f.height,G=Math.tan(f.fovAboveCenter),X=es([],T.up(),G),se=es([],T.right(),G*V),ge=lo([],fl([],fl([],C,X),se)),Me=[];let _e;if(new D1(M,ge).closestPointOnSphere(R,L,Me)){const Pe=fl([],Me,R),Oe=sa([],Pe,M);_e=Math.cos(f.fovAboveCenter)*Mp(Oe)}else{const Pe=sa([],M,R),Oe=sa([],R,M);lo(Oe,Oe);const Re=Mp(Pe)-L;_e=Math.sqrt(Re*(Re+2*L));const Ye=Math.acos(_e/(L+Re))-Math.acos(ws(C,Oe));_e*=Math.cos(Ye)}return 1.01*_e}(r,this.pixelsPerMeter(r.center.lat,r.worldSize)),u=sh(r.zoom);if(u>0){const f=ZA(r,aa(1,r.center.lat)*r.worldSize),g=r.worldSize/(2*Math.PI),v=Math.max(r.width,r.height)/r.worldSize*Math.PI;return Vn(a,f+g*(1-Math.cos(v)),Math.pow(u,10))}return a}upVector(r,a,u){return Fp(a,u,r,1)}upVectorScale(r){return{metersToTile:r0(o0(Ta(r)))}}}function YA(o){const r=o.parallels,a=!!r&&Math.abs(r[0]+r[1])<.01;switch(o.name){case"mercator":return new qA(o);case"equirectangular":return new U6(o);case"naturalEarth":return new G6(o);case"equalEarth":return new V6(o);case"winkelTripel":return new H6(o);case"albers":return a?new JA(o):new $6(o);case"lambertConformalConic":return a?new JA(o):new W6(o);case"globe":return new Z6(o)}throw new Error(`Invalid projection name: ${o.name}`)}const q6=m0.types,K6=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function I0(o,r,a,u,f,g,v,b,T,C,M,L,R){const V=b?Math.min(uc,Math.round(b[0])):0,G=b?Math.min(uc,Math.round(b[1])):0;o.emplaceBack(r,a,Math.round(32*u),Math.round(32*f),g,v,(V<<1)+(T?1:0),G,16*C,16*M,256*L,256*R)}function P0(o,r,a,u,f,g,v){o.emplaceBack(r,a,u,f,g,v)}function M0(o,r,a,u,f){o.emplaceBack(r,a,u,f),o.emplaceBack(r,a,u,f),o.emplaceBack(r,a,u,f),o.emplaceBack(r,a,u,f)}function X6(o){for(const r of o.sections)if(S1(r.text))return!0;return!1}class mb{constructor(r){this.layoutVertexArray=new mt,this.indexArray=new Jt,this.programConfigurations=r,this.segments=new qr,this.dynamicLayoutVertexArray=new _t,this.opacityVertexArray=new en,this.placedSymbolArray=new Zr,this.globeExtVertexArray=new St}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,a,u,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,i6.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,a),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,s6.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,K6,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=r.createVertexBuffer(this.globeExtVertexArray,o6.members,!0)),this.opacityVertexBuffer.itemSize=1),(u||f)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Wt(mb,"SymbolBuffers");class gb{constructor(r,a,u){this.layoutVertexArray=new r,this.layoutAttributes=a,this.indexArray=new u,this.segments=new qr,this.collisionVertexArray=new Fn,this.collisionVertexArrayExt=new Ln}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,a6.members,!0),this.collisionVertexBufferExt=r.createVertexBuffer(this.collisionVertexArrayExt,l6.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Wt(gb,"CollisionBuffers");class hc{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(v=>v.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=oa([]),this.placementViewportMatrix=oa([]);const a=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ib(this.zoom,a["text-size"]),this.iconSizeData=ib(this.zoom,a["icon-size"]);const u=this.layers[0].layout,f=u.get("symbol-sort-key"),g=u.get("symbol-z-order");this.canOverlap=u.get("text-allow-overlap")||u.get("icon-allow-overlap")||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&f.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=u.get("text-writing-mode").map(v=>ns[v]),this.stateDependentLayerIds=this.layers.filter(v=>v.isStateDependent()).map(v=>v.id),this.sourceID=r.sourceID,this.projection=r.projection}createArrays(){this.text=new mb(new Cu(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new mb(new Cu(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new ao,this.lineVertexArray=new eh,this.symbolInstances=new _r}calculateGlyphDependencies(r,a,u,f,g){for(let v=0;v<r.length;v++)if(a[r.charCodeAt(v)]=!0,f&&g){const b=Xp[r.charAt(v)];b&&(a[b.charCodeAt(0)]=!0)}}populate(r,a,u,f){const g=this.layers[0],v=g.layout,b=this.projection.name==="globe",T=v.get("text-font"),C=v.get("text-field"),M=v.get("icon-image"),L=(C.value.kind!=="constant"||C.value.value instanceof so&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),R=M.value.kind!=="constant"||!!M.value.value||Object.keys(M.parameters).length>0,V=v.get("symbol-sort-key");if(this.features=[],!L&&!R)return;const G=a.iconDependencies,X=a.glyphDependencies,se=a.availableImages,ge=new D(this.zoom);for(const{feature:Me,id:_e,index:Pe,sourceLayerIndex:Oe}of r){const Re=g._featureFilter.needGeometry,Ye=Du(Me,Re);if(!g._featureFilter.filter(ge,Ye,u))continue;if(Re||(Ye.geometry=pl(Me,u,f)),b&&Me.type!==1&&u.z<=5){const nt=Ye.geometry,ft=.98078528056,pt=(gt,Et)=>ws(Fp(gt.x,gt.y,u,1),Fp(Et.x,Et.y,u,1))<ft;for(let gt=0;gt<nt.length;gt++)nt[gt]=sF(nt[gt],pt)}let qe,lt;if(L){const nt=g.getValueAndResolveTokens("text-field",Ye,u,se),ft=so.factory(nt);X6(ft)&&(this.hasRTLText=!0),(!this.hasRTLText||w()==="unavailable"||this.hasRTLText&&P.isParsed())&&(qe=d6(ft,g,Ye))}if(R){const nt=g.getValueAndResolveTokens("icon-image",Ye,u,se);lt=nt instanceof Do?nt:Do.fromString(nt)}if(!qe&&!lt)continue;const bt=this.sortFeaturesByKey?V.evaluate(Ye,{},u):void 0;if(this.features.push({id:_e,text:qe,icon:lt,index:Pe,sourceLayerIndex:Oe,geometry:Ye.geometry,properties:Me.properties,type:q6[Me.type],sortKey:bt}),lt&&(G[lt.name]=!0),qe){const nt=T.evaluate(Ye,{},u).join(","),ft=v.get("text-rotation-alignment")==="map"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ns.vertical)>=0;for(const pt of qe.sections)if(pt.image)G[pt.image.name]=!0;else{const gt=Sp(qe.toString()),Et=pt.fontStack||nt,ot=X[Et]=X[Et]||{};this.calculateGlyphDependencies(pt.text,ot,ft,this.allowVerticalPlacement,gt)}}}v.get("symbol-placement")==="line"&&(this.features=function(Me){const _e={},Pe={},Oe=[];let Re=0;function Ye(nt){Oe.push(Me[nt]),Re++}function qe(nt,ft,pt){const gt=Pe[nt];return delete Pe[nt],Pe[ft]=gt,Oe[gt].geometry[0].pop(),Oe[gt].geometry[0]=Oe[gt].geometry[0].concat(pt[0]),gt}function lt(nt,ft,pt){const gt=_e[ft];return delete _e[ft],_e[nt]=gt,Oe[gt].geometry[0].shift(),Oe[gt].geometry[0]=pt[0].concat(Oe[gt].geometry[0]),gt}function bt(nt,ft,pt){const gt=pt?ft[0][ft[0].length-1]:ft[0][0];return`${nt}:${gt.x}:${gt.y}`}for(let nt=0;nt<Me.length;nt++){const ft=Me[nt],pt=ft.geometry,gt=ft.text?ft.text.toString():null;if(!gt){Ye(nt);continue}const Et=bt(gt,pt),ot=bt(gt,pt,!0);if(Et in Pe&&ot in _e&&Pe[Et]!==_e[ot]){const Rt=lt(Et,ot,pt),Ht=qe(Et,ot,Oe[Rt].geometry);delete _e[Et],delete Pe[ot],Pe[bt(gt,Oe[Ht].geometry,!0)]=Ht,Oe[Rt].geometry=null}else Et in Pe?qe(Et,ot,pt):ot in _e?lt(Et,ot,pt):(Ye(nt),_e[Et]=Re-1,Pe[ot]=Re-1)}return Oe.filter(nt=>nt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Me,_e)=>Me.sortKey-_e.sortKey)}update(r,a,u,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,a,this.layers,u,f),this.icon.programConfigurations.updatePaintArrays(r,a,this.layers,u,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=YA(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,a){const u=this.lineVertexArray.length;if(r.segment!==void 0)for(const{x:f,y:g}of a)this.lineVertexArray.emplaceBack(f,g);return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(r,a,u,f,g,v,b,T,C,M,L,R,V,G){const X=r.indexArray,se=r.layoutVertexArray,ge=r.globeExtVertexArray,Me=r.segments.prepareSegment(4*a.length,se,X,this.canOverlap?v.sortKey:void 0),_e=this.glyphOffsetArray.length,Pe=Me.vertexLength,Oe=this.allowVerticalPlacement&&b===ns.vertical?Math.PI/2:0,Re=v.text&&v.text.sections;for(let qe=0;qe<a.length;qe++){const{tl:lt,tr:bt,bl:nt,br:ft,tex:pt,pixelOffsetTL:gt,pixelOffsetBR:Et,minFontScaleX:ot,minFontScaleY:Rt,glyphOffset:Ht,isSDF:Ft,sectionIndex:Sn}=a[qe],Tt=Me.vertexLength,tn=Ht[1];if(I0(se,C.x,C.y,lt.x,tn+lt.y,pt.x,pt.y,u,Ft,gt.x,gt.y,ot,Rt),I0(se,C.x,C.y,bt.x,tn+bt.y,pt.x+pt.w,pt.y,u,Ft,Et.x,gt.y,ot,Rt),I0(se,C.x,C.y,nt.x,tn+nt.y,pt.x,pt.y+pt.h,u,Ft,gt.x,Et.y,ot,Rt),I0(se,C.x,C.y,ft.x,tn+ft.y,pt.x+pt.w,pt.y+pt.h,u,Ft,Et.x,Et.y,ot,Rt),T){const{x:En,y:Wn,z:Tn}=T.anchor,[fn,vr,Cn]=T.up;P0(ge,En,Wn,Tn,fn,vr,Cn),P0(ge,En,Wn,Tn,fn,vr,Cn),P0(ge,En,Wn,Tn,fn,vr,Cn),P0(ge,En,Wn,Tn,fn,vr,Cn),M0(r.dynamicLayoutVertexArray,En,Wn,Tn,Oe)}else M0(r.dynamicLayoutVertexArray,C.x,C.y,C.z,Oe);X.emplaceBack(Tt,Tt+1,Tt+2),X.emplaceBack(Tt+1,Tt+2,Tt+3),Me.vertexLength+=4,Me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ht[0]),qe!==a.length-1&&Sn===a[qe+1].sectionIndex||r.programConfigurations.populatePaintArrays(se.length,v,v.index,{},V,G,Re&&Re[Sn])}const Ye=T?T.anchor:C;r.placedSymbolArray.emplaceBack(Ye.x,Ye.y,Ye.z,C.x,C.y,_e,this.glyphOffsetArray.length-_e,Pe,M,L,C.segment,u?u[0]:0,u?u[1]:0,f[0],f[1],b,0,!1,0,R,0)}_commitLayoutVertex(r,a,u,f,g,v,b){r.emplaceBack(a,u,f,g,v,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(r,a,u,f,g,v,b){const T=u.segments.prepareSegment(4,u.layoutVertexArray,u.indexArray),C=T.vertexLength,M=b.tileAnchorX,L=b.tileAnchorY;for(let V=0;V<4;V++)u.collisionVertexArray.emplaceBack(0,0,0,0);u.collisionVertexArrayExt.emplaceBack(a,-r.padding,-r.padding),u.collisionVertexArrayExt.emplaceBack(a,r.padding,-r.padding),u.collisionVertexArrayExt.emplaceBack(a,r.padding,r.padding),u.collisionVertexArrayExt.emplaceBack(a,-r.padding,r.padding),this._commitLayoutVertex(u.layoutVertexArray,f,g,v,M,L,new re(r.x1,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,f,g,v,M,L,new re(r.x2,r.y1)),this._commitLayoutVertex(u.layoutVertexArray,f,g,v,M,L,new re(r.x2,r.y2)),this._commitLayoutVertex(u.layoutVertexArray,f,g,v,M,L,new re(r.x1,r.y2)),T.vertexLength+=4;const R=u.indexArray;R.emplaceBack(C,C+1),R.emplaceBack(C+1,C+2),R.emplaceBack(C+2,C+3),R.emplaceBack(C+3,C),T.primitiveLength+=4}_addTextDebugCollisionBoxes(r,a,u,f,g,v){for(let b=f;b<g;b++){const T=u.get(b),C=this.getSymbolInstanceTextSize(r,v,a,b);this._addCollisionDebugVertices(T,C,this.textCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,v)}}_addIconDebugCollisionBoxes(r,a,u,f,g,v){for(let b=f;b<g;b++){const T=u.get(b),C=this.getSymbolInstanceIconSize(r,a,v.placedIconSymbolIndex);this._addCollisionDebugVertices(T,C,this.iconCollisionBox,T.projectedAnchorX,T.projectedAnchorY,T.projectedAnchorZ,v)}}generateCollisionDebugBuffers(r,a){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gb(Gt,yA.members,Ai),this.iconCollisionBox=new gb(Gt,yA.members,Ai);const u=hh(this.iconSizeData,r),f=hh(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(f,r,a,v.textBoxStartIndex,v.textBoxEndIndex,v),this._addTextDebugCollisionBoxes(f,r,a,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,r,a,v.iconBoxStartIndex,v.iconBoxEndIndex,v),this._addIconDebugCollisionBoxes(u,r,a,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v)}}getSymbolInstanceTextSize(r,a,u,f){const g=this.text.placedSymbolArray.get(a.rightJustifiedTextSymbolIndex>=0?a.rightJustifiedTextSymbolIndex:a.centerJustifiedTextSymbolIndex>=0?a.centerJustifiedTextSymbolIndex:a.leftJustifiedTextSymbolIndex>=0?a.leftJustifiedTextSymbolIndex:a.verticalPlacedTextSymbolIndex>=0?a.verticalPlacedTextSymbolIndex:f),v=_0(this.textSizeData,r,g)/Oi;return this.tilePixelRatio*v}getSymbolInstanceIconSize(r,a,u){const f=this.icon.placedSymbolArray.get(u),g=_0(this.iconSizeData,r,f);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(r,a,u){r.emplaceBack(a,-u,-u),r.emplaceBack(a,u,-u),r.emplaceBack(a,u,u),r.emplaceBack(a,-u,u)}_updateTextDebugCollisionBoxes(r,a,u,f,g,v){for(let b=f;b<g;b++){const T=u.get(b),C=this.getSymbolInstanceTextSize(r,v,a,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,C,T.padding)}}_updateIconDebugCollisionBoxes(r,a,u,f,g,v){for(let b=f;b<g;b++){const T=u.get(b),C=this.getSymbolInstanceIconSize(r,a,v);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,C,T.padding)}}updateCollisionDebugBuffers(r,a){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const u=hh(this.iconSizeData,r),f=hh(this.textSizeData,r);for(let g=0;g<this.symbolInstances.length;g++){const v=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(f,r,a,v.textBoxStartIndex,v.textBoxEndIndex,v),this._updateTextDebugCollisionBoxes(f,r,a,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v),this._updateIconDebugCollisionBoxes(u,r,a,v.iconBoxStartIndex,v.iconBoxEndIndex,v.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(u,r,a,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex,v.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(r,a,u,f,g,v,b,T,C){const M={};if(a<u){const{x1:L,y1:R,x2:V,y2:G,padding:X,projectedAnchorX:se,projectedAnchorY:ge,projectedAnchorZ:Me,tileAnchorX:_e,tileAnchorY:Pe,featureIndex:Oe}=r.get(a);M.textBox={x1:L,y1:R,x2:V,y2:G,padding:X,projectedAnchorX:se,projectedAnchorY:ge,projectedAnchorZ:Me,tileAnchorX:_e,tileAnchorY:Pe},M.textFeatureIndex=Oe}if(f<g){const{x1:L,y1:R,x2:V,y2:G,padding:X,projectedAnchorX:se,projectedAnchorY:ge,projectedAnchorZ:Me,tileAnchorX:_e,tileAnchorY:Pe,featureIndex:Oe}=r.get(f);M.verticalTextBox={x1:L,y1:R,x2:V,y2:G,padding:X,projectedAnchorX:se,projectedAnchorY:ge,projectedAnchorZ:Me,tileAnchorX:_e,tileAnchorY:Pe},M.verticalTextFeatureIndex=Oe}if(v<b){const{x1:L,y1:R,x2:V,y2:G,padding:X,projectedAnchorX:se,projectedAnchorY:ge,projectedAnchorZ:Me,tileAnchorX:_e,tileAnchorY:Pe,featureIndex:Oe}=r.get(v);M.iconBox={x1:L,y1:R,x2:V,y2:G,padding:X,projectedAnchorX:se,projectedAnchorY:ge,projectedAnchorZ:Me,tileAnchorX:_e,tileAnchorY:Pe},M.iconFeatureIndex=Oe}if(T<C){const{x1:L,y1:R,x2:V,y2:G,padding:X,projectedAnchorX:se,projectedAnchorY:ge,projectedAnchorZ:Me,tileAnchorX:_e,tileAnchorY:Pe,featureIndex:Oe}=r.get(T);M.verticalIconBox={x1:L,y1:R,x2:V,y2:G,padding:X,projectedAnchorX:se,projectedAnchorY:ge,projectedAnchorZ:Me,tileAnchorX:_e,tileAnchorY:Pe},M.verticalIconFeatureIndex=Oe}return M}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let a=0;a<this.symbolInstances.length;a++){const u=this.symbolInstances.get(a);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,a){const u=r.placedSymbolArray.get(a),f=u.vertexStartIndex+4*u.numGlyphs;for(let g=u.vertexStartIndex;g<f;g+=4)r.indexArray.emplaceBack(g,g+1,g+2),r.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const a=Math.sin(r),u=Math.cos(r),f=[],g=[],v=[];for(let b=0;b<this.symbolInstances.length;++b){v.push(b);const T=this.symbolInstances.get(b);f.push(0|Math.round(a*T.tileAnchorX+u*T.tileAnchorY)),g.push(T.featureIndex)}return v.sort((b,T)=>f[b]-f[T]||g[T]-g[b]),v}addToSortKeyRanges(r,a){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===a?u.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:a,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const a of this.symbolInstanceIndexes){const u=this.symbolInstances.get(a);this.featureSortOrder.push(u.featureIndex);const{rightJustifiedTextSymbolIndex:f,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:v,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:T,verticalPlacedIconSymbolIndex:C}=u;f>=0&&this.addIndicesForPlacedSymbol(this.text,f),g>=0&&g!==f&&this.addIndicesForPlacedSymbol(this.text,g),v>=0&&v!==g&&v!==f&&this.addIndicesForPlacedSymbol(this.text,v),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),T>=0&&this.addIndicesForPlacedSymbol(this.icon,T),C>=0&&this.addIndicesForPlacedSymbol(this.icon,C)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Wt(hc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),hc.MAX_GLYPHS=65535,hc.addDynamicAttributes=M0;const J6=new Ae({"symbol-placement":new Z(st.layout_symbol["symbol-placement"]),"symbol-spacing":new Z(st.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Z(st.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ce(st.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Z(st.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Z(st.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Z(st.layout_symbol["icon-ignore-placement"]),"icon-optional":new Z(st.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Z(st.layout_symbol["icon-rotation-alignment"]),"icon-size":new ce(st.layout_symbol["icon-size"]),"icon-text-fit":new Z(st.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Z(st.layout_symbol["icon-text-fit-padding"]),"icon-image":new ce(st.layout_symbol["icon-image"]),"icon-rotate":new ce(st.layout_symbol["icon-rotate"]),"icon-padding":new Z(st.layout_symbol["icon-padding"]),"icon-keep-upright":new Z(st.layout_symbol["icon-keep-upright"]),"icon-offset":new ce(st.layout_symbol["icon-offset"]),"icon-anchor":new ce(st.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Z(st.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Z(st.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Z(st.layout_symbol["text-rotation-alignment"]),"text-field":new ce(st.layout_symbol["text-field"]),"text-font":new ce(st.layout_symbol["text-font"]),"text-size":new ce(st.layout_symbol["text-size"]),"text-max-width":new ce(st.layout_symbol["text-max-width"]),"text-line-height":new ce(st.layout_symbol["text-line-height"]),"text-letter-spacing":new ce(st.layout_symbol["text-letter-spacing"]),"text-justify":new ce(st.layout_symbol["text-justify"]),"text-radial-offset":new ce(st.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Z(st.layout_symbol["text-variable-anchor"]),"text-anchor":new ce(st.layout_symbol["text-anchor"]),"text-max-angle":new Z(st.layout_symbol["text-max-angle"]),"text-writing-mode":new Z(st.layout_symbol["text-writing-mode"]),"text-rotate":new ce(st.layout_symbol["text-rotate"]),"text-padding":new Z(st.layout_symbol["text-padding"]),"text-keep-upright":new Z(st.layout_symbol["text-keep-upright"]),"text-transform":new ce(st.layout_symbol["text-transform"]),"text-offset":new ce(st.layout_symbol["text-offset"]),"text-allow-overlap":new Z(st.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Z(st.layout_symbol["text-ignore-placement"]),"text-optional":new Z(st.layout_symbol["text-optional"])});var yb={paint:new Ae({"icon-opacity":new ce(st.paint_symbol["icon-opacity"]),"icon-color":new ce(st.paint_symbol["icon-color"]),"icon-halo-color":new ce(st.paint_symbol["icon-halo-color"]),"icon-halo-width":new ce(st.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ce(st.paint_symbol["icon-halo-blur"]),"icon-translate":new Z(st.paint_symbol["icon-translate"]),"icon-translate-anchor":new Z(st.paint_symbol["icon-translate-anchor"]),"text-opacity":new ce(st.paint_symbol["text-opacity"]),"text-color":new ce(st.paint_symbol["text-color"],{runtimeType:bo,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new ce(st.paint_symbol["text-halo-color"]),"text-halo-width":new ce(st.paint_symbol["text-halo-width"]),"text-halo-blur":new ce(st.paint_symbol["text-halo-blur"]),"text-translate":new Z(st.paint_symbol["text-translate"]),"text-translate-anchor":new Z(st.paint_symbol["text-translate-anchor"])}),layout:J6};class QA{constructor(r){this.type=r.property.overrides?r.property.overrides.runtimeType:Vl,this.defaultValue=r}evaluate(r){if(r.formattedSection){const a=this.defaultValue.property.overrides;if(a&&a.hasOverride(r.formattedSection))return a.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Wt(QA,"FormatSectionOverride",{omit:["defaultValue"]});class D0 extends ia{constructor(r){super(r,yb)}recalculate(r,a){super.recalculate(r,a),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const u=this.layout.get("text-writing-mode");if(u){const f=[];for(const g of u)f.indexOf(g)<0&&f.push(g);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(r,a,u,f){const g=this.layout.get(r).evaluate(a,{},u,f),v=this._unevaluatedLayout._values[r];return v.isDataDriven()||ec(v.value)||!g?g:function(b,T){return T.replace(/{([^{}]+)}/g,(C,M)=>M in b?String(b[M]):"")}(a.properties,g)}createBucket(r){return new hc(r)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const r of yb.paint.overridableProperties){if(!D0.hasPaintOverride(this.layout,r))continue;const a=this.paint.get(r),u=new QA(a),f=new Hd(u,a.property.specification);let g=null;g=a.value.kind==="constant"||a.value.kind==="source"?new hp("source",f):new yu("composite",f,a.value.zoomStops,a.value._interpolationType),this.paint._values[r]=new he(a.property,g,a.parameters)}}_handleOverridablePaintPropertyUpdate(r,a,u){return!(!this.layout||a.isDataDriven()||u.isDataDriven())&&D0.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,a){const u=r.get("text-field"),f=yb.paint.properties[a];let g=!1;const v=b=>{for(const T of b)if(f.overrides&&f.overrides.hasOverride(T))return void(g=!0)};if(u.value.kind==="constant"&&u.value.value instanceof so)v(u.value.value.sections);else if(u.value.kind==="source"){const b=C=>{g||(C instanceof nl&&zr(C.value)===eu?v(C.value.sections):C instanceof ba?v(C.sections):C.eachChild(b))},T=u.value;T._styleExpression&&b(T._styleExpression.expression)}return g}getProgramConfiguration(r){return new ac(this,r)}}var Y6={paint:new Ae({"background-color":new Z(st.paint_background["background-color"]),"background-pattern":new Z(st.paint_background["background-pattern"]),"background-opacity":new Z(st.paint_background["background-opacity"])})},Q6={paint:new Ae({"raster-opacity":new Z(st.paint_raster["raster-opacity"]),"raster-hue-rotate":new Z(st.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Z(st.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Z(st.paint_raster["raster-brightness-max"]),"raster-saturation":new Z(st.paint_raster["raster-saturation"]),"raster-contrast":new Z(st.paint_raster["raster-contrast"]),"raster-resampling":new Z(st.paint_raster["raster-resampling"]),"raster-fade-duration":new Z(st.paint_raster["raster-fade-duration"])})};class ej extends ia{constructor(r){super(r,{}),this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(r){this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)}onRemove(r){this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)}}var tj={paint:new Ae({"sky-type":new Z(st.paint_sky["sky-type"]),"sky-atmosphere-sun":new Z(st.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Z(st.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Z(st.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Z(st.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ee(st.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Z(st.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Z(st.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Z(st.paint_sky["sky-opacity"])})};function vb(o,r,a){const u=[0,0,1],f=vC([]);return xC(f,f,a?-le(o)+Math.PI:le(o)),_C(f,f,-le(r)),pC(u,u,f),lo(u,u)}const nj={circle:class extends ia{constructor(o){super(o,fF)}createBucket(o){return new W1(o)}queryRadius(o){const r=o;return lh("circle-radius",this,r)+lh("circle-stroke-width",this,r)+l0(this.paint.get("circle-translate"))}queryIntersectsFeature(o,r,a,u,f,g,v,b){const T=VC(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),C=this.paint.get("circle-radius").evaluate(r,a)+this.paint.get("circle-stroke-width").evaluate(r,a);return UC(o,u,g,v,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",T,C)}getProgramIds(){return["circle"]}getProgramConfiguration(o){return new ac(this,o)}},heatmap:class extends ia{createBucket(o){return new GC(o)}constructor(o){super(o,yF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=q1({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(o){return lh("heatmap-radius",this,o)}queryIntersectsFeature(o,r,a,u,f,g,v,b){const T=this.paint.get("heatmap-radius").evaluate(r,a);return UC(o,u,g,v,b,!0,!0,new re(0,0),T)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(o){return new ac(this,o)}},hillshade:class extends ia{constructor(o){super(o,vF)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ia{constructor(o){super(o,LF)}getProgramIds(){const o=this.paint.get("fill-pattern"),r=o&&o.constantOr(1),a=[r?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&a.push(r&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),a}getProgramConfiguration(o){return new ac(this,o)}recalculate(o,r){super.recalculate(o,r);const a=this.paint._values["fill-outline-color"];a.value.kind==="constant"&&a.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new f0(o)}queryRadius(){return l0(this.paint.get("fill-translate"))}queryIntersectsFeature(o,r,a,u,f,g){return!o.queryGeometry.isAboveHorizon&&BC($C(o.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),u)}isTileClipped(){return!0}},"fill-extrusion":class extends ia{constructor(o){super(o,XF)}createBucket(o){return new Zp(o)}queryRadius(){return l0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(o){return new ac(this,o)}queryIntersectsFeature(o,r,a,u,f,g,v,b,T){const C=VC(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),M=this.paint.get("fill-extrusion-height").evaluate(r,a),L=this.paint.get("fill-extrusion-base").evaluate(r,a),R=[0,0],V=b&&g.elevation,G=g.elevation?g.elevation.exaggeration():1,X=o.tile.getBucket(this);if(V&&X instanceof Zp){const Pe=X.centroidVertexArray,Oe=T+1;Oe<Pe.length&&(R[0]=Pe.geta_centroid_pos0(Oe),R[1]=Pe.geta_centroid_pos1(Oe))}if(R[0]===0&&R[1]===1)return!1;g.projection.name==="globe"&&(u=cA([u],[new re(0,0),new re(on,on)],o.tileID.canonical).map(Pe=>Pe.polygon).flat());const se=V?b:null,[ge,Me]=function(Pe,Oe,Re,Ye,qe,lt,bt,nt,ft,pt,gt){return Pe.projection.name==="globe"?function(Et,ot,Rt,Ht,Ft,Sn,Tt,tn,En,Wn,Tn){const fn=[],vr=[],Cn=Et.projection.upVectorScale(Tn,Et.center.lat,Et.worldSize).metersToTile,An=[0,0,0,1],lr=[0,0,0,1],hr=(cr,kr,Lr,Xr)=>{cr[0]=kr,cr[1]=Lr,cr[2]=Xr,cr[3]=1},fr=lA();Rt>0&&(Rt+=fr),Ht+=fr;for(const cr of ot){const kr=[],Lr=[];for(const Xr of cr){const ur=Xr.x+Ft.x,si=Xr.y+Ft.y,Jr=Et.projection.projectTilePoint(ur,si,Tn),Pr=Et.projection.upVector(Tn,Xr.x,Xr.y);let Zn=Rt,Yr=Ht;if(Tt){const pr=fA(ur,si,Rt,Ht,Tt,tn,En,Wn);Zn+=pr.base,Yr+=pr.top}Rt!==0?hr(An,Jr.x+Pr[0]*Cn*Zn,Jr.y+Pr[1]*Cn*Zn,Jr.z+Pr[2]*Cn*Zn):hr(An,Jr.x,Jr.y,Jr.z),hr(lr,Jr.x+Pr[0]*Cn*Yr,Jr.y+Pr[1]*Cn*Yr,Jr.z+Pr[2]*Cn*Yr),Vr(An,An,Sn),Vr(lr,lr,Sn),kr.push(new dh(An[0],An[1],An[2])),Lr.push(new dh(lr[0],lr[1],lr[2]))}fn.push(kr),vr.push(Lr)}return[fn,vr]}(Pe,Oe,Re,Ye,qe,lt,bt,nt,ft,pt,gt):bt?function(Et,ot,Rt,Ht,Ft,Sn,Tt,tn,En){const Wn=[],Tn=[],fn=[0,0,0,1];for(const vr of Et){const Cn=[],An=[];for(const lr of vr){const hr=lr.x+Ht.x,fr=lr.y+Ht.y,cr=fA(hr,fr,ot,Rt,Sn,Tt,tn,En);fn[0]=hr,fn[1]=fr,fn[2]=cr.base,fn[3]=1,Iu(fn,fn,Ft),fn[3]=Math.max(fn[3],1e-5);const kr=new dh(fn[0]/fn[3],fn[1]/fn[3],fn[2]/fn[3]);fn[0]=hr,fn[1]=fr,fn[2]=cr.top,fn[3]=1,Iu(fn,fn,Ft),fn[3]=Math.max(fn[3],1e-5);const Lr=new dh(fn[0]/fn[3],fn[1]/fn[3],fn[2]/fn[3]);Cn.push(kr),An.push(Lr)}Wn.push(Cn),Tn.push(An)}return[Wn,Tn]}(Oe,Re,Ye,qe,lt,bt,nt,ft,pt):function(Et,ot,Rt,Ht,Ft){const Sn=[],Tt=[],tn=Ft[8]*ot,En=Ft[9]*ot,Wn=Ft[10]*ot,Tn=Ft[11]*ot,fn=Ft[8]*Rt,vr=Ft[9]*Rt,Cn=Ft[10]*Rt,An=Ft[11]*Rt;for(const lr of Et){const hr=[],fr=[];for(const cr of lr){const kr=cr.x+Ht.x,Lr=cr.y+Ht.y,Xr=Ft[0]*kr+Ft[4]*Lr+Ft[12],ur=Ft[1]*kr+Ft[5]*Lr+Ft[13],si=Ft[2]*kr+Ft[6]*Lr+Ft[14],Jr=Ft[3]*kr+Ft[7]*Lr+Ft[15],Pr=Xr+tn,Zn=ur+En,Yr=si+Wn,pr=Math.max(Jr+Tn,1e-5),ho=Xr+fn,Qr=ur+vr,Bi=si+Cn,ki=Math.max(Jr+An,1e-5);hr.push(new dh(Pr/pr,Zn/pr,Yr/pr)),fr.push(new dh(ho/ki,Qr/ki,Bi/ki))}Sn.push(hr),Tt.push(fr)}return[Sn,Tt]}(Oe,Re,Ye,qe,lt)}(g,u,L,M,C,v,se,R,G,g.center.lat,o.tileID.canonical),_e=o.queryGeometry;return function(Pe,Oe,Re){let Ye=1/0;BC(Re,Oe)&&(Ye=hA(Re,Oe[0]));for(let qe=0;qe<Oe.length;qe++){const lt=Oe[qe],bt=Pe[qe];for(let nt=0;nt<lt.length-1;nt++){const ft=lt[nt],pt=[ft,lt[nt+1],bt[nt+1],bt[nt],ft];OC(Re,pt)&&(Ye=Math.min(Ye,hA(Re,pt)))}}return Ye!==1/0&&Ye}(ge,Me,_e.isPointQuery()?_e.screenBounds:_e.screenGeometry)}},line:class extends ia{constructor(o){super(o,pA),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const r=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=r._styleExpression&&r._styleExpression.expression instanceof Qf,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(o,r){super.recalculate(o,r),this.paint._values["line-floorwidth"]=mA.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new v0(o)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(o){return new ac(this,o)}queryRadius(o){const r=o,a=gA(lh("line-width",this,r),lh("line-gap-width",this,r)),u=lh("line-offset",this,r);return a/2+Math.abs(u)+l0(this.paint.get("line-translate"))}queryIntersectsFeature(o,r,a,u,f,g){if(o.queryGeometry.isAboveHorizon)return!1;const v=$C(o.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,o.pixelToTileUnitsFactor),b=o.pixelToTileUnitsFactor/2*gA(this.paint.get("line-width").evaluate(r,a),this.paint.get("line-gap-width").evaluate(r,a)),T=this.paint.get("line-offset").evaluate(r,a);return T&&(u=function(C,M){const L=[],R=new re(0,0);for(let V=0;V<C.length;V++){const G=C[V],X=[];for(let se=0;se<G.length;se++){const ge=G[se],Me=G[se+1],_e=se===0?R:ge.sub(G[se-1])._unit()._perp(),Pe=se===G.length-1?R:Me.sub(ge)._unit()._perp(),Oe=_e._add(Pe)._unit();Oe._mult(1/(Oe.x*Pe.x+Oe.y*Pe.y)),X.push(Oe._mult(M)._add(ge))}L.push(X)}return L}(u,T*o.pixelToTileUnitsFactor)),function(C,M,L){for(let R=0;R<M.length;R++){const V=M[R];if(C.length>=3){for(let G=0;G<V.length;G++)if(zu(C,V[G]))return!0}if(cF(C,V,L))return!0}return!1}(v,u,b)}isTileClipped(){return!0}},symbol:D0,background:class extends ia{constructor(o){super(o,Y6)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ia{constructor(o){super(o,Q6)}getProgramIds(){return["raster"]}},sky:class extends ia{constructor(o){super(o,tj),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="sky-gradient"?this._updateColorRamp():o!=="sky-atmosphere-sun"&&o!=="sky-atmosphere-halo-color"&&o!=="sky-atmosphere-color"&&o!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=q1({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(o){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const r=o.style.light.properties.get("position");return this._lightPosition.azimuthal!==r.azimuthal||this._lightPosition.polar!==r.polar}return!1}getCenter(o,r){if(this.paint.get("sky-type")==="atmosphere"){const u=this.paint.get("sky-atmosphere-sun"),f=!u,g=o.style.light,v=g.properties.get("position");return f&&g.properties.get("anchor")==="viewport"&&mn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),f?vb(v.azimuthal,90-v.polar,r):vb(u[0],90-u[1],r)}const a=this.paint.get("sky-gradient-center");return vb(a[0],90-a[1],r)}is3D(){return!1}isSky(){return!0}markSkyboxValid(o){this._skyboxInvalidated=!1,this._lightPosition=o.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const o=this.paint.get("sky-type");return o==="atmosphere"?["skyboxCapture","skybox"]:o==="gradient"?["skyboxGradient"]:null}}};class im{constructor(r,a,u,f){this.context=r,this.format=u,this.texture=r.gl.createTexture(),this.update(a,f)}update(r,a,u){const{width:f,height:g}=r,{context:v}=this,{gl:b}=v,{HTMLImageElement:T,HTMLCanvasElement:C,HTMLVideoElement:M,ImageData:L,ImageBitmap:R}=_;if(b.bindTexture(b.TEXTURE_2D,this.texture),v.pixelStoreUnpackFlipY.set(!1),v.pixelStoreUnpack.set(1),v.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!a||a.premultiply!==!1)),u||this.size&&this.size[0]===f&&this.size[1]===g){const{x:V,y:G}=u||{x:0,y:0};r instanceof T||r instanceof C||r instanceof M||r instanceof L||R&&r instanceof R?b.texSubImage2D(b.TEXTURE_2D,0,V,G,b.RGBA,b.UNSIGNED_BYTE,r):b.texSubImage2D(b.TEXTURE_2D,0,V,G,f,g,b.RGBA,b.UNSIGNED_BYTE,r.data)}else this.size=[f,g],r instanceof T||r instanceof C||r instanceof M||r instanceof L||R&&r instanceof R?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,r):b.texImage2D(b.TEXTURE_2D,0,this.format,f,g,0,this.format,b.UNSIGNED_BYTE,r.data);this.useMipmap=!!(a&&a.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(r,a){const{context:u}=this,{gl:f}=u;f.bindTexture(f.TEXTURE_2D,this.texture),r!==this.filter&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,r),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,this.useMipmap?r===f.NEAREST?f.NEAREST_MIPMAP_NEAREST:f.LINEAR_MIPMAP_NEAREST:r),this.filter=r),a!==this.wrap&&(f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,a),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}class rj{constructor(r){this._callback=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class ij{constructor(){this.tasks={},this.taskQueue=[],Vt(["process"],this),this.invoker=new rj(this.process),this.nextId=0}add(r,a){const u=this.nextId++,f=function({type:g,isSymbolTile:v,zoom:b}){return b=b||0,g==="message"?0:g!=="maybePrepare"||v?g!=="parseTile"||v?g==="parseTile"&&v?300-b:g==="maybePrepare"&&v?400-b:500:200-b:100-b}(a);if(f===0){Le();try{r()}finally{}return{cancel:()=>{}}}return this.tasks[u]={fn:r,metadata:a,priority:f,id:u},this.taskQueue.push(u),this.invoker.trigger(),{cancel:()=>{delete this.tasks[u]}}}process(){Le();try{if(this.taskQueue=this.taskQueue.filter(u=>!!this.tasks[u]),!this.taskQueue.length)return;const r=this.pick();if(r===null)return;const a=this.tasks[r];if(delete this.tasks[r],this.taskQueue.length&&this.invoker.trigger(),!a)return;a.fn()}finally{}}pick(){let r=null,a=1/0;for(let f=0;f<this.taskQueue.length;f++){const g=this.tasks[this.taskQueue[f]];g.priority<a&&(a=g.priority,r=f)}if(r===null)return null;const u=this.taskQueue[r];return this.taskQueue.splice(r,1),u}remove(){this.invoker.remove()}}class ek{constructor(r){this._stringToNumber={},this._numberToString=[];for(let a=0;a<r.length;a++){const u=r[a];this._stringToNumber[u]=a,this._numberToString[a]=u}}encode(r){return this._stringToNumber[r]}decode(r){return this._numberToString[r]}}const oj=["tile","layer","source","sourceLayer","state"];class tk{constructor(r,a,u,f,g){this.type="Feature",this._vectorTileFeature=r,this._z=a,this._x=u,this._y=f,this.properties=r.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(r.id=this.id);for(const a of oj)this[a]!==void 0&&(r[a]=this[a]);return r}}const Ts=32,ka=33,fc=new Uint16Array(8184);for(let o=0;o<2046;o++){let r=o+2,a=0,u=0,f=0,g=0,v=0,b=0;for(1&r?f=g=v=Ts:a=u=b=Ts;(r>>=1)>1;){const C=a+f>>1,M=u+g>>1;1&r?(f=a,g=u,a=v,u=b):(a=f,u=g,f=v,g=b),v=C,b=M}const T=4*o;fc[T+0]=a,fc[T+1]=u,fc[T+2]=f,fc[T+3]=g}const Ia=new Uint16Array(2178),pc=new Uint8Array(1089),z0=new Uint16Array(1089);function nk(o){return o===0?-.03125:o===32?.03125:0}var rk=Ue([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const ik={type:2,extent:on,loadGeometry:()=>[[new re(0,0),new re(on+1,0),new re(on+1,on+1),new re(0,on+1),new re(0,0)]]};class _b{constructor(r,a,u,f,g){this.tileID=r,this.uid=Kt(),this.uses=0,this.tileSize=a,this.tileZoom=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",f&&f.transform&&(this.projection=f.transform.projection)}registerFadeDuration(r){const a=r+this.timeAdded;a<Dr.now()||this.fadeEndTime&&a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Ru(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(r,a,u){if(this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(f,g){const v={};if(!g)return v;for(const b of f){const T=b.layerIds.map(C=>g.getLayer(C)).filter(Boolean);if(T.length!==0){b.layers=T,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(C=>T.filter(M=>M.id===C)[0]));for(const C of T)v[C.id]=b}}return v}(r.buckets,a.style),this.hasSymbolBuckets=!1;for(const f in this.buckets){const g=this.buckets[f];if(g instanceof hc){if(this.hasSymbolBuckets=!0,!u)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const f in this.buckets){const g=this.buckets[f];if(g instanceof hc&&g.hasRTLText){this.hasRTLText=!0,P.isLoading()||P.isLoaded()||w()!=="deferred"||k();break}}this.queryPadding=0;for(const f in this.buckets){const g=this.buckets[f];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(f).queryRadius(g))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),r.lineAtlas&&(this.lineAtlas=r.lineAtlas)}else this.collisionBoxArray=new sr}unloadVectorData(){if(this.hasData()){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(r){return this.buckets[r.id]}upload(r){for(const u in this.buckets){const f=this.buckets[u];f.uploadPending()&&f.upload(r)}const a=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new im(r,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new im(r,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new im(r,this.lineAtlas.image,a.ALPHA),this.lineAtlas.uploaded=!0)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,a,u,f,g,v,b,T){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:f,pixelPosMatrix:b,transform:v,params:g,tileTransform:this.tileTransform},r,a,u):{}}querySourceFeatures(r,a){const u=this.latestFeatureIndex;if(!u||!u.rawTileData)return;const f=u.loadVTLayers(),g=a?a.sourceLayer:"",v=f._geojsonTileLayer||f[g];if(!v)return;const b=Xd(a&&a.filter),{z:T,x:C,y:M}=this.tileID.canonical,L={z:T,x:C,y:M};for(let R=0;R<v.length;R++){const V=v.feature(R);if(b.needGeometry){const se=Du(V,!0);if(!b.filter(new D(this.tileID.overscaledZ),se,this.tileID.canonical))continue}else if(!b.filter(new D(this.tileID.overscaledZ),V))continue;const G=u.getId(V,g),X=new tk(V,T,C,M,G);X.tile=L,r.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const a=this.expirationTime;if(r.cacheControl){const u=Ke(r.cacheControl);u["max-age"]&&(this.expirationTime=Date.now()+1e3*u["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const u=Date.now();let f=!1;if(this.expirationTime>u)f=!1;else if(a)if(this.expirationTime<a)f=!0;else{const g=this.expirationTime-a;g?this.expirationTime=u+Math.max(g,3e4):f=!0}else f=!0;f?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0||!a)return;const u=this.latestFeatureIndex.loadVTLayers(),f=a.style.listImages();for(const g in this.buckets){if(!a.style.hasLayer(g))continue;const v=this.buckets[g],b=v.layers[0].sourceLayer||"_geojsonTileLayer",T=u[b],C=r[b];if(!T||!C||Object.keys(C).length===0)continue;if(v.update(C,T,f,this.imageAtlas&&this.imageAtlas.patternPositions||{}),v instanceof v0||v instanceof f0){const L=a.style._getSourceCache(v.layers[0].source);a._terrain&&a._terrain.enabled&&L&&v.programConfigurations.needsUpload&&a._terrain._clearRenderCacheForTile(L.id,this.tileID)}const M=a&&a.style&&a.style.getLayer(g);M&&(this.queryPadding=Math.max(this.queryPadding,M.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Dr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=Dr.now()+r}setTexture(r,a){const u=a.context,f=u.gl;this.texture=this.texture||a.getTileTexture(r.width),this.texture?this.texture.update(r,{useMipmap:!0}):(this.texture=new im(u,r,f.RGBA,{useMipmap:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE))}setDependencies(r,a){const u={};for(const f of a)u[f]=!0;this.dependencies[r]=u}hasDependency(r,a){for(const u of r){const f=this.dependencies[u];if(f){for(const g of a)if(f[g])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(r,a){if(!a||a.name==="mercator"||this._tileDebugBuffer)return;const u=pl(ik,this.tileID.canonical,this.tileTransform)[0],f=new xt,g=new Ro;for(let v=0;v<u.length;v++){const{x:b,y:T}=u[v];f.emplaceBack(b,T),g.emplaceBack(v)}g.emplaceBack(0),this._tileDebugIndexBuffer=r.createIndexBuffer(g),this._tileDebugBuffer=r.createVertexBuffer(f,Op.members),this._tileDebugSegments=qr.simpleSegment(0,0,f.length,g.length)}_makeTileBoundsBuffers(r,a){if(this._tileBoundsBuffer||!a||a.name==="mercator")return;const u=pl(ik,this.tileID.canonical,this.tileTransform)[0];let f,g;if(this.isRaster){const v=function(b,T){const C=Ru(b,T),M=Math.pow(2,b.z);for(let se=0;se<ka;se++)for(let ge=0;ge<ka;ge++){const Me=ts((b.x+(ge+nk(ge))/Ts)/M),_e=Hi((b.y+(se+nk(se))/Ts)/M),Pe=T.project(Me,_e),Oe=se*ka+ge;Ia[2*Oe+0]=Math.round((Pe.x*C.scale-C.x)*on),Ia[2*Oe+1]=Math.round((Pe.y*C.scale-C.y)*on)}pc.fill(0),z0.fill(0);for(let se=2045;se>=0;se--){const ge=4*se,Me=fc[ge+0],_e=fc[ge+1],Pe=fc[ge+2],Oe=fc[ge+3],Re=Me+Pe>>1,Ye=_e+Oe>>1,qe=Re+Ye-_e,lt=Ye+Me-Re,bt=_e*ka+Me,nt=Oe*ka+Pe,ft=Ye*ka+Re,pt=Math.hypot((Ia[2*bt+0]+Ia[2*nt+0])/2-Ia[2*ft+0],(Ia[2*bt+1]+Ia[2*nt+1])/2-Ia[2*ft+1])>=16;pc[ft]=pc[ft]||(pt?1:0),se<1022&&(pc[ft]=pc[ft]||pc[(_e+lt>>1)*ka+(Me+qe>>1)]||pc[(Oe+lt>>1)*ka+(Pe+qe>>1)])}const L=new ht,R=new Jt;let V=0;function G(se,ge){const Me=ge*ka+se;return z0[Me]===0&&(L.emplaceBack(Ia[2*Me+0],Ia[2*Me+1],se*on/Ts,ge*on/Ts),z0[Me]=++V),z0[Me]-1}function X(se,ge,Me,_e,Pe,Oe){const Re=se+Me>>1,Ye=ge+_e>>1;if(Math.abs(se-Pe)+Math.abs(ge-Oe)>1&&pc[Ye*ka+Re])X(Pe,Oe,se,ge,Re,Ye),X(Me,_e,Pe,Oe,Re,Ye);else{const qe=G(se,ge),lt=G(Me,_e),bt=G(Pe,Oe);R.emplaceBack(qe,lt,bt)}}return X(0,0,Ts,Ts,Ts,0),X(Ts,Ts,0,0,0,Ts),{vertices:L,indices:R}}(this.tileID.canonical,a);f=v.vertices,g=v.indices}else{f=new ht,g=new Jt;for(const{x:b,y:T}of u)f.emplaceBack(b,T,0,0);const v=Q1(f.int16,void 0,4);for(let b=0;b<v.length;b+=3)g.emplaceBack(v[b],v[b+1],v[b+2])}this._tileBoundsBuffer=r.createVertexBuffer(f,rk.members),this._tileBoundsIndexBuffer=r.createIndexBuffer(g),this._tileBoundsSegments=qr.simpleSegment(0,0,f.length,g.length)}_makeGlobeTileDebugBuffers(r,a){const u=a.projection;if(!u||u.name!=="globe"||a.freezeTileCoverage)return;const f=this.tileID.canonical,g=jp(TC(f,a)),v=sh(a.zoom);let b;v>0&&(b=A1(new Float64Array(16),a.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(r,f,a,g,b,v),this._makeGlobeTileDebugTextBuffer(r,f,a,g,b,v)}_globePoint(r,a,u,f,g,v,b){let T=Fp(r,a,u);if(v){const C=1<<u.z,M=Ca(f.center.lng),L=Aa(f.center.lat),R=(u.x+.5)/C-M;let V=0;R>.5?V=-1:R<-.5&&(V=1);let G=(r/on+u.x)/C+V,X=(a/on+u.y)/C;G=(G-M)*f._pixelsPerMercatorPixel+M,X=(X-L)*f._pixelsPerMercatorPixel+L;const se=[G*f.worldSize,X*f.worldSize,0];Vr(se,se,v),T=Mu(T,se,b)}return Vr(T,T,g)}_makeGlobeTileDebugBorderBuffer(r,a,u,f,g,v){const b=new xt,T=new Ro,C=new Ze,M=(R,V,G,X,se)=>{const ge=(G-R)/(se-1),Me=(X-V)/(se-1),_e=b.length;for(let Pe=0;Pe<se;Pe++){const Oe=R+Pe*ge,Re=V+Pe*Me;b.emplaceBack(Oe,Re);const Ye=this._globePoint(Oe,Re,a,u,f,g,v);C.emplaceBack(Ye[0],Ye[1],Ye[2]),T.emplaceBack(_e+Pe)}},L=on;M(0,0,L,0,16),M(L,0,L,L,16),M(L,L,0,L,16),M(0,L,0,0,16),this._tileDebugIndexBuffer=r.createIndexBuffer(T),this._tileDebugBuffer=r.createVertexBuffer(b,Op.members),this._globeTileDebugBorderBuffer=r.createVertexBuffer(C,wC.members),this._tileDebugSegments=qr.simpleSegment(0,0,b.length,T.length)}_makeGlobeTileDebugTextBuffer(r,a,u,f,g,v){const b=on/4,T=new xt,C=new Jt,M=new Ze,L=25;C.reserve(32),T.reserve(L),M.reserve(L);const R=(V,G)=>L*V+G;for(let V=0;V<L;V++){const G=V*b;for(let X=0;X<L;X++){const se=X*b;T.emplaceBack(se,G);const ge=this._globePoint(se,G,a,u,f,g,v);M.emplaceBack(ge[0],ge[1],ge[2])}}for(let V=0;V<4;V++)for(let G=0;G<4;G++){const X=R(V,G),se=R(V,G+1),ge=R(V+1,G),Me=R(V+1,G+1);C.emplaceBack(X,se,ge),C.emplaceBack(ge,se,Me)}this._tileDebugTextIndexBuffer=r.createIndexBuffer(C),this._tileDebugTextBuffer=r.createVertexBuffer(T,Op.members),this._globeTileDebugTextBuffer=r.createVertexBuffer(M,wC.members),this._tileDebugTextSegments=qr.simpleSegment(0,0,L,32)}}class sj{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,a,u){const f=String(a);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][f]=this.stateChanges[r][f]||{},It(this.stateChanges[r][f],u),this.deletedStates[r]===null){this.deletedStates[r]={};for(const g in this.state[r])g!==f&&(this.deletedStates[r][g]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][f]===null){this.deletedStates[r][f]={};for(const g in this.state[r][f])u[g]||(this.deletedStates[r][f][g]=null)}else for(const g in u)this.deletedStates[r]&&this.deletedStates[r][f]&&this.deletedStates[r][f][g]===null&&delete this.deletedStates[r][f][g]}removeFeatureState(r,a,u){if(this.deletedStates[r]===null)return;const f=String(a);if(this.deletedStates[r]=this.deletedStates[r]||{},u&&a!==void 0)this.deletedStates[r][f]!==null&&(this.deletedStates[r][f]=this.deletedStates[r][f]||{},this.deletedStates[r][f][u]=null);else if(a!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][f])for(u in this.deletedStates[r][f]={},this.stateChanges[r][f])this.deletedStates[r][f][u]=null;else this.deletedStates[r][f]=null;else this.deletedStates[r]=null}getState(r,a){const u=String(a),f=It({},(this.state[r]||{})[u],(this.stateChanges[r]||{})[u]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const g=this.deletedStates[r][a];if(g===null)return{};for(const v in g)delete f[v]}return f}initializeTileState(r,a){r.setFeatureState(this.state,a)}coalesceChanges(r,a){const u={};for(const f in this.stateChanges){this.state[f]=this.state[f]||{};const g={};for(const v in this.stateChanges[f])this.state[f][v]||(this.state[f][v]={}),It(this.state[f][v],this.stateChanges[f][v]),g[v]=this.state[f][v];u[f]=g}for(const f in this.deletedStates){this.state[f]=this.state[f]||{};const g={};if(this.deletedStates[f]===null)for(const v in this.state[f])g[v]={},this.state[f][v]={};else for(const v in this.deletedStates[f]){if(this.deletedStates[f][v]===null)this.state[f][v]={};else if(this.state[f][v])for(const b of Object.keys(this.deletedStates[f][v]))delete this.state[f][v][b];g[v]=this.state[f][v]}u[f]=u[f]||{},It(u[f],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(u).length!==0)for(const f in r)r[f].setFeatureState(u,a)}}class ok{constructor(r){this.size=r,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(r,a){const u=this.toIdx(r,a);return{min:this.minimums[u],max:this.maximums[u]}}isLeaf(r,a){return this.leaves[this.toIdx(r,a)]}toIdx(r,a){return a*this.size+r}}function sk(o,r,a,u){let f=0,g=Number.MAX_VALUE;for(let v=0;v<3;v++)if(Math.abs(u[v])<1e-15){if(a[v]<o[v]||a[v]>r[v])return null}else{const b=1/u[v];let T=(o[v]-a[v])*b,C=(r[v]-a[v])*b;if(T>C){const M=T;T=C,C=M}if(T>f&&(f=T),C<g&&(g=C),f>g)return null}return f}function ak(o,r,a,u,f,g,v,b,T,C,M){const L=u-o,R=f-r,V=g-a,G=v-o,X=b-r,se=T-a,ge=M[1]*se-M[2]*X,Me=M[2]*G-M[0]*se,_e=M[0]*X-M[1]*G,Pe=L*ge+R*Me+V*_e;if(Math.abs(Pe)<1e-15)return null;const Oe=1/Pe,Re=C[0]-o,Ye=C[1]-r,qe=C[2]-a,lt=(Re*ge+Ye*Me+qe*_e)*Oe;if(lt<0||lt>1)return null;const bt=Ye*V-qe*R,nt=qe*L-Re*V,ft=Re*R-Ye*L,pt=(M[0]*bt+M[1]*nt+M[2]*ft)*Oe;return pt<0||lt+pt>1?null:(G*bt+X*nt+se*ft)*Oe}function lk(o,r,a){return(o-r)/(a-r)}function ck(o,r,a,u,f,g,v,b,T){const C=1<<a,M=g-u,L=v-f,R=(o+1)/C*M+u,V=(r+0)/C*L+f,G=(r+1)/C*L+f;b[0]=(o+0)/C*M+u,b[1]=V,T[0]=R,T[1]=G}class uk{constructor(r){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=r,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const a=function(g){const v=Math.ceil(Math.log2(g.dim/8)),b=[];let T=Math.ceil(Math.pow(2,v));const C=1/T,M=(V,G,X,se,ge)=>{const Me=se?1:0,_e=(V+1)*X-Me,Pe=G*X,Oe=(G+1)*X-Me;ge[0]=V*X,ge[1]=Pe,ge[2]=_e,ge[3]=Oe};let L=new ok(T);const R=[];for(let V=0;V<T*T;V++){M(V%T,Math.floor(V/T),C,!1,R);const G=mc(R[0],R[1],g),X=mc(R[2],R[1],g),se=mc(R[2],R[3],g),ge=mc(R[0],R[3],g);L.minimums.push(Math.min(G,X,se,ge)),L.maximums.push(Math.max(G,X,se,ge)),L.leaves.push(1)}for(b.push(L),T/=2;T>=1;T/=2){const V=b[b.length-1];L=new ok(T);for(let G=0;G<T*T;G++){M(G%T,Math.floor(G/T),2,!0,R);const X=V.getElevation(R[0],R[1]),se=V.getElevation(R[2],R[1]),ge=V.getElevation(R[2],R[3]),Me=V.getElevation(R[0],R[3]),_e=V.isLeaf(R[0],R[1]),Pe=V.isLeaf(R[2],R[1]),Oe=V.isLeaf(R[2],R[3]),Re=V.isLeaf(R[0],R[3]),Ye=Math.min(X.min,se.min,ge.min,Me.min),qe=Math.max(X.max,se.max,ge.max,Me.max),lt=_e&&Pe&&Oe&&Re;L.maximums.push(qe),L.minimums.push(Ye),L.leaves.push(qe-Ye<=5&&lt?1:0)}b.push(L)}return b}(this.dem),u=a.length-1,f=a[u];this._addNode(f.minimums[0],f.maximums[0],f.leaves[0]),this._construct(a,0,0,u,0)}raycastRoot(r,a,u,f,g,v,b=1){return sk([r,a,-100],[u,f,this.maximums[0]*b],g,v)}raycast(r,a,u,f,g,v,b=1){if(!this.nodeCount)return null;const T=this.raycastRoot(r,a,u,f,g,v,b);if(T==null)return null;const C=[],M=[],L=[],R=[],V=[{idx:0,t:T,nodex:0,nodey:0,depth:0}];for(;V.length>0;){const{idx:G,t:X,nodex:se,nodey:ge,depth:Me}=V.pop();if(this.leaves[G]){ck(se,ge,Me,r,a,u,f,L,R);const Pe=1<<Me,Oe=(se+0)/Pe,Re=(se+1)/Pe,Ye=(ge+0)/Pe,qe=(ge+1)/Pe,lt=mc(Oe,Ye,this.dem)*b,bt=mc(Re,Ye,this.dem)*b,nt=mc(Re,qe,this.dem)*b,ft=mc(Oe,qe,this.dem)*b,pt=ak(L[0],L[1],lt,R[0],L[1],bt,R[0],R[1],nt,g,v),gt=ak(R[0],R[1],nt,L[0],R[1],ft,L[0],L[1],lt,g,v),Et=Math.min(pt!==null?pt:Number.MAX_VALUE,gt!==null?gt:Number.MAX_VALUE);if(Et!==Number.MAX_VALUE)return Et;{const ot=Lp([],g,v,X);if(dk(lt,bt,ft,nt,lk(ot[0],L[0],R[0]),lk(ot[1],L[1],R[1]))>=ot[2])return X}continue}let _e=0;for(let Pe=0;Pe<this._siblingOffset.length;Pe++){ck((se<<1)+this._siblingOffset[Pe][0],(ge<<1)+this._siblingOffset[Pe][1],Me+1,r,a,u,f,L,R),L[2]=-100,R[2]=this.maximums[this.childOffsets[G]+Pe]*b;const Oe=sk(L,R,g,v);if(Oe!=null){const Re=Oe;C[Pe]=Re;let Ye=!1;for(let qe=0;qe<_e&&!Ye;qe++)Re>=C[M[qe]]&&(M.splice(qe,0,Pe),Ye=!0);Ye||(M[_e]=Pe),_e++}}for(let Pe=0;Pe<_e;Pe++){const Oe=M[Pe];V.push({idx:this.childOffsets[G]+Oe,t:C[Oe],nodex:(se<<1)+this._siblingOffset[Oe][0],nodey:(ge<<1)+this._siblingOffset[Oe][1],depth:Me+1})}}return null}_addNode(r,a,u){return this.minimums.push(r),this.maximums.push(a),this.leaves.push(u),this.childOffsets.push(0),this.nodeCount++}_construct(r,a,u,f,g){if(r[f].isLeaf(a,u)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const v=f-1,b=r[v];let T=0,C=0;for(let M=0;M<this._siblingOffset.length;M++){const L=2*a+this._siblingOffset[M][0],R=2*u+this._siblingOffset[M][1],V=b.getElevation(L,R),G=b.isLeaf(L,R),X=this._addNode(V.min,V.max,G);G&&(T|=1<<M),C||(C=X)}for(let M=0;M<this._siblingOffset.length;M++)T&1<<M||this._construct(r,2*a+this._siblingOffset[M][0],2*u+this._siblingOffset[M][1],v,C+M)}}function dk(o,r,a,u,f,g){return Vn(Vn(o,a,g),Vn(r,u,g),f)}function mc(o,r,a){const u=a.dim,f=ve(o*u-.5,0,u-1),g=ve(r*u-.5,0,u-1),v=Math.floor(f),b=Math.floor(g),T=Math.min(v+1,u-1),C=Math.min(b+1,u-1);return dk(a.get(v,b),a.get(T,b),a.get(v,C),a.get(T,C),f-v,g-b)}const hk={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function aj(o,r,a){return(256*o*256+256*r+a)/10-1e4}function lj(o,r,a){return 256*o+r+a/256-32768}class L0{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(r,a,u,f=!1,g=!1){if(this.uid=r,a.height!==a.width)throw new RangeError("DEM tiles must be square");if(u&&u!=="mapbox"&&u!=="terrarium")return mn(`"${u}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=a.height;const v=this.dim=a.height-2,b=new Uint32Array(a.data.buffer);if(this.pixels=new Uint8Array(a.data.buffer),this.encoding=u||"mapbox",this.borderReady=f,!f){for(let T=0;T<v;T++)b[this._idx(-1,T)]=b[this._idx(0,T)],b[this._idx(v,T)]=b[this._idx(v-1,T)],b[this._idx(T,-1)]=b[this._idx(T,0)],b[this._idx(T,v)]=b[this._idx(T,v-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(v,-1)]=b[this._idx(v-1,0)],b[this._idx(-1,v)]=b[this._idx(0,v-1)],b[this._idx(v,v)]=b[this._idx(v-1,v-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new uk(this)}get(r,a,u=!1){u&&(r=ve(r,-1,this.dim),a=ve(a,-1,this.dim));const f=4*this._idx(r,a);return(this.encoding==="terrarium"?lj:aj)(this.pixels[f],this.pixels[f+1],this.pixels[f+2])}static getUnpackVector(r){return hk[r]}get unpackVector(){return hk[this.encoding]}_idx(r,a){if(r<-1||r>=this.dim+1||a<-1||a>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(a+1)*this.stride+(r+1)}static pack(r,a){const u=[0,0,0,0],f=L0.getUnpackVector(a);let g=Math.floor((r+f[3])/f[2]);return u[2]=g%256,g=Math.floor(g/256),u[1]=g%256,g=Math.floor(g/256),u[0]=g,u}getPixels(){return new Bo({width:this.stride,height:this.stride},this.pixels)}backfillBorder(r,a,u){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let f=a*this.dim,g=a*this.dim+this.dim,v=u*this.dim,b=u*this.dim+this.dim;switch(a){case-1:f=g-1;break;case 1:g=f+1}switch(u){case-1:v=b-1;break;case 1:b=v+1}const T=-a*this.dim,C=-u*this.dim;for(let M=v;M<b;M++)for(let L=f;L<g;L++){const R=4*this._idx(L,M),V=4*this._idx(L+T,M+C);this.pixels[R+0]=r.pixels[V+0],this.pixels[R+1]=r.pixels[V+1],this.pixels[R+2]=r.pixels[V+2],this.pixels[R+3]=r.pixels[V+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Wt(L0,"DEMData"),Wt(uk,"DemMinMaxQuadTree",{omit:["dem"]});class cj{constructor(r,a){this.max=r,this.onRemove=a,this.reset()}reset(){for(const r in this.data)for(const a of this.data[r])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(r,a,u){const f=r.wrapped().key;this.data[f]===void 0&&(this.data[f]=[]);const g={value:a,timeout:void 0};if(u!==void 0&&(g.timeout=setTimeout(()=>{this.remove(r,g)},u)),this.data[f].push(g),this.order.push(f),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const a=this.data[r].shift();return a.timeout&&clearTimeout(a.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),a.value}getByKey(r){const a=this.data[r];return a?a[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,a){if(!this.has(r))return this;const u=r.wrapped().key,f=a===void 0?0:this.data[u].indexOf(a),g=this.data[u][f];return this.data[u].splice(f,1),g.timeout&&clearTimeout(g.timeout),this.data[u].length===0&&delete this.data[u],this.onRemove(g.value),this.order.splice(this.order.indexOf(u),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(r){const a=[];for(const u in this.data)for(const f of this.data[u])r(f.value)||a.push(f);for(const u of a)this.remove(u.value.tileID,u)}}class bh{constructor(r,a,u){this.func=r,this.mask=a,this.range=u}}bh.ReadOnly=!1,bh.ReadWrite=!0,bh.disabled=new bh(519,bh.ReadOnly,[0,1]);const xb=7680;class bb{constructor(r,a,u,f,g,v){this.test=r,this.ref=a,this.mask=u,this.fail=f,this.depthFail=g,this.pass=v}}bb.disabled=new bb({func:519,mask:0},0,0,xb,xb,xb);class Pa{constructor(r,a,u){this.blendFunction=r,this.blendColor=a,this.mask=u}}Pa.Replace=[1,0],Pa.disabled=new Pa(Pa.Replace,$r.transparent,[!1,!1,!1,!1]),Pa.unblended=new Pa(Pa.Replace,$r.transparent,[!0,!0,!0,!0]),Pa.alphaBlended=new Pa([1,771],$r.transparent,[!0,!0,!0,!0]);const wb=1029,Sb=2305;class ua{constructor(r,a,u){this.enable=r,this.mode=a,this.frontFace=u}}ua.disabled=new ua(!1,wb,Sb),ua.backCCW=new ua(!0,wb,Sb),ua.backCW=new ua(!0,wb,2304),ua.frontCW=new ua(!0,1028,2304),ua.frontCCW=new ua(!0,1028,Sb);class Ou extends Qc{constructor(r,a,u){super(),this.id=r,this._onlySymbols=u,a.on("data",f=>{f.dataType==="source"&&f.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&f.dataType==="source"&&f.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),a.on("error",()=>{this._sourceErrored=!0}),this._source=a,this._tiles={},this._cache=new cj(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=a.minTileCacheSize,this._maxTileCacheSize=a.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new sj,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(r){this.map=r,this._minTileCacheSize=this._minTileCacheSize===void 0&&r?r._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&r?r._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const r in this._tiles){const a=this._tiles[r];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(r,a){return r.isSymbolTile=this._onlySymbols,this._source.loadTile(r,a)}_unloadTile(r){if(this._source.unloadTile)return this._source.unloadTile(r,()=>{})}_abortTile(r){if(this._source.abortTile)return this._source.abortTile(r,()=>{})}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const u=this._tiles[a];u.upload(r),u.prepare(this.map.style.imageManager)}}getIds(){return Ct(this._tiles).map(r=>r.tileID).sort(fk).map(r=>r.key)}getRenderableIds(r){const a=[];for(const u in this._tiles)this._isIdRenderable(+u,r)&&a.push(this._tiles[u]);return r?a.sort((u,f)=>{const g=u.tileID,v=f.tileID,b=new re(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),T=new re(v.canonical.x,v.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-v.overscaledZ||T.y-b.y||T.x-b.x}).map(u=>u.tileID.key):a.map(u=>u.tileID).sort(fk).map(u=>u.key)}hasRenderableParent(r){const a=this.findLoadedParent(r,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(r,a){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(a||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(+r,"reloading")}}_reloadTile(r,a){const u=this._tiles[r];u&&(u.state!=="loading"&&(u.state=a),this._loadTile(u,this._tileLoaded.bind(this,u,r,a)))}_tileLoaded(r,a,u,f){if(f)if(r.state="errored",f.status!==404)this._source.fire(new Ei(f,{tile:r}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else r.timeAdded=Dr.now(),u==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(a,r),this._source.type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),this._source.fire(new Ui("data",{dataType:"source",tile:r,coord:r.tileID,sourceCacheId:this.id}))}_backfillDEM(r){const a=this.getRenderableIds();for(let f=0;f<a.length;f++){const g=a[f];if(r.neighboringTiles&&r.neighboringTiles[g]){const v=this.getTileByID(g);u(r,v),u(v,r)}}function u(f,g){if(!f.dem||f.dem.borderReady)return;f.needsHillshadePrepare=!0,f.needsDEMTextureUpload=!0;let v=g.tileID.canonical.x-f.tileID.canonical.x;const b=g.tileID.canonical.y-f.tileID.canonical.y,T=Math.pow(2,f.tileID.canonical.z),C=g.tileID.key;v===0&&b===0||Math.abs(b)>1||(Math.abs(v)>1&&(Math.abs(v+T)===1?v+=T:Math.abs(v-T)===1&&(v-=T)),g.dem&&f.dem&&(f.dem.backfillBorder(g.dem,v,b),f.neighboringTiles&&f.neighboringTiles[C]&&(f.neighboringTiles[C].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,a,u,f){for(const g in this._tiles){let v=this._tiles[g];if(f[g]||!v.hasData()||v.tileID.overscaledZ<=a||v.tileID.overscaledZ>u)continue;let b=v.tileID;for(;v&&v.tileID.overscaledZ>a+1;){const C=v.tileID.scaledTo(v.tileID.overscaledZ-1);v=this._tiles[C.key],v&&v.hasData()&&(b=C)}let T=b;for(;T.overscaledZ>a;)if(T=T.scaledTo(T.overscaledZ-1),r[T.key]){f[b.key]=b;break}}}findLoadedParent(r,a){if(r.key in this._loadedParentTiles){const u=this._loadedParentTiles[r.key];return u&&u.tileID.overscaledZ>=a?u:null}for(let u=r.overscaledZ-1;u>=a;u--){const f=r.scaledTo(u),g=this._getLoadedTile(f);if(g)return g}}_getLoadedTile(r){const a=this._tiles[r.key];return a&&a.hasData()?a:this._cache.getByKey(this._source.reparseOverscaled?r.wrapped().key:r.canonical.key)}updateCacheSize(r,a){a=a||this._source.tileSize;const u=Math.ceil(r.width/a)+1,f=Math.ceil(r.height/a)+1,g=Math.floor(u*f*5),v=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,g):g,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(b)}handleWrapJump(r){const a=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,a){const u={};for(const f in this._tiles){const g=this._tiles[f];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+a),u[g.tileID.key]=g}this._tiles=u;for(const f in this._timers)clearTimeout(this._timers[f]),delete this._timers[f];for(const f in this._tiles)this._setTileReloadTimer(+f,this._tiles[f])}}update(r,a,u){if(this.transform=r,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!u)return;let f;this.updateCacheSize(r,a),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(b=>new uo(b.canonical.z,b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)):(f=r.coveringTiles({tileSize:a||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!u,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(f=f.filter(b=>this._source.hasTile(b)))):f=[];const g=this._updateRetainedTiles(f);if(pk(this._source.type)&&f.length!==0){const b={},T={},C=Object.keys(g);for(const L of C){const R=g[L],V=this._tiles[L];if(!V||V.fadeEndTime&&V.fadeEndTime<=Dr.now())continue;const G=this.findLoadedParent(R,Math.max(R.overscaledZ-Ou.maxOverzooming,this._source.minzoom));G&&(this._addTile(G.tileID),b[G.tileID.key]=G.tileID),T[L]=R}const M=f[f.length-1].overscaledZ;for(const L in this._tiles){const R=this._tiles[L];if(g[L]||!R.hasData())continue;let V=R.tileID;for(;V.overscaledZ>M;){V=V.scaledTo(V.overscaledZ-1);const G=this._tiles[V.key];if(G&&G.hasData()&&T[V.key]){g[L]=R.tileID;break}}}for(const L in b)g[L]||(this._coveredTiles[L]=!0,g[L]=b[L])}for(const b in g)this._tiles[b].clearFadeHold();const v=function(b,T){const C=[];for(const M in b)M in T||C.push(M);return C}(this._tiles,g);for(const b of v){const T=this._tiles[b];T.hasSymbolBuckets&&!T.holdingForFade()?T.setHoldDuration(this.map._fadeDuration):T.hasSymbolBuckets&&!T.symbolFadeFinished()||this._removeTile(+b)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(+r)}_updateRetainedTiles(r){const a={};if(r.length===0)return a;const u={},f=r.reduce((C,M)=>Math.min(C,M.overscaledZ),1/0),g=r[0].overscaledZ,v=Math.max(g-Ou.maxOverzooming,this._source.minzoom),b=Math.max(g+Ou.maxUnderzooming,this._source.minzoom),T={};for(const C of r){const M=this._addTile(C);a[C.key]=C,M.hasData()||f<this._source.maxzoom&&(T[C.key]=C)}this._retainLoadedChildren(T,f,b,a);for(const C of r){let M=this._tiles[C.key];if(M.hasData())continue;if(C.canonical.z>=this._source.maxzoom){const R=C.children(this._source.maxzoom)[0],V=this.getTile(R);if(V&&V.hasData()){a[R.key]=R;continue}}else{const R=C.children(this._source.maxzoom);if(a[R[0].key]&&a[R[1].key]&&a[R[2].key]&&a[R[3].key])continue}let L=M.wasRequested();for(let R=C.overscaledZ-1;R>=v;--R){const V=C.scaledTo(R);if(u[V.key]||(u[V.key]=!0,M=this.getTile(V),!M&&L&&(M=this._addTile(V)),M&&(a[V.key]=V,L=M.wasRequested(),M.hasData())))break}}return a}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const a=[];let u,f=this._tiles[r].tileID;for(;f.overscaledZ>0;){if(f.key in this._loadedParentTiles){u=this._loadedParentTiles[f.key];break}a.push(f.key);const g=f.scaledTo(f.overscaledZ-1);if(u=this._getLoadedTile(g),u)break;f=g}for(const g of a)this._loadedParentTiles[g]=u}}_addTile(r){let a=this._tiles[r.key];if(a)return a;a=this._cache.getAndRemove(r),a&&(this._setTileReloadTimer(r.key,a),a.tileID=r,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,a)));const u=!!a;if(!u){const f=this.map?this.map.painter:null;a=new _b(r,this._source.tileSize*r.overscaleFactor(),this.transform.tileZoom,f,this._isRaster),this._loadTile(a,this._tileLoaded.bind(this,a,r.key,a.state))}return a?(a.uses++,this._tiles[r.key]=a,u||this._source.fire(new Ui("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a):null}_setTileReloadTimer(r,a){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const u=a.getExpiryTimeout();u&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},u))}_removeTile(r){const a=this._tiles[r];a&&(a.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(+r);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(r,a,u){const f=[],g=this.transform;if(!g)return f;const v=g.projection.name==="globe",b=Ca(g.center.lng);for(const T in this._tiles){const C=this._tiles[T];if(u&&C.clearQueryDebugViz(),C.holdingForFade())continue;let M;if(v){const L=C.tileID.canonical;if(L.z===0){const R=[Math.abs(ve(b,...om(L,-1))-b),Math.abs(ve(b,...om(L,1))-b)];M=[0,2*R.indexOf(Math.min(...R))-1]}else{const R=[Math.abs(ve(b,...om(L,-1))-b),Math.abs(ve(b,...om(L,0))-b),Math.abs(ve(b,...om(L,1))-b)];M=[R.indexOf(Math.min(...R))-1]}}else M=[0];for(const L of M){const R=r.containsTile(C,g,a,L);R&&f.push(R)}}return f}getVisibleCoordinates(r){const a=this.getRenderableIds(r).map(u=>this._tiles[u].tileID);for(const u of a)u.projMatrix=this.transform.calculateProjMatrix(u.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(pk(this._source.type))for(const r in this._tiles){const a=this._tiles[r];if(a.fadeEndTime!==void 0&&a.fadeEndTime>=Dr.now())return!0}return!1}setFeatureState(r,a,u){this._state.updateState(r=r||"_geojsonTileLayer",a,u)}removeFeatureState(r,a,u){this._state.removeFeatureState(r=r||"_geojsonTileLayer",a,u)}getFeatureState(r,a){return this._state.getState(r=r||"_geojsonTileLayer",a)}setDependencies(r,a,u){const f=this._tiles[r];f&&f.setDependencies(a,u)}reloadTilesForDependencies(r,a){for(const u in this._tiles)this._tiles[u].hasDependency(r,a)&&this._reloadTile(+u,"reloading");this._cache.filter(u=>!u.hasDependency(r,a))}_preloadTiles(r,a){if(!this._sourceLoaded){const b=()=>{this._sourceLoaded&&(this._source.off("data",b),this._preloadTiles(r,a))};return void this._source.on("data",b)}const u=new Map,f=Array.isArray(r)?r:[r],g=this.map.painter.terrain,v=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const b of f){const T=b.coveringTiles({tileSize:v,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const C of T)u.set(C.key,C);this.usedForTerrain&&b.updateElevation(!1)}rt(Array.from(u.values()),(b,T)=>{const C=new _b(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(C,M=>{this._source.type==="raster-dem"&&C.dem&&this._backfillDEM(C),T(M,C)})},a)}}function fk(o,r){const a=Math.abs(2*o.wrap)-+(o.wrap<0),u=Math.abs(2*r.wrap)-+(r.wrap<0);return o.overscaledZ-r.overscaledZ||u-a||r.canonical.y-o.canonical.y||r.canonical.x-o.canonical.x}function pk(o){return o==="raster"||o==="image"||o==="video"||o==="custom"}function om(o,r){const a=1<<o.z;return[o.x/a+r,(o.x+1)/a+r]}Ou.maxOverzooming=10,Ou.maxUnderzooming=3;class R0{constructor(r,a,u){this._demTile=r,this._dem=this._demTile.dem,this._scale=a,this._offset=u}static create(r,a,u){const f=u||r.findDEMTileFor(a);if(!f||!f.dem)return;const g=f.dem,v=f.tileID,b=1<<a.canonical.z-v.canonical.z;return new R0(f,f.tileSize/on/b,[(a.canonical.x/b-v.canonical.x)*g.dim,(a.canonical.y/b-v.canonical.y)*g.dim])}tileCoordToPixel(r,a){const u=a*this._scale+this._offset[1],f=Math.floor(r*this._scale+this._offset[0]),g=Math.floor(u);return new re(f,g)}getElevationAt(r,a,u,f){const g=r*this._scale+this._offset[0],v=a*this._scale+this._offset[1],b=Math.floor(g),T=Math.floor(v),C=this._dem;return f=!!f,u?Vn(Vn(C.get(b,T,f),C.get(b,T+1,f),v-T),Vn(C.get(b+1,T,f),C.get(b+1,T+1,f),v-T),g-b):C.get(b,T,f)}getElevationAtPixel(r,a,u){return this._dem.get(r,a,!!u)}getMeterToDEM(r){return(1<<this._demTile.tileID.canonical.z)*aa(1,r)*this._dem.stride}}class mk{constructor(r,a){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new al(on,16,0),this.featureIndexArray=new Eu,this.promoteId=a}insert(r,a,u,f,g,v=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,f,g,v);const T=this.grid;for(let C=0;C<a.length;C++){const M=a[C],L=[1/0,1/0,-1/0,-1/0];for(let R=0;R<M.length;R++){const V=M[R];L[0]=Math.min(L[0],V.x),L[1]=Math.min(L[1],V.y),L[2]=Math.max(L[2],V.x),L[3]=Math.max(L[3],V.y)}L[0]<on&&L[1]<on&&L[2]>=0&&L[3]>=0&&T.insert(b,L[0],L[1],L[2],L[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new rb(new b0(this.rawTileData)).layers,this.sourceLayerCoder=new ek(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const r in this.vtLayers)this.vtFeatures[r]=[]}return this.vtLayers}query(r,a,u,f){this.loadVTLayers();const g=r.params||{},v=Xd(g.filter),b=r.tileResult,T=r.transform,C=b.bufferedTilespaceBounds,M=this.grid.query(C.min.x,C.min.y,C.max.x,C.max.y,(G,X,se,ge)=>NC(b.bufferedTilespaceGeometry,G,X,se,ge));M.sort(uj);let L=null;T.elevation&&M.length>0&&(L=R0.create(T.elevation,this.tileID));const R={};let V;for(let G=0;G<M.length;G++){const X=M[G];if(X===V)continue;V=X;const se=this.featureIndexArray.get(X);let ge=null;this.loadMatchingFeature(R,se,v,g.layers,g.availableImages,a,u,f,(Me,_e,Pe,Oe=0)=>(ge||(ge=pl(Me,this.tileID.canonical,r.tileTransform)),_e.queryIntersectsFeature(b,Me,Pe,ge,this.z,r.transform,r.pixelPosMatrix,L,Oe)))}return R}loadMatchingFeature(r,a,u,f,g,v,b,T,C){const{featureIndex:M,bucketIndex:L,sourceLayerIndex:R,layoutVertexArrayOffset:V}=a,G=this.bucketLayerIDs[L];if(f&&!function(Me,_e){for(let Pe=0;Pe<Me.length;Pe++)if(_e.indexOf(Me[Pe])>=0)return!0;return!1}(f,G))return;const X=this.sourceLayerCoder.decode(R),se=this.vtLayers[X].feature(M);if(u.needGeometry){const Me=Du(se,!0);if(!u.filter(new D(this.tileID.overscaledZ),Me,this.tileID.canonical))return}else if(!u.filter(new D(this.tileID.overscaledZ),se))return;const ge=this.getId(se,X);for(let Me=0;Me<G.length;Me++){const _e=G[Me];if(f&&f.indexOf(_e)<0)continue;const Pe=v[_e];if(!Pe)continue;let Oe={};ge!==void 0&&T&&(Oe=T.getState(Pe.sourceLayer||"_geojsonTileLayer",ge));const Re=It({},b[_e]);Re.paint=gk(Re.paint,Pe.paint,se,Oe,g),Re.layout=gk(Re.layout,Pe.layout,se,Oe,g);const Ye=!C||C(se,Pe,Oe,V);if(!Ye)continue;const qe=new tk(se,this.z,this.x,this.y,ge);qe.layer=Re;let lt=r[_e];lt===void 0&&(lt=r[_e]=[]),lt.push({featureIndex:M,feature:qe,intersectionZ:Ye})}}lookupSymbolFeatures(r,a,u,f,g,v,b,T){const C={};this.loadVTLayers();const M=Xd(g);for(const L of r)this.loadMatchingFeature(C,{bucketIndex:u,sourceLayerIndex:f,featureIndex:L,layoutVertexArrayOffset:0},M,v,b,T,a);return C}loadFeature(r){const{featureIndex:a,sourceLayerIndex:u}=r;this.loadVTLayers();const f=this.sourceLayerCoder.decode(u),g=this.vtFeatures[f];if(g[a])return g[a];const v=this.vtLayers[f].feature(a);return g[a]=v,v}hasLayer(r){for(const a of this.bucketLayerIDs)for(const u of a)if(r===u)return!0;return!1}getId(r,a){let u=r.id;if(this.promoteId){const f=typeof this.promoteId=="string"?this.promoteId:this.promoteId[a];f!=null&&(u=r.properties[f]),typeof u=="boolean"&&(u=Number(u))}return u}}function gk(o,r,a,u,f){return zt(o,(g,v)=>{const b=r instanceof me?r.get(v):null;return b&&b.evaluate?b.evaluate(a,u,f):b})}function uj(o,r){return r-o}Wt(mk,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class yk{constructor(r,a){this.width=r,this.height=a,this.nextRow=0,this.image=new ml({width:r,height:a}),this.positions={},this.uploaded=!1}getDash(r,a){const u=this.getKey(r,a);return this.positions[u]}trim(){const r=this.width,a=this.height=an(this.nextRow);this.image.resize({width:r,height:a})}getKey(r,a){return r.join(",")+a}getDashRanges(r,a,u){const f=[];let g=r.length%2==1?-r[r.length-1]*u:0,v=r[0]*u,b=!0;f.push({left:g,right:v,isDash:b,zeroLength:r[0]===0});let T=r[0];for(let C=1;C<r.length;C++){b=!b;const M=r[C];g=T*u,T+=M,v=T*u,f.push({left:g,right:v,isDash:b,zeroLength:M===0})}return f}addRoundDash(r,a,u){const f=a/2;for(let g=-u;g<=u;g++){const v=this.width*(this.nextRow+u+g);let b=0,T=r[b];for(let C=0;C<this.width;C++){C/T.right>1&&(T=r[++b]);const M=Math.abs(C-T.left),L=Math.abs(C-T.right),R=Math.min(M,L);let V;const G=g/u*(f+1);if(T.isDash){const X=f-Math.abs(G);V=Math.sqrt(R*R+X*X)}else V=f-Math.sqrt(R*R+G*G);this.image.data[v+C]=Math.max(0,Math.min(255,V+128))}}}addRegularDash(r,a){for(let T=r.length-1;T>=0;--T){const C=r[T],M=r[T+1];C.zeroLength?r.splice(T,1):M&&M.isDash===C.isDash&&(M.left=C.left,r.splice(T,1))}const u=r[0],f=r[r.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const g=this.width*this.nextRow;let v=0,b=r[v];for(let T=0;T<this.width;T++){T/b.right>1&&(b=r[++v]);const C=Math.abs(T-b.left),M=Math.abs(T-b.right),L=Math.min(C,M);this.image.data[g+T]=Math.max(0,Math.min(255,(b.isDash?L:-L)+a+128))}}addDash(r,a){const u=this.getKey(r,a);if(this.positions[u])return this.positions[u];const f=a==="round",g=f?7:0,v=2*g+1;if(this.nextRow+v>this.height)return mn("LineAtlas out of space"),null;r.length===0&&r.push(1);let b=0;for(let M=0;M<r.length;M++)r[M]<0&&(mn("Negative value is found in line dasharray, replacing values with 0"),r[M]=0),b+=r[M];if(b!==0){const M=this.width/b,L=this.getDashRanges(r,this.width,M);f?this.addRoundDash(L,M,g):this.addRegularDash(L,a==="square"?.5*M:0)}const T=this.nextRow+g;this.nextRow+=v;const C={tl:[T,g],br:[b,0]};return this.positions[u]=C,C}}Wt(yk,"LineAtlas");const vk=1*ca;class _k{constructor(r){const a={},u=[];for(const b in r){const T=r[b],C=a[b]={};for(const M in T.glyphs){const L=T.glyphs[+M];if(!L||L.bitmap.width===0||L.bitmap.height===0)continue;const R=L.metrics.localGlyph?vk:1,V={x:0,y:0,w:L.bitmap.width+2*R,h:L.bitmap.height+2*R};u.push(V),C[M]=V}}const{w:f,h:g}=ab(u),v=new ml({width:f||1,height:g||1});for(const b in r){const T=r[b];for(const C in T.glyphs){const M=T.glyphs[+C];if(!M||M.bitmap.width===0||M.bitmap.height===0)continue;const L=a[b][C],R=M.metrics.localGlyph?vk:1;ml.copy(M.bitmap,v,{x:0,y:0},{x:L.x+R,y:L.y+R},M.bitmap)}}this.image=v,this.positions=a}}Wt(_k,"GlyphAtlas");class dj{constructor(r){this.tileID=new uo(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),this.tileZoom=r.tileZoom,this.uid=r.uid,this.zoom=r.zoom,this.canonical=r.tileID.canonical,this.pixelRatio=r.pixelRatio,this.tileSize=r.tileSize,this.source=r.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=r.showCollisionBoxes,this.collectResourceTiming=!!r.collectResourceTiming,this.returnDependencies=!!r.returnDependencies,this.promoteId=r.promoteId,this.enableTerrain=!!r.enableTerrain,this.isSymbolTile=r.isSymbolTile,this.tileTransform=Ru(r.tileID.canonical,r.projection),this.projection=r.projection}parse(r,a,u,f,g){this.status="parsing",this.data=r,this.collisionBoxArray=new sr;const v=new ek(Object.keys(r.layers).sort()),b=new mk(this.tileID,this.promoteId);b.bucketLayerIDs=[];const T={},C=new yk(256,256),M={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:C,availableImages:u},L=a.familiesBySource[this.source];for(const Oe in L){const Re=r.layers[Oe];if(!Re)continue;let Ye=!1,qe=!1;for(const nt of L[Oe])nt[0].type==="symbol"?Ye=!0:qe=!0;if(this.isSymbolTile===!0&&!Ye||this.isSymbolTile===!1&&!qe)continue;Re.version===1&&mn(`Vector tile source "${this.source}" layer "${Oe}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const lt=v.encode(Oe),bt=[];for(let nt=0;nt<Re.length;nt++){const ft=Re.feature(nt),pt=b.getId(ft,Oe);bt.push({feature:ft,id:pt,index:nt,sourceLayerIndex:lt})}for(const nt of L[Oe]){const ft=nt[0];this.isSymbolTile!==void 0&&ft.type==="symbol"!==this.isSymbolTile||ft.minzoom&&this.zoom<Math.floor(ft.minzoom)||ft.maxzoom&&this.zoom>=ft.maxzoom||ft.visibility!=="none"&&(Eb(nt,this.zoom,u),(T[ft.id]=ft.createBucket({index:b.bucketLayerIDs.length,layers:nt,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:lt,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:u})).populate(bt,M,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(nt.map(pt=>pt.id)))}}let R,V,G,X;C.trim();const se={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ge=()=>{if(R)return g(R);if(V&&G&&X){const Oe=new _k(V),Re=new CA(G,X);for(const Ye in T){const qe=T[Ye];qe instanceof hc?(Eb(qe.layers,this.zoom,u),B6(qe,V,Oe.positions,G,Re.iconPositions,this.showCollisionBoxes,u,this.tileID.canonical,this.tileZoom,this.projection)):qe.hasPattern&&(qe instanceof v0||qe instanceof f0||qe instanceof Zp)&&(Eb(qe.layers,this.zoom,u),qe.addFeatures(M,this.tileID.canonical,Re.patternPositions,u,this.tileTransform))}this.status="done",g(null,{buckets:Ct(T).filter(Ye=>!Ye.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Oe.image,lineAtlas:C,imageAtlas:Re,glyphMap:this.returnDependencies?V:null,iconMap:this.returnDependencies?G:null,glyphPositions:this.returnDependencies?Oe.positions:null})}},Me=zt(M.glyphDependencies,Oe=>Object.keys(Oe).map(Number));Object.keys(Me).length?f.send("getGlyphs",{uid:this.uid,stacks:Me},(Oe,Re)=>{R||(R=Oe,V=Re,ge())},void 0,!1,se):V={};const _e=Object.keys(M.iconDependencies);_e.length?f.send("getImages",{icons:_e,source:this.source,tileID:this.tileID,type:"icons"},(Oe,Re)=>{R||(R=Oe,G=Re,ge())},void 0,!1,se):G={};const Pe=Object.keys(M.patternDependencies);Pe.length?f.send("getImages",{icons:Pe,source:this.source,tileID:this.tileID,type:"patterns"},(Oe,Re)=>{R||(R=Oe,X=Re,ge())},void 0,!1,se):X={},ge()}}function Eb(o,r,a){const u=new D(r);for(const f of o)f.recalculate(u,a)}class xk{constructor(r){this.entries={},this.scheduler=r}request(r,a,u,f){const g=this.entries[r]=this.entries[r]||{callbacks:[]};if(g.result){const[v,b]=g.result;return this.scheduler?this.scheduler.add(()=>{f(v,b)},a):f(v,b),()=>{}}return g.callbacks.push(f),g.cancel||(g.cancel=u((v,b)=>{g.result=[v,b];for(const T of g.callbacks)this.scheduler?this.scheduler.add(()=>{T(v,b)},a):T(v,b);setTimeout(()=>delete this.entries[r],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(v=>v!==f),g.callbacks.length||(g.cancel(),delete this.entries[r]))}}}function bk(o,r,a){const u=JSON.stringify(o.request);return o.data&&(this.deduped.entries[u]={result:[null,o.data]}),this.deduped.request(u,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom},f=>{const g=Li(o.request,(v,b,T,C)=>{v?f(v):b&&f(null,{vectorTile:a?void 0:new rb(new b0(b)),rawData:b,cacheControl:T,expires:C})});return()=>{g.cancel(),f()}},r)}const wk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Tb{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[a,u]=new Uint8Array(r,0,2);if(a!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=u>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const g=wk[15&u];if(!g)throw new Error("Unrecognized array type.");const[v]=new Uint16Array(r,2,1),[b]=new Uint32Array(r,4,1);return new Tb(b,v,g,r)}constructor(r,a=64,u=Float64Array,f){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+a,2),65535),this.ArrayType=u,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const g=wk.indexOf(this.ArrayType),v=2*r*this.ArrayType.BYTES_PER_ELEMENT,b=r*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-b%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${u}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+T,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+v+b+T),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+b+T,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=a,new Uint32Array(this.data,4,1)[0]=r)}add(r,a){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=r,this.coords[this._pos++]=a,u}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Cb(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,a,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:v,nodeSize:b}=this,T=[0,g.length-1,0],C=[];for(;T.length;){const M=T.pop()||0,L=T.pop()||0,R=T.pop()||0;if(L-R<=b){for(let se=R;se<=L;se++){const ge=v[2*se],Me=v[2*se+1];ge>=r&&ge<=u&&Me>=a&&Me<=f&&C.push(g[se])}continue}const V=R+L>>1,G=v[2*V],X=v[2*V+1];G>=r&&G<=u&&X>=a&&X<=f&&C.push(g[V]),(M===0?r<=G:a<=X)&&(T.push(R),T.push(V-1),T.push(1-M)),(M===0?u>=G:f>=X)&&(T.push(V+1),T.push(L),T.push(1-M))}return C}within(r,a,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:g,nodeSize:v}=this,b=[0,f.length-1,0],T=[],C=u*u;for(;b.length;){const M=b.pop()||0,L=b.pop()||0,R=b.pop()||0;if(L-R<=v){for(let se=R;se<=L;se++)Ek(g[2*se],g[2*se+1],r,a)<=C&&T.push(f[se]);continue}const V=R+L>>1,G=g[2*V],X=g[2*V+1];Ek(G,X,r,a)<=C&&T.push(f[V]),(M===0?r-u<=G:a-u<=X)&&(b.push(R),b.push(V-1),b.push(1-M)),(M===0?r+u>=G:a+u>=X)&&(b.push(V+1),b.push(L),b.push(1-M))}return T}}function Cb(o,r,a,u,f,g){if(f-u<=a)return;const v=u+f>>1;Sk(o,r,v,u,f,g),Cb(o,r,a,u,v-1,1-g),Cb(o,r,a,v+1,f,1-g)}function Sk(o,r,a,u,f,g){for(;f>u;){if(f-u>600){const C=f-u+1,M=a-u+1,L=Math.log(C),R=.5*Math.exp(2*L/3),V=.5*Math.sqrt(L*R*(C-R)/C)*(M-C/2<0?-1:1);Sk(o,r,a,Math.max(u,Math.floor(a-M*R/C+V)),Math.min(f,Math.floor(a+(C-M)*R/C+V)),g)}const v=r[2*a+g];let b=u,T=f;for(sm(o,r,u,a),r[2*f+g]>v&&sm(o,r,u,f);b<T;){for(sm(o,r,b,T),b++,T--;r[2*b+g]<v;)b++;for(;r[2*T+g]>v;)T--}r[2*u+g]===v?sm(o,r,u,T):(T++,sm(o,r,T,f)),T<=a&&(u=T+1),a<=T&&(f=T-1)}}function sm(o,r,a,u){Ab(o,a,u),Ab(r,2*a,2*u),Ab(r,2*a+1,2*u+1)}function Ab(o,r,a){const u=o[r];o[r]=o[a],o[a]=u}function Ek(o,r,a,u){const f=o-a,g=r-u;return f*f+g*g}s.ARRAY_TYPE=Oo,s.AUTH_ERR_MSG=ze,s.Aabb=co,s.Actor=class{constructor(o,r,a){this.target=o,this.parent=r,this.mapId=a,this.callbacks={},this.cancelCallbacks={},Vt(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Le()?o:_,this.scheduler=new ij}send(o,r,a,u,f=!1,g){const v=Math.round(1e18*Math.random()).toString(36).substring(0,10);a&&(a.metadata=g,this.callbacks[v]=a);const b=Ot(this.globalScope)?void 0:[];return this.target.postMessage({id:v,type:o,hasCallback:!!a,targetMapId:u,mustQueue:f,sourceMapId:this.mapId,data:ic(r,b)},b),{cancel:()=>{a&&delete this.callbacks[v],this.target.postMessage({id:v,type:"<cancel>",targetMapId:u,sourceMapId:this.mapId})}}}receive(o){const r=o.data,a=r.id;if(a&&(!r.targetMapId||this.mapId===r.targetMapId))if(r.type==="<cancel>"){const u=this.cancelCallbacks[a];delete this.cancelCallbacks[a],u&&u.cancel()}else if(r.mustQueue||Le()){const u=this.callbacks[a];this.cancelCallbacks[a]=this.scheduler.add(()=>this.processTask(a,r),u&&u.metadata||{type:"message"})}else this.processTask(a,r)}processTask(o,r){if(r.type==="<response>"){const a=this.callbacks[o];delete this.callbacks[o],a&&(r.error?a(ll(r.error)):a(null,ll(r.data)))}else{const a=Ot(this.globalScope)?void 0:[],u=r.hasCallback?(g,v)=>{delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:g?ic(g):null,data:ic(v,a)},a)}:g=>{},f=ll(r.data);if(this.parent[r.type])this.parent[r.type](r.sourceMapId,f,u);else if(this.parent.getWorkerSource){const g=r.type.split(".");this.parent.getWorkerSource(r.sourceMapId,g[0],f.source)[g[1]](f,u)}else u(new Error(`Could not find function ${r.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},s.CanonicalTileID=y0,s.Color=$r,s.ColorMode=Pa,s.CullFaceMode=ua,s.DEMData=L0,s.DataConstantProperty=Z,s.DedupedRequest=xk,s.DepthMode=bh,s.EXTENT=on,s.Elevation=class{isDataAvailableAtPoint(o){const r=this._source();if(this.isUsingMockSource()||!r||o.y<0||o.y>1)return!1;const a=r.getSource().maxzoom,u=1<<a,f=Math.floor(o.x),g=Math.floor((o.x-f)*u),v=Math.floor(o.y*u),b=this.findDEMTileFor(new uo(a,f,a,g,v));return!(!b||!b.dem)}getAtPointOrZero(o,r=0){return this.getAtPoint(o,r)||0}getAtPoint(o,r,a=!0){if(this.isUsingMockSource())return null;r==null&&(r=null);const u=this._source();if(!u||o.y<0||o.y>1)return r;const f=u.getSource().maxzoom,g=1<<f,v=Math.floor(o.x),b=o.x-v,T=new uo(f,v,f,Math.floor(b*g),Math.floor(o.y*g)),C=this.findDEMTileFor(T);if(!C||!C.dem)return r;const M=C.dem,L=1<<C.tileID.canonical.z,R=(b*L-C.tileID.canonical.x)*M.dim,V=(o.y*L-C.tileID.canonical.y)*M.dim,G=Math.floor(R),X=Math.floor(V);return(a?this.exaggeration():1)*Vn(Vn(M.get(G,X),M.get(G,X+1),V-X),Vn(M.get(G+1,X),M.get(G+1,X+1),V-X),R-G)}getAtTileOffset(o,r,a){const u=1<<o.canonical.z;return this.getAtPointOrZero(new ah(o.wrap+(o.canonical.x+r/on)/u,(o.canonical.y+a/on)/u))}getAtTileOffsetFunc(o,r,a,u){return f=>{const g=this.getAtTileOffset(o,f.x,f.y),v=u.upVector(o.canonical,f.x,f.y);return es(v,v,g*u.upVectorScale(o.canonical,r,a).metersToTile),v}}getForTilePoints(o,r,a,u){if(this.isUsingMockSource())return!1;const f=R0.create(this,o,u);return!!f&&(r.forEach(g=>{g[2]=this.exaggeration()*f.getElevationAt(g[0],g[1],a)}),!0)}getMinMaxForTile(o){if(this.isUsingMockSource())return null;const r=this.findDEMTileFor(o);if(!r||!r.dem)return null;const a=r.dem.tree,u=r.tileID,f=1<<o.canonical.z-u.canonical.z;let g=o.canonical.x/f-u.canonical.x,v=o.canonical.y/f-u.canonical.y,b=0;for(let T=0;T<o.canonical.z-u.canonical.z&&!a.leaves[b];T++){g*=2,v*=2;const C=2*Math.floor(v)+Math.floor(g);b=a.childOffsets[b]+C,g%=1,v%=1}return{min:this.exaggeration()*a.minimums[b],max:this.exaggeration()*a.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(o,r,a){throw new Error("Pure virtual method called.")}pointCoordinate(o){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(o){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},s.ErrorEvent=Ei,s.EvaluationParameters=D,s.Event=Ui,s.Evented=Qc,s.FillExtrusionBucket=Zp,s.Frustum=L1,s.FrustumCorners=z1,s.GLOBE_RADIUS=Ea,s.GLOBE_SCALE_MATCH_LATITUDE=45,s.GLOBE_ZOOM_THRESHOLD_MAX=SC,s.GLOBE_ZOOM_THRESHOLD_MIN=R1,s.GlobeSharedBuffers=class{constructor(o){this._createGrid(o),this._createPoles(o)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const o of this._poleSegments)o.destroy();for(const o of this._gridSegments)o.withSkirts.destroy(),o.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const o of this._wireframeSegments)o.destroy()}}_fillGridMeshWithLods(o,r){const a=new xt,u=new Jt,f=[],g=o+1+2,v=r[0]+1,b=r[0]+1+(1+r.length),T=(C,M,L)=>{let R=C===g-1?C-2:C===0?C:C-1;return R+=L?24575:0,[R,M]};for(let C=0;C<g;++C)a.emplaceBack(...T(C,0,!0));for(let C=0;C<v;++C)for(let M=0;M<g;++M)a.emplaceBack(...T(M,C,(M===0||M===g-1)&&!0));for(let C=0;C<r.length;++C){const M=r[C];for(let L=0;L<g;++L)a.emplaceBack(...T(L,M,!0))}for(let C=0;C<r.length;++C){const M=u.length,L=r[C]+1+2,R=new Jt;for(let X=0;X<L-1;X++){const se=X===L-2,ge=se?g*(b-r.length+C-X):g;for(let Me=0;Me<g-1;Me++){const _e=X*g+Me;X===0||se||Me===0||Me===g-2?(R.emplaceBack(_e+1,_e,_e+ge),R.emplaceBack(_e+ge,_e+ge+1,_e+1)):(u.emplaceBack(_e+1,_e,_e+ge),u.emplaceBack(_e+ge,_e+ge+1,_e+1))}}const V=qr.simpleSegment(0,M,a.length,u.length-M);for(let X=0;X<R.uint16.length;X+=3)u.emplaceBack(R.uint16[X],R.uint16[X+1],R.uint16[X+2]);const G=qr.simpleSegment(0,M,a.length,u.length-M);f.push({withoutSkirts:V,withSkirts:G})}return{vertices:a,indices:u,segments:f}}_createGrid(o){const r=this._fillGridMeshWithLods(Pu,Bp);this._gridSegments=r.segments,this._gridBuffer=o.createVertexBuffer(r.vertices,Op.members),this._gridIndexBuffer=o.createIndexBuffer(r.indices,!0)}_createPoles(o){const r=new Jt;for(let f=0;f<=Pu;f++)r.emplaceBack(0,f+1,f+2);this._poleIndexBuffer=o.createIndexBuffer(r,!0);const a=new or,u=new or;this._poleSegments=[];for(let f=0,g=0;f<R1;f++){const v=360/(1<<f);a.emplaceBack(0,-Ea,0,.5,0),u.emplaceBack(0,-Ea,0,.5,1);for(let b=0;b<=Pu;b++){const T=b/Pu,C=Vn(0,v,T),[M,L,R]=ih(iF,oF,C,Ea);a.emplaceBack(M,L,R,T,0),u.emplaceBack(M,L,R,T,1)}this._poleSegments.push(qr.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=o.createVertexBuffer(a,bC,!1),this._poleSouthVertexBuffer=o.createVertexBuffer(u,bC,!1)}getGridBuffers(o,r){return[this._gridBuffer,this._gridIndexBuffer,r?this._gridSegments[o].withSkirts:this._gridSegments[o].withoutSkirts]}getPoleBuffers(o){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[o]]}getWirefameBuffers(o,r){if(!this._wireframeSegments){const a=new Ai,u=Pu,f=u+1+2,g=1;this._wireframeSegments=[];for(let v=0,b=0;v<Bp.length;v++){const T=Bp[v];for(let M=g;M<T+g;M++)for(let L=g;L<u+g;L++){const R=M*f+L;a.emplaceBack(R,R+1),a.emplaceBack(R,R+f),a.emplaceBack(R,R+f+1)}const C=T*u*3;this._wireframeSegments.push(qr.simpleSegment(0,b,(T+1)*f,C)),b+=C}this._wireframeIndexBuffer=o.createIndexBuffer(a)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[r]]}},s.GlyphManager=gh,s.ImagePosition=lb,s.KDBush=Tb,s.LivePerformanceUtils=kn,s.LngLat=ar,s.LngLatBounds=lc,s.LocalGlyphMode=db,s.MAX_MERCATOR_LATITUDE=Zi,s.MercatorCoordinate=ah,s.ONE_EM=Oi,s.OverscaledTileID=uo,s.PerformanceMarkers=hn,s.Point=re,s.Properties=Ae,s.RGBAImage=Bo,s.Ray=D1,s.RequestManager=class{constructor(o,r,a){this._transformRequestFn=o,this._customAccessToken=r,this._silenceAuthErrors=!!a,this._createSkuToken()}_createSkuToken(){const o=function(){let r="";for(let a=0;a<10;a++)r+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",B,r].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=o.token,this._skuTokenExpiresAt=o.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(o,r){return this._transformRequestFn&&this._transformRequestFn(o,r)||{url:o}}normalizeStyleURL(o,r){if(!Ve(o))return o;const a=at(o);return a.path=`/styles/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||r)}normalizeGlyphsURL(o,r){if(!Ve(o))return o;const a=at(o);return a.path=`/fonts/v1${a.path}`,this._makeAPIURL(a,this._customAccessToken||r)}normalizeSourceURL(o,r,a,u){if(!Ve(o))return o;const f=at(o);return f.path=`/v4/${f.authority}.json`,f.params.push("secure"),a&&f.params.push(`language=${a}`),u&&f.params.push(`worldview=${u}`),this._makeAPIURL(f,this._customAccessToken||r)}normalizeSpriteURL(o,r,a,u){const f=at(o);return Ve(o)?(f.path=`/styles/v1${f.path}/sprite${r}${a}`,this._makeAPIURL(f,this._customAccessToken||u)):(f.path+=`${r}${a}`,Qe(f))}normalizeTileURL(o,r,a){if(this._isSkuTokenExpired()&&this._createSkuToken(),o&&!Ve(o))return o;const u=at(o);u.path=u.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${r||a&&u.authority!=="raster"&&a===512?"@2x":""}${I.supported?".webp":"$1"}`),u.authority==="raster"?u.path=`/${A.RASTER_URL_PREFIX}${u.path}`:(u.path=u.path.replace(/^.+\/v4\//,"/"),u.path=`/${A.TILE_URL_VERSION}${u.path}`);const f=this._customAccessToken||function(g){for(const v of g){const b=v.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(u.params)||A.ACCESS_TOKEN;return A.REQUIRE_ACCESS_TOKEN&&f&&this._skuToken&&u.params.push(`sku=${this._skuToken}`),this._makeAPIURL(u,f)}canonicalizeTileURL(o,r){const a=at(o);if(!a.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!a.path.match(/\.[\w]+$/))return o;let u="mapbox://";a.path.match(/^\/raster\/v1\//)?u+=`raster/${a.path.replace(`/${A.RASTER_URL_PREFIX}/`,"")}`:u+=`tiles/${a.path.replace(`/${A.TILE_URL_VERSION}/`,"")}`;let f=a.params;return r&&(f=f.filter(g=>!g.match(/^access_token=/))),f.length&&(u+=`?${f.join("&")}`),u}canonicalizeTileset(o,r){const a=!!r&&Ve(r),u=[];for(const f of o.tiles||[])ae(f)?u.push(this.canonicalizeTileURL(f,a)):u.push(f);return u}_makeAPIURL(o,r){const a="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",u=at(A.API_URL);if(o.protocol=u.protocol,o.authority=u.authority,o.protocol==="http"){const f=o.params.indexOf("secure");f>=0&&o.params.splice(f,1)}if(u.path!=="/"&&(o.path=`${u.path}${o.path}`),!A.REQUIRE_ACCESS_TOKEN)return Qe(o);if(r=r||A.ACCESS_TOKEN,!this._silenceAuthErrors){if(!r)throw new Error(`An API access token is required to use Mapbox GL. ${a}`);if(r[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${a}`)}return o.params=o.params.filter(f=>f.indexOf("access_token")===-1),o.params.push(`access_token=${r||""}`),Qe(o)}},s.ResourceType=Qn,s.SegmentVector=qr,s.SourceCache=Ou,s.StencilMode=bb,s.StructArrayLayout1ui2=Ro,s.StructArrayLayout2f1f2i16=dn,s.StructArrayLayout2i4=xt,s.StructArrayLayout2ui4=Ai,s.StructArrayLayout3f12=Ln,s.StructArrayLayout3ui6=Jt,s.StructArrayLayout4i8=ht,s.StructArrayLayout5f20=or,s.Texture=im,s.Tile=_b,s.Transitionable=H,s.Uniform1f=e0,s.Uniform1i=class extends dl{constructor(o){super(o),this.current=0}set(o,r,a){this.fetchUniformLocation(o,r)&&this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},s.Uniform2f=class extends dl{constructor(o){super(o),this.current=[0,0]}set(o,r,a){this.fetchUniformLocation(o,r)&&(a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1])))}},s.Uniform3f=class extends dl{constructor(o){super(o),this.current=[0,0,0]}set(o,r,a){this.fetchUniformLocation(o,r)&&(a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2])))}},s.Uniform4f=iC,s.UniformColor=oC,s.UniformMatrix2f=class extends dl{constructor(o){super(o),this.current=VB}set(o,r,a){if(this.fetchUniformLocation(o,r)){for(let u=0;u<4;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix2fv(this.location,!1,a);break}}}},s.UniformMatrix3f=class extends dl{constructor(o){super(o),this.current=$B}set(o,r,a){if(this.fetchUniformLocation(o,r)){for(let u=0;u<9;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix3fv(this.location,!1,a);break}}}},s.UniformMatrix4f=class extends dl{constructor(o){super(o),this.current=NB}set(o,r,a){if(this.fetchUniformLocation(o,r)){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let u=1;u<16;u++)if(a[u]!==this.current[u]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}}},s.UnwrappedTileID=dA,s.ValidationError=$t,s.VectorTileFeature=m0,s.VectorTileWorkerSource=class extends Qc{constructor(o,r,a,u,f){super(),this.actor=o,this.layerIndex=r,this.availableImages=a,this.loadVectorData=f||bk,this.loading={},this.loaded={},this.deduped=new xk(o.scheduler),this.isSpriteLoaded=u,this.scheduler=o.scheduler}loadTile(o,r){const a=o.uid,u=o&&o.request,f=u&&u.collectResourceTiming,g=this.loading[a]=new dj(o);g.abort=this.loadVectorData(o,(v,b)=>{const T=!this.loading[a];if(delete this.loading[a],T||v||!b)return g.status="done",T||(this.loaded[a]=g),r(v);const C=b.rawData,M={};b.expires&&(M.expires=b.expires),b.cacheControl&&(M.cacheControl=b.cacheControl),g.vectorTile=b.vectorTile||new rb(new b0(C));const L=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(R,V)=>{if(R||!V)return r(R);const G={};if(f){const X=Nr(u);X.length>0&&(G.resourceTiming=JSON.parse(JSON.stringify(X)))}r(null,It({rawTileData:C.slice(0)},V,M,G))})};this.isSpriteLoaded?L():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(L,{type:"parseTile",isSymbolTile:o.isSymbolTile,zoom:o.tileZoom}):L()}),this.loaded=this.loaded||{},this.loaded[a]=g})}reloadTile(o,r){const a=this.loaded,u=o.uid,f=this;if(a&&a[u]){const g=a[u];g.showCollisionBoxes=o.showCollisionBoxes,g.enableTerrain=!!o.enableTerrain,g.projection=o.projection,g.tileTransform=Ru(o.tileID.canonical,o.projection);const v=(b,T)=>{const C=g.reloadCallback;C&&(delete g.reloadCallback,g.parse(g.vectorTile,f.layerIndex,this.availableImages,f.actor,C)),r(b,T)};g.status==="parsing"?g.reloadCallback=v:g.status==="done"&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,v):v())}}abortTile(o,r){const a=o.uid,u=this.loading[a];u&&(u.abort&&u.abort(),delete this.loading[a]),r()}removeTile(o,r){const a=this.loaded,u=o.uid;a&&a[u]&&delete a[u],r()}},s.WritingMode=ns,s.ZoomDependentExpression=yu,s.add=fl,s.addDynamicAttributes=M0,s.adjoint=function(o,r){var a=r[0],u=r[1],f=r[2],g=r[3],v=r[4],b=r[5],T=r[6],C=r[7],M=r[8];return o[0]=v*M-b*C,o[1]=f*C-u*M,o[2]=u*b-f*v,o[3]=b*T-g*M,o[4]=a*M-f*T,o[5]=f*g-a*b,o[6]=g*C-v*T,o[7]=u*T-a*C,o[8]=a*v-u*g,o},s.asyncAll=rt,s.bezier=te,s.bindAll=Vt,s.boundsAttributes=rk,s.bufferConvexPolygon=function(o,r){const a=[];for(let u=0;u<o.length;u++){const f=Ge(u-1,-1,o.length-1),g=Ge(u+1,-1,o.length-1),v=o[u],b=o[g],T=o[f].sub(v).unit(),C=b.sub(v).unit(),M=C.angleWithSep(T.x,T.y),L=T.add(C).unit().mult(-1*r/Math.sin(M/2));a.push(v.add(L))}return a},s.cacheEntryPossiblyAdded=function(o){Si++,Si>Rn&&(o.getActor().send("enforceCacheSizeLimit",vn),Si=0)},s.calculateGlobeLabelMatrix=function(o,r){const{x:a,y:u}=o.point,f=kC(a,u,o.worldSize/o._pixelsPerMercatorPixel,0,0);return Au(f,f,F1(Ta(r)))},s.calculateGlobeMatrix=function(o){const{x:r,y:a}=o.point,{lng:u,lat:f}=o._center;return kC(r,a,o.worldSize,u,f)},s.calculateGlobeMercatorMatrix=function(o){const r=o.pixelsPerMeter,a=r/aa(1,o.center.lat),u=oa(new Float64Array(16));return Pp(u,u,[o.point.x,o.point.y,0]),ku(u,u,[a,a,r]),Float32Array.from(u)},s.circumferenceAtLatitude=N1,s.clamp=ve,s.clearTileCache=function(o){if(!Mn())return;const r=_.caches.delete(Zt);o&&r.catch(o).then(()=>o())},s.clipLine=jA,s.clone=function(o){var r=new Oo(16);return r[0]=o[0],r[1]=o[1],r[2]=o[2],r[3]=o[3],r[4]=o[4],r[5]=o[5],r[6]=o[6],r[7]=o[7],r[8]=o[8],r[9]=o[9],r[10]=o[10],r[11]=o[11],r[12]=o[12],r[13]=o[13],r[14]=o[14],r[15]=o[15],r},s.clone$1=Kn,s.collisionCircleLayout=c6,s.config=A,s.conjugate=function(o,r){return o[0]=-r[0],o[1]=-r[1],o[2]=-r[2],o[3]=r[3],o},s.create=function(){var o=new Oo(16);return Oo!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},s.create$1=lC,s.createExpression=tc,s.createLayout=Ue,s.createStyleLayer=function(o){return o.type==="custom"?new ej(o):new nj[o.type](o)},s.cross=M1,s.degToRad=le,s.distance=function(o,r){return Math.hypot(r[0]-o[0],r[1]-o[1],r[2]-o[2])},s.div=function(o,r,a){return o[0]=r[0]/a[0],o[1]=r[1]/a[1],o[2]=r[2]/a[2],o},s.dot=ws,s.earthRadius=Np,s.ease=Ce,s.easeCubicInOut=oe,s.ecefToLatLng=function([o,r,a]){const u=Math.hypot(o,r,a),f=Math.atan2(o,a),g=.5*Math.PI-Math.acos(-r/u);return new ar(xe(f),xe(g))},s.emitValidationErrors=qy,s.endsWith=ln,s.enforceCacheSizeLimit=function(o){Sr(),bn&&bn.then(r=>{r.keys().then(a=>{for(let u=0;u<a.length-o;u++)r.delete(a[u])})})},s.evaluateSizeForFeature=_0,s.evaluateSizeForZoom=hh,s.evaluateVariableOffset=WA,s.evented=x,s.exactEquals=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]&&o[3]===r[3]},s.exactEquals$1=function(o,r){return o[0]===r[0]&&o[1]===r[1]&&o[2]===r[2]},s.exported=Dr,s.exported$1=I,s.extend=It,s.extend$1=qs,s.fillExtrusionHeightLift=lA,s.filterObject=pn,s.fromMat4=function(o,r){return o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[4],o[4]=r[5],o[5]=r[6],o[6]=r[8],o[7]=r[9],o[8]=r[10],o},s.fromQuat=function(o,r){var a=r[0],u=r[1],f=r[2],g=r[3],v=a+a,b=u+u,T=f+f,C=a*v,M=u*v,L=u*b,R=f*v,V=f*b,G=f*T,X=g*v,se=g*b,ge=g*T;return o[0]=1-L-G,o[1]=M+ge,o[2]=R-se,o[3]=0,o[4]=M-ge,o[5]=1-C-G,o[6]=V+X,o[7]=0,o[8]=R+se,o[9]=V-X,o[10]=1-C-L,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},s.fromRotation=function(o,r){var a=Math.sin(r),u=Math.cos(r);return o[0]=u,o[1]=a,o[2]=0,o[3]=-a,o[4]=u,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},s.fromScaling=uC,s.furthestTileCorner=function(o){const r=Math.round((o+45+360)%360/90)%4;return Se[r]},s.getAABBPointSquareDist=function(o,r,a){let u=0;for(let f=0;f<2;++f){const g=a?a[f]:0;o[f]>g&&(u+=(o[f]-g)*(o[f]-g)),r[f]<g&&(u+=(g-r[f])*(g-r[f]))}return u},s.getAnchorAlignment=ub,s.getAnchorJustification=fb,s.getBounds=function(o){let r=1/0,a=1/0,u=-1/0,f=-1/0;for(const g of o)r=Math.min(r,g.x),a=Math.min(a,g.y),u=Math.max(u,g.x),f=Math.max(f,g.y);return{min:new re(r,a),max:new re(u,f)}},s.getColumn=yt,s.getDefaultExportFromCjs=U,s.getGridMatrix=function(o,r,a,u){const f=r.getNorth(),g=r.getSouth(),v=r.getWest(),b=r.getEast(),T=1<<o.z,C=b-v,M=f-g,L=C/Pu,R=-M/Bp[a],V=[0,L,0,R,0,0,f,v,0];if(o.z>0){const G=180/u;cC(V,V,[G/C+1,0,0,0,G/M+1,0,-.5*G/L,.5*G/R,1])}return V[2]=T,V[5]=o.x,V[8]=o.y,V},s.getImage=Te,s.getJSON=function(o,r){return jr(It(o,{type:"json"}),r)},s.getLatitudinalLod=function(o){const r=Zi-5;o=ve(o,-r,r)/r*90;const a=Math.pow(Math.abs(Math.sin(le(o))),3);return Math.round(a*(Bp.length-1))},s.getMapSessionAPI=it,s.getPerformanceMeasurement=Nr,s.getProjection=YA,s.getRTLTextPluginStatus=w,s.getReferrer=Gn,s.getTilePoint=function(o,{x:r,y:a},u=0){return new re(((r-u)*o.scale-o.x)*on,(a*o.scale-o.y)*on)},s.getTileVec3=function(o,r,a=0){return rh(((r.x-a)*o.scale-o.x)*on,(r.y*o.scale-o.y)*on,DC(r.z,r.y))},s.getVideo=function(o,r){const a=_.document.createElement("video");a.muted=!0,a.onloadstart=function(){r(null,a)};for(let u=0;u<o.length;u++){const f=_.document.createElement("source");Xo(o[u])||(a.crossOrigin="Anonymous"),f.src=o[u],a.appendChild(f)}return{cancel:()=>{}}},s.globeCenterToScreenPoint=function(o){const r=[0,0,0],a=oa(new Float64Array(16));return Au(a,o.pixelMatrix,o.globeMatrix),Vr(r,r,a),new re(r[0],r[1])},s.globeDenormalizeECEF=F1,s.globeECEFOrigin=function(o,r){const a=[0,0,0];return Vr(a,a,jp(Ta(r.canonical))),Vr(a,a,o),a},s.globeMetersToEcef=r0,s.globeNormalizeECEF=jp,s.globePixelsToTileUnits=function(o,r){return on/(512*Math.pow(2,o))*o0(Ta(r))},s.globePoleMatrixForTile=function(o,r,a){const u=oa(new Float64Array(16)),f=(r/(1<<o)-.5)*Math.PI*2;return n0(u,a.globeMatrix,f),Float32Array.from(u)},s.globeTileBounds=Ta,s.globeTiltAtLngLat=IC,s.globeToMercatorTransition=sh,s.globeUseCustomAntiAliasing=function(o,r,a){const u=sh(a.zoom),f=o.style.map._antialias,g=!!r.extStandardDerivatives,v=r.extStandardDerivativesForceOff||o.terrain&&o.terrain.exaggeration()>0;return u===0&&!f&&!v&&g},s.identity=oa,s.identity$1=vC,s.invert=A1,s.isFullscreen=function(){return!!_.document.fullscreenElement||!!_.document.webkitFullscreenElement},s.isLngLatBehindGlobe=j1,s.isMapAuthenticated=function(o){return Bt.has(o)},s.isMapboxURL=Ve,s.isSafariWithAntialiasingBug=function(o){const r=o.navigator?o.navigator.userAgent:null;return!!Ot(o)&&r&&(r.match("Version/15.4")||r.match("Version/15.5")||r.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},s.latFromMercatorY=Hi,s.latLngToECEF=oh,s.len=JB,s.length=Mp,s.length$1=function(o){return Math.hypot(o[0],o[1],o[2],o[3])},s.lngFromMercatorX=ts,s.loadVectorTile=bk,s.makeRequest=jr,s.mapValue=function(o,r,a,u,f){return ve((o-r)/(a-r)*(f-u)+u,u,f)},s.mercatorScale=zC,s.mercatorXfromLng=Ca,s.mercatorYfromLat=Aa,s.mercatorZfromAltitude=aa,s.mul=KB,s.mul$1=XB,s.multiply=Au,s.multiply$1=cC,s.multiply$2=fC,s.nextPowerOfTwo=an,s.normalize=lo,s.normalize$1=YB,s.normalize$2=gC,s.number=Vn,s.ortho=function(o,r,a,u,f,g,v){var b=1/(r-a),T=1/(u-f),C=1/(g-v);return o[0]=-2*b,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*T,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*C,o[11]=0,o[12]=(r+a)*b,o[13]=(f+u)*T,o[14]=(v+g)*C,o[15]=1,o},s.pbf=vA,s.perspective=function(o,r,a,u,f){var g,v=1/Math.tan(r/2);return o[0]=v/a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=v,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,f!=null&&f!==1/0?(o[10]=(f+u)*(g=1/(u-f)),o[14]=2*f*u*g):(o[10]=-1,o[14]=-2*u),o},s.pick=function(o,r){const a={};for(let u=0;u<r.length;u++){const f=r[u];f in o&&(a[f]=o[f])}return a},s.plugin=P,s.pointGeometry=Q,s.polesInViewport=function(o){const r=oa(new Float64Array(16));Au(r,o.pixelMatrix,o.globeMatrix);const a=[0,Ss,0],u=[0,Es,0];return Vr(a,a,r),Vr(u,u,r),[a[0]>0&&a[0]<=o.width&&a[1]>0&&a[1]<=o.height&&!j1(o,new ar(o.center.lat,90)),u[0]>0&&u[0]<=o.width&&u[1]>0&&u[1]<=o.height&&!j1(o,new ar(o.center.lat,-90))]},s.polygonContainsPoint=zu,s.polygonIntersectsBox=NC,s.polygonIntersectsPolygon=OC,s.polygonizeBounds=function(o,r,a=0,u=!0){const f=new re(a,a),g=o.sub(f),v=r.add(f),b=[g,new re(v.x,g.y),v,new re(g.x,v.y)];return u&&b.push(g.clone()),b},s.posAttributes=Op,s.postMapLoadEvent=wn,s.postPerformanceEvent=er,s.postTurnstileEvent=cn,s.potpack=ab,s.prevPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.floor(Math.log(o)/Math.LN2))},s.radToDeg=xe,s.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],s.registerForPluginStateChange=function(o){return o({pluginStatus:m,pluginURL:l}),x.on("pluginStateChange",o),o},s.removeAuthState=function(o){Bt.delete(o)},s.renderColorRamp=q1,s.resample=LC,s.rotateX=k1,s.rotateX$1=_C,s.rotateY=n0,s.rotateY$1=xC,s.rotateZ=function(o,r,a){var u=Math.sin(a),f=Math.cos(a),g=r[0],v=r[1],b=r[2],T=r[3],C=r[4],M=r[5],L=r[6],R=r[7];return r!==o&&(o[8]=r[8],o[9]=r[9],o[10]=r[10],o[11]=r[11],o[12]=r[12],o[13]=r[13],o[14]=r[14],o[15]=r[15]),o[0]=g*f+C*u,o[1]=v*f+M*u,o[2]=b*f+L*u,o[3]=T*f+R*u,o[4]=C*f-g*u,o[5]=M*f-v*u,o[6]=L*f-b*u,o[7]=R*f-T*u,o},s.rotateZ$1=function(o,r,a){a*=.5;var u=r[0],f=r[1],g=r[2],v=r[3],b=Math.sin(a),T=Math.cos(a);return o[0]=u*T+f*b,o[1]=f*T-u*b,o[2]=g*T+v*b,o[3]=v*T-g*b,o},s.scale=ku,s.scale$1=mC,s.scale$2=es,s.scaleAndAdd=Lp,s.set=function(o,r,a,u){return o[0]=r,o[1]=a,o[2]=u,o},s.setCacheLimits=function(o,r){vn=o,Rn=r},s.setColumn=function(o,r,a){o[4*r+0]=a[0],o[4*r+1]=a[1],o[4*r+2]=a[2],o[4*r+3]=a[3]},s.setRTLTextPlugin=function(o,r,a=!1){if(m===Tp||m===Cp||m===Ap)throw new Error("setRTLTextPlugin cannot be called multiple times.");l=Dr.resolveURL(o),m=Tp,oc=r,y(),a||k()},s.smoothstep=Fe,s.spec=st,s.squaredLength=function(o){var r=o[0],a=o[1],u=o[2];return r*r+a*a+u*u},s.storeAuthState=function(o,r){r?Bt.add(o):Bt.delete(o)},s.sub=sa,s.subtract=P1,s.symbolSize=u6,s.tileAABB=function(o,r,a,u,f,g,v,b,T){if(T.name==="globe")return rF(o,r,new y0(a,u,f));const C=Ru({z:a,x:u,y:f},T);return new co([(g+C.x/C.scale)*r,r*(C.y/C.scale),v],[(g+C.x2/C.scale)*r,r*(C.y2/C.scale),b])},s.tileCornersToBounds=i0,s.tileTransform=Ru,s.transformMat3=function(o,r,a){var u=r[0],f=r[1],g=r[2];return o[0]=u*a[0]+f*a[3]+g*a[6],o[1]=u*a[1]+f*a[4]+g*a[7],o[2]=u*a[2]+f*a[5]+g*a[8],o},s.transformMat4=Vr,s.transformMat4$1=Iu,s.transformQuat=pC,s.transitionTileAABBinECEF=TC,s.translate=Pp,s.transpose=function(o,r){if(o===r){var a=r[1],u=r[2],f=r[5];o[1]=r[3],o[2]=r[6],o[3]=a,o[5]=r[7],o[6]=u,o[7]=f}else o[0]=r[0],o[1]=r[3],o[2]=r[6],o[3]=r[1],o[4]=r[4],o[5]=r[7],o[6]=r[2],o[7]=r[5],o[8]=r[8];return o},s.triggerPluginCompletionEvent=h,s.uniqueId=Kt,s.updateGlobeVertexNormal=function(o,r,a,u,f){const g=5*r+2;o.float32[g+0]=a,o.float32[g+1]=u,o.float32[g+2]=f},s.validateCustomStyleLayer=function(o){const r=[],a=o.id;return a===void 0&&r.push({message:`layers.${a}: missing required property "id"`}),o.render===void 0&&r.push({message:`layers.${a}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&r.push({message:`layers.${a}: property "renderingMode" must be either "2d" or "3d"`}),r},s.validateFilter=o=>Lo(wu(o)),s.validateFog=o=>Lo(Gy(o)),s.validateLayer=o=>Lo($y(o)),s.validateLight=o=>Lo(Wy(o)),s.validateSource=o=>Lo(Uy(o)),s.validateStyle=Zy,s.validateTerrain=o=>Lo(xp(o)),s.values=Ct,s.vectorTile=p0,s.version=S,s.warnOnce=mn,s.window=_,s.wrap=Ge}),d(["./shared"],function(s){function _(ke){if(typeof ke=="number"||typeof ke=="boolean"||typeof ke=="string"||ke==null)return JSON.stringify(ke);if(Array.isArray(ke)){let ne="[";for(const Te of ke)ne+=`${_(Te)},`;return`${ne}]`}let Y="{";for(const ne of Object.keys(ke).sort())Y+=`${ne}:${_(ke[ne])},`;return`${Y}}`}function S(ke){let Y="";for(const ne of s.refProperties)Y+=`/${_(ke[ne])}`;return Y}class E{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,ne){for(const ze of Y)this._layerConfigs[ze.id]=ze,(this._layers[ze.id]=s.createStyleLayer(ze)).compileFilter(),this.keyCache[ze.id]&&delete this.keyCache[ze.id];for(const ze of ne)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const Te=function(ze,Ve){const ae={};for(let de=0;de<ze.length;de++){const De=Ve&&Ve[ze[de].id]||S(ze[de]);Ve&&(Ve[ze[de].id]=De);let He=ae[De];He||(He=ae[De]=[]),He.push(ze[de])}const fe=[];for(const de in ae)fe.push(ae[de]);return fe}(s.values(this._layerConfigs),this.keyCache);for(const ze of Te){const Ve=ze.map(at=>this._layers[at.id]),ae=Ve[0];if(ae.visibility==="none")continue;const fe=ae.source||"";let de=this.familiesBySource[fe];de||(de=this.familiesBySource[fe]={});const De=ae.sourceLayer||"_geojsonTileLayer";let He=de[De];He||(He=de[De]=[]),He.push(Ve)}}}class A{loadTile(Y,ne){const{uid:Te,encoding:ze,rawImageData:Ve,padding:ae,buildQuadTree:fe}=Y,de=s.window.ImageBitmap&&Ve instanceof s.window.ImageBitmap?this.getImageData(Ve,ae):Ve;ne(null,new s.DEMData(Te,de,ze,ae<1,fe))}getImageData(Y,ne){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const Te=this.offscreenCanvasContext.getImageData(-ne,-ne,Y.width+2*ne,Y.height+2*ne);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Te}}function I(ke,Y){if(ke.length!==0){O(ke[0],Y);for(var ne=1;ne<ke.length;ne++)O(ke[ne],!Y)}}function O(ke,Y){for(var ne=0,Te=0,ze=0,Ve=ke.length,ae=Ve-1;ze<Ve;ae=ze++){var fe=(ke[ze][0]-ke[ae][0])*(ke[ae][1]+ke[ze][1]),de=ne+fe;Te+=Math.abs(ne)>=Math.abs(fe)?ne-de+fe:fe-de+ne,ne=de}ne+Te>=0!=!!Y&&ke.reverse()}var N=s.getDefaultExportFromCjs(function ke(Y,ne){var Te,ze=Y&&Y.type;if(ze==="FeatureCollection")for(Te=0;Te<Y.features.length;Te++)ke(Y.features[Te],ne);else if(ze==="GeometryCollection")for(Te=0;Te<Y.geometries.length;Te++)ke(Y.geometries[Te],ne);else if(ze==="Feature")ke(Y.geometry,ne);else if(ze==="Polygon")I(Y.coordinates,ne);else if(ze==="MultiPolygon")for(Te=0;Te<Y.coordinates.length;Te++)I(Y.coordinates[Te],ne);return Y});const $=s.VectorTileFeature.prototype.toGeoJSON;var K={exports:{}},W=s.pointGeometry,B=s.vectorTile.VectorTileFeature,U=J;function J(ke,Y){this.options=Y||{},this.features=ke,this.length=ke.length}function ee(ke,Y){this.id=typeof ke.id=="number"?ke.id:void 0,this.type=ke.type,this.rawGeometry=ke.type===1?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=Y||4096}J.prototype.feature=function(ke){return new ee(this.features[ke],this.options.extent)},ee.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var Y=0;Y<ke.length;Y++){for(var ne=ke[Y],Te=[],ze=0;ze<ne.length;ze++)Te.push(new W(ne[ze][0],ne[ze][1]));this.geometry.push(Te)}return this.geometry},ee.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,Y=1/0,ne=-1/0,Te=1/0,ze=-1/0,Ve=0;Ve<ke.length;Ve++)for(var ae=ke[Ve],fe=0;fe<ae.length;fe++){var de=ae[fe];Y=Math.min(Y,de.x),ne=Math.max(ne,de.x),Te=Math.min(Te,de.y),ze=Math.max(ze,de.y)}return[Y,Te,ne,ze]},ee.prototype.toGeoJSON=B.prototype.toGeoJSON;var ye=s.pbf,Q=U;function be(ke){var Y=new ye;return function(ne,Te){for(var ze in ne.layers)Te.writeMessage(3,re,ne.layers[ze])}(ke,Y),Y.finish()}function re(ke,Y){var ne;Y.writeVarintField(15,ke.version||1),Y.writeStringField(1,ke.name||""),Y.writeVarintField(5,ke.extent||4096);var Te={keys:[],values:[],keycache:{},valuecache:{}};for(ne=0;ne<ke.length;ne++)Te.feature=ke.feature(ne),Y.writeMessage(2,Ie,Te);var ze=Te.keys;for(ne=0;ne<ze.length;ne++)Y.writeStringField(3,ze[ne]);var Ve=Te.values;for(ne=0;ne<Ve.length;ne++)Y.writeMessage(4,oe,Ve[ne])}function Ie(ke,Y){var ne=ke.feature;ne.id!==void 0&&Y.writeVarintField(1,ne.id),Y.writeMessage(2,Be,ke),Y.writeVarintField(3,ne.type),Y.writeMessage(4,Se,ne)}function Be(ke,Y){var ne=ke.feature,Te=ke.keys,ze=ke.values,Ve=ke.keycache,ae=ke.valuecache;for(var fe in ne.properties){var de=ne.properties[fe],De=Ve[fe];if(de!==null){De===void 0&&(Te.push(fe),Ve[fe]=De=Te.length-1),Y.writeVarint(De);var He=typeof de;He!=="string"&&He!=="boolean"&&He!=="number"&&(de=JSON.stringify(de));var at=He+":"+de,Qe=ae[at];Qe===void 0&&(ze.push(de),ae[at]=Qe=ze.length-1),Y.writeVarint(Qe)}}}function le(ke,Y){return(Y<<3)+(7&ke)}function xe(ke){return ke<<1^ke>>31}function Se(ke,Y){for(var ne=ke.loadGeometry(),Te=ke.type,ze=0,Ve=0,ae=ne.length,fe=0;fe<ae;fe++){var de=ne[fe],De=1;Te===1&&(De=de.length),Y.writeVarint(le(1,De));for(var He=Te===3?de.length-1:de.length,at=0;at<He;at++){at===1&&Te!==1&&Y.writeVarint(le(2,He-1));var Qe=de[at].x-ze,vt=de[at].y-Ve;Y.writeVarint(xe(Qe)),Y.writeVarint(xe(vt)),ze+=Qe,Ve+=vt}Te===3&&Y.writeVarint(le(7,1))}}function oe(ke,Y){var ne=typeof ke;ne==="string"?Y.writeStringField(1,ke):ne==="boolean"?Y.writeBooleanField(7,ke):ne==="number"&&(ke%1!=0?Y.writeDoubleField(3,ke):ke<0?Y.writeSVarintField(6,ke):Y.writeVarintField(5,ke))}K.exports=be,K.exports.fromVectorTileJs=be,K.exports.fromGeojsonVt=function(ke,Y){Y=Y||{};var ne={};for(var Te in ke)ne[Te]=new Q(ke[Te].features,Y),ne[Te].name=Te,ne[Te].version=Y.version,ne[Te].extent=Y.extent;return be({layers:ne})},K.exports.GeoJSONWrapper=Q;var te=s.getDefaultExportFromCjs(K.exports);const Ce={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ke=>ke},ve=Math.fround||(Fe=new Float32Array(1),ke=>(Fe[0]=+ke,Fe[0]));var Fe;const Ge=3,rt=5,Ct=6;class It{constructor(Y){this.options=Object.assign(Object.create(Ce),Y),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Y){const{log:ne,minZoom:Te,maxZoom:ze}=this.options;ne&&console.time("total time");const Ve=`prepare ${Y.length} points`;ne&&console.time(Ve),this.points=Y;const ae=[];for(let de=0;de<Y.length;de++){const De=Y[de];if(!De.geometry)continue;const[He,at]=De.geometry.coordinates,Qe=ve(nn(He)),vt=ve(an(at));ae.push(Qe,vt,1/0,de,-1,1),this.options.reduce&&ae.push(0)}let fe=this.trees[ze+1]=this._createTree(ae);ne&&console.timeEnd(Ve);for(let de=ze;de>=Te;de--){const De=+Date.now();fe=this.trees[de]=this._createTree(this._cluster(fe,de)),ne&&console.log("z%d: %d clusters in %dms",de,fe.numItems,+Date.now()-De)}return ne&&console.timeEnd("total time"),this}getClusters(Y,ne){let Te=((Y[0]+180)%360+360)%360-180;const ze=Math.max(-90,Math.min(90,Y[1]));let Ve=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const ae=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)Te=-180,Ve=180;else if(Te>Ve){const at=this.getClusters([Te,ze,180,ae],ne),Qe=this.getClusters([-180,ze,Ve,ae],ne);return at.concat(Qe)}const fe=this.trees[this._limitZoom(ne)],de=fe.range(nn(Te),an(ae),nn(Ve),an(ze)),De=fe.data,He=[];for(const at of de){const Qe=this.stride*at;He.push(De[Qe+rt]>1?Pt(De,Qe,this.clusterProps):this.points[De[Qe+Ge]])}return He}getChildren(Y){const ne=this._getOriginId(Y),Te=this._getOriginZoom(Y),ze="No cluster with the specified id.",Ve=this.trees[Te];if(!Ve)throw new Error(ze);const ae=Ve.data;if(ne*this.stride>=ae.length)throw new Error(ze);const fe=this.options.radius/(this.options.extent*Math.pow(2,Te-1)),de=Ve.within(ae[ne*this.stride],ae[ne*this.stride+1],fe),De=[];for(const He of de){const at=He*this.stride;ae[at+4]===Y&&De.push(ae[at+rt]>1?Pt(ae,at,this.clusterProps):this.points[ae[at+Ge]])}if(De.length===0)throw new Error(ze);return De}getLeaves(Y,ne,Te){const ze=[];return this._appendLeaves(ze,Y,ne=ne||10,Te=Te||0,0),ze}getTile(Y,ne,Te){const ze=this.trees[this._limitZoom(Y)],Ve=Math.pow(2,Y),{extent:ae,radius:fe}=this.options,de=fe/ae,De=(Te-de)/Ve,He=(Te+1+de)/Ve,at={features:[]};return this._addTileFeatures(ze.range((ne-de)/Ve,De,(ne+1+de)/Ve,He),ze.data,ne,Te,Ve,at),ne===0&&this._addTileFeatures(ze.range(1-de/Ve,De,1,He),ze.data,Ve,Te,Ve,at),ne===Ve-1&&this._addTileFeatures(ze.range(0,De,de/Ve,He),ze.data,-1,Te,Ve,at),at.features.length?at:null}getClusterExpansionZoom(Y){let ne=this._getOriginZoom(Y)-1;for(;ne<=this.options.maxZoom;){const Te=this.getChildren(Y);if(ne++,Te.length!==1)break;Y=Te[0].properties.cluster_id}return ne}_appendLeaves(Y,ne,Te,ze,Ve){const ae=this.getChildren(ne);for(const fe of ae){const de=fe.properties;if(de&&de.cluster?Ve+de.point_count<=ze?Ve+=de.point_count:Ve=this._appendLeaves(Y,de.cluster_id,Te,ze,Ve):Ve<ze?Ve++:Y.push(fe),Y.length===Te)break}return Ve}_createTree(Y){const ne=new s.KDBush(Y.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Te=0;Te<Y.length;Te+=this.stride)ne.add(Y[Te],Y[Te+1]);return ne.finish(),ne.data=Y,ne}_addTileFeatures(Y,ne,Te,ze,Ve,ae){for(const fe of Y){const de=fe*this.stride,De=ne[de+rt]>1;let He,at,Qe;if(De)He=Kt(ne,de,this.clusterProps),at=ne[de],Qe=ne[de+1];else{const Mt=this.points[ne[de+Ge]];He=Mt.properties;const[Xt,cn]=Mt.geometry.coordinates;at=nn(Xt),Qe=an(cn)}const vt={type:1,geometry:[[Math.round(this.options.extent*(at*Ve-Te)),Math.round(this.options.extent*(Qe*Ve-ze))]],tags:He};let Lt;Lt=De||this.options.generateId?ne[de+Ge]:this.points[ne[de+Ge]].id,Lt!==void 0&&(vt.id=Lt),ae.features.push(vt)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,ne){const{radius:Te,extent:ze,reduce:Ve,minPoints:ae}=this.options,fe=Te/(ze*Math.pow(2,ne)),de=Y.data,De=[],He=this.stride;for(let at=0;at<de.length;at+=He){if(de[at+2]<=ne)continue;de[at+2]=ne;const Qe=de[at],vt=de[at+1],Lt=Y.within(de[at],de[at+1],fe),Mt=de[at+rt];let Xt=Mt;for(const cn of Lt){const qt=cn*He;de[qt+2]>ne&&(Xt+=de[qt+rt])}if(Xt>Mt&&Xt>=ae){let cn,qt=Qe*Mt,wn=vt*Mt,jn=-1;const er=((at/He|0)<<5)+(ne+1)+this.points.length;for(const ut of Lt){const it=ut*He;if(de[it+2]<=ne)continue;de[it+2]=ne;const Bt=de[it+rt];qt+=de[it]*Bt,wn+=de[it+1]*Bt,de[it+4]=er,Ve&&(cn||(cn=this._map(de,at,!0),jn=this.clusterProps.length,this.clusterProps.push(cn)),Ve(cn,this._map(de,it)))}de[at+4]=er,De.push(qt/Xt,wn/Xt,1/0,er,-1,Xt),Ve&&De.push(jn)}else{for(let cn=0;cn<He;cn++)De.push(de[at+cn]);if(Xt>1)for(const cn of Lt){const qt=cn*He;if(!(de[qt+2]<=ne)){de[qt+2]=ne;for(let wn=0;wn<He;wn++)De.push(de[qt+wn])}}}}return De}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,ne,Te){if(Y[ne+rt]>1){const ae=this.clusterProps[Y[ne+Ct]];return Te?Object.assign({},ae):ae}const ze=this.points[Y[ne+Ge]].properties,Ve=this.options.map(ze);return Te&&Ve===ze?Object.assign({},Ve):Ve}}function Pt(ke,Y,ne){return{type:"Feature",id:ke[Y+Ge],properties:Kt(ke,Y,ne),geometry:{type:"Point",coordinates:[(Te=ke[Y],360*(Te-.5)),ct(ke[Y+1])]}};var Te}function Kt(ke,Y,ne){const Te=ke[Y+rt],ze=Te>=1e4?`${Math.round(Te/1e3)}k`:Te>=1e3?Math.round(Te/100)/10+"k":Te,Ve=ke[Y+Ct],ae=Ve===-1?{}:Object.assign({},ne[Ve]);return Object.assign(ae,{cluster:!0,cluster_id:ke[Y+Ge],point_count:Te,point_count_abbreviated:ze})}function nn(ke){return ke/360+.5}function an(ke){const Y=Math.sin(ke*Math.PI/180),ne=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ne<0?0:ne>1?1:ne}function ct(ke){const Y=(180-360*ke)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function Vt(ke,Y,ne,Te){for(var ze,Ve=Te,ae=ne-Y>>1,fe=ne-Y,de=ke[Y],De=ke[Y+1],He=ke[ne],at=ke[ne+1],Qe=Y+3;Qe<ne;Qe+=3){var vt=ln(ke[Qe],ke[Qe+1],de,De,He,at);if(vt>Ve)ze=Qe,Ve=vt;else if(vt===Ve){var Lt=Math.abs(Qe-ae);Lt<fe&&(ze=Qe,fe=Lt)}}Ve>Te&&(ze-Y>3&&Vt(ke,Y,ze,Te),ke[ze+2]=Ve,ne-ze>3&&Vt(ke,ze,ne,Te))}function ln(ke,Y,ne,Te,ze,Ve){var ae=ze-ne,fe=Ve-Te;if(ae!==0||fe!==0){var de=((ke-ne)*ae+(Y-Te)*fe)/(ae*ae+fe*fe);de>1?(ne=ze,Te=Ve):de>0&&(ne+=ae*de,Te+=fe*de)}return(ae=ke-ne)*ae+(fe=Y-Te)*fe}function zt(ke,Y,ne,Te){var ze={id:ke===void 0?null:ke,type:Y,geometry:ne,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Ve){var ae=Ve.geometry,fe=Ve.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")pn(Ve,ae);else if(fe==="Polygon"||fe==="MultiLineString")for(var de=0;de<ae.length;de++)pn(Ve,ae[de]);else if(fe==="MultiPolygon")for(de=0;de<ae.length;de++)for(var De=0;De<ae[de].length;De++)pn(Ve,ae[de][De])}(ze),ze}function pn(ke,Y){for(var ne=0;ne<Y.length;ne+=3)ke.minX=Math.min(ke.minX,Y[ne]),ke.minY=Math.min(ke.minY,Y[ne+1]),ke.maxX=Math.max(ke.maxX,Y[ne]),ke.maxY=Math.max(ke.maxY,Y[ne+1])}function Kn(ke,Y,ne,Te){if(Y.geometry){var ze=Y.geometry.coordinates,Ve=Y.geometry.type,ae=Math.pow(ne.tolerance/((1<<ne.maxZoom)*ne.extent),2),fe=[],de=Y.id;if(ne.promoteId?de=Y.properties[ne.promoteId]:ne.generateId&&(de=Te||0),Ve==="Point")Fr(ze,fe);else if(Ve==="MultiPoint")for(var De=0;De<ze.length;De++)Fr(ze[De],fe);else if(Ve==="LineString")mn(ze,fe,ae,!1);else if(Ve==="MultiLineString"){if(ne.lineMetrics){for(De=0;De<ze.length;De++)mn(ze[De],fe=[],ae,!1),ke.push(zt(de,"LineString",fe,Y.properties));return}Ut(ze,fe,ae,!1)}else if(Ve==="Polygon")Ut(ze,fe,ae,!0);else{if(Ve!=="MultiPolygon"){if(Ve==="GeometryCollection"){for(De=0;De<Y.geometry.geometries.length;De++)Kn(ke,{id:de,geometry:Y.geometry.geometries[De],properties:Y.properties},ne,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(De=0;De<ze.length;De++){var He=[];Ut(ze[De],He,ae,!0),fe.push(He)}}ke.push(zt(de,Ve,fe,Y.properties))}}function Fr(ke,Y){Y.push(Vi(ke[0])),Y.push(Le(ke[1])),Y.push(0)}function mn(ke,Y,ne,Te){for(var ze,Ve,ae=0,fe=0;fe<ke.length;fe++){var de=Vi(ke[fe][0]),De=Le(ke[fe][1]);Y.push(de),Y.push(De),Y.push(0),fe>0&&(ae+=Te?(ze*De-de*Ve)/2:Math.sqrt(Math.pow(de-ze,2)+Math.pow(De-Ve,2))),ze=de,Ve=De}var He=Y.length-3;Y[2]=1,Vt(Y,0,He,ne),Y[He+2]=1,Y.size=Math.abs(ae),Y.start=0,Y.end=Y.size}function Ut(ke,Y,ne,Te){for(var ze=0;ze<ke.length;ze++){var Ve=[];mn(ke[ze],Ve,ne,Te),Y.push(Ve)}}function Vi(ke){return ke/360+.5}function Le(ke){var Y=Math.sin(ke*Math.PI/180),ne=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return ne<0?0:ne>1?1:ne}function Ke(ke,Y,ne,Te,ze,Ve,ae,fe){if(Te/=Y,Ve>=(ne/=Y)&&ae<Te)return ke;if(ae<ne||Ve>=Te)return null;for(var de=[],De=0;De<ke.length;De++){var He=ke[De],at=He.geometry,Qe=He.type,vt=ze===0?He.minX:He.minY,Lt=ze===0?He.maxX:He.maxY;if(vt>=ne&&Lt<Te)de.push(He);else if(!(Lt<ne||vt>=Te)){var Mt=[];if(Qe==="Point"||Qe==="MultiPoint")et(at,Mt,ne,Te,ze);else if(Qe==="LineString")Ot(at,Mt,ne,Te,ze,!1,fe.lineMetrics);else if(Qe==="MultiLineString")yt(at,Mt,ne,Te,ze,!1);else if(Qe==="Polygon")yt(at,Mt,ne,Te,ze,!0);else if(Qe==="MultiPolygon")for(var Xt=0;Xt<at.length;Xt++){var cn=[];yt(at[Xt],cn,ne,Te,ze,!0),cn.length&&Mt.push(cn)}if(Mt.length){if(fe.lineMetrics&&Qe==="LineString"){for(Xt=0;Xt<Mt.length;Xt++)de.push(zt(He.id,Qe,Mt[Xt],He.tags));continue}Qe!=="LineString"&&Qe!=="MultiLineString"||(Mt.length===1?(Qe="LineString",Mt=Mt[0]):Qe="MultiLineString"),Qe!=="Point"&&Qe!=="MultiPoint"||(Qe=Mt.length===3?"Point":"MultiPoint"),de.push(zt(He.id,Qe,Mt,He.tags))}}}return de.length?de:null}function et(ke,Y,ne,Te,ze){for(var Ve=0;Ve<ke.length;Ve+=3){var ae=ke[Ve+ze];ae>=ne&&ae<=Te&&(Y.push(ke[Ve]),Y.push(ke[Ve+1]),Y.push(ke[Ve+2]))}}function Ot(ke,Y,ne,Te,ze,Ve,ae){for(var fe,de,De=kt(ke),He=ze===0?vn:Rn,at=ke.start,Qe=0;Qe<ke.length-3;Qe+=3){var vt=ke[Qe],Lt=ke[Qe+1],Mt=ke[Qe+2],Xt=ke[Qe+3],cn=ke[Qe+4],qt=ze===0?vt:Lt,wn=ze===0?Xt:cn,jn=!1;ae&&(fe=Math.sqrt(Math.pow(vt-Xt,2)+Math.pow(Lt-cn,2))),qt<ne?wn>ne&&(de=He(De,vt,Lt,Xt,cn,ne),ae&&(De.start=at+fe*de)):qt>Te?wn<Te&&(de=He(De,vt,Lt,Xt,cn,Te),ae&&(De.start=at+fe*de)):Zt(De,vt,Lt,Mt),wn<ne&&qt>=ne&&(de=He(De,vt,Lt,Xt,cn,ne),jn=!0),wn>Te&&qt<=Te&&(de=He(De,vt,Lt,Xt,cn,Te),jn=!0),!Ve&&jn&&(ae&&(De.end=at+fe*de),Y.push(De),De=kt(ke)),ae&&(at+=fe)}var er=ke.length-3;vt=ke[er],Lt=ke[er+1],Mt=ke[er+2],(qt=ze===0?vt:Lt)>=ne&&qt<=Te&&Zt(De,vt,Lt,Mt),er=De.length-3,Ve&&er>=3&&(De[er]!==De[0]||De[er+1]!==De[1])&&Zt(De,De[0],De[1],De[2]),De.length&&Y.push(De)}function kt(ke){var Y=[];return Y.size=ke.size,Y.start=ke.start,Y.end=ke.end,Y}function yt(ke,Y,ne,Te,ze,Ve){for(var ae=0;ae<ke.length;ae++)Ot(ke[ae],Y,ne,Te,ze,Ve,!1)}function Zt(ke,Y,ne,Te){ke.push(Y),ke.push(ne),ke.push(Te)}function vn(ke,Y,ne,Te,ze,Ve){var ae=(Ve-Y)/(Te-Y);return ke.push(Ve),ke.push(ne+(ze-ne)*ae),ke.push(1),ae}function Rn(ke,Y,ne,Te,ze,Ve){var ae=(Ve-ne)/(ze-ne);return ke.push(Y+(Te-Y)*ae),ke.push(Ve),ke.push(1),ae}function bn(ke,Y){for(var ne=[],Te=0;Te<ke.length;Te++){var ze,Ve=ke[Te],ae=Ve.type;if(ae==="Point"||ae==="MultiPoint"||ae==="LineString")ze=_n(Ve.geometry,Y);else if(ae==="MultiLineString"||ae==="Polygon"){ze=[];for(var fe=0;fe<Ve.geometry.length;fe++)ze.push(_n(Ve.geometry[fe],Y))}else if(ae==="MultiPolygon")for(ze=[],fe=0;fe<Ve.geometry.length;fe++){for(var de=[],De=0;De<Ve.geometry[fe].length;De++)de.push(_n(Ve.geometry[fe][De],Y));ze.push(de)}ne.push(zt(Ve.id,ae,ze,Ve.tags))}return ne}function _n(ke,Y){var ne=[];ne.size=ke.size,ke.start!==void 0&&(ne.start=ke.start,ne.end=ke.end);for(var Te=0;Te<ke.length;Te+=3)ne.push(ke[Te]+Y,ke[Te+1],ke[Te+2]);return ne}function Mn(ke,Y){if(ke.transformed)return ke;var ne,Te,ze,Ve=1<<ke.z,ae=ke.x,fe=ke.y;for(ne=0;ne<ke.features.length;ne++){var de=ke.features[ne],De=de.geometry,He=de.type;if(de.geometry=[],He===1)for(Te=0;Te<De.length;Te+=2)de.geometry.push(Sr(De[Te],De[Te+1],Y,Ve,ae,fe));else for(Te=0;Te<De.length;Te++){var at=[];for(ze=0;ze<De[Te].length;ze+=2)at.push(Sr(De[Te][ze],De[Te][ze+1],Y,Ve,ae,fe));de.geometry.push(at)}}return ke.transformed=!0,ke}function Sr(ke,Y,ne,Te,ze,Ve){return[Math.round(ne*(ke*Te-ze)),Math.round(ne*(Y*Te-Ve))]}function Er(ke,Y,ne,Te,ze){for(var Ve=Y===ze.maxZoom?0:ze.tolerance/((1<<Y)*ze.extent),ae={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ne,y:Te,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fe=0;fe<ke.length;fe++){ae.numFeatures++,Si(ae,ke[fe],Ve,ze);var de=ke[fe].minX,De=ke[fe].minY,He=ke[fe].maxX,at=ke[fe].maxY;de<ae.minX&&(ae.minX=de),De<ae.minY&&(ae.minY=De),He>ae.maxX&&(ae.maxX=He),at>ae.maxY&&(ae.maxY=at)}return ae}function Si(ke,Y,ne,Te){var ze=Y.geometry,Ve=Y.type,ae=[];if(Ve==="Point"||Ve==="MultiPoint")for(var fe=0;fe<ze.length;fe+=3)ae.push(ze[fe]),ae.push(ze[fe+1]),ke.numPoints++,ke.numSimplified++;else if(Ve==="LineString")Qn(ae,ze,ke,ne,!1,!1);else if(Ve==="MultiLineString"||Ve==="Polygon")for(fe=0;fe<ze.length;fe++)Qn(ae,ze[fe],ke,ne,Ve==="Polygon",fe===0);else if(Ve==="MultiPolygon")for(var de=0;de<ze.length;de++){var De=ze[de];for(fe=0;fe<De.length;fe++)Qn(ae,De[fe],ke,ne,!0,fe===0)}if(ae.length){var He=Y.tags||null;if(Ve==="LineString"&&Te.lineMetrics){for(var at in He={},Y.tags)He[at]=Y.tags[at];He.mapbox_clip_start=ze.start/ze.size,He.mapbox_clip_end=ze.end/ze.size}var Qe={geometry:ae,type:Ve==="Polygon"||Ve==="MultiPolygon"?3:Ve==="LineString"||Ve==="MultiLineString"?2:1,tags:He};Y.id!==null&&(Qe.id=Y.id),ke.features.push(Qe)}}function Qn(ke,Y,ne,Te,ze,Ve){var ae=Te*Te;if(Te>0&&Y.size<(ze?ae:Te))ne.numPoints+=Y.length/3;else{for(var fe=[],de=0;de<Y.length;de+=3)(Te===0||Y[de+2]>ae)&&(ne.numSimplified++,fe.push(Y[de]),fe.push(Y[de+1])),ne.numPoints++;ze&&function(De,He){for(var at=0,Qe=0,vt=De.length,Lt=vt-2;Qe<vt;Lt=Qe,Qe+=2)at+=(De[Qe]-De[Lt])*(De[Qe+1]+De[Lt+1]);if(at>0===He)for(Qe=0,vt=De.length;Qe<vt/2;Qe+=2){var Mt=De[Qe],Xt=De[Qe+1];De[Qe]=De[vt-2-Qe],De[Qe+1]=De[vt-1-Qe],De[vt-2-Qe]=Mt,De[vt-1-Qe]=Xt}}(fe,Ve),ke.push(fe)}}function Xn(ke,Y){var ne=(Y=this.options=function(ze,Ve){for(var ae in Ve)ze[ae]=Ve[ae];return ze}(Object.create(this.options),Y)).debug;if(ne&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var Te=function(ze,Ve){var ae=[];if(ze.type==="FeatureCollection")for(var fe=0;fe<ze.features.length;fe++)Kn(ae,ze.features[fe],Ve,fe);else Kn(ae,ze.type==="Feature"?ze:{geometry:ze},Ve);return ae}(ke,Y);this.tiles={},this.tileCoords=[],ne&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Te=function(ze,Ve){var ae=Ve.buffer/Ve.extent,fe=ze,de=Ke(ze,1,-1-ae,ae,0,-1,2,Ve),De=Ke(ze,1,1-ae,2+ae,0,-1,2,Ve);return(de||De)&&(fe=Ke(ze,1,-ae,1+ae,0,-1,2,Ve)||[],de&&(fe=bn(de,1).concat(fe)),De&&(fe=fe.concat(bn(De,-1)))),fe}(Te,Y),Te.length&&this.splitTile(Te,0,0,0),ne&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Gn(ke,Y,ne){return 32*((1<<ke)*ne+Y)+ke}function jr(ke,Y){const ne=ke.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const Te=this._geoJSONIndex.getTile(ne.z,ne.x,ne.y);if(!Te)return Y(null,null);const ze=new class{constructor(ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=s.EXTENT,this.length=ae.length,this._features=ae}feature(ae){return new class{constructor(fe){this._feature=fe,this.extent=s.EXTENT,this.type=fe.type,this.properties=fe.tags,"id"in fe&&!isNaN(fe.id)&&(this.id=parseInt(fe.id,10))}loadGeometry(){if(this._feature.type===1){const fe=[];for(const de of this._feature.geometry)fe.push([new s.Point(de[0],de[1])]);return fe}{const fe=[];for(const de of this._feature.geometry){const De=[];for(const He of de)De.push(new s.Point(He[0],He[1]));fe.push(De)}return fe}}toGeoJSON(fe,de,De){return $.call(this,fe,de,De)}}(this._features[ae])}}(Te.features);let Ve=te(ze);Ve.byteOffset===0&&Ve.byteLength===Ve.buffer.byteLength||(Ve=new Uint8Array(Ve)),Y(null,{vectorTile:ze,rawData:Ve.buffer})}Xn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Xn.prototype.splitTile=function(ke,Y,ne,Te,ze,Ve,ae){for(var fe=[ke,Y,ne,Te],de=this.options,De=de.debug;fe.length;){Te=fe.pop(),ne=fe.pop(),Y=fe.pop(),ke=fe.pop();var He=1<<Y,at=Gn(Y,ne,Te),Qe=this.tiles[at];if(!Qe&&(De>1&&console.time("creation"),Qe=this.tiles[at]=Er(ke,Y,ne,Te,de),this.tileCoords.push({z:Y,x:ne,y:Te}),De)){De>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,ne,Te,Qe.numFeatures,Qe.numPoints,Qe.numSimplified),console.timeEnd("creation"));var vt="z"+Y;this.stats[vt]=(this.stats[vt]||0)+1,this.total++}if(Qe.source=ke,ze){if(Y===de.maxZoom||Y===ze)continue;var Lt=1<<ze-Y;if(ne!==Math.floor(Ve/Lt)||Te!==Math.floor(ae/Lt))continue}else if(Y===de.indexMaxZoom||Qe.numPoints<=de.indexMaxPoints)continue;if(Qe.source=null,ke.length!==0){De>1&&console.time("clipping");var Mt,Xt,cn,qt,wn,jn,er=.5*de.buffer/de.extent,ut=.5-er,it=.5+er,Bt=1+er;Mt=Xt=cn=qt=null,wn=Ke(ke,He,ne-er,ne+it,0,Qe.minX,Qe.maxX,de),jn=Ke(ke,He,ne+ut,ne+Bt,0,Qe.minX,Qe.maxX,de),ke=null,wn&&(Mt=Ke(wn,He,Te-er,Te+it,1,Qe.minY,Qe.maxY,de),Xt=Ke(wn,He,Te+ut,Te+Bt,1,Qe.minY,Qe.maxY,de),wn=null),jn&&(cn=Ke(jn,He,Te-er,Te+it,1,Qe.minY,Qe.maxY,de),qt=Ke(jn,He,Te+ut,Te+Bt,1,Qe.minY,Qe.maxY,de),jn=null),De>1&&console.timeEnd("clipping"),fe.push(Mt||[],Y+1,2*ne,2*Te),fe.push(Xt||[],Y+1,2*ne,2*Te+1),fe.push(cn||[],Y+1,2*ne+1,2*Te),fe.push(qt||[],Y+1,2*ne+1,2*Te+1)}}},Xn.prototype.getTile=function(ke,Y,ne){var Te=this.options,ze=Te.extent,Ve=Te.debug;if(ke<0||ke>24)return null;var ae=1<<ke,fe=Gn(ke,Y=(Y%ae+ae)%ae,ne);if(this.tiles[fe])return Mn(this.tiles[fe],ze);Ve>1&&console.log("drilling down to z%d-%d-%d",ke,Y,ne);for(var de,De=ke,He=Y,at=ne;!de&&De>0;)De--,He=Math.floor(He/2),at=Math.floor(at/2),de=this.tiles[Gn(De,He,at)];return de&&de.source?(Ve>1&&console.log("found parent tile z%d-%d-%d",De,He,at),Ve>1&&console.time("drilling down"),this.splitTile(de.source,De,He,at,ke,Y,ne),Ve>1&&console.timeEnd("drilling down"),this.tiles[fe]?Mn(this.tiles[fe],ze):null):null};class Li extends s.VectorTileWorkerSource{constructor(Y,ne,Te,ze,Ve){super(Y,ne,Te,ze,jr),Ve&&(this.loadGeoJSON=Ve)}loadData(Y,ne){const Te=Y&&Y.request,ze=Te&&Te.collectResourceTiming;this.loadGeoJSON(Y,(Ve,ae)=>{if(Ve||!ae)return ne(Ve);if(typeof ae!="object")return ne(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{N(ae,!0);try{if(Y.filter){const de=s.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(de.result==="error")throw new Error(de.value.map(He=>`${He.key}: ${He.message}`).join(", "));ae={type:"FeatureCollection",features:ae.features.filter(He=>de.value.evaluate({zoom:0},He))}}this._geoJSONIndex=Y.cluster?new It(function({superclusterOptions:de,clusterProperties:De}){if(!De||!de)return de;const He={},at={},Qe={accumulated:null,zoom:0},vt={properties:null},Lt=Object.keys(De);for(const Mt of Lt){const[Xt,cn]=De[Mt],qt=s.createExpression(cn),wn=s.createExpression(typeof Xt=="string"?[Xt,["accumulated"],["get",Mt]]:Xt);He[Mt]=qt.value,at[Mt]=wn.value}return de.map=Mt=>{vt.properties=Mt;const Xt={};for(const cn of Lt)Xt[cn]=He[cn].evaluate(Qe,vt);return Xt},de.reduce=(Mt,Xt)=>{vt.properties=Xt;for(const cn of Lt)Qe.accumulated=Mt[cn],Mt[cn]=at[cn].evaluate(Qe,vt)},de}(Y)).load(ae.features):function(de,De){return new Xn(de,De)}(ae,Y.geojsonVtOptions)}catch(de){return ne(de)}this.loaded={};const fe={};if(ze){const de=s.getPerformanceMeasurement(Te);de&&(fe.resourceTiming={},fe.resourceTiming[Y.source]=JSON.parse(JSON.stringify(de)))}ne(null,fe)}})}reloadTile(Y,ne){const Te=this.loaded;return Te&&Te[Y.uid]?super.reloadTile(Y,ne):this.loadTile(Y,ne)}loadGeoJSON(Y,ne){if(Y.request)s.getJSON(Y.request,ne);else{if(typeof Y.data!="string")return ne(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));try{return ne(null,JSON.parse(Y.data))}catch{return ne(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(Y,ne){try{ne(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(Te){ne(Te)}}getClusterChildren(Y,ne){try{ne(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(Te){ne(Te)}}getClusterLeaves(Y,ne){try{ne(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(Te){ne(Te)}}}class Xo{constructor(Y){this.self=Y,this.actor=new s.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=s.getProjection({name:"mercator"}),this.workerSourceTypes={vector:s.VectorTileWorkerSource,geojson:Li},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(ne,Te)=>{if(this.workerSourceTypes[ne])throw new Error(`Worker source with name "${ne}" already registered.`);this.workerSourceTypes[ne]=Te},this.self.registerRTLTextPlugin=ne=>{if(s.plugin.isParsed())throw new Error("RTL text plugin already registered.");s.plugin.applyArabicShaping=ne.applyArabicShaping,s.plugin.processBidirectionalText=ne.processBidirectionalText,s.plugin.processStyledBidirectionalText=ne.processStyledBidirectionalText}}clearCaches(Y,ne,Te){delete this.layerIndexes[Y],delete this.availableImages[Y],delete this.workerSources[Y],delete this.demWorkerSources[Y],Te()}checkIfReady(Y,ne,Te){Te()}setReferrer(Y,ne){this.referrer=ne}spriteLoaded(Y,ne){this.isSpriteLoaded[Y]=ne;for(const Te in this.workerSources[Y]){const ze=this.workerSources[Y][Te];for(const Ve in ze)ze[Ve]instanceof s.VectorTileWorkerSource&&(ze[Ve].isSpriteLoaded=ne,ze[Ve].fire(new s.Event("isSpriteLoaded")))}}setImages(Y,ne,Te){this.availableImages[Y]=ne;for(const ze in this.workerSources[Y]){const Ve=this.workerSources[Y][ze];for(const ae in Ve)Ve[ae].availableImages=ne}Te()}enableTerrain(Y,ne,Te){this.terrain=ne,Te()}setProjection(Y,ne){this.projections[Y]=s.getProjection(ne)}setLayers(Y,ne,Te){this.getLayerIndex(Y).replace(ne),Te()}updateLayers(Y,ne,Te){this.getLayerIndex(Y).update(ne.layers,ne.removedIds),Te()}loadTile(Y,ne,Te){const ze=this.enableTerrain?s.extend({enableTerrain:this.terrain},ne):ne;ze.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,ne.type,ne.source).loadTile(ze,Te)}loadDEMTile(Y,ne,Te){const ze=this.enableTerrain?s.extend({buildQuadTree:this.terrain},ne):ne;this.getDEMWorkerSource(Y,ne.source).loadTile(ze,Te)}reloadTile(Y,ne,Te){const ze=this.enableTerrain?s.extend({enableTerrain:this.terrain},ne):ne;ze.projection=this.projections[Y]||this.defaultProjection,this.getWorkerSource(Y,ne.type,ne.source).reloadTile(ze,Te)}abortTile(Y,ne,Te){this.getWorkerSource(Y,ne.type,ne.source).abortTile(ne,Te)}removeTile(Y,ne,Te){this.getWorkerSource(Y,ne.type,ne.source).removeTile(ne,Te)}removeSource(Y,ne,Te){if(!this.workerSources[Y]||!this.workerSources[Y][ne.type]||!this.workerSources[Y][ne.type][ne.source])return;const ze=this.workerSources[Y][ne.type][ne.source];delete this.workerSources[Y][ne.type][ne.source],ze.removeSource!==void 0?ze.removeSource(ne,Te):Te()}loadWorkerSource(Y,ne,Te){try{this.self.importScripts(ne.url),Te()}catch(ze){Te(ze.toString())}}syncRTLPluginState(Y,ne,Te){try{s.plugin.setState(ne);const ze=s.plugin.getPluginURL();if(s.plugin.isLoaded()&&!s.plugin.isParsed()&&ze!=null){this.self.importScripts(ze);const Ve=s.plugin.isParsed();Te(Ve?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ze}`),Ve)}}catch(ze){Te(ze.toString())}}getAvailableImages(Y){let ne=this.availableImages[Y];return ne||(ne=[]),ne}getLayerIndex(Y){let ne=this.layerIndexes[Y];return ne||(ne=this.layerIndexes[Y]=new E),ne}getWorkerSource(Y,ne,Te){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][ne]||(this.workerSources[Y][ne]={}),!this.workerSources[Y][ne][Te]){const ze={send:(Ve,ae,fe,de,De,He)=>{this.actor.send(Ve,ae,fe,Y,De,He)},scheduler:this.actor.scheduler};this.workerSources[Y][ne][Te]=new this.workerSourceTypes[ne](ze,this.getLayerIndex(Y),this.getAvailableImages(Y),this.isSpriteLoaded[Y])}return this.workerSources[Y][ne][Te]}getDEMWorkerSource(Y,ne){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][ne]||(this.demWorkerSources[Y][ne]=new A),this.demWorkerSources[Y][ne]}enforceCacheSizeLimit(Y,ne){s.enforceCacheSizeLimit(ne)}getWorkerPerformanceMetrics(Y,ne,Te){Te(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Xo(self)),Xo}),d(["./shared"],function(s){function _(m,l){if(Array.isArray(m)){if(!Array.isArray(l)||m.length!==l.length)return!1;for(let h=0;h<m.length;h++)if(!_(m[h],l[h]))return!1;return!0}if(typeof m=="object"&&m!==null&&l!==null){if(typeof l!="object"||Object.keys(m).length!==Object.keys(l).length)return!1;for(const h in m)if(!_(m[h],l[h]))return!1;return!0}return m===l}var S=E;function E(m){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,x,w=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(w);try{x=new Worker(k),y=!0}catch{y=!1}return x&&x.terminate(),URL.revokeObjectURL(k),y}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var y=document.createElement("canvas");y.width=y.height=1;var x=y.getContext("2d");if(!x)return!1;var w=x.getImageData(0,0,1,1);return w&&w.width===y.width}()?(A[h=l&&l.failIfMajorPerformanceCaveat]===void 0&&(A[h]=function(y){var x,w=function(k){var P=document.createElement("canvas"),D=Object.create(E.webGLContextAttributes);return D.failIfMajorPerformanceCaveat=k,P.getContext("webgl",D)||P.getContext("experimental-webgl",D)}(y);if(!w)return!1;try{x=w.createShader(w.VERTEX_SHADER)}catch{return!1}return!(!x||w.isContextLost())&&(w.shaderSource(x,"void main() {}"),w.compileShader(x),w.getShaderParameter(x,w.COMPILE_STATUS)===!0)}(h)),A[h]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var h}(m)}var A={};function I(m,l,h){const y=s.window.document.createElement(m);return l!==void 0&&(y.className=l),h&&h.appendChild(y),y}function O(m,l,h){const y=s.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const x of Object.keys(l))y.setAttributeNS(null,x,l[x]);return h&&h.appendChild(y),y}E.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const N=s.window.document&&s.window.document.documentElement.style,$=N&&N.userSelect!==void 0?"userSelect":"WebkitUserSelect";let K;function W(){N&&$&&(K=N[$],N[$]="none")}function B(){N&&$&&(N[$]=K)}function U(m){m.preventDefault(),m.stopPropagation(),s.window.removeEventListener("click",U,!0)}function J(){s.window.addEventListener("click",U,!0),s.window.setTimeout(()=>{s.window.removeEventListener("click",U,!0)},0)}function ee(m,l){const h=m.getBoundingClientRect();return be(m,h,l)}function ye(m,l){const h=m.getBoundingClientRect(),y=[];for(let x=0;x<l.length;x++)y.push(be(m,h,l[x]));return y}function Q(m){return s.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&s.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function be(m,l,h){const y=m.offsetWidth===l.width?1:m.offsetWidth/l.width;return new s.Point((h.clientX-l.left)*y,(h.clientY-l.top)*y)}function re(m,l){var h=l[0],y=l[1],x=l[2],w=l[3],k=h*w-x*y;return k?(m[0]=w*(k=1/k),m[1]=-y*k,m[2]=-x*k,m[3]=h*k,m):null}function Ie(m){const{userImage:l}=m;return!!(l&&l.render&&l.render())&&(m.data.replace(new Uint8Array(l.data.buffer)),!0)}class Be extends s.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:h,callback:y}of this.requestors)this._notify(h,y);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,h){this._validate(l,h)&&(this.images[l]=h)}_validate(l,h){let y=!0;return this._validateStretch(h.stretchX,h.data&&h.data.width)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),y=!1),this._validateStretch(h.stretchY,h.data&&h.data.height)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),y=!1),this._validateContent(h.content,h)||(this.fire(new s.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),y=!1),y}_validateStretch(l,h){if(!l)return!0;let y=0;for(const x of l){if(x[0]<y||x[1]<x[0]||h<x[1])return!1;y=x[1]}return!0}_validateContent(l,h){return!(l&&(l.length!==4||l[0]<0||h.data.width<l[0]||l[1]<0||h.data.height<l[1]||l[2]<0||h.data.width<l[2]||l[3]<0||h.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,h){h.version=this.images[l].version+1,this.images[l]=h,this.updatedImages[l]=!0}removeImage(l){const h=this.images[l];delete this.images[l],delete this.patterns[l],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,h){let y=!0;if(!this.isLoaded())for(const x of l)this.images[x]||(y=!1);this.isLoaded()||y?this._notify(l,h):this.requestors.push({ids:l,callback:h})}_notify(l,h){const y={};for(const x of l){this.images[x]||this.fire(new s.Event("styleimagemissing",{id:x}));const w=this.images[x];w?y[x]={data:w.data.clone(),pixelRatio:w.pixelRatio,sdf:w.sdf,version:w.version,stretchX:w.stretchX,stretchY:w.stretchY,content:w.content,hasRenderCallback:!!(w.userImage&&w.userImage.render)}:s.warnOnce(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}h(null,y)}getPixelSize(){const{width:l,height:h}=this.atlasImage;return{width:l,height:h}}getPattern(l){const h=this.patterns[l],y=this.getImage(l);if(!y)return null;if(h&&h.position.version===y.version)return h.position;if(h)h.position.version=y.version;else{const x={w:y.data.width+2,h:y.data.height+2,x:0,y:0},w=new s.ImagePosition(x,y);this.patterns[l]={bin:x,position:w}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const h=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new s.Texture(l,this.atlasImage,h.RGBA),this.atlasTexture&&this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const w in this.patterns)l.push(this.patterns[w].bin);const{w:h,h:y}=s.potpack(l),x=this.atlasImage;x.resize({width:h||1,height:y||1});for(const w in this.patterns){const{bin:k}=this.patterns[w],P=k.x+1,D=k.y+1,j=this.images[w].data,F=j.width,H=j.height;s.RGBAImage.copy(j,x,{x:0,y:0},{x:P,y:D},{width:F,height:H}),s.RGBAImage.copy(j,x,{x:0,y:H-1},{x:P,y:D-1},{width:F,height:1}),s.RGBAImage.copy(j,x,{x:0,y:0},{x:P,y:D+H},{width:F,height:1}),s.RGBAImage.copy(j,x,{x:F-1,y:0},{x:P-1,y:D},{width:1,height:H}),s.RGBAImage.copy(j,x,{x:0,y:0},{x:P+F,y:D},{width:1,height:H})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const h of l){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const y=this.images[h];Ie(y)&&this.updateImage(h,y)}}}const le=new s.Properties({anchor:new s.DataConstantProperty(s.spec.light.anchor),position:new class{constructor(){this.specification=s.spec.light.position}possiblyEvaluate(m,l){return function([h,y,x]){const w=s.degToRad(y+90),k=s.degToRad(x);return{x:h*Math.cos(w)*Math.sin(k),y:h*Math.sin(w)*Math.sin(k),z:h*Math.cos(k),azimuthal:y,polar:x}}(m.expression.evaluate(l))}interpolate(m,l,h){return{x:s.number(m.x,l.x,h),y:s.number(m.y,l.y,h),z:s.number(m.z,l.z,h),azimuthal:s.number(m.azimuthal,l.azimuthal,h),polar:s.number(m.polar,l.polar,h)}}},color:new s.DataConstantProperty(s.spec.light.color),intensity:new s.DataConstantProperty(s.spec.light.intensity)});class xe extends s.Evented{constructor(l){super(),this._transitionable=new s.Transitionable(le),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,h={}){if(!this._validate(s.validateLight,l,h))for(const y in l){const x=l[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),x):this._transitionable.setValue(y,x)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,l.call(s.validateStyle,s.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}const Se=new s.Properties({source:new s.DataConstantProperty(s.spec.terrain.source),exaggeration:new s.DataConstantProperty(s.spec.terrain.exaggeration)});let oe=class extends s.Evented{constructor(m,l){super(),this._transitionable=new s.Transitionable(Se),this.set(m),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(m){for(const l in m){const h=m[l];s.endsWith(l,"-transition")?this._transitionable.setTransition(l.slice(0,-11),h):this._transitionable.setValue(l,h)}}updateTransitions(m){this._transitioning=this._transitionable.transitioned(m,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(m){this.properties=this._transitioning.possiblyEvaluate(m)}};function te(m,l,h,y){const x=s.smoothstep(45,65,h),[w,k]=Ce(m,y),P=s.length(l);let D=1-Math.min(1,Math.exp((P-w)/(k-w)*-6));return D*=D*D,D=Math.min(1,1.00747*D),D*x*m.alpha}function Ce(m,l){const h=.5/Math.tan(.5*l);return[m.range[0]+h,m.range[1]+h]}const ve=new s.Properties({range:new s.DataConstantProperty(s.spec.fog.range),color:new s.DataConstantProperty(s.spec.fog.color),"high-color":new s.DataConstantProperty(s.spec.fog["high-color"]),"space-color":new s.DataConstantProperty(s.spec.fog["space-color"]),"horizon-blend":new s.DataConstantProperty(s.spec.fog["horizon-blend"]),"star-intensity":new s.DataConstantProperty(s.spec.fog["star-intensity"])});class Fe extends s.Evented{constructor(l,h){super(),this._transitionable=new s.Transitionable(ve),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=h}get state(){const l=this._transform,h=l.projection.name==="globe",y=s.globeToMercatorTransition(l.zoom),x=this.properties.get("range"),w=[.5,3];return{range:h?[s.number(w[0],x[0],y),s.number(w[1],x[1],y)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,h={}){if(!this._validate(s.validateFog,l,h)){for(const y of Object.keys(s.spec.fog))l&&l[y]===void 0&&(l[y]=s.spec.fog[y].default);for(const y in l){const x=l[y];s.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),x):this._transitionable.setValue(y,x)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const h=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:s.smoothstep(45,65,l))*h.a}getOpacityAtLatLng(l,h){return this._transform.projection.supportsFog?function(y,x,w){const k=s.MercatorCoordinate.fromLngLat(x),P=w.elevation?w.elevation.getAtPointOrZero(k):0,D=[k.x,k.y,P];return s.transformMat4(D,D,w.mercatorFogMatrix),te(y,D,w.pitch,w._fov)}(this.state,l,h):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Ce(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,h,y){return(!y||y.validate!==!1)&&s.emitValidationErrors(this,l.call(s.validateStyle,s.extend({value:h,style:{glyphs:!0,sprite:!0},styleSpec:s.spec})))}}class Ge{constructor(l,h){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=s.uniqueId();const y=this.workerPool.acquire(this.id);for(let x=0;x<y.length;x++){const w=new Ge.Actor(y[x],h,this.id);w.name=`Worker ${x}`,this.actors.push(w)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,h,y){s.asyncAll(this.actors,(x,w)=>{x.send(l,h,w)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function rt(m,l,h){return l*(s.EXTENT/(m.tileSize*Math.pow(2,h-m.tileID.overscaledZ)))}Ge.Actor=s.Actor;class Ct{constructor(l,h,y,x){this.screenBounds=l,this.cameraPoint=h,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(l,h){let y,x;if(l instanceof s.Point||typeof l[0]=="number"){const w=s.Point.convert(l);y=[w],x=h.isPointAboveHorizon(w)}else{const w=s.Point.convert(l[0]),k=s.Point.convert(l[1]);y=[w,k],x=s.polygonizeBounds(w,k).every(P=>h.isPointAboveHorizon(P))}return new Ct(y,h.getCameraPoint(),x,h)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return s.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const h=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],x=s.polygonizeBounds(h,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>h.x&&this.cameraPoint.x<y.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?x[2]=this.cameraPoint:this.cameraPoint.x<=h.x&&(x[3]=this.cameraPoint)),s.bufferConvexPolygon(x,l)}bufferedCameraGeometryGlobe(l){const h=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new s.Point(1,1)):this.screenBounds[1],x=s.polygonizeBounds(h,y,l),w=this.cameraPoint.clone();switch(3*((w.y>h.y)+(w.y>y.y))+((w.x>h.x)+(w.x>y.x))){case 0:x[0]=w,x[4]=w.clone();break;case 1:x.splice(1,0,w);break;case 2:x[1]=w;break;case 3:x.splice(4,0,w);break;case 5:x.splice(2,0,w);break;case 6:x[3]=w;break;case 7:x.splice(3,0,w);break;case 8:x[2]=w}return x}containsTile(l,h,y,x=0){const w=l.queryPadding/h._pixelsPerMercatorPixel+1,k=y?this._bufferedCameraMercator(w,h):this._bufferedScreenMercator(w,h);let P=l.tileID.wrap+(k.unwrapped?x:0);const D=k.polygon.map(me=>s.getTilePoint(l.tileTransform,me,P));if(!s.polygonIntersectsBox(D,0,0,s.EXTENT,s.EXTENT))return;P=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const j=this.screenGeometryMercator.polygon.map(me=>s.getTileVec3(l.tileTransform,me,P)),F=j.map(me=>new s.Point(me[0],me[1])),H=h.getFreeCameraOptions().position||new s.MercatorCoordinate(0,0,0),ie=s.getTileVec3(l.tileTransform,H,P),ue=j.map(me=>{const Z=s.sub(me,me,ie);return s.normalize(Z,Z),new s.Ray(ie,Z)}),pe=rt(l,1,h.zoom)*h._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:F,tilespaceRays:ue,bufferedTilespaceGeometry:D,bufferedTilespaceBounds:(he=s.getBounds(D),he.min.x=s.clamp(he.min.x,0,s.EXTENT),he.min.y=s.clamp(he.min.y,0,s.EXTENT),he.max.x=s.clamp(he.max.x,0,s.EXTENT),he.max.y=s.clamp(he.max.y,0,s.EXTENT),he),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:pe};var he}_bufferedScreenMercator(l,h){const y=Kt(l);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let x;return x=h.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),h):{polygon:this.bufferedScreenGeometry(l).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._screenRaycastCache[y]=x,x}}_bufferedCameraMercator(l,h){const y=Kt(l);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let x;return x=h.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),h):{polygon:this.bufferedCameraGeometry(l).map(w=>h.pointCoordinate3D(w)),unwrapped:!0},this._cameraRaycastCache[y]=x,x}}_projectAndResample(l,h){const y=function(w,k){const P=s.multiply([],k.pixelMatrix,k.globeMatrix),D=[0,-s.GLOBE_RADIUS,0,1],j=[0,s.GLOBE_RADIUS,0,1],F=[0,0,0,1];s.transformMat4$1(D,D,P),s.transformMat4$1(j,j,P),s.transformMat4$1(F,F,P);const H=new s.Point(D[0]/D[3],D[1]/D[3]),ie=new s.Point(j[0]/j[3],j[1]/j[3]),ue=s.polygonContainsPoint(w,H)&&D[3]<F[3],pe=s.polygonContainsPoint(w,ie)&&j[3]<F[3];if(!ue&&!pe)return null;const he=function(Ne,We,Ue){for(let Je=1;Je<Ne.length;Je++){const xt=Pt(We.pointCoordinate3D(Ne[Je-1]).x),Ze=Pt(We.pointCoordinate3D(Ne[Je]).x);if(Ue<0){if(xt<Ze)return{idx:Je,t:-xt/(Ze-1-xt)}}else if(Ze<xt)return{idx:Je,t:(1-xt)/(Ze+1-xt)}}return null}(w,k,ue?-1:1);if(!he)return null;const{idx:me,t:Z}=he;let ce=me>1?It(w.slice(0,me),k):[],Ee=me<w.length?It(w.slice(me),k):[];ce=ce.map(Ne=>new s.Point(Pt(Ne.x),Ne.y)),Ee=Ee.map(Ne=>new s.Point(Pt(Ne.x),Ne.y));const Ae=[...ce];Ae.length===0&&Ae.push(Ee[Ee.length-1]);const je=s.number(Ae[Ae.length-1].y,(Ee.length===0?ce[0]:Ee[0]).y,Z);let $e;return $e=ue?[new s.Point(0,je),new s.Point(0,0),new s.Point(1,0),new s.Point(1,je)]:[new s.Point(1,je),new s.Point(1,1),new s.Point(0,1),new s.Point(0,je)],Ae.push(...$e),Ee.length===0?Ae.push(ce[0]):Ae.push(...Ee),{polygon:Ae.map(Ne=>new s.MercatorCoordinate(Ne.x,Ne.y)),unwrapped:!1}}(l,h);if(y)return y;const x=function(w,k){let P=!1,D=-1/0,j=0;for(let H=0;H<w.length-1;H++)w[H].x>D&&(D=w[H].x,j=H);for(let H=0;H<w.length-1;H++){const ie=(j+H)%(w.length-1),ue=w[ie],pe=w[ie+1];Math.abs(ue.x-pe.x)>.5&&(ue.x<pe.x?(ue.x+=1,ie===0&&(w[w.length-1].x+=1)):(pe.x+=1,ie+1===w.length-1&&(w[0].x+=1)),P=!0)}const F=s.mercatorXfromLng(k.center.lng);return P&&F<Math.abs(F-1)&&w.forEach(H=>{H.x-=1}),{polygon:w,unwrapped:P}}(It(l,h).map(w=>new s.Point(Pt(w.x),w.y)),h);return{polygon:x.polygon.map(w=>new s.MercatorCoordinate(w.x,w.y)),unwrapped:x.unwrapped}}}function It(m,l){return s.resample(m,h=>{const y=l.pointCoordinate3D(h);h.x=y.x,h.y=y.y},1/256)}function Pt(m){return m<0?1+m%1:m%1}function Kt(m){return 100*m|0}function nn(m,l,h,y,x){const w=function(k,P){if(k)return x(k);if(P){m.url&&P.tiles&&m.tiles&&delete m.tiles;const D=s.pick(s.extend(P,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);P.vector_layers&&(D.vectorLayers=P.vector_layers,D.vectorLayerIds=D.vectorLayers.map(j=>j.id)),D.tiles=l.canonicalizeTileset(D,m.url),x(null,D)}};return m.url?s.getJSON(l.transformRequest(l.normalizeSourceURL(m.url,null,h,y),s.ResourceType.Source),w):s.exported.frame(()=>w(null,m))}class an{constructor(l,h,y){this.bounds=s.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=h||0,this.maxzoom=y||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const h=Math.pow(2,l.z),y=Math.floor(s.mercatorXfromLng(this.bounds.getWest())*h),x=Math.floor(s.mercatorYfromLat(this.bounds.getNorth())*h),w=Math.ceil(s.mercatorXfromLng(this.bounds.getEast())*h),k=Math.ceil(s.mercatorYfromLat(this.bounds.getSouth())*h);return l.x>=y&&l.x<w&&l.y>=x&&l.y<k}}class ct{constructor(l,h,y){this.context=l;const x=l.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Vt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ln{constructor(l,h,y,x){this.length=h.length,this.attributes=y,this.itemSize=h.bytesPerElement,this.dynamicDraw=x,this.context=l;const w=l.gl;this.buffer=w.createBuffer(),l.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||h.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,h){for(let y=0;y<this.attributes.length;y++){const x=h.attributes[this.attributes[y].name];x!==void 0&&l.enableVertexAttribArray(x)}}setVertexAttribPointers(l,h,y){for(let x=0;x<this.attributes.length;x++){const w=this.attributes[x],k=h.attributes[w.name];k!==void 0&&l.vertexAttribPointer(k,w.components,l[Vt[w.type]],!1,this.itemSize,w.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class zt{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class pn extends zt{getDefault(){return s.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Kn extends zt{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Fr extends zt{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class mn extends zt{getDefault(){return[!0,!0,!0,!0]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Ut extends zt{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Vi extends zt{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class Le extends zt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const h=this.current;(l.func!==h.func||l.ref!==h.ref||l.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Ke extends zt{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class et extends zt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=l,this.dirty=!1}}class Ot extends zt{getDefault(){return[0,1]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class kt extends zt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=l,this.dirty=!1}}class yt extends zt{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class Zt extends zt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.BLEND):h.disable(h.BLEND),this.current=l,this.dirty=!1}}class vn extends zt{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class Rn extends zt{getDefault(){return s.Color.transparent}set(l){const h=this.current;(l.r!==h.r||l.g!==h.g||l.b!==h.b||l.a!==h.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class bn extends zt{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class _n extends zt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;l?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=l,this.dirty=!1}}class Mn extends zt{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class Sr extends zt{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let Er,Si=class extends zt{getDefault(){return null}set(m){(m!==this.current||this.dirty)&&(this.gl.useProgram(m),this.current=m,this.dirty=!1)}};class Qn extends zt{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Xn extends zt{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const h=this.current;(l[0]!==h[0]||l[1]!==h[1]||l[2]!==h[2]||l[3]!==h[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Gn extends zt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class jr extends zt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Li extends zt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class Xo extends zt{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class ke extends zt{getDefault(){return null}set(l){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class Y extends zt{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class ne extends zt{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Te extends zt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class ze extends zt{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Ve extends zt{constructor(l,h){super(l),this.context=l,this.parent=h}getDefault(){return null}}class ae extends Ve{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class fe extends Ve{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,this.attachment(),h.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class de extends fe{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class De{constructor(l,h,y,x){this.context=l,this.width=h,this.height=y;const w=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new ae(l,w),x&&(this.depthAttachment=new fe(l,w))}destroy(){const l=this.context.gl,h=this.colorAttachment.get();if(h&&l.deleteTexture(h),this.depthAttachment){const y=this.depthAttachment.get();y&&l.deleteRenderbuffer(y)}l.deleteFramebuffer(this.framebuffer)}}class He{constructor(l,h=!1){if(this.gl=l,this.isWebGL2=h,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),h){const y=l;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(l),deleteVertexArrayOES:y.deleteVertexArray.bind(l),bindVertexArrayOES:y.bindVertexArray.bind(l)}}this.clearColor=new pn(this),this.clearDepth=new Kn(this),this.clearStencil=new Fr(this),this.colorMask=new mn(this),this.depthMask=new Ut(this),this.stencilMask=new Vi(this),this.stencilFunc=new Le(this),this.stencilOp=new Ke(this),this.stencilTest=new et(this),this.depthRange=new Ot(this),this.depthTest=new kt(this),this.depthFunc=new yt(this),this.blend=new Zt(this),this.blendFunc=new vn(this),this.blendColor=new Rn(this),this.blendEquation=new bn(this),this.cullFace=new _n(this),this.cullFaceSide=new Mn(this),this.frontFace=new Sr(this),this.program=new Si(this),this.activeTexture=new Qn(this),this.viewport=new Xn(this),this.bindFramebuffer=new Gn(this),this.bindRenderbuffer=new jr(this),this.bindTexture=new Li(this),this.bindVertexBuffer=new Xo(this),this.bindElementBuffer=new ke(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Y(this),this.pixelStoreUnpack=new ne(this),this.pixelStoreUnpackPremultiplyAlpha=new Te(this),this.pixelStoreUnpackFlipY=new ze(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),h||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(h||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=h||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,h){return new ct(this,l,h)}createVertexBuffer(l,h,y){return new ln(this,l,h,y)}createRenderbuffer(l,h,y){const x=this.gl,w=x.createRenderbuffer();return this.bindRenderbuffer.set(w),x.renderbufferStorage(x.RENDERBUFFER,l,h,y),this.bindRenderbuffer.set(null),w}createFramebuffer(l,h,y){return new De(this,l,h,y)}clear({color:l,depth:h,stencil:y}){const x=this.gl;let w=0;l&&(w|=x.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(w|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),y!==void 0&&(w|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),x.clear(w)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){_(l.blendFunction,s.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class at extends s.Evented{constructor(l,h,y,x){if(super(),this.id=l,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.extend(this,s.pick(h,["url","scheme","tileSize","promoteId"])),this._options=s.extend({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new s.DedupedRequest}load(l){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"}));const h=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=nn(this._options,this.map._requestManager,h,y,(x,w)=>{this._tileJSONRequest=null,this._loaded=!0,x?(h&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${h}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new s.ErrorEvent(x))):w&&(s.extend(this,w),w.bounds&&(this.tileBounds=new an(w.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(w.tiles,this.map._requestManager._customAccessToken),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(x)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}loadTile(l,h){const y=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(y,s.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=h:l.request=l.actor.send("reloadTile",x,w.bind(this));else if(l.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",x,w.bind(this),void 0,!0);else{const k=s.loadVectorTile.call({deduped:this._deduped},x,(P,D)=>{P||!D?w.call(this,P):(x.data={cacheControl:D.cacheControl,expires:D.expires,rawData:D.rawData.slice(0)},l.actor&&l.actor.send("loadTile",x,w.bind(this),void 0,!0))},!0);l.request={cancel:k}}function w(k,P){return delete l.request,l.aborted?h(null):k&&k.status!==404?h(k):(P&&P.resourceTiming&&(l.resourceTiming=P.resourceTiming),this.map._refreshExpiredTiles&&P&&l.setExpiryData(P),l.loadVectorData(P,this.map.painter),s.cacheEntryPossiblyAdded(this.dispatcher),h(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Qe extends s.Evented{constructor(l,h,y,x){super(),this.id=l,this.dispatcher=y,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.extend({type:"raster"},h),s.extend(this,s.pick(h,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=nn(this._options,this.map._requestManager,null,null,(h,y)=>{this._tileJSONRequest=null,this._loaded=!0,h?this.fire(new s.ErrorEvent(h)):y&&(s.extend(this,y),y.bounds&&(this.tileBounds=new an(y.bounds,this.minzoom,this.maxzoom)),s.postTurnstileEvent(y.tiles),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(h)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return s.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,h){const y=s.exported.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);l.request=s.getImage(this.map._requestManager.transformRequest(x,s.ResourceType.Tile),(w,k,P,D)=>(delete l.request,l.aborted?(l.state="unloaded",h(null)):w?(l.state="errored",h(w)):k?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:P,expires:D}),l.setTexture(k,this.map.painter),l.state="loaded",s.cacheEntryPossiblyAdded(this.dispatcher),void h(null)):h(null)))}static loadTileData(l,h,y){l.setTexture(h,y)}static unloadTileData(l,h){l.texture&&h.saveTileTexture(l.texture)}abortTile(l,h){l.request&&(l.request.cancel(),delete l.request),h()}unloadTile(l,h){l.texture&&this.map.painter.saveTileTexture(l.texture),h()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function vt(m,l,h,y,x,w,k,P){const D=[m,h,x,l,y,w,1,1,1],j=[k,P,1],F=s.adjoint([],D),[H,ie,ue]=s.transformMat3(j,j,s.transpose(F,F));return s.multiply$1(D,[H,0,0,0,ie,0,0,0,ue],D)}class Lt extends s.Evented{constructor(l,h,y,x){super(),this.id=l,this.dispatcher=y,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=h,this._dirty=!1}load(l,h){this._loaded=h||!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=s.getImage(this.map._requestManager.transformRequest(this.url,s.ResourceType.Image),(y,x)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new s.ErrorEvent(y));else if(x){const{HTMLImageElement:w}=s.window;this.image=x instanceof w?s.exported.getImageData(x):x,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const h=l.map(s.MercatorCoordinate.fromLngLat);return this.tileID=function(y){let x=1/0,w=1/0,k=-1/0,P=-1/0;for(const H of y)x=Math.min(x,H.x),w=Math.min(w,H.y),k=Math.max(k,H.x),P=Math.max(P,H.y);const D=Math.max(k-x,P-w),j=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),F=Math.pow(2,j);return new s.CanonicalTileID(j,Math.floor((x+k)/2*F),Math.floor((w+P)/2*F))}(h),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const D in this.tiles){const j=this.tiles[D];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture)}if(this._boundsArray)return;const h=s.tileTransform(this.tileID,this.map.transform.projection),[y,x,w,k]=this.coordinates.map(D=>{const j=h.projection.project(D[0],D[1]);return s.getTilePoint(h,j)._round()});this.perspectiveTransform=function(D,j,F,H,ie,ue,pe,he,me,Z){const ce=vt(0,0,D,0,0,j,D,j),Ee=vt(F,H,ie,ue,pe,he,me,Z);return s.multiply$1(Ee,s.adjoint(ce,ce),Ee),[Ee[6]/Ee[8]*D/s.EXTENT,Ee[7]/Ee[8]*j/s.EXTENT]}(this.width,this.height,y.x,y.y,x.x,x.y,k.x,k.y,w.x,w.y);const P=this._boundsArray=new s.StructArrayLayout4i8;P.emplaceBack(y.x,y.y,0,0),P.emplaceBack(x.x,x.y,s.EXTENT,0),P.emplaceBack(k.x,k.y,0,s.EXTENT),P.emplaceBack(w.x,w.y,s.EXTENT,s.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(P,s.boundsAttributes.members),this.boundsSegments=s.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,h=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new s.Texture(l,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,h){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},h(null)):(l.state="errored",h(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Mt={vector:at,raster:Qe,"raster-dem":class extends Qe{constructor(m,l,h,y){super(m,l,h,y),this.type="raster-dem",this.maxzoom=22,this._options=s.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(m,l){const h=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(x,w){x&&(m.state="errored",l(x)),w&&(m.dem=w,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",l(null))}m.request=s.getImage(this.map._requestManager.transformRequest(h,s.ResourceType.Tile),(function(x,w,k,P){if(delete m.request,m.aborted)m.state="unloaded",l(null);else if(x)m.state="errored",l(x);else if(w){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:k,expires:P});const D=s.window.ImageBitmap&&w instanceof s.window.ImageBitmap&&(Er==null&&(Er=s.window.OffscreenCanvas&&new s.window.OffscreenCanvas(1,1).getContext("2d")&&typeof s.window.createImageBitmap=="function"),Er),j=1-(w.width-s.prevPowerOfTwo(w.width))/2;j<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const F=D?w:s.exported.getImageData(w,j),H={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:F,encoding:this.encoding,padding:j};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",H,y.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(m){const l=m.canonical,h=Math.pow(2,l.z),y=(l.x-1+h)%h,x=l.x===0?m.wrap-1:m.wrap,w=(l.x+1+h)%h,k=l.x+1===h?m.wrap+1:m.wrap,P={};return P[new s.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y).key]={backfilled:!1},P[new s.OverscaledTileID(m.overscaledZ,k,l.z,w,l.y).key]={backfilled:!1},l.y>0&&(P[new s.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y-1).key]={backfilled:!1},P[new s.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},P[new s.OverscaledTileID(m.overscaledZ,k,l.z,w,l.y-1).key]={backfilled:!1}),l.y+1<h&&(P[new s.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y+1).key]={backfilled:!1},P[new s.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},P[new s.OverscaledTileID(m.overscaledZ,k,l.z,w,l.y+1).key]={backfilled:!1}),P}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends s.Evented{constructor(m,l,h,y){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=h.getActor(),this.setEventedParent(y),this._data=l.data,this._options=s.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=s.EXTENT/this.tileSize;this.workerOptions=s.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:s.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:s.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},l),this}getClusterChildren(m,l){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},l),this}getClusterLeaves(m,l,h,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:l,offset:h},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new s.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=s.extend({},this.workerOptions),l=this._data;typeof l=="string"?(m.request=this.map._requestManager.transformRequest(s.exported.resolveURL(l),s.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(h,y)=>{if(this._loaded=!0,this._pendingLoad=null,h)this.fire(new s.ErrorEvent(h));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(x.resourceTiming=y.resourceTiming[this.id]),this.fire(new s.Event("data",x)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,l){const h=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(h,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:s.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(y,x)=>(delete m.request,m.unloadVectorData(),m.aborted?l(null):y?l(y):(m.loadVectorData(x,this.map.painter,h==="reloadTile"),l(null))),void 0,h==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return s.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Lt{constructor(m,l,h,y){super(m,l,h,y),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const l of m.urls)this.urls.push(this.map._requestManager.transformRequest(l,s.ResourceType.Source).url);s.getVideo(this.urls,(l,h)=>{this._loaded=!0,l?this.fire(new s.ErrorEvent(l)):h&&(this.video=h,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const l=this.video.seekable;m<l.start(0)||m>l.end(0)?this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,l=m.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new s.Texture(m,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Lt,canvas:class extends Lt{constructor(m,l,h,y){super(m,l,h,y),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(w=>typeof w!="number"))||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof s.window.HTMLCanvasElement||this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new s.ErrorEvent(new s.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof s.window.HTMLCanvasElement?this.options.canvas:s.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new s.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends s.Evented{constructor(m,l,h,y){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=h,this._implementation=l,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new s.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new s.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new an(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),s.extend(this,s.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return s.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new s.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new s.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:l,y:h,z:y}=m.canonical;return this._implementation.hasTile({x:l,y:h,z:y})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,l){const{x:h,y,z:x}=m.tileID.canonical,w=new s.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:h,y,z:x},{signal:w.signal})).then((function(k){return delete m.request,m.aborted?(m.state="unloaded",l(null)):k===void 0?(m.state="errored",l(null)):k===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",l(null)):function(P){return P instanceof s.window.ImageData||P instanceof s.window.HTMLCanvasElement||P instanceof s.window.ImageBitmap||P instanceof s.window.HTMLImageElement}(k)?(this.loadTileData(m,k),m.state="loaded",void l(null)):(m.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(k=>{k.code!==20&&(m.state="errored",l(k))}),m.request.cancel=()=>w.abort()}loadTileData(m,l){Qe.loadTileData(m,l,this._map.painter)}unloadTileData(m){Qe.unloadTileData(m,this._map.painter)}unloadTile(m,l){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:h,y,z:x}=m.tileID.canonical;this._implementation.unloadTile({x:h,y,z:x})}l()}abortTile(m,l){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new s.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Xt=function(m,l,h,y){const x=new Mt[l.type](m,l,h,y);if(x.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${x.id}`);return s.bindAll(["load","abort","unload","serialize","prepare"],x),x};function cn(m,l){const h=s.identity([]);return s.scale(h,h,[.5*m.width,.5*-m.height,1]),s.translate(h,h,[1,-1,0]),s.multiply(h,h,m.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(h)}function qt(m,l,h,y,x,w,k,P=!1){const D=m.tilesIn(y,k,P);D.sort(jn);const j=[];for(const H of D)j.push({wrappedTileID:H.tile.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(l,h,m._state,H,x,w,cn(m.transform,H.tile.tileID),P)});const F=function(H){const ie={},ue={};for(const pe of H){const he=pe.queryResults,me=pe.wrappedTileID,Z=ue[me]=ue[me]||{};for(const ce in he){const Ee=he[ce],Ae=Z[ce]=Z[ce]||{},je=ie[ce]=ie[ce]||[];for(const $e of Ee)Ae[$e.featureIndex]||(Ae[$e.featureIndex]=!0,je.push($e))}}return ie}(j);for(const H in F)F[H].forEach(ie=>{const ue=ie.feature,pe=ue.layer;pe&&pe.type!=="background"&&pe.type!=="sky"&&(ue.source=pe.source,pe["source-layer"]&&(ue.sourceLayer=pe["source-layer"]),ue.state=ue.id!==void 0?m.getFeatureState(pe["source-layer"],ue.id):{})});return F}function wn(m,l){const h=m.getRenderableIds().map(w=>m.getTileByID(w)),y=[],x={};for(let w=0;w<h.length;w++){const k=h[w],P=k.tileID.canonical.key;x[P]||(x[P]=!0,k.querySourceFeatures(y,l))}return y}function jn(m,l){const h=m.tileID,y=l.tileID;return h.overscaledZ-y.overscaledZ||h.canonical.y-y.canonical.y||h.wrap-y.wrap||h.canonical.x-y.canonical.x}function er(){return oc.workerClass!=null?new oc.workerClass:new s.window.Worker(oc.workerUrl)}const ut="mapboxgl_preloaded_worker_pool";class it{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<it.workerCount;)this.workers.push(new er);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ut]}numActive(){return Object.keys(this.active).length}}let Bt;function hn(){return Bt||(Bt=new it),Bt}function kn(m,l){const h={};for(const y in m)y!=="ref"&&(h[y]=m[y]);return s.refProperties.forEach(y=>{y in l&&(h[y]=l[y])}),h}function yr(m){m=m.slice();const l=Object.create(null);for(let h=0;h<m.length;h++)l[m[h].id]=m[h];for(let h=0;h<m.length;h++)"ref"in m[h]&&(m[h]=kn(m[h],l[m[h].ref]));return m}it.workerCount=2;const un={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Nr(m,l,h){h.push({command:un.addSource,args:[m,l[m]]})}function Dn(m,l,h){l.push({command:un.removeSource,args:[m]}),h[m]=!0}function Qt(m,l,h,y){Dn(m,h,y),Nr(m,l,h)}function nr(m,l,h){let y;for(y in m[h])if(m[h].hasOwnProperty(y)&&y!=="data"&&!_(m[h][y],l[h][y]))return!1;for(y in l[h])if(l[h].hasOwnProperty(y)&&y!=="data"&&!_(m[h][y],l[h][y]))return!1;return!0}function zn(m,l,h,y,x,w){let k;for(k in l=l||{},m=m||{})m.hasOwnProperty(k)&&(_(m[k],l[k])||h.push({command:w,args:[y,k,l[k],x]}));for(k in l)l.hasOwnProperty(k)&&!m.hasOwnProperty(k)&&(_(m[k],l[k])||h.push({command:w,args:[y,k,l[k],x]}))}function Dr(m){return m.id}function io(m,l){return m[l.id]=l,m}class el{constructor(l,h){this.reset(l,h)}reset(l,h){this.points=l||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=s.clamp(l,0,1);let h=1,y=this._distances[h];const x=l*this.paddedLength+this.padding;for(;y<x&&h<this._distances.length;)y=this._distances[++h];const w=h-1,k=this._distances[w],P=y-k,D=P>0?(x-k)/P:0;return this.points[w].mult(1-D).add(this.points[h].mult(D))}}class Ui{constructor(l,h,y){const x=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(l/y),this.yCellCount=Math.ceil(h/y);for(let k=0;k<this.xCellCount*this.yCellCount;k++)x.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=h,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,h,y,x,w){this._forEachCell(h,y,x,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(h),this.bboxes.push(y),this.bboxes.push(x),this.bboxes.push(w)}insertCircle(l,h,y,x){this._forEachCell(h-x,y-x,h+x,y+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(h),this.circles.push(y),this.circles.push(x)}_insertBoxCell(l,h,y,x,w,k){this.boxCells[w].push(k)}_insertCircleCell(l,h,y,x,w,k){this.circleCells[w].push(k)}_query(l,h,y,x,w,k){if(y<0||l>this.width||x<0||h>this.height)return!w&&[];const P=[];if(l<=0&&h<=0&&this.width<=y&&this.height<=x){if(w)return!0;for(let D=0;D<this.boxKeys.length;D++)P.push({key:this.boxKeys[D],x1:this.bboxes[4*D],y1:this.bboxes[4*D+1],x2:this.bboxes[4*D+2],y2:this.bboxes[4*D+3]});for(let D=0;D<this.circleKeys.length;D++){const j=this.circles[3*D],F=this.circles[3*D+1],H=this.circles[3*D+2];P.push({key:this.circleKeys[D],x1:j-H,y1:F-H,x2:j+H,y2:F+H})}return k?P.filter(k):P}return this._forEachCell(l,h,y,x,this._queryCell,P,{hitTest:w,seenUids:{box:{},circle:{}}},k),w?P.length>0:P}_queryCircle(l,h,y,x,w){const k=l-y,P=l+y,D=h-y,j=h+y;if(P<0||k>this.width||j<0||D>this.height)return!x&&[];const F=[];return this._forEachCell(k,D,P,j,this._queryCellCircle,F,{hitTest:x,circle:{x:l,y:h,radius:y},seenUids:{box:{},circle:{}}},w),x?F.length>0:F}query(l,h,y,x,w){return this._query(l,h,y,x,!1,w)}hitTest(l,h,y,x,w){return this._query(l,h,y,x,!0,w)}hitTestCircle(l,h,y,x){return this._queryCircle(l,h,y,!0,x)}_queryCell(l,h,y,x,w,k,P,D){const j=P.seenUids,F=this.boxCells[w];if(F!==null){const ie=this.bboxes;for(const ue of F)if(!j.box[ue]){j.box[ue]=!0;const pe=4*ue;if(l<=ie[pe+2]&&h<=ie[pe+3]&&y>=ie[pe+0]&&x>=ie[pe+1]&&(!D||D(this.boxKeys[ue]))){if(P.hitTest)return k.push(!0),!0;k.push({key:this.boxKeys[ue],x1:ie[pe],y1:ie[pe+1],x2:ie[pe+2],y2:ie[pe+3]})}}}const H=this.circleCells[w];if(H!==null){const ie=this.circles;for(const ue of H)if(!j.circle[ue]){j.circle[ue]=!0;const pe=3*ue;if(this._circleAndRectCollide(ie[pe],ie[pe+1],ie[pe+2],l,h,y,x)&&(!D||D(this.circleKeys[ue]))){if(P.hitTest)return k.push(!0),!0;{const he=ie[pe],me=ie[pe+1],Z=ie[pe+2];k.push({key:this.circleKeys[ue],x1:he-Z,y1:me-Z,x2:he+Z,y2:me+Z})}}}}}_queryCellCircle(l,h,y,x,w,k,P,D){const j=P.circle,F=P.seenUids,H=this.boxCells[w];if(H!==null){const ue=this.bboxes;for(const pe of H)if(!F.box[pe]){F.box[pe]=!0;const he=4*pe;if(this._circleAndRectCollide(j.x,j.y,j.radius,ue[he+0],ue[he+1],ue[he+2],ue[he+3])&&(!D||D(this.boxKeys[pe])))return k.push(!0),!0}}const ie=this.circleCells[w];if(ie!==null){const ue=this.circles;for(const pe of ie)if(!F.circle[pe]){F.circle[pe]=!0;const he=3*pe;if(this._circlesCollide(ue[he],ue[he+1],ue[he+2],j.x,j.y,j.radius)&&(!D||D(this.circleKeys[pe])))return k.push(!0),!0}}}_forEachCell(l,h,y,x,w,k,P,D){const j=this._convertToXCellCoord(l),F=this._convertToYCellCoord(h),H=this._convertToXCellCoord(y),ie=this._convertToYCellCoord(x);for(let ue=j;ue<=H;ue++)for(let pe=F;pe<=ie;pe++)if(w.call(this,l,h,y,x,this.xCellCount*pe+ue,k,P,D))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,h,y,x,w,k){const P=x-l,D=w-h,j=y+k;return j*j>P*P+D*D}_circleAndRectCollide(l,h,y,x,w,k,P){const D=(k-x)/2,j=Math.abs(l-(x+D));if(j>D+y)return!1;const F=(P-w)/2,H=Math.abs(h-(w+F));if(H>F+y)return!1;if(j<=D||H<=F)return!0;const ie=j-D,ue=H-F;return ie*ie+ue*ue<=y*y}}const Ei={unknown:0,flipRequired:1,flipNotRequired:2},Qc=Math.tan(85*Math.PI/180);function st(m,l,h,y,x,w,k){const P=s.create();if(h)if(w.name==="globe"){const D=s.calculateGlobeLabelMatrix(x,l);s.multiply(P,P,D)}else{const D=re([],k);P[0]=D[0],P[1]=D[1],P[4]=D[2],P[5]=D[3],y||s.rotateZ(P,P,x.angle)}else s.multiply(P,x.labelPlaneMatrix,m);return P}function qs(m,l,h,y,x,w,k){const P=st(m,l,h,y,x,w,k);return w.name==="globe"&&h||(P[2]=P[6]=P[10]=P[14]=0),P}function Hr(m,l,h,y,x,w,k){if(h){if(w.name==="globe"){const P=st(m,l,h,y,x,w,k);return s.invert(P,P),s.multiply(P,m,P),P}{const P=s.clone(m),D=s.identity([]);return D[0]=k[0],D[1]=k[1],D[4]=k[2],D[5]=k[3],s.multiply(P,P,D),y||s.rotateZ(P,P,-x.angle),P}}return x.glCoordMatrix}function Ti(m,l,h,y){const x=[m,l,h,1];h?s.transformMat4$1(x,x,y):Bn(x,x,y);const w=x[3];return x[0]/=w,x[1]/=w,x[2]/=w,x}function hy(m,l){return Math.min(.5+m/l*.5,1.5)}function ys(m,l){const h=m[0]/m[3],y=m[1]/m[3];return h>=-l[0]&&h<=l[0]&&y>=-l[1]&&y<=l[1]}function Bf(m,l,h,y,x,w,k,P,D,j){const F=h.transform,H=y?m.textSizeData:m.iconSizeData,ie=s.evaluateSizeForZoom(H,h.transform.zoom),ue=F.projection.name==="globe",pe=[256/h.width*2+1,256/h.height*2+1],he=y?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;he.clear();let me=null;ue&&(me=y?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const Z=m.lineVertexArray,ce=y?m.text.placedSymbolArray:m.icon.placedSymbolArray,Ee=h.transform.width/h.transform.height;let Ae,je=!1;for(let $e=0;$e<ce.length;$e++){const Ne=ce.get($e),{numGlyphs:We,writingMode:Ue}=Ne;if(Ue!==s.WritingMode.vertical||je||Ae===s.WritingMode.horizontal||(je=!0),Ae=Ue,(Ne.hidden||Ue===s.WritingMode.vertical)&&!je){Jo(We,he);continue}je=!1;const Je=new s.Point(Ne.tileAnchorX,Ne.tileAnchorY);let{x:xt,y:Ze,z:ht}=F.projection.projectTilePoint(Je.x,Je.y,j.canonical);if(D){const[yn,Gt,dn]=D(Je);xt+=yn,Ze+=Gt,ht+=dn}const tt=[xt,Ze,ht,1];if(s.transformMat4$1(tt,tt,l),!ys(tt,pe)){Jo(We,he);continue}const _t=hy(h.transform.cameraToCenterDistance,tt[3]),Xe=s.evaluateSizeForFeature(H,ie,Ne),dt=k?Xe/_t:Xe*_t,wt=Ti(xt,Ze,ht,x);if(wt[3]<=0){Jo(We,he);continue}let mt={};const St=k?null:D,en=Nt(Ne,dt,!1,P,l,x,w,m.glyphOffsetArray,Z,he,me,wt,Je,mt,Ee,St,F.projection,j,k);je=en.useVertical,St&&en.needsFlipping&&(mt={}),(en.notEnoughRoom||je||en.needsFlipping&&Nt(Ne,dt,!0,P,l,x,w,m.glyphOffsetArray,Z,he,me,wt,Je,mt,Ee,St,F.projection,j,k).notEnoughRoom)&&Jo(We,he)}y?(m.text.dynamicLayoutVertexBuffer.updateData(he),me&&m.text.globeExtVertexBuffer.updateData(me)):(m.icon.dynamicLayoutVertexBuffer.updateData(he),me&&m.icon.globeExtVertexBuffer.updateData(me))}function fy(m,l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he){const{lineStartIndex:me,glyphStartIndex:Z,segment:ce}=P,Ee=Z+P.numGlyphs,Ae=me+P.lineLength,je=l.getoffsetX(Z),$e=l.getoffsetX(Ee-1),Ne=bo(m*je,h,y,x,w,k,ce,me,Ae,D,j,F,H,ie,!0,ue,pe,he);if(!Ne)return null;const We=bo(m*$e,h,y,x,w,k,ce,me,Ae,D,j,F,H,ie,!0,ue,pe,he);return We?{first:Ne,last:We}:null}function Vl(m,l,h,y){return m===s.WritingMode.horizontal&&Math.abs(y)>Math.abs(h)?{useVertical:!0}:m===s.WritingMode.vertical?y>0?{needsFlipping:!0}:null:l!==Ei.unknown&&function(x,w){return x===0||Math.abs(w/x)>Qc}(h,y)?l===Ei.flipRequired?{needsFlipping:!0}:null:h<0?{needsFlipping:!0}:null}function Nt(m,l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he,me,Z,ce){const Ee=l/24,Ae=m.lineOffsetX*Ee,je=m.lineOffsetY*Ee,{lineStartIndex:$e,glyphStartIndex:Ne,numGlyphs:We,segment:Ue,writingMode:Je,flipState:xt}=m,Ze=$e+m.lineLength,ht=tt=>{if(F){const[wt,mt,St]=tt.up,en=j.length;s.updateGlobeVertexNormal(F,en+0,wt,mt,St),s.updateGlobeVertexNormal(F,en+1,wt,mt,St),s.updateGlobeVertexNormal(F,en+2,wt,mt,St),s.updateGlobeVertexNormal(F,en+3,wt,mt,St)}const[_t,Xe,dt]=tt.point;s.addDynamicAttributes(j,_t,Xe,dt,tt.angle)};if(We>1){const tt=fy(Ee,P,Ae,je,h,H,ie,m,D,w,ue,he,!1,me,Z,ce);if(!tt)return{notEnoughRoom:!0};if(y&&!h){let[_t,Xe,dt]=tt.first.point,[wt,mt,St]=tt.last.point;[_t,Xe]=Ti(_t,Xe,dt,k),[wt,mt]=Ti(wt,mt,St,k);const en=Vl(Je,xt,(wt-_t)*pe,mt-Xe);if(m.flipState=en&&en.needsFlipping?Ei.flipRequired:Ei.flipNotRequired,en)return en}ht(tt.first);for(let _t=Ne+1;_t<Ne+We-1;_t++){const Xe=bo(Ee*P.getoffsetX(_t),Ae,je,h,H,ie,Ue,$e,Ze,D,w,ue,he,!1,!1,me,Z,ce);if(!Xe)return j.length-=4*(_t-Ne),{notEnoughRoom:!0};ht(Xe)}ht(tt.last)}else{if(y&&!h){const _t=Ti(ie.x,ie.y,0,x),Xe=$e+Ue+1,dt=new s.Point(D.getx(Xe),D.gety(Xe)),wt=Ti(dt.x,dt.y,0,x),mt=wt[3]>0?wt:On(ie,dt,_t,1,x,void 0,me,Z.canonical),St=Vl(Je,xt,(mt[0]-_t[0])*pe,mt[1]-_t[1]);if(m.flipState=St&&St.needsFlipping?Ei.flipRequired:Ei.flipNotRequired,St)return St}const tt=bo(Ee*P.getoffsetX(Ne),Ae,je,h,H,ie,Ue,$e,Ze,D,w,ue,he,!1,!1,me,Z,ce);if(!tt)return{notEnoughRoom:!0};ht(tt)}return{}}function Nn(m,l,h,y,x){const{x:w,y:k,z:P}=y.projectTilePoint(m.x,m.y,l);if(!x)return Ti(w,k,P,h);const[D,j,F]=x(m);return Ti(w+D,k+j,P+F,h)}function On(m,l,h,y,x,w,k,P){const D=Nn(m.sub(l)._unit()._add(m),P,x,k,w);return s.sub(D,h,D),s.normalize(D,D),s.scaleAndAdd(D,h,D,y)}function bo(m,l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he,me,Z){const ce=y?m-l:m+l;let Ee=ce>0?1:-1,Ae=0;y&&(Ee*=-1,Ae=Math.PI),Ee<0&&(Ae+=Math.PI);let je=P+k+(Ee>0?0:1)|0,$e=x,Ne=x,We=0,Ue=0;const Je=Math.abs(ce),xt=[],Ze=[];let ht=w,tt=ht;const _t=()=>On(tt,ht,Ne,Je-We+1,F,ie,he,me.canonical);for(;We+Ue<=Je;){if(je+=Ee,je<P||je>=D)return null;if(Ne=$e,tt=ht,xt.push(Ne),ue&&Ze.push(tt),ht=new s.Point(j.getx(je),j.gety(je)),$e=H[je],!$e){const dn=Nn(ht,me.canonical,F,he,ie);$e=dn[3]>0?H[je]=dn:_t()}We+=Ue,Ue=s.distance(Ne,$e)}pe&&ie&&(H[je]&&($e=_t(),Ue=s.distance(Ne,$e)),H[je]=$e);const Xe=(Je-We)/Ue,dt=ht.sub(tt)._mult(Xe)._add(tt),wt=s.sub([],$e,Ne),mt=s.scaleAndAdd([],Ne,wt,Xe);let St=[0,0,1],en=wt[0],yn=wt[1];if(Z&&(St=he.upVector(me.canonical,dt.x,dt.y),St[0]!==0||St[1]!==0||St[2]!==1)){const dn=[St[2],0,-St[0]],Fn=s.cross([],St,dn);s.normalize(dn,dn),s.normalize(Fn,Fn),en=s.dot(wt,dn),yn=s.dot(wt,Fn)}if(h){const dn=s.cross([],St,wt);s.normalize(dn,dn),s.scaleAndAdd(mt,mt,dn,h*Ee)}const Gt=Ae+Math.atan2(yn,en);return xt.push(mt),ue&&Ze.push(dt),{point:mt,angle:Gt,path:xt,tilePath:Ze,up:St}}function Jo(m,l){const h=l.length,y=h+4*m;l.resize(y),l.float32.fill(-1/0,4*h,4*y)}function Bn(m,l,h){const y=l[0],x=l[1];return m[0]=h[0]*y+h[4]*x+h[12],m[1]=h[1]*y+h[5]*x+h[13],m[3]=h[3]*y+h[7]*x+h[15],m}const wo=100;class eu{constructor(l,h,y=new Ui(l.width+200,l.height+200,25),x=new Ui(l.width+200,l.height+200,25)){this.transform=l,this.grid=y,this.ignoredGrid=x,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+wo,this.screenBottomBoundary=l.height+wo,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=h}placeCollisionBox(l,h,y,x,w,k,P,D){let j=y.projectedAnchorX,F=y.projectedAnchorY,H=y.projectedAnchorZ;const ie=y.elevation,ue=y.tileID,pe=l.getProjection();if(ie&&ue){const[$e,Ne,We]=pe.upVector(ue.canonical,y.tileAnchorX,y.tileAnchorY),Ue=pe.upVectorScale(ue.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;j+=$e*ie*Ue,F+=Ne*ie*Ue,H+=We*ie*Ue}const he=this.projectAndGetPerspectiveRatio(P,j,F,H,y.tileID,pe.name==="globe"||!!ie||this.transform.pitch>0,pe),me=k*he.perspectiveRatio,Z=(y.x1*h+x.x-y.padding)*me+he.point.x,ce=(y.y1*h+x.y-y.padding)*me+he.point.y,Ee=(y.x2*h+x.x+y.padding)*me+he.point.x,Ae=(y.y2*h+x.y+y.padding)*me+he.point.y,je=he.perspectiveRatio<=.55||he.occluded;return!this.isInsideGrid(Z,ce,Ee,Ae)||!w&&this.grid.hitTest(Z,ce,Ee,Ae,D)||je?{box:[],offscreen:!1,occluded:he.occluded}:{box:[Z,ce,Ee,Ae],offscreen:this.isOffscreen(Z,ce,Ee,Ae),occluded:!1}}placeCollisionCircles(l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he){const me=[],Z=this.transform.elevation,ce=l.getProjection(),Ee=Z?Z.getAtTileOffsetFunc(he,this.transform.center.lat,this.transform.worldSize,ce):null,Ae=new s.Point(y.tileAnchorX,y.tileAnchorY);let{x:je,y:$e,z:Ne}=ce.projectTilePoint(Ae.x,Ae.y,he.canonical);if(Ee){const[dt,wt,mt]=Ee(Ae);je+=dt,$e+=wt,Ne+=mt}const We=ce.name==="globe",Ue=this.projectAndGetPerspectiveRatio(P,je,$e,Ne,he,We||!!Z||this.transform.pitch>0,ce),{perspectiveRatio:Je}=Ue,xt=(H?k/Je:k*Je)/s.ONE_EM,Ze=Ti(je,$e,Ne,D),ht=Ue.signedDistanceFromCamera>0?fy(xt,w,y.lineOffsetX*xt,y.lineOffsetY*xt,!1,Ze,Ae,y,x,D,{},Z&&!H?Ee:null,H&&!!Z,ce,he,H):null;let tt=!1,_t=!1,Xe=!0;if(ht&&!Ue.occluded){const dt=.5*ue*Je+pe,wt=new s.Point(-100,-100),mt=new s.Point(this.screenRightBoundary,this.screenBottomBoundary),St=new el,{first:en,last:yn}=ht,Gt=en.path.length;let dn=[];for(let Jt=Gt-1;Jt>=1;Jt--)dn.push(en.path[Jt]);for(let Jt=1;Jt<yn.path.length;Jt++)dn.push(yn.path[Jt]);const Fn=2.5*dt;j&&(dn=dn.map(([Jt,Yn,rr],ir)=>(Ee&&!We&&(rr=Ee(ir<Gt-1?en.tilePath[Gt-1-ir]:yn.tilePath[ir-Gt+2])[2]),Ti(Jt,Yn,rr,j))),dn.some(Jt=>Jt[3]<=0)&&(dn=[]));let Ln=[];if(dn.length>0){let Jt=1/0,Yn=-1/0,rr=1/0,ir=-1/0;for(const or of dn)Jt=Math.min(Jt,or[0]),rr=Math.min(rr,or[1]),Yn=Math.max(Yn,or[0]),ir=Math.max(ir,or[1]);Yn>=wt.x&&Jt<=mt.x&&ir>=wt.y&&rr<=mt.y&&(Ln=[dn.map(or=>new s.Point(or[0],or[1]))],(Jt<wt.x||Yn>mt.x||rr<wt.y||ir>mt.y)&&(Ln=s.clipLine(Ln,wt.x,wt.y,mt.x,mt.y)))}for(const Jt of Ln){St.reset(Jt,.25*dt);let Yn=0;Yn=St.length<=.5*dt?1:Math.ceil(St.paddedLength/Fn)+1;for(let rr=0;rr<Yn;rr++){const ir=rr/Math.max(Yn-1,1),or=St.lerp(ir),Gi=or.x+wo,Ai=or.y+wo;me.push(Gi,Ai,dt,0);const Ro=Gi-dt,bs=Ai-dt,Cr=Gi+dt,sr=Ai+dt;if(Xe=Xe&&this.isOffscreen(Ro,bs,Cr,sr),_t=_t||this.isInsideGrid(Ro,bs,Cr,sr),!h&&this.grid.hitTestCircle(Gi,Ai,dt,ie)&&(tt=!0,!F))return{circles:[],offscreen:!1,collisionDetected:tt,occluded:!1}}}}return{circles:!F&&tt||!_t?[]:me,offscreen:Xe,collisionDetected:tt,occluded:Ue.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let y=1/0,x=1/0,w=-1/0,k=-1/0;for(const F of l){const H=new s.Point(F.x+wo,F.y+wo);y=Math.min(y,H.x),x=Math.min(x,H.y),w=Math.max(w,H.x),k=Math.max(k,H.y),h.push(H)}const P=this.grid.query(y,x,w,k).concat(this.ignoredGrid.query(y,x,w,k)),D={},j={};for(const F of P){const H=F.key;if(D[H.bucketInstanceId]===void 0&&(D[H.bucketInstanceId]={}),D[H.bucketInstanceId][H.featureIndex])continue;const ie=[new s.Point(F.x1,F.y1),new s.Point(F.x2,F.y1),new s.Point(F.x2,F.y2),new s.Point(F.x1,F.y2)];s.polygonIntersectsPolygon(h,ie)&&(D[H.bucketInstanceId][H.featureIndex]=!0,j[H.bucketInstanceId]===void 0&&(j[H.bucketInstanceId]=[]),j[H.bucketInstanceId].push(H.featureIndex))}return j}insertCollisionBox(l,h,y,x,w){(h?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:w},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,h,y,x,w){const k=h?this.ignoredGrid:this.grid,P={bucketInstanceId:y,featureIndex:x,collisionGroupID:w};for(let D=0;D<l.length;D+=4)k.insertCircle(P,l[D],l[D+1],l[D+2])}projectAndGetPerspectiveRatio(l,h,y,x,w,k,P){const D=[h,y,x,1];let j=!1;x||this.transform.pitch>0?(s.transformMat4$1(D,D,l),this.fogState&&w&&P.name!=="globe"&&(j=function(ie,ue,pe,he,me,Z){const ce=Z.calculateFogTileMatrix(me),Ee=[ue,pe,he];return s.transformMat4(Ee,Ee,ce),te(ie,Ee,Z.pitch,Z._fov)}(this.fogState,h,y,x,w.toUnwrapped(),this.transform)>.9)):Bn(D,D,l);const F=D[3];return{point:new s.Point((D[0]/F+1)/2*this.transform.width+wo,(-D[1]/F+1)/2*this.transform.height+wo),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(P)/F*.5,1.5),signedDistanceFromCamera:F,occluded:k&&D[2]>F||j}}isOffscreen(l,h,y,x){return y<wo||l>=this.screenRightBoundary||x<wo||h>this.screenBottomBoundary}isInsideGrid(l,h,y,x){return y>=0&&l<this.gridRightBoundary&&x>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const l=s.identity([]);return s.translate(l,l,[-100,-100,0]),l}}function tl(m,l,h){const y=l.createTileMatrix(m,m.worldSize,h.toUnwrapped());return s.multiply(new Float32Array(16),m.projMatrix,y)}function Mo(m,l,h){if(l.projection.name===h.projection.name)return m.projMatrix;const y=h.clone();return y.setProjection(l.projection),tl(y,l.getProjection(),m)}function Tr(m,l,h){return l.name===h.projection.name?m.projMatrix:tl(h,l,m)}class py{constructor(l,h,y,x){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?h:-h))):x&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Ks{constructor(l,h,y,x,w,k=!1){this.text=new py(l?l.text:null,h,y,w),this.icon=new py(l?l.icon:null,h,x,w),this.clipped=k}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class tu{constructor(l,h,y,x=!1){this.text=l,this.icon=h,this.skipFade=y,this.clipped=x}}class nu{constructor(){this.invProjMatrix=s.create(),this.viewportMatrix=s.create(),this.circles=[]}}class Ff{constructor(l,h,y,x,w){this.bucketInstanceId=l,this.featureIndex=h,this.sourceLayerIndex=y,this.bucketIndex=x,this.tileID=w}}class my{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const h=++this.maxGroupID;this.collisionGroups[l]={ID:h,predicate:y=>y.collisionGroupID===h}}return this.collisionGroups[l]}}function ru(m,l,h,y,x){const{horizontalAlign:w,verticalAlign:k}=s.getAnchorAlignment(m),P=-(w-.5)*l,D=-(k-.5)*h,j=s.evaluateVariableOffset(m,y);return new s.Point(P+j[0]*x,D+j[1]*x)}function iu(m,l,h,y,x){const w=new s.Point(m,l);return h&&w._rotate(y?x:-x),w}class Ad{constructor(l,h,y,x,w){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new eu(this.transform,w),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=h,this.retainedQueryData={},this.collisionGroups=new my(y),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,h,y,x){const w=y.getBucket(h),k=y.latestFeatureIndex;if(!w||!k||h.id!==w.layerIds[0])return;const P=w.layers[0].layout,D=y.collisionBoxArray,j=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),F=y.tileSize/s.EXTENT,H=y.tileID.toUnwrapped();this.transform.setProjection(w.projection);const ie=(ue=y.tileID,pe=w.getProjection(),he=this.transform,pe.name===this.projection?he.calculateProjMatrix(ue.toUnwrapped()):tl(he,pe,ue));var ue,pe,he;const me=P.get("text-pitch-alignment")==="map",Z=P.get("text-rotation-alignment")==="map";h.compileFilter();const ce=h.dynamicFilter(),Ee=h.dynamicFilterNeedsFeature(),Ae=this.transform.calculatePixelsToTileUnitsMatrix(y),je=qs(ie,y.tileID.canonical,me,Z,this.transform,w.getProjection(),Ae);let $e=null;if(me){const Ue=Hr(ie,y.tileID.canonical,me,Z,this.transform,w.getProjection(),Ae);$e=s.multiply([],this.transform.labelPlaneMatrix,Ue)}let Ne=null;ce&&y.latestFeatureIndex&&(Ne={unwrappedTileID:H,dynamicFilter:ce,dynamicFilterNeedsFeature:Ee,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[w.bucketInstanceId]=new Ff(w.bucketInstanceId,k,w.sourceLayerIndex,w.index,y.tileID);const We={bucket:w,layout:P,posMatrix:ie,textLabelPlaneMatrix:je,labelToScreenMatrix:$e,clippingData:Ne,scale:j,textPixelRatio:F,holdingForFade:y.holdingForFade(),collisionBoxArray:D,partiallyEvaluatedTextSize:s.evaluateSizeForZoom(w.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:s.evaluateSizeForZoom(w.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(x)for(const Ue of w.sortKeyRanges){const{sortKey:Je,symbolInstanceStart:xt,symbolInstanceEnd:Ze}=Ue;l.push({sortKey:Je,symbolInstanceStart:xt,symbolInstanceEnd:Ze,parameters:We})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:We})}attemptAnchorPlacement(l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he,me,Z,ce){const{textOffset0:Ee,textOffset1:Ae,crossTileID:je}=ie,$e=[Ee,Ae],Ne=ru(l,y,x,$e,w),We=this.collisionIndex.placeCollisionBox(pe,w,h,iu(Ne.x,Ne.y,k,P,this.transform.angle),H,D,j,F.predicate);if(me){const Ue=pe.getSymbolInstanceIconSize(ce,this.transform.zoom,ie.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(pe,Ue,me,iu(Ne.x,Ne.y,k,P,this.transform.angle),H,D,j,F.predicate).box.length===0)return}if(We.box.length>0){let Ue;return this.prevPlacement&&this.prevPlacement.variableOffsets[je]&&this.prevPlacement.placements[je]&&this.prevPlacement.placements[je].text&&(Ue=this.prevPlacement.variableOffsets[je].anchor),this.variableOffsets[je]={textOffset:$e,width:y,height:x,anchor:l,textScale:w,prevAnchor:Ue},this.markUsedJustification(pe,l,ie,he),pe.allowVerticalPlacement&&(this.markUsedOrientation(pe,he,ie),this.placedOrientations[je]=he),{shift:Ne,placedGlyphBoxes:We}}}placeLayerBucketPart(l,h,y,x){const{bucket:w,layout:k,posMatrix:P,textLabelPlaneMatrix:D,labelToScreenMatrix:j,clippingData:F,textPixelRatio:H,holdingForFade:ie,collisionBoxArray:ue,partiallyEvaluatedTextSize:pe,partiallyEvaluatedIconSize:he,collisionGroup:me}=l.parameters,Z=k.get("text-optional"),ce=k.get("icon-optional"),Ee=k.get("text-allow-overlap"),Ae=k.get("icon-allow-overlap"),je=k.get("text-rotation-alignment")==="map",$e=k.get("text-pitch-alignment")==="map",Ne=k.get("icon-text-fit")!=="none",We=k.get("symbol-z-order")==="viewport-y";this.transform.setProjection(w.projection);let Ue=Ee&&(Ae||!w.hasIconData()||ce),Je=Ae&&(Ee||!w.hasTextData()||Z);!w.collisionArrays&&ue&&w.deserializeCollisionBoxes(ue),y&&x&&w.updateCollisionDebugBuffers(this.transform.zoom,ue);const xt=(Ze,ht,tt)=>{const{crossTileID:_t,numVerticalGlyphVertices:Xe}=Ze;if(F){const Cr={zoom:this.transform.zoom,pitch:this.transform.pitch};let sr=null;if(F.dynamicFilterNeedsFeature){const Hn=this.retainedQueryData[w.bucketInstanceId];sr=F.featureIndex.loadFeature({featureIndex:Ze.featureIndex,bucketIndex:Hn.bucketIndex,sourceLayerIndex:Hn.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,F.dynamicFilter)(Cr,sr,this.retainedQueryData[w.bucketInstanceId].tileID.canonical,new s.Point(Ze.tileAnchorX,Ze.tileAnchorY),this.transform.calculateDistanceTileData(F.unwrappedTileID)))return this.placements[_t]=new tu(!1,!1,!1,!0),void h.add(_t)}if(h.has(_t))return;if(ie)return void(this.placements[_t]=new tu(!1,!1,!1));let dt=!1,wt=!1,mt=!0,St=!1,en=!1,yn=null,Gt={box:null,offscreen:null,occluded:null},dn={box:null,offscreen:null,occluded:null},Fn=null,Ln=null,Jt=null,Yn=0,rr=0,ir=0;tt.textFeatureIndex?Yn=tt.textFeatureIndex:Ze.useRuntimeCollisionCircles&&(Yn=Ze.featureIndex),tt.verticalTextFeatureIndex&&(rr=tt.verticalTextFeatureIndex);const or=Cr=>{Cr.tileID=this.retainedQueryData[w.bucketInstanceId].tileID;const sr=this.transform.elevation;(sr||Cr.elevation)&&(Cr.elevation=sr?sr.getAtTileOffset(Cr.tileID,Cr.tileAnchorX,Cr.tileAnchorY):0)},Gi=tt.textBox;if(Gi){or(Gi);const Cr=Hn=>{let Zr=s.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Hn&&this.prevPlacement){const Yi=this.prevPlacement.placedOrientations[_t];Yi&&(this.placedOrientations[_t]=Yi,Zr=Yi,this.markUsedOrientation(w,Zr,Ze))}return Zr},sr=(Hn,Zr)=>{if(w.allowVerticalPlacement&&Xe>0&&tt.verticalTextBox){for(const Yi of w.writingModes)if(Yi===s.WritingMode.vertical?(Gt=Zr(),dn=Gt):Gt=Hn(),Gt&&Gt.box&&Gt.box.length)break}else Gt=Hn()};if(k.get("text-variable-anchor")){let Hn=k.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[_t]){const _r=this.prevPlacement.variableOffsets[_t];Hn.indexOf(_r.anchor)>0&&(Hn=Hn.filter(ao=>ao!==_r.anchor),Hn.unshift(_r.anchor))}const Zr=(_r,ao,eh)=>{const cl=w.getSymbolInstanceTextSize(pe,Ze,this.transform.zoom,ht),Eu=(_r.x2-_r.x1)*cl+2*_r.padding,na=(_r.y2-_r.y1)*cl+2*_r.padding,Sa=Ne&&!Ae?ao:null;Sa&&or(Sa);let ul={box:[],offscreen:!1,occluded:!1};const th=Ee?2*Hn.length:Hn.length;for(let Tu=0;Tu<th;++Tu){const kp=this.attemptAnchorPlacement(Hn[Tu%Hn.length],_r,Eu,na,cl,je,$e,H,P,me,Tu>=Hn.length,Ze,ht,w,eh,Sa,pe,he);if(kp&&(ul=kp.placedGlyphBoxes,ul&&ul.box&&ul.box.length)){dt=!0,yn=kp.shift;break}}return ul};sr(()=>Zr(Gi,tt.iconBox,s.WritingMode.horizontal),()=>{const _r=tt.verticalTextBox;return _r&&or(_r),w.allowVerticalPlacement&&!(Gt&&Gt.box&&Gt.box.length)&&Xe>0&&_r?Zr(_r,tt.verticalIconBox,s.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Gt&&(dt=Gt.box,mt=Gt.offscreen,St=Gt.occluded);const Yi=Cr(!(!Gt||!Gt.box));if(!dt&&this.prevPlacement){const _r=this.prevPlacement.variableOffsets[_t];_r&&(this.variableOffsets[_t]=_r,this.markUsedJustification(w,_r.anchor,Ze,Yi))}}else{const Hn=(Zr,Yi)=>{const _r=w.getSymbolInstanceTextSize(pe,Ze,this.transform.zoom,ht),ao=this.collisionIndex.placeCollisionBox(w,_r,Zr,new s.Point(0,0),Ee,H,P,me.predicate);return ao&&ao.box&&ao.box.length&&(this.markUsedOrientation(w,Yi,Ze),this.placedOrientations[_t]=Yi),ao};sr(()=>Hn(Gi,s.WritingMode.horizontal),()=>{const Zr=tt.verticalTextBox;return w.allowVerticalPlacement&&Xe>0&&Zr?(or(Zr),Hn(Zr,s.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),Cr(!!(Gt&&Gt.box&&Gt.box.length))}}if(Fn=Gt,dt=Fn&&Fn.box&&Fn.box.length>0,mt=Fn&&Fn.offscreen,St=Fn&&Fn.occluded,Ze.useRuntimeCollisionCircles){const Cr=w.text.placedSymbolArray.get(Ze.centerJustifiedTextSymbolIndex>=0?Ze.centerJustifiedTextSymbolIndex:Ze.verticalPlacedTextSymbolIndex),sr=s.evaluateSizeForFeature(w.textSizeData,pe,Cr),Hn=k.get("text-padding");Ln=this.collisionIndex.placeCollisionCircles(w,Ee,Cr,w.lineVertexArray,w.glyphOffsetArray,sr,P,D,j,y,$e,me.predicate,Ze.collisionCircleDiameter*sr/s.ONE_EM,Hn,this.retainedQueryData[w.bucketInstanceId].tileID),dt=Ee||Ln.circles.length>0&&!Ln.collisionDetected,mt=mt&&Ln.offscreen,St=Ln.occluded}if(tt.iconFeatureIndex&&(ir=tt.iconFeatureIndex),tt.iconBox){const Cr=sr=>{or(sr);const Hn=Ne&&yn?iu(yn.x,yn.y,je,$e,this.transform.angle):new s.Point(0,0),Zr=w.getSymbolInstanceIconSize(he,this.transform.zoom,Ze.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(w,Zr,sr,Hn,Ae,H,P,me.predicate)};dn&&dn.box&&dn.box.length&&tt.verticalIconBox?(Jt=Cr(tt.verticalIconBox),wt=Jt.box.length>0):(Jt=Cr(tt.iconBox),wt=Jt.box.length>0),mt=mt&&Jt.offscreen,en=Jt.occluded}const Ai=Z||Ze.numHorizontalGlyphVertices===0&&Xe===0,Ro=ce||Ze.numIconVertices===0;if(Ai||Ro?Ro?Ai||(wt=wt&&dt):dt=wt&&dt:wt=dt=wt&&dt,dt&&Fn&&Fn.box&&this.collisionIndex.insertCollisionBox(Fn.box,k.get("text-ignore-placement"),w.bucketInstanceId,dn&&dn.box&&rr?rr:Yn,me.ID),wt&&Jt&&this.collisionIndex.insertCollisionBox(Jt.box,k.get("icon-ignore-placement"),w.bucketInstanceId,ir,me.ID),Ln&&(dt&&this.collisionIndex.insertCollisionCircles(Ln.circles,k.get("text-ignore-placement"),w.bucketInstanceId,Yn,me.ID),y)){const Cr=w.bucketInstanceId;let sr=this.collisionCircleArrays[Cr];sr===void 0&&(sr=this.collisionCircleArrays[Cr]=new nu);for(let Hn=0;Hn<Ln.circles.length;Hn+=4)sr.circles.push(Ln.circles[Hn+0]),sr.circles.push(Ln.circles[Hn+1]),sr.circles.push(Ln.circles[Hn+2]),sr.circles.push(Ln.collisionDetected?1:0)}const bs=w.projection.name!=="globe";Ue=Ue&&(bs||!St),Je=Je&&(bs||!en),this.placements[_t]=new tu(dt||Ue,wt||Je,mt||w.justReloaded),h.add(_t)};if(We){const Ze=w.getSortedSymbolIndexes(this.transform.angle);for(let ht=Ze.length-1;ht>=0;--ht){const tt=Ze[ht];xt(w.symbolInstances.get(tt),tt,w.collisionArrays[tt])}}else for(let Ze=l.symbolInstanceStart;Ze<l.symbolInstanceEnd;Ze++)xt(w.symbolInstances.get(Ze),Ze,w.collisionArrays[Ze]);if(y&&w.bucketInstanceId in this.collisionCircleArrays){const Ze=this.collisionCircleArrays[w.bucketInstanceId];s.invert(Ze.invProjMatrix,P),Ze.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,h,y,x){const{leftJustifiedTextSymbolIndex:w,centerJustifiedTextSymbolIndex:k,rightJustifiedTextSymbolIndex:P,verticalPlacedTextSymbolIndex:D,crossTileID:j}=y,F=s.getAnchorJustification(h),H=x===s.WritingMode.vertical?D:F==="left"?w:F==="center"?k:F==="right"?P:-1;w>=0&&(l.text.placedSymbolArray.get(w).crossTileID=H>=0&&w!==H?0:j),k>=0&&(l.text.placedSymbolArray.get(k).crossTileID=H>=0&&k!==H?0:j),P>=0&&(l.text.placedSymbolArray.get(P).crossTileID=H>=0&&P!==H?0:j),D>=0&&(l.text.placedSymbolArray.get(D).crossTileID=H>=0&&D!==H?0:j)}markUsedOrientation(l,h,y){const x=h===s.WritingMode.horizontal||h===s.WritingMode.horizontalOnly?h:0,w=h===s.WritingMode.vertical?h:0,{leftJustifiedTextSymbolIndex:k,centerJustifiedTextSymbolIndex:P,rightJustifiedTextSymbolIndex:D,verticalPlacedTextSymbolIndex:j}=y,F=l.text.placedSymbolArray;k>=0&&(F.get(k).placedOrientation=x),P>=0&&(F.get(P).placedOrientation=x),D>=0&&(F.get(D).placedOrientation=x),j>=0&&(F.get(j).placedOrientation=w)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let y=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const x=h?h.symbolFadeChange(l):1,w=h?h.opacities:{},k=h?h.variableOffsets:{},P=h?h.placedOrientations:{};for(const D in this.placements){const j=this.placements[D],F=w[D];F?(this.opacities[D]=new Ks(F,x,j.text,j.icon,null,j.clipped),y=y||j.text!==F.text.placed||j.icon!==F.icon.placed):(this.opacities[D]=new Ks(null,x,j.text,j.icon,j.skipFade,j.clipped),y=y||j.text||j.icon)}for(const D in w){const j=w[D];if(!this.opacities[D]){const F=new Ks(j,x,!1,!1);F.isHidden()||(this.opacities[D]=F,y=y||j.text.placed||j.icon.placed)}}for(const D in k)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=k[D]);for(const D in P)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=P[D]);y?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:l)}updateLayerOpacities(l,h){const y=new Set;for(const x of h){const w=x.getBucket(l);w&&x.latestFeatureIndex&&l.id===w.layerIds[0]&&this.updateBucketOpacities(w,y,x.collisionBoxArray)}}updateBucketOpacities(l,h,y){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const x=l.layers[0].layout,w=!!l.layers[0].dynamicFilter(),k=new Ks(null,0,!1,!1,!0),P=x.get("text-allow-overlap"),D=x.get("icon-allow-overlap"),j=x.get("text-variable-anchor"),F=x.get("text-rotation-alignment")==="map",H=x.get("text-pitch-alignment")==="map",ie=x.get("icon-text-fit")!=="none",ue=new Ks(null,0,P&&(D||!l.hasIconData()||x.get("icon-optional")),D&&(P||!l.hasTextData()||x.get("text-optional")),!0);!l.collisionArrays&&y&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(y);const pe=(me,Z,ce)=>{for(let Ee=0;Ee<Z/4;Ee++)me.opacityVertexArray.emplaceBack(ce)};let he=0;for(let me=0;me<l.symbolInstances.length;me++){const Z=l.symbolInstances.get(me),{numHorizontalGlyphVertices:ce,numVerticalGlyphVertices:Ee,crossTileID:Ae,numIconVertices:je}=Z,$e=h.has(Ae);let Ne=this.opacities[Ae];$e?Ne=k:Ne||(Ne=ue,this.opacities[Ae]=Ne),h.add(Ae);const We=ce>0||Ee>0,Ue=je>0,Je=this.placedOrientations[Ae],xt=Je===s.WritingMode.vertical,Ze=Je===s.WritingMode.horizontal||Je===s.WritingMode.horizontalOnly;if(!We&&!Ue||Ne.isHidden()||he++,We){const ht=ou(Ne.text);pe(l.text,ce,xt?zr:ht),pe(l.text,Ee,Ze?zr:ht);const tt=Ne.text.isHidden(),{leftJustifiedTextSymbolIndex:_t,centerJustifiedTextSymbolIndex:Xe,rightJustifiedTextSymbolIndex:dt,verticalPlacedTextSymbolIndex:wt}=Z,mt=l.text.placedSymbolArray,St=tt||xt?1:0;_t>=0&&(mt.get(_t).hidden=St),Xe>=0&&(mt.get(Xe).hidden=St),dt>=0&&(mt.get(dt).hidden=St),wt>=0&&(mt.get(wt).hidden=tt||Ze?1:0);const en=this.variableOffsets[Ae];en&&this.markUsedJustification(l,en.anchor,Z,Je);const yn=this.placedOrientations[Ae];yn&&(this.markUsedJustification(l,"left",Z,yn),this.markUsedOrientation(l,yn,Z))}if(Ue){const ht=ou(Ne.icon),{placedIconSymbolIndex:tt,verticalPlacedIconSymbolIndex:_t}=Z,Xe=l.icon.placedSymbolArray,dt=Ne.icon.isHidden()?1:0;tt>=0&&(pe(l.icon,je,xt?zr:ht),Xe.get(tt).hidden=dt),_t>=0&&(pe(l.icon,Z.numVerticalIconVertices,Ze?zr:ht),Xe.get(_t).hidden=dt)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const ht=l.collisionArrays[me];if(ht){let tt=new s.Point(0,0),_t=!0;if(ht.textBox||ht.verticalTextBox){if(j){const dt=this.variableOffsets[Ae];dt?(tt=ru(dt.anchor,dt.width,dt.height,dt.textOffset,dt.textScale),F&&tt._rotate(H?this.transform.angle:-this.transform.angle)):_t=!1}w&&(_t=!Ne.clipped),ht.textBox&&Ul(l.textCollisionBox.collisionVertexArray,Ne.text.placed,!_t||xt,tt.x,tt.y),ht.verticalTextBox&&Ul(l.textCollisionBox.collisionVertexArray,Ne.text.placed,!_t||Ze,tt.x,tt.y)}const Xe=_t&&!!(!Ze&&ht.verticalIconBox);ht.iconBox&&Ul(l.iconCollisionBox.collisionVertexArray,Ne.icon.placed,Xe,ie?tt.x:0,ie?tt.y:0),ht.verticalIconBox&&Ul(l.iconCollisionBox.collisionVertexArray,Ne.icon.placed,!Xe,ie?tt.x:0,ie?tt.y:0)}}}if(l.fullyClipped=he===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=me.invProjMatrix,l.placementViewportMatrix=me.viewportMatrix,l.collisionCircleArray=me.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,h){const y=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*y>l}setStale(){this.stale=!0}}function Ul(m,l,h,y,x){m.emplaceBack(l?1:0,h?1:0,y||0,x||0),m.emplaceBack(l?1:0,h?1:0,y||0,x||0),m.emplaceBack(l?1:0,h?1:0,y||0,x||0),m.emplaceBack(l?1:0,h?1:0,y||0,x||0)}const oo=Math.pow(2,25),$r=Math.pow(2,24),jf=Math.pow(2,17),Nf=Math.pow(2,16),so=Math.pow(2,9),Do=Math.pow(2,8),gy=Math.pow(2,1);function ou(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const l=m.placed?1:0,h=Math.floor(127*m.opacity);return h*oo+l*$r+h*jf+l*Nf+h*so+l*Do+h*gy+l}const zr=0;class su{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,h,y,x,w){const k=this._bucketParts;for(;this._currentTileIndex<l.length;)if(h.getBucketParts(k,x,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((P,D)=>P.sortKey-D.sortKey));this._currentPartIndex<k.length;){const P=k[this._currentPartIndex];if(h.placeLayerBucketPart(P,this._seenCrossTileIDs,y,P.symbolInstanceStart===0),this._currentPartIndex++,w())return!0}return!1}}class $f{constructor(l,h,y,x,w,k,P,D){this.placement=new Ad(l,w,k,P,D),this._currentPlacementIndex=h.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(l,h,y){const x=s.exported.now(),w=()=>{const k=s.exported.now()-x;return!this._forceFullPlacement&&k>2};for(;this._currentPlacementIndex>=0;){const k=h[l[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=P)&&(!k.maxzoom||k.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new su(k)),this._inProgressLayer.continuePlacement(y[k.source],this.placement,this._showCollisionBoxes,k,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const nl=512/s.EXTENT/2;class Ri{constructor(l,h,y){this.tileID=l,this.bucketInstanceId=y,this.index=new s.KDBush(h.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const x=l.canonical.x*s.EXTENT,w=l.canonical.y*s.EXTENT;for(let k=0;k<h.length;k++){const{key:P,crossTileID:D,tileAnchorX:j,tileAnchorY:F}=h.get(k),H=Math.floor((x+j)*nl),ie=Math.floor((w+F)*nl);this.index.add(H,ie),this.keys.push(P),this.crossTileIDs.push(D)}this.index.finish()}findMatches(l,h,y){const x=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z),w=nl/Math.pow(2,h.canonical.z-this.tileID.canonical.z),k=h.canonical.x*s.EXTENT,P=h.canonical.y*s.EXTENT;for(let D=0;D<l.length;D++){const j=l.get(D);if(j.crossTileID)continue;const{key:F,tileAnchorX:H,tileAnchorY:ie}=j,ue=Math.floor((k+H)*w),pe=Math.floor((P+ie)*w),he=this.index.range(ue-x,pe-x,ue+x,pe+x);for(const me of he){const Z=this.crossTileIDs[me];if(this.keys[me]===F&&!y.has(Z)){y.add(Z),j.crossTileID=Z;break}}}}}class Vf{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Uf{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const h=Math.round((l-this.lng)/360);if(h!==0)for(const y in this.indexes){const x=this.indexes[y],w={};for(const k in x){const P=x[k];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+h),w[P.tileID.key]=P}this.indexes[y]=w}this.lng=l}addBucket(l,h,y){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let w=0;w<h.symbolInstances.length;w++)h.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const x=this.usedCrossTileIDs[l.overscaledZ];for(const w in this.indexes){const k=this.indexes[w];if(Number(w)>l.overscaledZ)for(const P in k){const D=k[P];D.tileID.isChildOf(l)&&D.findMatches(h.symbolInstances,l,x)}else{const P=k[l.scaledTo(Number(w)).key];P&&P.findMatches(h.symbolInstances,l,x)}}for(let w=0;w<h.symbolInstances.length;w++){const k=h.symbolInstances.get(w);k.crossTileID||(k.crossTileID=y.generate(),x.add(k.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Ri(l,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(l,h){for(const y of h.crossTileIDs)this.usedCrossTileIDs[l].delete(y)}removeStaleBuckets(l){let h=!1;for(const y in this.indexes){const x=this.indexes[y];for(const w in x)l[x[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,x[w]),delete x[w],h=!0)}return h}}class Xs{constructor(){this.layerIndexes={},this.crossTileIDs=new Vf,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,h,y,x){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new Uf);let k=!1;const P={};x.name!=="globe"&&w.handleWrapJump(y);for(const D of h){const j=D.getBucket(l);j&&l.id===j.layerIds[0]&&(j.bucketInstanceId||(j.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(D.tileID,j,this.crossTileIDs)&&(k=!0),P[j.bucketInstanceId]=!0)}return w.removeStaleBuckets(P)&&(k=!0),k}pruneUnusedLayers(l){const h={};l.forEach(y=>{h[y]=!0});for(const y in this.layerIndexes)h[y]||delete this.layerIndexes[y]}}const ba=(m,l)=>s.emitValidationErrors(m,l&&l.filter(h=>h.identifier!=="source.canvas")),kd=s.pick(un,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),n1=s.pick(un,["setCenter","setZoom","setBearing","setPitch"]),Wf={version:8,layers:[],sources:{}},Wl={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class vs extends s.Evented{constructor(l,h={}){super(),this.map=l,this.dispatcher=new Ge(hn(),this),this.imageManager=new Be,this.imageManager.setEventedParent(this),this.glyphManager=new s.GlyphManager(l._requestManager,h.localFontFamily?s.LocalGlyphMode.all:h.localIdeographFontFamily?s.LocalGlyphMode.ideographs:s.LocalGlyphMode.none,h.localFontFamily||h.localIdeographFontFamily),this.crossTileSymbolIndex=new Xs,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",s.getReferrer());const y=this;this._rtlTextPluginCallback=vs.registerForPluginStateChange(x=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(w,k)=>{if(s.triggerPluginCompletionEvent(w),k&&k.every(P=>P))for(const P in y._sourceCaches){const D=y._sourceCaches[P],j=D.getSource().type;j!=="vector"&&j!=="geojson"||D.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const w=this.getSource(x.sourceId);if(w&&w.vectorLayerIds)for(const k in this._layers){const P=this._layers[k];P.source===w.id&&this._validateLayer(P)}})}loadURL(l,h={}){this.fire(new s.Event("dataloading",{dataType:"style"}));const y=typeof h.validate=="boolean"?h.validate:!s.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,h.accessToken);const x=this.map._requestManager.transformRequest(l,s.ResourceType.Style);this._request=s.getJSON(x,(w,k)=>{this._request=null,w?this.fire(new s.ErrorEvent(w)):k&&this._load(k,y)})}loadJSON(l,h={}){this.fire(new s.Event("dataloading",{dataType:"style"})),this._request=s.exported.frame(()=>{this._request=null,this._load(l,h.validate!==!1)})}loadEmpty(){this.fire(new s.Event("dataloading",{dataType:"style"})),this._load(Wf,!1)}_updateLayerCount(l,h){const y=h?1:-1;l.is3D()&&(this._num3DLayers+=y),l.type==="circle"&&(this._numCircleLayers+=y),l.type==="symbol"&&(this._numSymbolLayers+=y)}_load(l,h){if(h&&ba(this,s.validateStyle(l)))return;this._loaded=!0,this.stylesheet=s.clone$1(l),this._updateMapProjection();for(const x in l.sources)this.addSource(x,l.sources[x],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const y=yr(this.stylesheet.layers);this._order=y.map(x=>x.id),this._layers={},this._serializedLayers={};for(const x of y){const w=s.createStyleLayer(x);w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new xe(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new s.Event("data",{dataType:"style"})),this.fire(new s.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(h,y,x){let w,k,P;const D=s.exported.devicePixelRatio>1?"@2x":"";let j=s.getJSON(y.transformRequest(y.normalizeSpriteURL(h,D,".json"),s.ResourceType.SpriteJSON),(ie,ue)=>{j=null,P||(P=ie,w=ue,H())}),F=s.getImage(y.transformRequest(y.normalizeSpriteURL(h,D,".png"),s.ResourceType.SpriteImage),(ie,ue)=>{F=null,P||(P=ie,k=ue,H())});function H(){if(P)x(P);else if(w&&k){const ie=s.exported.getImageData(k),ue={};for(const pe in w){const{width:he,height:me,x:Z,y:ce,sdf:Ee,pixelRatio:Ae,stretchX:je,stretchY:$e,content:Ne}=w[pe],We=new s.RGBAImage({width:he,height:me});s.RGBAImage.copy(ie,We,{x:Z,y:ce},{x:0,y:0},{width:he,height:me}),ue[pe]={data:We,pixelRatio:Ae,sdf:Ee,stretchX:je,stretchY:$e,content:Ne}}x(null,ue)}}return{cancel(){j&&(j.cancel(),j=null),F&&(F.cancel(),F=null)}}}(l,this.map._requestManager,(h,y)=>{if(this._spriteRequest=null,h)this.fire(new s.ErrorEvent(h));else if(y)for(const x in y)this.imageManager.addImage(x,y[x]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new s.Event("data",{dataType:"style"}))})}_validateLayer(l){const h=this.getSource(l.source);if(!h)return;const y=l.sourceLayer;y&&(h.type==="geojson"||h.vectorLayerIds&&h.vectorLayerIds.indexOf(y)===-1)&&this.fire(new s.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${h.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const h=[];for(const y of l){const x=this._layers[y];x.type!=="custom"&&h.push(x.serialize())}return h}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped():Wl[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const h=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(x.length||w.length)&&this._updateWorkerLayers(x,w);for(const k in this._updatedSources){const P=this._updatedSources[k];P==="reload"?this._reloadSource(k):P==="clear"&&this._clearSource(k)}this._updateTilesForChangedImages();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const y={};for(const x in this._sourceCaches){const w=this._sourceCaches[x];y[x]=w.used,w.used=!1}for(const x of this._order){const w=this._layers[x];if(w.recalculate(l,this._availableImages),!w.isHidden(l.zoom)){const P=this._getLayerSourceCache(w);P&&(P.used=!0)}const k=this.map.painter;if(k){const P=w.getProgramIds();if(!P)continue;const D=w.getProgramConfiguration(l.zoom);for(const j of P)k.useProgram(j,D)}}for(const x in y){const w=this._sourceCaches[x];y[x]!==w.used&&w.getSource().fire(new s.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),h&&this.fire(new s.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const h in this._sourceCaches)this._sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,h){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),ba(this,s.validateStyle(l)))return!1;(l=s.clone$1(l)).layers=yr(l.layers);const h=function(x,w){if(!x)return[{command:un.setStyle,args:[w]}];let k=[];try{if(!_(x.version,w.version))return[{command:un.setStyle,args:[w]}];_(x.center,w.center)||k.push({command:un.setCenter,args:[w.center]}),_(x.zoom,w.zoom)||k.push({command:un.setZoom,args:[w.zoom]}),_(x.bearing,w.bearing)||k.push({command:un.setBearing,args:[w.bearing]}),_(x.pitch,w.pitch)||k.push({command:un.setPitch,args:[w.pitch]}),_(x.sprite,w.sprite)||k.push({command:un.setSprite,args:[w.sprite]}),_(x.glyphs,w.glyphs)||k.push({command:un.setGlyphs,args:[w.glyphs]}),_(x.transition,w.transition)||k.push({command:un.setTransition,args:[w.transition]}),_(x.light,w.light)||k.push({command:un.setLight,args:[w.light]}),_(x.fog,w.fog)||k.push({command:un.setFog,args:[w.fog]}),_(x.projection,w.projection)||k.push({command:un.setProjection,args:[w.projection]});const P={},D=[];(function(H,ie,ue,pe){let he;for(he in ie=ie||{},H=H||{})H.hasOwnProperty(he)&&(ie.hasOwnProperty(he)||Dn(he,ue,pe));for(he in ie){if(!ie.hasOwnProperty(he))continue;const me=ie[he];H.hasOwnProperty(he)?_(H[he],me)||(H[he].type==="geojson"&&me.type==="geojson"&&nr(H,ie,he)?ue.push({command:un.setGeoJSONSourceData,args:[he,me.data]}):Qt(he,ie,ue,pe)):Nr(he,ie,ue)}})(x.sources,w.sources,D,P);const j=[];x.layers&&x.layers.forEach(H=>{H.source&&P[H.source]?k.push({command:un.removeLayer,args:[H.id]}):j.push(H)});let F=x.terrain;F&&P[F.source]&&(k.push({command:un.setTerrain,args:[void 0]}),F=void 0),k=k.concat(D),_(F,w.terrain)||k.push({command:un.setTerrain,args:[w.terrain]}),function(H,ie,ue){ie=ie||[];const pe=(H=H||[]).map(Dr),he=ie.map(Dr),me=H.reduce(io,{}),Z=ie.reduce(io,{}),ce=pe.slice(),Ee=Object.create(null);let Ae,je,$e,Ne,We,Ue,Je;for(Ae=0,je=0;Ae<pe.length;Ae++)$e=pe[Ae],Z.hasOwnProperty($e)?je++:(ue.push({command:un.removeLayer,args:[$e]}),ce.splice(ce.indexOf($e,je),1));for(Ae=0,je=0;Ae<he.length;Ae++)$e=he[he.length-1-Ae],ce[ce.length-1-Ae]!==$e&&(me.hasOwnProperty($e)?(ue.push({command:un.removeLayer,args:[$e]}),ce.splice(ce.lastIndexOf($e,ce.length-je),1)):je++,Ue=ce[ce.length-Ae],ue.push({command:un.addLayer,args:[Z[$e],Ue]}),ce.splice(ce.length-Ae,0,$e),Ee[$e]=!0);for(Ae=0;Ae<he.length;Ae++)if($e=he[Ae],Ne=me[$e],We=Z[$e],!Ee[$e]&&!_(Ne,We))if(_(Ne.source,We.source)&&_(Ne["source-layer"],We["source-layer"])&&_(Ne.type,We.type)){for(Je in zn(Ne.layout,We.layout,ue,$e,null,un.setLayoutProperty),zn(Ne.paint,We.paint,ue,$e,null,un.setPaintProperty),_(Ne.filter,We.filter)||ue.push({command:un.setFilter,args:[$e,We.filter]}),_(Ne.minzoom,We.minzoom)&&_(Ne.maxzoom,We.maxzoom)||ue.push({command:un.setLayerZoomRange,args:[$e,We.minzoom,We.maxzoom]}),Ne)Ne.hasOwnProperty(Je)&&Je!=="layout"&&Je!=="paint"&&Je!=="filter"&&Je!=="metadata"&&Je!=="minzoom"&&Je!=="maxzoom"&&(Je.indexOf("paint.")===0?zn(Ne[Je],We[Je],ue,$e,Je.slice(6),un.setPaintProperty):_(Ne[Je],We[Je])||ue.push({command:un.setLayerProperty,args:[$e,Je,We[Je]]}));for(Je in We)We.hasOwnProperty(Je)&&!Ne.hasOwnProperty(Je)&&Je!=="layout"&&Je!=="paint"&&Je!=="filter"&&Je!=="metadata"&&Je!=="minzoom"&&Je!=="maxzoom"&&(Je.indexOf("paint.")===0?zn(Ne[Je],We[Je],ue,$e,Je.slice(6),un.setPaintProperty):_(Ne[Je],We[Je])||ue.push({command:un.setLayerProperty,args:[$e,Je,We[Je]]}))}else ue.push({command:un.removeLayer,args:[$e]}),Ue=ce[ce.lastIndexOf($e)+1],ue.push({command:un.addLayer,args:[We,Ue]})}(j,w.layers,k)}catch(P){console.warn("Unable to compute style diff:",P),k=[{command:un.setStyle,args:[w]}]}return k}(this.serialize(),l).filter(x=>!(x.command in n1));if(h.length===0)return!1;const y=h.filter(x=>!(x.command in kd));if(y.length>0)throw new Error(`Unimplemented: ${y.map(x=>x.command).join(", ")}.`);return h.forEach(x=>{x.command!=="setTransition"&&x.command!=="setProjection"&&this[x.command].apply(this,x.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,h){return this.getImage(l)?this.fire(new s.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,h),this._afterImageUpdated(l),this)}updateImage(l,h){this.imageManager.updateImage(l,h)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new s.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new s.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,h,y={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(s.validateSource,`sources.${l}`,h,null,y))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const x=Xt(l,h,this.dispatcher,this);x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:x.serialize(),sourceId:l}));const w=k=>{const P=(k?"symbol:":"other:")+l,D=this._sourceCaches[P]=new s.SourceCache(P,x,k);(k?this._symbolSourceCaches:this._otherSourceCaches)[l]=D,D.style=this,D.onAdd(this.map)};w(!1),h.type!=="vector"&&h.type!=="geojson"||w(!0),x.onAdd&&x.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const h=this.getSource(l);if(!h)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===l)return this.fire(new s.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new s.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(l);for(const x of y)delete this._sourceCaches[x.id],delete this._updatedSources[x.id],x.fire(new s.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],h.setEventedParent(null),h.onRemove&&h.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,h){this._checkLoaded(),this.getSource(l).setData(h),this._changed=!0}getSource(l){const h=this._getSourceCache(l);return h&&h.getSource()}_getSources(){const l=[];for(const h in this._otherSourceCaches){const y=this._getSourceCache(h);y&&l.push(y.getSource())}return l}addLayer(l,h,y={}){this._checkLoaded();const x=l.id;if(this.getLayer(x))return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${x}" already exists on this map`)));let w;if(l.type==="custom"){if(ba(this,s.validateCustomStyleLayer(l)))return;w=s.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(x,l.source),l=s.clone$1(l),l=s.extend(l,{source:x})),this._validate(s.validateLayer,`layers.${x}`,l,{arrayIndex:-1},y))return;w=s.createStyleLayer(l),this._validateLayer(w),w.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[w.id]=w.serialize(),this._updateLayerCount(w,!0)}const k=h?this._order.indexOf(h):this._order.length;if(h&&k===-1)return void this.fire(new s.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`)));this._order.splice(k,0,x),this._layerOrderChanged=!0,this._layers[x]=w;const P=this._getLayerSourceCache(w);if(this._removedLayers[x]&&w.source&&P&&w.type!=="custom"){const D=this._removedLayers[x];delete this._removedLayers[x],D.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",P.pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,h){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===h)return;const y=this._order.indexOf(l);this._order.splice(y,1);const x=h?this._order.indexOf(h):this._order.length;h&&x===-1?this.fire(new s.ErrorEvent(new Error(`Layer with id "${h}" does not exist on this map.`))):(this._order.splice(x,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const h=this._layers[l];if(!h)return void this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));h.setEventedParent(null),this._updateLayerCount(h,!1);const y=this._order.indexOf(l);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=h,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],h.onRemove&&h.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const h in this._layers)if(this._layers[h].type===l)return!0;return!1}setLayerZoomRange(l,h,y){this._checkLoaded();const x=this.getLayer(l);x?x.minzoom===h&&x.maxzoom===y||(h!=null&&(x.minzoom=h),y!=null&&(x.maxzoom=y),this._updateLayer(x)):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,h,y={}){this._checkLoaded();const x=this.getLayer(l);if(x){if(!_(x.filter,h))return h==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(s.validateFilter,`layers.${x.id}.filter`,h,{layerType:x.type},y)||(x.filter=s.clone$1(h),this._updateLayer(x)))}else this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const h=this.getLayer(l);return h&&s.clone$1(h.filter)}setLayoutProperty(l,h,y,x={}){this._checkLoaded();const w=this.getLayer(l);w?_(w.getLayoutProperty(h),y)||(w.setLayoutProperty(h,y,x),this._updateLayer(w)):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,h){const y=this.getLayer(l);if(y)return y.getLayoutProperty(h);this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,h,y,x={}){this._checkLoaded();const w=this.getLayer(l);w?_(w.getPaintProperty(h),y)||(w.setPaintProperty(h,y,x)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new s.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,h){const y=this.getLayer(l);return y&&y.getPaintProperty(h)}setFeatureState(l,h){this._checkLoaded();const y=l.source,x=l.sourceLayer,w=this.getSource(y);if(!w)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const k=w.type;if(k==="geojson"&&x)return void this.fire(new s.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(k==="vector"&&!x)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided.")));const P=this._getSourceCaches(y);for(const D of P)D.setFeatureState(x,l.id,h)}removeFeatureState(l,h){this._checkLoaded();const y=l.source,x=this.getSource(y);if(!x)return void this.fire(new s.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const w=x.type,k=w==="vector"?l.sourceLayer:void 0;if(w==="vector"&&!k)return void this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(h&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new s.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const P=this._getSourceCaches(y);for(const D of P)D.removeFeatureState(k,l.id,h)}getFeatureState(l){this._checkLoaded();const h=l.source,y=l.sourceLayer,x=this.getSource(h);if(x){if(x.type!=="vector"||y)return l.id===void 0&&this.fire(new s.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(h)[0].getFeatureState(y,l.id);this.fire(new s.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new s.ErrorEvent(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return s.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const h in this._sourceCaches){const y=this._sourceCaches[h].getSource();l[y.id]||(l[y.id]=y.serialize())}return s.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},h=>h!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const h=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&h&&h.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",h.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const h=k=>this._layers[k].type==="fill-extrusion",y={},x=[];for(let k=this._order.length-1;k>=0;k--){const P=this._order[k];if(h(P)){y[P]=k;for(const D of l){const j=D[P];if(j)for(const F of j)x.push(F)}}}x.sort((k,P)=>P.intersectionZ-k.intersectionZ);const w=[];for(let k=this._order.length-1;k>=0;k--){const P=this._order[k];if(h(P))for(let D=x.length-1;D>=0;D--){const j=x[D].feature;if(y[j.layer.id]<k)break;w.push(j),x.pop()}else for(const D of l){const j=D[P];if(j)for(const F of j)w.push(F.feature)}}return w}queryRenderedFeatures(l,h,y){h&&h.filter&&this._validate(s.validateFilter,"queryRenderedFeatures.filter",h.filter,null,h);const x={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new s.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const D of h.layers){const j=this._layers[D];if(!j)return this.fire(new s.ErrorEvent(new Error(`The layer '${D}' does not exist in the map's style and cannot be queried for features.`))),[];x[j.source]=!0}}const w=[];h.availableImages=this._availableImages;const k=h&&h.layers?h.layers.some(D=>{const j=this.getLayer(D);return j&&j.is3D()}):this.has3DLayers(),P=Ct.createFromScreenPoints(l,y);for(const D in this._sourceCaches){const j=this._sourceCaches[D].getSource().id;h.layers&&!x[j]||w.push(qt(this._sourceCaches[D],this._layers,this._serializedLayers,P,h,y,k,!!this.map._showQueryGeometry))}return this.placement&&w.push(function(D,j,F,H,ie,ue,pe){const he={},me=ue.queryRenderedSymbols(H),Z=[];for(const ce of Object.keys(me).map(Number))Z.push(pe[ce]);Z.sort(jn);for(const ce of Z){const Ee=ce.featureIndex.lookupSymbolFeatures(me[ce.bucketInstanceId],j,ce.bucketIndex,ce.sourceLayerIndex,ie.filter,ie.layers,ie.availableImages,D);for(const Ae in Ee){const je=he[Ae]=he[Ae]||[],$e=Ee[Ae];$e.sort((Ne,We)=>{const Ue=ce.featureSortOrder;if(Ue){const Je=Ue.indexOf(Ne.featureIndex);return Ue.indexOf(We.featureIndex)-Je}return We.featureIndex-Ne.featureIndex});for(const Ne of $e)je.push(Ne)}}for(const ce in he)he[ce].forEach(Ee=>{const Ae=Ee.feature,je=F(D[ce]);if(!je)return;const $e=je.getFeatureState(Ae.layer["source-layer"],Ae.id);Ae.source=Ae.layer.source,Ae.layer["source-layer"]&&(Ae.sourceLayer=Ae.layer["source-layer"]),Ae.state=$e});return he}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),P.screenGeometry,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(l,h){h&&h.filter&&this._validate(s.validateFilter,"querySourceFeatures.filter",h.filter,null,h);const y=this._getSourceCaches(l);let x=[];for(const w of y)x=x.concat(wn(w,h));return x}addSourceType(l,h,y){return vs.getSourceType(l)?y(new Error(`A source type called "${l}" already exists.`)):(vs.setSourceType(l,h),h.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:h.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(l,h={}){this._checkLoaded();const y=this.light.getLight();let x=!1;for(const k in l)if(!_(l[k],y[k])){x=!0;break}if(!x)return;const w=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,h),this.light.updateTransitions(w)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,h=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=l;if(h===1){if(typeof y.source=="object"){const x="terrain-dem-src";this.addSource(x,y.source),y=s.clone$1(y),y=s.extend(y,{source:x})}if(this._validate(s.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&h!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,h)}else{const x=this.terrain,w=x.get();for(const k of Object.keys(s.spec.terrain))!y.hasOwnProperty(k)&&s.spec.terrain[k].default&&(y[k]=s.spec.terrain[k].default);for(const k in y)if(!_(y[k],w[k])){x.set(y),this.stylesheet.terrain=y;const P=this._setTransitionParameters({duration:0});x.updateTransitions(P);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const h=this.fog=new Fe(l,this.map.transform);this.stylesheet.fog=l;const y=this._setTransitionParameters({duration:0});h.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const h=this.fog,y=h.get();Object.keys(l).length===0&&h.set(l);for(const x in l)if(!_(l[x],y[x])){h.set(l),this.stylesheet.fog=l;const w=this._setTransitionParameters({duration:0});h.updateTransitions(w);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:s.exported.now(),transition:s.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(y=>this.isLayerDraped(this._layers[y])),h=this._order.filter(y=>!this.isLayerDraped(this._layers[y]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...h)}_createTerrain(l,h){const y=this.terrain=new oe(l,h);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const x=this._setTransitionParameters({duration:0});y.updateTransitions(x)}_force3DLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="fill-extrusion"&&this._updateLayer(h)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const h=this._layers[l];h.type==="symbol"&&this._updateLayer(h)}}_validate(l,h,y,x,w={}){return(!w||w.validate!==!1)&&ba(this,l.call(s.validateStyle,s.extend({key:h,style:this.serialize(),value:y,styleSpec:s.spec},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),s.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const h=this._getSourceCaches(l);for(const y of h)y.clearTiles()}_reloadSource(l){const h=this._getSourceCaches(l);for(const y of h)y.resume(),y.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const h in this._sourceCaches)this._sourceCaches[h].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const h=this._sourceCaches[l];h.resume(),h.reload()}}_updatePlacement(l,h,y,x,w=!1){let k=!1,P=!1;const D={};for(const j of this._order){const F=this._layers[j];if(F.type!=="symbol")continue;if(!D[F.source]){const ie=this._getLayerSourceCache(F);if(!ie)continue;D[F.source]=ie.getRenderableIds(!0).map(ue=>ie.getTileByID(ue)).sort((ue,pe)=>pe.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(pe.tileID)?-1:1))}const H=this.crossTileSymbolIndex.addLayer(F,D[F.source],l.center.lng,l.projection);k=k||H}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),w=w||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new s.Event("neworder")),(w||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(s.exported.now(),l.zoom))&&(this.pauseablePlacement=new $f(l,this._order,w,h,y,x,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(s.exported.now()),P=!0),k&&this.pauseablePlacement.placement.setStale()),P||k)for(const j of this._order){const F=this._layers[j];F.type==="symbol"&&this.placement.updateLayerOpacities(F,D[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(s.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,h,y){this.imageManager.getImages(h.icons,y),this._updateTilesForChangedImages();const x=w=>{w&&w.setDependencies(h.tileID.key,h.type,h.icons)};x(this._otherSourceCaches[h.source]),x(this._symbolSourceCaches[h.source])}getGlyphs(l,h,y){this.glyphManager.getGlyphs(h.stacks,y)}getResource(l,h,y){return s.makeRequest(h,y)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const h=[];return this._otherSourceCaches[l]&&h.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&h.push(this._symbolSourceCaches[l]),h}_isSourceCacheLoaded(l){const h=this._getSourceCaches(l);return h.length===0?(this.fire(new s.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):h.every(y=>y.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}vs.getSourceType=function(m){return Mt[m]},vs.setSourceType=function(m,l){Mt[m]=l},vs.registerForPluginStateChange=s.registerForPluginStateChange;var Gf=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,rl="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",Js=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,au=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ys=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let Id={},Gl={};const lu=[];Hl(Gf,lu),Hl(Js,lu),Hl(au,lu),Hl(Ys,lu),Id=Jn("",Js),Gl=Jn(Ys,au);const yy=Jn(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Pd=Gf,Hf=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var Zf={background:Jn(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Jn(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Jn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Jn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Jn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Jn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Jn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Jn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Jn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Jn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Jn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Jn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Jn(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Jn(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:Jn(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:Jn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Jn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Jn(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Jn(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Jn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:Jn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:Jn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:Jn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:Jn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:Jn(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Jn(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rl),skyboxGradient:Jn(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rl),skyboxCapture:Jn(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Jn(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Jn(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Hl(m,l){const h=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of h)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=y.split(" ");for(const w of x)l.includes(w)||l.push(w)}}function Jn(m,l){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),x={},w=[...lu];return Hl(m,w),Hl(l,w),{fragmentSource:m=m.replace(h,(k,P,D,j,F)=>(x[F]=!0,P==="define"?`
#ifndef HAS_UNIFORM_u_${F}
varying ${D} ${j} ${F};
#else
uniform ${D} ${j} u_${F};
#endif
`:`
#ifdef HAS_UNIFORM_u_${F}
    ${D} ${j} ${F} = u_${F};
#endif
`)),vertexSource:l=l.replace(h,(k,P,D,j,F)=>{const H=j==="float"?"vec2":"vec4",ie=F.match(/color/)?"color":H;return x[F]?P==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
attribute ${D} ${H} a_${F};
varying ${D} ${j} ${F};
#else
uniform ${D} ${j} u_${F};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = a_${F};
#else
    ${D} ${j} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = unpack_mix_${ie}(a_${F}, u_${F}_t);
#else
    ${D} ${j} ${F} = u_${F};
#endif
`:P==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
attribute ${D} ${H} a_${F};
#else
uniform ${D} ${j} u_${F};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${D} ${j} ${F} = a_${F};
#else
    ${D} ${j} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${D} ${j} ${F} = unpack_mix_${ie}(a_${F}, u_${F}_t);
#else
    ${D} ${j} ${F} = u_${F};
#endif
`}),staticAttributes:y,usedDefines:w}}class r1{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,h,y,x,w,k,P){this.context=l;let D=this.boundPaintVertexBuffers.length!==x.length;for(let F=0;!D&&F<x.length;F++)this.boundPaintVertexBuffers[F]!==x[F]&&(D=!0);let j=this.boundDynamicVertexBuffers.length!==P.length;for(let F=0;!j&&F<P.length;F++)this.boundDynamicVertexBuffers[F]!==P[F]&&(j=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==y||D||j||this.boundIndexBuffer!==w||this.boundVertexOffset!==k)this.freshBind(h,y,x,w,k,P);else{l.bindVertexArrayOES.set(this.vao);for(const F of P)F&&F.bind();w&&w.dynamicDraw&&w.bind()}}freshBind(l,h,y,x,w,k){let P;const D=l.numAttributes,j=this.context,F=j.gl;if(j.extVertexArrayObject)this.vao&&this.destroy(),this.vao=j.extVertexArrayObject.createVertexArrayOES(),j.bindVertexArrayOES.set(this.vao),P=0,this.boundProgram=l,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=x,this.boundVertexOffset=w,this.boundDynamicVertexBuffers=k;else{P=j.currentNumAttributes||0;for(let H=D;H<P;H++)F.disableVertexAttribArray(H)}h.enableAttributes(F,l),h.bind(),h.setVertexAttribPointers(F,l,w);for(const H of y)H.enableAttributes(F,l),H.bind(),H.setVertexAttribPointers(F,l,w);for(const H of k)H&&(H.enableAttributes(F,l),H.bind(),H.setVertexAttribPointers(F,l,w));x&&x.bind(),j.currentNumAttributes=D}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function qf(m,l){const h=Math.pow(2,l.canonical.z),y=l.canonical.y;return[new s.MercatorCoordinate(0,y/h).toLngLat().lat,new s.MercatorCoordinate(0,(y+1)/h).toLngLat().lat]}function vy(m,l,h,y,x,w,k){const P=m.context,D=P.gl,j=h.fbo;if(!j)return;m.prepareDrawTile();const F=m.useProgram("hillshade");P.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,j.colorAttachment.get());const H=((he,me,Z,ce)=>{const Ee=Z.paint.get("hillshade-shadow-color"),Ae=Z.paint.get("hillshade-highlight-color"),je=Z.paint.get("hillshade-accent-color");let $e=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);Z.paint.get("hillshade-illumination-anchor")==="viewport"&&($e-=he.transform.angle);const Ne=!he.options.moving;return{u_matrix:ce||he.transform.calculateProjMatrix(me.tileID.toUnwrapped(),Ne),u_image:0,u_latrange:qf(0,me.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),$e],u_shadow:Ee,u_highlight:Ae,u_accent:je}})(m,h,y,m.terrain?l.projMatrix:null);m.prepareDrawProgram(P,F,l.toUnwrapped());const{tileBoundsBuffer:ie,tileBoundsIndexBuffer:ue,tileBoundsSegments:pe}=m.getTileBoundsBuffers(h);F.draw(P,D.TRIANGLES,x,w,k,s.CullFaceMode.disabled,H,y.id,ie,ue,pe)}function Kf(m,l,h){if(!l.needsDEMTextureUpload)return;const y=m.context,x=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||m.getTileTexture(h.stride);const w=h.getPixels();l.demTexture?l.demTexture.update(w,{premultiply:!1}):l.demTexture=new s.Texture(y,w,x.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function _y(m,l,h,y,x,w){const k=m.context,P=k.gl;if(!l.dem)return;const D=l.dem;if(k.activeTexture.set(P.TEXTURE1),Kf(m,l,D),!l.demTexture)return;l.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);const j=D.dim;k.activeTexture.set(P.TEXTURE0);let F=l.fbo;if(!F){const pe=new s.Texture(k,{width:j,height:j,data:null},P.RGBA);pe.bind(P.LINEAR,P.CLAMP_TO_EDGE),F=l.fbo=k.createFramebuffer(j,j,!0),F.colorAttachment.set(pe.texture)}k.bindFramebuffer.set(F.framebuffer),k.viewport.set([0,0,j,j]);const{tileBoundsBuffer:H,tileBoundsIndexBuffer:ie,tileBoundsSegments:ue}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(k,P.TRIANGLES,y,x,w,s.CullFaceMode.disabled,((pe,he)=>{const me=he.stride,Z=s.create();return s.ortho(Z,0,s.EXTENT,-s.EXTENT,0,0,1),s.translate(Z,Z,[0,-s.EXTENT,0]),{u_matrix:Z,u_image:1,u_dimension:[me,me],u_zoom:pe.overscaledZ,u_unpack:he.unpackVector}})(l.tileID,D),h.id,H,ie,ue),l.needsHillshadePrepare=!1}const Xf=m=>({u_matrix:new s.UniformMatrix4f(m),u_image0:new s.Uniform1i(m),u_skirt_height:new s.Uniform1f(m)}),Zl=(m,l)=>({u_matrix:m,u_image0:0,u_skirt_height:l}),Md=(m,l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:h,u_zoom_transition:x,u_merc_center:w,u_image0:0,u_frustum_tl:k,u_frustum_tr:P,u_frustum_br:D,u_frustum_bl:j,u_globe_pos:F,u_globe_radius:H,u_viewport:ie,u_grid_matrix:pe?Float32Array.from(pe):new Float32Array(9),u_skirt_height:ue});function ql(m,l){return m!=null&&l!=null&&!(!m.hasData()||!l.hasData())&&m.demTexture!=null&&l.demTexture!=null&&m.tileID.key!==l.tileID.key}const Qs=new class{constructor(){this.operations={}}newMorphing(m,l,h,y,x){if(m in this.operations){const w=this.operations[m];w.to.tileID.key!==h.tileID.key&&(w.queued=h)}else this.operations[m]={startTime:y,phase:0,duration:x,from:l,to:h,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const l=this.operations[m];return{from:l.from,to:l.to,phase:l.phase}}update(m){for(const l in this.operations){const h=this.operations[l];for(h.phase=(m-h.startTime)/h.duration;h.phase>=1||!this._validOp(h);)if(!this._nextOp(h,m)){delete this.operations[l];break}}}_nextOp(m,l){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=l,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},il={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Dd(m){return 6*Math.pow(1.5,22-m)}function xy(m,l){const h=1<<m.z;return!l&&(m.x===0||m.x===h-1)||m.y===0||m.y===h-1}const cu=m=>({u_matrix:m});function Jf(m,l,h,y,x){if(x>0){const w=s.exported.now(),k=(w-m.timeAdded)/x,P=l?(w-l.timeAdded)/x:-1,D=h.getSource(),j=y.coveringZoomLevel({tileSize:D.tileSize,roundZoom:D.roundZoom}),F=!l||Math.abs(l.tileID.overscaledZ-j)>Math.abs(m.tileID.overscaledZ-j),H=F&&m.refreshedUponExpiration?1:s.clamp(F?k:1-P,0,1);return m.refreshedUponExpiration&&k>=1&&(m.refreshedUponExpiration=!1),l?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}class Yf extends s.SourceCache{constructor(l){const h={type:"raster-dem",maxzoom:l.transform.maxZoom},y=new Ge(hn(),null),x=Xt("mock-dem",h,y,l.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,h){l.state="loaded",h(null)}}class zd extends s.SourceCache{constructor(l){const h=Xt("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new Ge(hn(),null),l.style);super("proxy",h,!1),h.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,h,y){if(l.freezeTileCoverage)return;this.transform=l;const x=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((w,k)=>{if(w[k.key]="",!this._tiles[k.key]){const P=new s.Tile(k,this._source.tileSize*k.overscaleFactor(),l.tileZoom);P.state="loaded",this._tiles[k.key]=P}return w},{});for(const w in this._tiles)w in x||(this.freeFBO(w),this._tiles[w].unloadVectorData(),delete this._tiles[w])}freeFBO(l){const h=this.proxyCachedFBO[l];if(h!==void 0){const y=Object.values(h);this.renderCachePool.push(...y),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Ld extends s.OverscaledTileID{constructor(l,h,y){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=h,this.projMatrix=y}}class Qf extends s.Elevation{constructor(l,h){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,x,w]=function(D){const j=new s.StructArrayLayout2i4,F=new s.StructArrayLayout3ui6,H=131;j.reserve(17161),F.reserve(33800);const ie=s.EXTENT/128,ue=s.EXTENT+ie/2,pe=ue+ie;for(let me=-ie;me<pe;me+=ie)for(let Z=-ie;Z<pe;Z+=ie){const ce=Z<0||Z>ue||me<0||me>ue?24575:0,Ee=s.clamp(Math.round(Z),0,s.EXTENT),Ae=s.clamp(Math.round(me),0,s.EXTENT);j.emplaceBack(Ee+ce,Ae)}const he=(me,Z)=>{const ce=Z*H+me;F.emplaceBack(ce+1,ce,ce+H),F.emplaceBack(ce+H,ce+H+1,ce+1)};for(let me=1;me<129;me++)for(let Z=1;Z<129;Z++)he(Z,me);return[0,129].forEach(me=>{for(let Z=0;Z<130;Z++)he(Z,me),he(me,Z)}),[j,F,32768]}(),k=l.context;this.gridBuffer=k.createVertexBuffer(y,s.posAttributes.members),this.gridIndexBuffer=k.createIndexBuffer(x),this.gridSegments=s.SegmentVector.simpleSegment(0,0,y.length,x.length),this.gridNoSkirtSegments=s.SegmentVector.simpleSegment(0,0,y.length,w),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new zd(h.map),this.orthoMatrix=s.create(),s.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,s.EXTENT,0,s.EXTENT,0,1);const P=k.gl;this._overlapStencilMode=new s.StencilMode({func:P.GEQUAL,mask:255},0,255,P.KEEP,P.KEEP,P.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=h,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Yf(h.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,h,y){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const x=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(x.get("source")),this._exaggeration=x.get("exaggeration");const w=()=>{this.sourceCache.used&&s.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const k=this.getScaledDemTileSize();this.sourceCache.update(h,k,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,w(),this._initializing=!0),w(),h.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(h),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&s.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const h=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=h.getIds().map(D=>{const j=h.getTileByID(D).tileID;return j.projMatrix=y.calculateProjMatrix(j.toUnwrapped()),j});(function(D,j){const F=j.transform.pointCoordinate(j.transform.getCameraPoint()),H=new s.Point(F.x,F.y);D.sort((ie,ue)=>{if(ue.overscaledZ-ie.overscaledZ)return ue.overscaledZ-ie.overscaledZ;const pe=new s.Point(ie.canonical.x+(1<<ie.canonical.z)*ie.wrap,ie.canonical.y),he=new s.Point(ue.canonical.x+(1<<ue.canonical.z)*ue.wrap,ue.canonical.y),me=H.mult(1<<ie.canonical.z);return me.x-=.5,me.y-=.5,me.distSqr(pe)-me.distSqr(he)})})(x,this.painter),this._previousZoom=y.zoom;const w=this.proxyToSource||{};this.proxyToSource={},x.forEach(D=>{this.proxyToSource[D.key]={}}),this.terrainTileForTile={};const k=this._style._sourceCaches;for(const D in k){const j=k[D];if(!j.used||(j!==this.sourceCache&&this.resetTileLookupCache(j.id),this._setupProxiedCoordsForOrtho(j,l[D],w),j.usedForTerrain))continue;const F=l[D];j.getSource().reparseOverscaled&&this._assignTerrainTiles(F)}this.proxiedCoords[h.id]=x.map(D=>new Ld(D,D.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(w),this.renderingToTexture=!1,this._updateTimestamp=s.exported.now();const P={};this._visibleDemTiles=[];for(const D of this.proxyCoords){const j=this.terrainTileForTile[D.key];if(!j)continue;const F=j.tileID.key;F in P||(this._visibleDemTiles.push(j),P[F]=F)}}_assignTerrainTiles(l){this._initializing||l.forEach(h=>{if(this.terrainTileForTile[h.key])return;const y=this._findTileCoveringTileID(h,this.sourceCache);y&&(this.terrainTileForTile[h.key]=y)})}_prepareDEMTextures(){const l=this.painter.context,h=l.gl;for(const y in this.terrainTileForTile){const x=this.terrainTileForTile[y],w=x.dem;!w||x.demTexture&&!x.needsDEMTextureUpload||(l.activeTexture.set(h.TEXTURE1),Kf(this.painter,x,w))}}_prepareDemTileUniforms(l,h,y,x){if(!h||h.demTexture==null)return!1;const w=l.tileID.canonical,k=Math.pow(2,h.tileID.canonical.z-w.z),P=x||"";return y[`u_dem_tl${P}`]=[w.x*k%1,w.y*k%1],y[`u_dem_scale${P}`]=k,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,h=l.gl;if(!this._emptyDepthBufferTexture){const y=new s.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new s.Texture(l,y,h.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const h=this._visibleDemTiles.reduce((y,x)=>{if(!x.dem)return y;const w=x.dem.tree.minimums[0];return w>0&&l++,y+w},0);return l?h/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,h=l.gl;l.activeTexture.set(h.TEXTURE2);const y=this._getLoadedAreaMinimum(),x=new s.RGBAImage({width:1,height:1},new Uint8Array(s.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let w=this._emptyDEMTexture;return w?w.update(x,{premultiply:!1}):w=this._emptyDEMTexture=new s.Texture(l,x,h.RGBA,{premultiply:!1}),w}setupElevationDraw(l,h,y){const x=this.painter.context,w=x.gl,k=(P=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:s.DEMData.getUnpackVector(P),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var P;k.u_dem_size=this.sourceCache.getSource().tileSize,k.u_exaggeration=this.exaggeration();let D=null,j=null,F=1;if(y&&y.morphing&&this._useVertexMorphing){const H=y.morphing.srcDemTile,ie=y.morphing.dstDemTile;F=y.morphing.phase,H&&ie&&(this._prepareDemTileUniforms(l,H,k,"_prev")&&(j=H),this._prepareDemTileUniforms(l,ie,k)&&(D=ie))}if(j&&D?(x.activeTexture.set(w.TEXTURE2),D.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),x.activeTexture.set(w.TEXTURE4),j.demTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE,w.NEAREST),k.u_dem_lerp=F):(D=this.terrainTileForTile[l.tileID.key],x.activeTexture.set(w.TEXTURE2),(this._prepareDemTileUniforms(l,D,k)?D.demTexture:this.emptyDEMTexture).bind(w.NEAREST,w.CLAMP_TO_EDGE)),x.activeTexture.set(w.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),this._depthFBO&&(k.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(w.NEAREST,w.CLAMP_TO_EDGE),k.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&D){const H=(1<<D.tileID.canonical.z)*s.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;k.u_meter_to_dem=H}if(y&&y.labelPlaneMatrixInv&&(k.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),h.setTerrainUniformValues(x,k),this.painter.transform.projection.name==="globe"){const H=this.globeUniformValues(this.painter.transform,l.tileID.canonical,y&&y.useDenormalizedUpVectorScale);h.setGlobeUniformValues(x,H)}}globeUniformValues(l,h,y){const x=l.projection;return{u_tile_tl_up:x.upVector(h,0,0),u_tile_tr_up:x.upVector(h,s.EXTENT,0),u_tile_br_up:x.upVector(h,s.EXTENT,s.EXTENT),u_tile_bl_up:x.upVector(h,0,s.EXTENT),u_tile_up_scale:y?s.globeMetersToEcef(1):x.upVectorScale(h,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const h=this.painter,y=this.painter.context;l.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height]),h.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,w,k,P,D){if(x.transform.projection.name==="globe")(function(j,F,H,ie,ue){const pe=j.context,he=pe.gl;let me,Z;const ce=j.options.showTerrainWireframe?2:0,Ee=j.transform,Ae=s.globeUseCustomAntiAliasing(j,pe,Ee),je=(_t,Xe)=>{if(Z===_t)return;const dt=[il[_t],"PROJECTION_GLOBE_VIEW"];Ae&&dt.push("CUSTOM_ANTIALIASING"),Xe&&dt.push(il[ce]),me=j.useProgram("globeRaster",null,dt),Z=_t},$e=j.colorModeForRenderPass(),Ne=new s.DepthMode(he.LEQUAL,s.DepthMode.ReadWrite,j.depthRangeFor3D);Qs.update(ue);const We=s.calculateGlobeMercatorMatrix(Ee),Ue=[s.mercatorXfromLng(Ee.center.lng),s.mercatorYfromLat(Ee.center.lat)],Je=ce?[!1,!0]:[!1],xt=j.globeSharedBuffers,Ze=[Ee.width*s.exported.devicePixelRatio,Ee.height*s.exported.devicePixelRatio],ht=Float32Array.from(Ee.globeMatrix),tt={useDenormalizedUpVectorScale:!0};if(Je.forEach(_t=>{const Xe=j.transform,dt=Dd(Xe.zoom)*F.exaggeration();Z=-1;const wt=_t?he.LINES:he.TRIANGLES;for(const mt of ie){const St=H.getTile(mt),en=s.StencilMode.disabled,yn=F.prevTerrainTileForTile[mt.key],Gt=F.terrainTileForTile[mt.key];ql(yn,Gt)&&Qs.newMorphing(mt.key,yn,Gt,ue,250),pe.activeTexture.set(he.TEXTURE0),St.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);const dn=Qs.getMorphValuesForProxy(mt.key),Fn=dn?1:0;dn&&s.extend$1(tt,{morphing:{srcDemTile:dn.from,dstDemTile:dn.to,phase:s.easeCubicInOut(dn.phase)}});const Ln=s.tileCornersToBounds(mt.canonical),Jt=s.getLatitudinalLod(Ln.getCenter().lat),Yn=s.getGridMatrix(mt.canonical,Ln,Jt,Xe.worldSize/Xe._pixelsPerMercatorPixel),rr=s.globeNormalizeECEF(s.globeTileBounds(mt.canonical)),ir=Md(Xe.projMatrix,ht,We,rr,s.globeToMercatorTransition(Xe.zoom),Ue,Xe.frustumCorners.TL,Xe.frustumCorners.TR,Xe.frustumCorners.BR,Xe.frustumCorners.BL,Xe.globeCenterInViewSpace,Xe.globeRadius,Ze,dt,Yn);if(je(Fn,_t),F.setupElevationDraw(St,me,tt),j.prepareDrawProgram(pe,me,mt.toUnwrapped()),xt){const[or,Gi,Ai]=_t?xt.getWirefameBuffers(j.context,Jt):xt.getGridBuffers(Jt,dt!==0);me.draw(pe,wt,Ne,en,$e,s.CullFaceMode.backCCW,ir,"globe_raster",or,Gi,Ai)}}}),xt){const _t=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Ae&&_t.push("CUSTOM_ANTIALIASING"),me=j.useProgram("globeRaster",null,_t);for(const Xe of ie){const{x:dt,y:wt,z:mt}=Xe.canonical,St=wt===0,en=wt===(1<<mt)-1,[yn,Gt,dn,Fn]=xt.getPoleBuffers(mt);if(Fn&&(St||en)){const Ln=H.getTile(Xe);pe.activeTexture.set(he.TEXTURE0),Ln.texture.bind(he.LINEAR,he.CLAMP_TO_EDGE);let Jt=s.globePoleMatrixForTile(mt,dt,Ee);const Yn=s.globeNormalizeECEF(s.globeTileBounds(Xe.canonical)),rr=(ir,or)=>ir.draw(pe,he.TRIANGLES,Ne,s.StencilMode.disabled,$e,s.CullFaceMode.disabled,Md(Ee.projMatrix,Jt,Jt,Yn,0,Ue,Ee.frustumCorners.TL,Ee.frustumCorners.TR,Ee.frustumCorners.BR,Ee.frustumCorners.BL,Ee.globeCenterInViewSpace,Ee.globeRadius,Ze,0),"globe_pole_raster",or,dn,Fn);F.setupElevationDraw(Ln,me,tt),j.prepareDrawProgram(pe,me,Xe.toUnwrapped()),St&&rr(me,yn),en&&(Jt=s.scale(s.create(),Jt,[1,-1,1]),rr(me,Gt))}}}})(x,w,k,P,D);else{const j=x.context,F=j.gl;let H,ie;const ue=x.options.showTerrainWireframe?2:0,pe=(Ee,Ae)=>{if(ie===Ee)return;const je=[il[Ee]];Ae&&je.push(il[ue]),H=x.useProgram("terrainRaster",null,je),ie=Ee},he=x.colorModeForRenderPass(),me=new s.DepthMode(F.LEQUAL,s.DepthMode.ReadWrite,x.depthRangeFor3D);Qs.update(D);const Z=x.transform,ce=Dd(Z.zoom)*w.exaggeration();(ue?[!1,!0]:[!1]).forEach(Ee=>{ie=-1;const Ae=Ee?F.LINES:F.TRIANGLES,[je,$e]=Ee?w.getWirefameBuffer():[w.gridIndexBuffer,w.gridSegments];for(const Ne of P){const We=k.getTile(Ne),Ue=s.StencilMode.disabled,Je=w.prevTerrainTileForTile[Ne.key],xt=w.terrainTileForTile[Ne.key];ql(Je,xt)&&Qs.newMorphing(Ne.key,Je,xt,D,250),j.activeTexture.set(F.TEXTURE0),We.texture.bind(F.LINEAR,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);const Ze=Qs.getMorphValuesForProxy(Ne.key),ht=Ze?1:0;let tt;Ze&&(tt={morphing:{srcDemTile:Ze.from,dstDemTile:Ze.to,phase:s.easeCubicInOut(Ze.phase)}});const _t=Zl(Ne.projMatrix,xy(Ne.canonical,Z.renderWorldCopies)?ce/10:ce);pe(ht,Ee),w.setupElevationDraw(We,H,tt),x.prepareDrawProgram(j,H,Ne.toUnwrapped()),H.draw(j,Ae,me,Ue,he,s.CullFaceMode.backCCW,_t,"terrain_raster",w.gridBuffer,je,$e)}})}}(h,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,h.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const h=this.painter,y=this.painter.context,x=this.proxySourceCache,w=this.proxiedCoords[x.id],k=this._drapedRenderBatches.shift(),P=[],D=h.style.order;let j=0;for(const F of w){const H=x.getTileByID(F.proxyTileKey),ie=x.proxyCachedFBO[F.key]?x.proxyCachedFBO[F.key][l]:void 0,ue=ie!==void 0?x.renderCache[ie]:this.pool[j++],pe=ie!==void 0;if(H.texture=ue.tex,pe&&!ue.dirty){P.push(H.tileID);continue}let he;y.bindFramebuffer.set(ue.fb.framebuffer),this.renderedToTile=!1,ue.dirty&&(y.clear({color:s.Color.transparent,stencil:0}),ue.dirty=!1);for(let me=k.start;me<=k.end;++me){const Z=h.style._layers[D[me]];if(Z.isHidden(h.transform.zoom))continue;const ce=h.style._getLayerSourceCache(Z),Ee=ce?this.proxyToSource[F.key][ce.id]:[F];if(!Ee)continue;const Ae=Ee;y.viewport.set([0,0,ue.fb.width,ue.fb.height]),he!==(ce?ce.id:null)&&(this._setupStencil(ue,Ee,Z,ce),he=ce?ce.id:null),h.renderLayer(h,ce,Z,Ae)}this.renderedToTile?(ue.dirty=!0,P.push(H.tileID)):pe||--j,j===5&&(j=0,this.renderToBackBuffer(P))}return this.renderToBackBuffer(P),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,h.width,h.height]),k.end+1}postRender(){}renderCacheEfficiency(l){const h=l.order.length;if(h===0)return{efficiency:100};let y,x=0,w=0,k=!1;for(let P=0;P<h;++P){const D=l._layers[l.order[P]];this._style.isLayerDraped(D)?(k&&++x,++w):k||(k=!0,y=D.id)}return w===0?{efficiency:100}:{efficiency:100*(1-x/w),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(h=>h.dem).forEach(h=>{l=Math.min(l,h.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,h,y){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(w=>w.dem).map(w=>{const k=w.tileID,P=1<<k.overscaledZ,{x:D,y:j}=k.canonical,F=D/P,H=(D+1)/P,ie=j/P,ue=(j+1)/P;return{minx:F,miny:ie,maxx:H,maxy:ue,t:w.dem.tree.raycastRoot(F,ie,H,ue,l,h,y),tile:w}});x.sort((w,k)=>(w.t!==null?w.t:Number.MAX_VALUE)-(k.t!==null?k.t:Number.MAX_VALUE));for(const w of x){if(w.t==null)return null;const k=w.tile.dem.tree.raycast(w.minx,w.miny,w.maxx,w.maxy,l,h,y);if(k!=null)return k}return null}_createFBO(){const l=this.painter.context,h=l.gl,y=this.drapeBufferSize;l.activeTexture.set(h.TEXTURE0);const x=new s.Texture(l,{width:y[0],height:y[1],data:null},h.RGBA);x.bind(h.LINEAR,h.CLAMP_TO_EDGE);const w=l.createFramebuffer(y[0],y[1],!1);return w.colorAttachment.set(x.texture),w.depthAttachment=new de(l,w.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,w.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):w.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&h.texParameterf(h.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:w,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const h=this._style._layers[l],y=h.isHidden(this.painter.transform.zoom);return h.type==="custom"?!y&&h.shouldRedrape():!y&&h.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const y of this._style._getSources())if(y instanceof at){l=!0;break}if(!l)return;const h={};for(let y=0;y<this._style.order.length;++y){const x=this._style._layers[this._style.order[y]],w=this._style._getLayerSourceCache(x);if(w&&!h[w.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof s.ZoomDependentExpression){h[w.id]=!0;for(const k of this.proxyCoords){const P=this.proxyToSource[k.key][w.id];if(P)for(const D of P)this._clearRenderCacheForTile(w.id,D)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof Qe){l=!0;break}if(!l)return;const h={};for(let y=0;y<this._style.order.length;++y){const x=this._style._layers[this._style.order[y]],w=this._style._getLayerSourceCache(x);if(!w||h[w.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const k=x.paint.get("raster-fade-duration");for(const P of this.proxyCoords){const D=this.proxyToSource[P.key][w.id];if(D)for(const j of D){const F=Jf(w.getTile(j),w.findLoadedParent(j,0),w,this.painter.transform,k);(F.opacity!==1||F.mix!==0)&&this._clearRenderCacheForTile(w.id,j)}}}}_setupDrapedRenderBatches(){const l=this._style.order,h=l.length;if(h===0)return;const y=[];let x,w=0,k=this._style._layers[l[w]];for(;!this._style.isLayerDraped(k)&&k.isHidden(this.painter.transform.zoom)&&++w<h;)k=this._style._layers[l[w]];for(;w<h;++w){const P=this._style._layers[l[w]];P.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(P)?x===void 0&&(x=w):x!==void 0&&(y.push({start:x,end:w-1}),x=void 0))}x!==void 0&&y.push({start:x,end:w-1}),this._drapedRenderBatches=y}_setupRenderCache(l){const h=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,h.renderCache.length>h.renderCachePool.length){const k=Object.values(h.proxyCachedFBO);h.proxyCachedFBO={};for(let P=0;P<k.length;++P){const D=Object.values(k[P]);h.renderCachePool.push(...D)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,x=this._tilesDirty;for(let k=y.length-1;k>=0;k--){const P=y[k];if(h.getTileByID(P.key),h.proxyCachedFBO[P.key]!==void 0){const D=l[P.key],j=this.proxyToSource[P.key];let F=0;for(const H in j){const ie=j[H],ue=D[H];if(!ue||ue.length!==ie.length||ie.some((pe,he)=>pe!==ue[he]||x[H]&&x[H].hasOwnProperty(pe.key))){F=-1;break}++F}for(const H in h.proxyCachedFBO[P.key])h.renderCache[h.proxyCachedFBO[P.key][H]].dirty=F<0||F!==Object.values(D).length}}const w=[...this._drapedRenderBatches];w.sort((k,P)=>P.end-P.start-(k.end-k.start));for(const k of w)for(const P of y){if(h.proxyCachedFBO[P.key])continue;let D=h.renderCachePool.pop();D===void 0&&h.renderCache.length<50&&(D=h.renderCache.length,h.renderCache.push(this._createFBO())),D!==void 0&&(h.proxyCachedFBO[P.key]={},h.proxyCachedFBO[P.key][k.start]=D,h.renderCache[D].dirty=!0)}this._tilesDirty={}}_setupStencil(l,h,y,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const w=this.painter.context,k=w.gl;if(h.length<=1)return void(this._overlapStencilType=!1);let P;if(y.isTileClipped())P=h.length,this._overlapStencilMode.test={func:k.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(h[0].overscaledZ>h[h.length-1].overscaledZ))return void(this._overlapStencilType=!1);P=1,this._overlapStencilMode.test={func:k.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+P>255&&(w.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=P,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(h,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):s.StencilMode.disabled}_renderTileClippingMasks(l,h){const y=this.painter,x=this.painter.context,w=x.gl;y._tileClippingMaskIDs={},x.setColorMode(s.ColorMode.disabled),x.setDepthMode(s.DepthMode.disabled);const k=y.useProgram("clippingMask");for(const P of l){const D=y._tileClippingMaskIDs[P.key]=--h;k.draw(x,w.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:w.ALWAYS,mask:0},D,255,w.KEEP,w.KEEP,w.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,cu(P.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(l){const h=this.painter.transform;if(l.x<0||l.x>h.width||l.y<0||l.y>h.height)return null;const y=[l.x,l.y,1,1];s.transformMat4$1(y,y,h.pixelMatrixInverse),s.scale$1(y,y,1/y[3]),y[0]/=h.worldSize,y[1]/=h.worldSize;const x=h._camera.position,w=s.mercatorZfromAltitude(1,h.center.lat),k=[x[0],x[1],x[2]/w,0],P=s.subtract([],y.slice(0,3),k);s.normalize(P,P);const D=this.raycast(k,P,this._exaggeration);return D!==null&&D?(s.scaleAndAdd(k,k,P,D),k[3]=k[2],k[2]*=w,k):null}drawDepth(){const l=this.painter,h=l.context,y=this.proxySourceCache,x=Math.ceil(l.width),w=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===x&&this._depthFBO.height===w||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const k=h.gl,P=h.createFramebuffer(x,w,!0);h.activeTexture.set(k.TEXTURE0);const D=new s.Texture(h,{width:x,height:w,data:null},k.RGBA);D.bind(k.NEAREST,k.CLAMP_TO_EDGE),P.colorAttachment.set(D.texture);const j=h.createRenderbuffer(h.gl.DEPTH_COMPONENT16,x,w);P.depthAttachment.set(j),this._depthFBO=P,this._depthTexture=D}h.bindFramebuffer.set(this._depthFBO.framebuffer),h.viewport.set([0,0,x,w]),function(k,P,D,j){if(k.transform.projection.name==="globe")return;const F=k.context,H=F.gl;F.clear({depth:1});const ie=k.useProgram("terrainDepth"),ue=new s.DepthMode(H.LESS,s.DepthMode.ReadWrite,k.depthRangeFor3D);for(const pe of j){const he=D.getTile(pe),me=Zl(pe.projMatrix,0);P.setupElevationDraw(he,ie),ie.draw(F,H.TRIANGLES,ue,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.backCCW,me,"terrain_depth",P.gridBuffer,P.gridIndexBuffer,P.gridNoSkirtSegments)}}(l,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,h,y){if(l.getSource()instanceof Lt)return this._setupProxiedCoordsForImageSource(l,h,y);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const x=this.proxiedCoords[l.id]=[],w=this.proxyCoords;for(let P=0;P<w.length;P++){const D=w[P],j=this._findTileCoveringTileID(D,l);if(j){const F=this._createProxiedId(D,j,y[D.key]&&y[D.key][l.id]);x.push(F),this.proxyToSource[D.key][l.id]=[F]}}let k=!1;for(let P=0;P<h.length;P++){const D=l.getTile(h[P]);if(!D||!D.hasData())continue;const j=this._findTileCoveringTileID(D.tileID,this.proxySourceCache);if(j&&j.tileID.canonical.z!==D.tileID.canonical.z){const F=this.proxyToSource[j.tileID.key][l.id],H=this._createProxiedId(j.tileID,D,y[j.tileID.key]&&y[j.tileID.key][l.id]);F?F.splice(F.length-1,0,H):this.proxyToSource[j.tileID.key][l.id]=[H],x.push(H),k=!0}}this._sourceTilesOverlap[l.id]=k}_setupProxiedCoordsForImageSource(l,h,y){if(!l.getSource().loaded())return;const x=this.proxiedCoords[l.id]=[],w=this.proxyCoords,k=l.getSource(),P=new s.Point(k.tileID.x,k.tileID.y)._div(1<<k.tileID.z),D=k.coordinates.map(s.MercatorCoordinate.fromLngLat).reduce((F,H)=>(F.min.x=Math.min(F.min.x,H.x-P.x),F.min.y=Math.min(F.min.y,H.y-P.y),F.max.x=Math.max(F.max.x,H.x-P.x),F.max.y=Math.max(F.max.y,H.y-P.y),F),{min:new s.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new s.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),j=(F,H)=>{const ie=F.wrap+F.canonical.x/(1<<F.canonical.z),ue=F.canonical.y/(1<<F.canonical.z),pe=s.EXTENT/(1<<F.canonical.z),he=H.wrap+H.canonical.x/(1<<H.canonical.z),me=H.canonical.y/(1<<H.canonical.z);return ie+pe<he+D.min.x||ie>he+D.max.x||ue+pe<me+D.min.y||ue>me+D.max.y};for(let F=0;F<w.length;F++){const H=w[F];for(let ie=0;ie<h.length;ie++){const ue=l.getTile(h[ie]);if(!ue||!ue.hasData()||j(H,ue.tileID))continue;const pe=this._createProxiedId(H,ue,y[H.key]&&y[H.key][l.id]),he=this.proxyToSource[H.key][l.id];he?he.push(pe):this.proxyToSource[H.key][l.id]=[pe],x.push(pe)}}}_createProxiedId(l,h,y){let x=this.orthoMatrix;if(y){const w=y.find(k=>k.key===h.tileID.key);if(w)return w}if(h.tileID.key!==l.key){const w=l.canonical.z-h.tileID.canonical.z;let k,P,D;x=s.create();const j=h.tileID.wrap-l.wrap<<l.overscaledZ;w>0?(k=s.EXTENT>>w,P=k*((h.tileID.canonical.x<<w)-l.canonical.x+j),D=k*((h.tileID.canonical.y<<w)-l.canonical.y)):(k=s.EXTENT<<-w,P=s.EXTENT*(h.tileID.canonical.x-(l.canonical.x+j<<-w)),D=s.EXTENT*(h.tileID.canonical.y-(l.canonical.y<<-w))),s.ortho(x,0,k,0,k,0,1),s.translate(x,x,[P,D,0])}return new Ld(h.tileID,l.key,x)}_findTileCoveringTileID(l,h){let y=h.getTile(l);if(y&&y.hasData())return y;const x=this._findCoveringTileCache[h.id],w=x[l.key];if(y=w?h.getTileByID(w):null,y&&y.hasData()||w===null)return y;let k=y?y.tileID:l,P=k.overscaledZ;const D=h.getSource().minzoom,j=[];if(!w){const H=h.getSource().maxzoom;if(l.canonical.z>=H){const ie=l.canonical.z-H;h.getSource().reparseOverscaled?(P=Math.max(l.canonical.z+2,h.transform.tileZoom),k=new s.OverscaledTileID(P,l.wrap,H,l.canonical.x>>ie,l.canonical.y>>ie)):ie!==0&&(P=H,k=new s.OverscaledTileID(P,l.wrap,H,l.canonical.x>>ie,l.canonical.y>>ie))}k.key!==l.key&&(j.push(k.key),y=h.getTile(k))}const F=H=>{j.forEach(ie=>{x[ie]=H}),j.length=0};for(P-=1;P>=D&&(!y||!y.hasData());P--){y&&F(y.tileID.key);const H=k.calculateScaledKey(P);if(y=h.getTileByID(H),y&&y.hasData())break;const ie=x[H];if(ie===null)break;ie===void 0?j.push(H):y=h.getTileByID(ie)}return F(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,h){let y=this._tilesDirty[l];y||(y=this._tilesDirty[l]={}),y[h.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(h){let y=0;const x=new s.StructArrayLayout2ui4,w=131;for(let k=1;k<129;k++){for(let P=1;P<129;P++)y=k*w+P,x.emplaceBack(y,y+1),x.emplaceBack(y,y+w),x.emplaceBack(y+1,y+w),k===128&&x.emplaceBack(y+w,y+w+1);x.emplaceBack(y+1,y+1+w)}return x}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=s.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Vn{static cacheKey(l,h,y,x){let w=`${h}${x?x.cacheKey:""}`;for(const k of y)l.usedDefines.includes(k)&&(w+=`/${k}`);return w}constructor(l,h,y,x,w,k){const P=l.gl;this.program=P.createProgram();const D=function(Z){const ce=[];for(let Ee=0;Ee<Z.length;Ee++){if(Z[Ee]===null)continue;const Ae=Z[Ee].split(" ");ce.push(Ae.pop())}return ce}(y.staticAttributes),j=x?x.getBinderAttributes():[],F=D.concat(j);let H=x?x.defines():[];H=H.concat(k.map(Z=>`#define ${Z}`));const ie=l.isWebGL2?`#version 300 es
`:"",ue=ie+H.concat(l.extStandardDerivatives&&ie.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Hf):Hf,Hf,Pd,yy.fragmentSource,Gl.fragmentSource,y.fragmentSource).join(`
`),pe=ie+H.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Pd,yy.vertexSource,Gl.vertexSource,Id.vertexSource,y.vertexSource).join(`
`),he=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);P.shaderSource(he,ue),P.compileShader(he),P.attachShader(this.program,he);const me=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())this.failedToCreate=!0;else{P.shaderSource(me,pe),P.compileShader(me),P.attachShader(this.program,me),this.attributes={},this.numAttributes=F.length;for(let Z=0;Z<this.numAttributes;Z++)F[Z]&&(P.bindAttribLocation(this.program,Z,F[Z]),this.attributes[F[Z]]=Z);P.linkProgram(this.program),P.deleteShader(me),P.deleteShader(he),this.fixedUniforms=w(l),this.binderUniforms=x?x.getUniforms(l):[],k.includes("TERRAIN")&&(this.terrainUniforms=(Z=>({u_dem:new s.Uniform1i(Z),u_dem_prev:new s.Uniform1i(Z),u_dem_unpack:new s.Uniform4f(Z),u_dem_tl:new s.Uniform2f(Z),u_dem_scale:new s.Uniform1f(Z),u_dem_tl_prev:new s.Uniform2f(Z),u_dem_scale_prev:new s.Uniform1f(Z),u_dem_size:new s.Uniform1f(Z),u_dem_lerp:new s.Uniform1f(Z),u_exaggeration:new s.Uniform1f(Z),u_depth:new s.Uniform1i(Z),u_depth_size_inv:new s.Uniform2f(Z),u_meter_to_dem:new s.Uniform1f(Z),u_label_plane_matrix_inv:new s.UniformMatrix4f(Z)}))(l)),k.includes("GLOBE")&&(this.globeUniforms=(Z=>({u_tile_tl_up:new s.Uniform3f(Z),u_tile_tr_up:new s.Uniform3f(Z),u_tile_br_up:new s.Uniform3f(Z),u_tile_bl_up:new s.Uniform3f(Z),u_tile_up_scale:new s.Uniform1f(Z)}))(l)),k.includes("FOG")&&(this.fogUniforms=(Z=>({u_fog_matrix:new s.UniformMatrix4f(Z),u_fog_range:new s.Uniform2f(Z),u_fog_color:new s.Uniform4f(Z),u_fog_horizon_blend:new s.Uniform1f(Z),u_fog_temporal_offset:new s.Uniform1f(Z),u_frustum_tl:new s.Uniform3f(Z),u_frustum_tr:new s.Uniform3f(Z),u_frustum_br:new s.Uniform3f(Z),u_frustum_bl:new s.Uniform3f(Z),u_globe_pos:new s.Uniform3f(Z),u_globe_radius:new s.Uniform1f(Z),u_globe_transition:new s.Uniform1f(Z),u_is_globe:new s.Uniform1i(Z),u_viewport:new s.Uniform2f(Z)}))(l))}}setTerrainUniformValues(l,h){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)y[x]&&y[x].set(this.program,x,h[x])}}setGlobeUniformValues(l,h){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)y[x]&&y[x].set(this.program,x,h[x])}}setFogUniformValues(l,h){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in h)y[x].set(this.program,x,h[x])}}draw(l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he){const me=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(y),l.setStencilMode(x),l.setColorMode(w),l.setCullFace(k);for(const ce of Object.keys(this.fixedUniforms))this.fixedUniforms[ce].set(this.program,ce,P[ce]);pe&&pe.setUniforms(this.program,l,this.binderUniforms,ie,{zoom:ue});const Z={[me.LINES]:2,[me.TRIANGLES]:3,[me.LINE_STRIP]:1}[h];for(const ce of H.get()){const Ee=ce.vaos||(ce.vaos={});(Ee[D]||(Ee[D]=new r1)).bind(l,this,j,pe?pe.getPaintVertexBuffers():[],F,ce.vertexOffset,he||[]),me.drawElements(h,ce.primitiveLength*Z,me.UNSIGNED_SHORT,ce.primitiveOffset*Z*2)}}}function uu(m,l){const h=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,m.transform.tileZoom)/h,x=y*(l.tileID.canonical.x+l.tileID.wrap*h),w=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/rt(l,1,m.transform.tileZoom),u_pixel_coord_upper:[x>>16,w>>16],u_pixel_coord_lower:[65535&x,65535&w]}}const by=s.create(),ep=(m,l,h,y,x,w,k,P,D,j,F)=>{const H=l.style.light,ie=H.properties.get("position"),ue=[ie.x,ie.y,ie.z],pe=s.create$1();H.properties.get("anchor")==="viewport"&&(s.fromRotation(pe,-l.transform.angle),s.transformMat3(ue,ue,pe));const he=H.properties.get("color"),me=l.transform,Z={u_matrix:m,u_lightpos:ue,u_lightintensity:H.properties.get("intensity"),u_lightcolor:[he.r,he.g,he.b],u_vertical_gradient:+h,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:by,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:w};return me.projection.name==="globe"&&(Z.u_tile_id=[k.canonical.x,k.canonical.y,1<<k.canonical.z],Z.u_zoom_transition=D,Z.u_inv_rot_matrix=F,Z.u_merc_center=j,Z.u_up_dir=me.projection.upVector(new s.CanonicalTileID(0,0,0),j[0]*s.EXTENT,j[1]*s.EXTENT),Z.u_height_lift=P),Z},wy=(m,l,h,y,x,w,k,P,D,j,F,H)=>{const ie=ep(m,l,h,y,x,w,k,D,j,F,H),ue={u_height_factor:-Math.pow(2,k.overscaledZ)/P.tileSize/8};return s.extend(ie,uu(l,P),ue)},ol=m=>({u_matrix:m}),tp=(m,l,h)=>s.extend(ol(m),uu(l,h)),i1=(m,l)=>({u_matrix:m,u_world:l}),o1=(m,l,h,y)=>s.extend(tp(m,l,h),{u_world:y}),s1=s.create(),np=(m,l,h,y,x,w)=>{const k=m.transform,P=k.projection.name==="globe";let D;if(w.paint.get("circle-pitch-alignment")==="map")if(P){const F=s.globePixelsToTileUnits(k.zoom,l.canonical)*k._pixelsPerMercatorPixel;D=Float32Array.from([F,0,0,F])}else D=k.calculatePixelsToTileUnitsMatrix(h);else D=new Float32Array([k.pixelsToGLUnits[0],0,0,k.pixelsToGLUnits[1]]);const j={u_camera_to_center_distance:k.cameraToCenterDistance,u_matrix:m.translatePosMatrix(l.projMatrix,h,w.paint.get("circle-translate"),w.paint.get("circle-translate-anchor")),u_device_pixel_ratio:s.exported.devicePixelRatio,u_extrude_scale:D,u_inv_rot_matrix:s1,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(P){j.u_inv_rot_matrix=y,j.u_merc_center=x,j.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],j.u_zoom_transition=s.globeToMercatorTransition(k.zoom);const F=x[0]*s.EXTENT,H=x[1]*s.EXTENT;j.u_up_dir=k.projection.upVector(new s.CanonicalTileID(0,0,0),F,H)}return j},rp=m=>{const l=[];return m.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),m.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},ip=(m,l,h,y)=>{const x=s.EXTENT/h.tileSize;return{u_matrix:m,u_camera_to_center_distance:l.getCameraToCenterDistance(y),u_extrude_scale:[l.pixelsToGLUnits[0]/x,l.pixelsToGLUnits[1]/x]}},Rd=(m,l,h=1)=>({u_matrix:m,u_color:l,u_overlay:0,u_overlay_scale:h}),Sy=s.create(),Ey=(m,l,h,y,x,w,k)=>{const P=m.transform,D=P.projection.name==="globe",j=D?s.globePixelsToTileUnits(P.zoom,l.canonical)*P._pixelsPerMercatorPixel:rt(h,1,w),F={u_matrix:l.projMatrix,u_extrude_scale:j,u_intensity:k,u_inv_rot_matrix:Sy,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(D){F.u_inv_rot_matrix=y,F.u_merc_center=x,F.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],F.u_zoom_transition=s.globeToMercatorTransition(P.zoom);const H=x[0]*s.EXTENT,ie=x[1]*s.EXTENT;F.u_up_dir=P.projection.upVector(new s.CanonicalTileID(0,0,0),H,ie)}return F},a1=(m,l,h,y,x,w,k)=>{const P=m.transform,D=P.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:op(m,l,h,y),u_pixels_to_tile_units:D,u_device_pixel_ratio:w,u_units_to_pixels:[1/P.pixelsToGLUnits[0],1/P.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:hu(h)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Kl(l,m.transform),u_alpha_discard_threshold:0,u_trim_offset:k}},du=(m,l,h,y,x)=>{const w=m.transform;return{u_matrix:op(m,l,h,y),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:w.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:x,u_image:0,u_tile_units_to_pixels:Kl(l,w),u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Kl(m,l){return 1/rt(m,1,l.tileZoom)}function op(m,l,h,y){return m.translatePosMatrix(y||l.tileID.projMatrix,l,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}function hu(m){const l=m.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const sp=(m,l,h,y,x,w)=>{return{u_matrix:m,u_tl_parent:l,u_scale_parent:h,u_fade_t:y.mix,u_opacity:y.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(P=x.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(k=x.paint.get("raster-contrast"),k>0?1/(1-k):1+k),u_spin_weights:_s(x.paint.get("raster-hue-rotate")),u_perspective_transform:w};var k,P};function _s(m){m*=Math.PI/180;const l=Math.sin(m),h=Math.cos(m);return[(2*h+1)/3,(-Math.sqrt(3)*l-h+1)/3,(Math.sqrt(3)*l-h+1)/3]}const Od=s.create(),ap=(m,l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he)=>{const me=x.transform,Z={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:me.cameraToCenterDistance,u_rotate_symbol:+h,u_aspect_ratio:me.width/me.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:w,u_label_plane_matrix:k,u_coord_matrix:P,u_is_text:+D,u_pitch_with_map:+y,u_texsize:j,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Od,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Od,u_up_vector:[0,-1,0]};return he.name==="globe"&&(Z.u_tile_id=[F.canonical.x,F.canonical.y,1<<F.canonical.z],Z.u_zoom_transition=H,Z.u_inv_rot_matrix=ue,Z.u_merc_center=ie,Z.u_camera_forward=me._camera.forward(),Z.u_ecef_origin=s.globeECEFOrigin(me.globeMatrix,F.toUnwrapped()),Z.u_tile_matrix=Float32Array.from(me.globeMatrix),Z.u_up_vector=pe),Z},Bd=(m,l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he,me)=>s.extend(ap(m,l,h,y,x,w,k,P,D,j,H,ie,ue,pe,he,me),{u_gamma_scale:y?x.transform.cameraToCenterDistance*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:s.exported.devicePixelRatio,u_is_halo:+F}),Ty=(m,l,h,y,x,w,k,P,D,j,F,H,ie,ue,pe,he)=>s.extend(Bd(m,l,h,y,x,w,k,P,!0,D,!0,F,H,ie,ue,pe,he),{u_texsize_icon:j,u_texture_icon:1}),lp=(m,l,h)=>({u_matrix:m,u_opacity:l,u_color:h}),l1=(m,l,h,y,x)=>s.extend(function(w,k,P){const D=k.imageManager.getPattern(w.toString()),{width:j,height:F}=k.imageManager.getPixelSize(),H=Math.pow(2,P.tileID.overscaledZ),ie=P.tileSize*Math.pow(2,k.transform.tileZoom)/H,ue=ie*(P.tileID.canonical.x+P.tileID.wrap*H),pe=ie*P.tileID.canonical.y;return{u_image:0,u_pattern_tl:D.tl,u_pattern_br:D.br,u_texsize:[j,F],u_pattern_size:D.displaySize,u_tile_units_to_pixels:1/rt(P,1,k.transform.tileZoom),u_pixel_coord_upper:[ue>>16,pe>>16],u_pixel_coord_lower:[65535&ue,65535&pe]}}(y,h,x),{u_matrix:m,u_opacity:l}),cp={fillExtrusion:m=>({u_matrix:new s.UniformMatrix4f(m),u_lightpos:new s.Uniform3f(m),u_lightintensity:new s.Uniform1f(m),u_lightcolor:new s.Uniform3f(m),u_vertical_gradient:new s.Uniform1f(m),u_opacity:new s.Uniform1f(m),u_edge_radius:new s.Uniform1f(m),u_ao:new s.Uniform2f(m),u_tile_id:new s.Uniform3f(m),u_zoom_transition:new s.Uniform1f(m),u_inv_rot_matrix:new s.UniformMatrix4f(m),u_merc_center:new s.Uniform2f(m),u_up_dir:new s.Uniform3f(m),u_height_lift:new s.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new s.UniformMatrix4f(m),u_lightpos:new s.Uniform3f(m),u_lightintensity:new s.Uniform1f(m),u_lightcolor:new s.Uniform3f(m),u_vertical_gradient:new s.Uniform1f(m),u_height_factor:new s.Uniform1f(m),u_edge_radius:new s.Uniform1f(m),u_ao:new s.Uniform2f(m),u_tile_id:new s.Uniform3f(m),u_zoom_transition:new s.Uniform1f(m),u_inv_rot_matrix:new s.UniformMatrix4f(m),u_merc_center:new s.Uniform2f(m),u_up_dir:new s.Uniform3f(m),u_height_lift:new s.Uniform1f(m),u_image:new s.Uniform1i(m),u_texsize:new s.Uniform2f(m),u_pixel_coord_upper:new s.Uniform2f(m),u_pixel_coord_lower:new s.Uniform2f(m),u_tile_units_to_pixels:new s.Uniform1f(m),u_opacity:new s.Uniform1f(m)}),fill:m=>({u_matrix:new s.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new s.UniformMatrix4f(m),u_image:new s.Uniform1i(m),u_texsize:new s.Uniform2f(m),u_pixel_coord_upper:new s.Uniform2f(m),u_pixel_coord_lower:new s.Uniform2f(m),u_tile_units_to_pixels:new s.Uniform1f(m)}),fillOutline:m=>({u_matrix:new s.UniformMatrix4f(m),u_world:new s.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new s.UniformMatrix4f(m),u_world:new s.Uniform2f(m),u_image:new s.Uniform1i(m),u_texsize:new s.Uniform2f(m),u_pixel_coord_upper:new s.Uniform2f(m),u_pixel_coord_lower:new s.Uniform2f(m),u_tile_units_to_pixels:new s.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new s.Uniform1f(m),u_extrude_scale:new s.UniformMatrix2f(m),u_device_pixel_ratio:new s.Uniform1f(m),u_matrix:new s.UniformMatrix4f(m),u_inv_rot_matrix:new s.UniformMatrix4f(m),u_merc_center:new s.Uniform2f(m),u_tile_id:new s.Uniform3f(m),u_zoom_transition:new s.Uniform1f(m),u_up_dir:new s.Uniform3f(m)}),collisionBox:m=>({u_matrix:new s.UniformMatrix4f(m),u_camera_to_center_distance:new s.Uniform1f(m),u_extrude_scale:new s.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new s.UniformMatrix4f(m),u_inv_matrix:new s.UniformMatrix4f(m),u_camera_to_center_distance:new s.Uniform1f(m),u_viewport_size:new s.Uniform2f(m)}),debug:m=>({u_color:new s.UniformColor(m),u_matrix:new s.UniformMatrix4f(m),u_overlay:new s.Uniform1i(m),u_overlay_scale:new s.Uniform1f(m)}),clippingMask:m=>({u_matrix:new s.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new s.Uniform1f(m),u_intensity:new s.Uniform1f(m),u_matrix:new s.UniformMatrix4f(m),u_inv_rot_matrix:new s.UniformMatrix4f(m),u_merc_center:new s.Uniform2f(m),u_tile_id:new s.Uniform3f(m),u_zoom_transition:new s.Uniform1f(m),u_up_dir:new s.Uniform3f(m)}),heatmapTexture:m=>({u_image:new s.Uniform1i(m),u_color_ramp:new s.Uniform1i(m),u_opacity:new s.Uniform1f(m)}),hillshade:m=>({u_matrix:new s.UniformMatrix4f(m),u_image:new s.Uniform1i(m),u_latrange:new s.Uniform2f(m),u_light:new s.Uniform2f(m),u_shadow:new s.UniformColor(m),u_highlight:new s.UniformColor(m),u_accent:new s.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new s.UniformMatrix4f(m),u_image:new s.Uniform1i(m),u_dimension:new s.Uniform2f(m),u_zoom:new s.Uniform1f(m),u_unpack:new s.Uniform4f(m)}),line:m=>({u_matrix:new s.UniformMatrix4f(m),u_pixels_to_tile_units:new s.UniformMatrix2f(m),u_device_pixel_ratio:new s.Uniform1f(m),u_units_to_pixels:new s.Uniform2f(m),u_dash_image:new s.Uniform1i(m),u_gradient_image:new s.Uniform1i(m),u_image_height:new s.Uniform1f(m),u_texsize:new s.Uniform2f(m),u_tile_units_to_pixels:new s.Uniform1f(m),u_alpha_discard_threshold:new s.Uniform1f(m),u_trim_offset:new s.Uniform2f(m)}),linePattern:m=>({u_matrix:new s.UniformMatrix4f(m),u_texsize:new s.Uniform2f(m),u_pixels_to_tile_units:new s.UniformMatrix2f(m),u_device_pixel_ratio:new s.Uniform1f(m),u_image:new s.Uniform1i(m),u_units_to_pixels:new s.Uniform2f(m),u_tile_units_to_pixels:new s.Uniform1f(m),u_alpha_discard_threshold:new s.Uniform1f(m)}),raster:m=>({u_matrix:new s.UniformMatrix4f(m),u_tl_parent:new s.Uniform2f(m),u_scale_parent:new s.Uniform1f(m),u_fade_t:new s.Uniform1f(m),u_opacity:new s.Uniform1f(m),u_image0:new s.Uniform1i(m),u_image1:new s.Uniform1i(m),u_brightness_low:new s.Uniform1f(m),u_brightness_high:new s.Uniform1f(m),u_saturation_factor:new s.Uniform1f(m),u_contrast_factor:new s.Uniform1f(m),u_spin_weights:new s.Uniform3f(m),u_perspective_transform:new s.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new s.Uniform1i(m),u_is_size_feature_constant:new s.Uniform1i(m),u_size_t:new s.Uniform1f(m),u_size:new s.Uniform1f(m),u_camera_to_center_distance:new s.Uniform1f(m),u_rotate_symbol:new s.Uniform1i(m),u_aspect_ratio:new s.Uniform1f(m),u_fade_change:new s.Uniform1f(m),u_matrix:new s.UniformMatrix4f(m),u_label_plane_matrix:new s.UniformMatrix4f(m),u_coord_matrix:new s.UniformMatrix4f(m),u_is_text:new s.Uniform1i(m),u_pitch_with_map:new s.Uniform1i(m),u_texsize:new s.Uniform2f(m),u_tile_id:new s.Uniform3f(m),u_zoom_transition:new s.Uniform1f(m),u_inv_rot_matrix:new s.UniformMatrix4f(m),u_merc_center:new s.Uniform2f(m),u_camera_forward:new s.Uniform3f(m),u_tile_matrix:new s.UniformMatrix4f(m),u_up_vector:new s.Uniform3f(m),u_ecef_origin:new s.Uniform3f(m),u_texture:new s.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new s.Uniform1i(m),u_is_size_feature_constant:new s.Uniform1i(m),u_size_t:new s.Uniform1f(m),u_size:new s.Uniform1f(m),u_camera_to_center_distance:new s.Uniform1f(m),u_rotate_symbol:new s.Uniform1i(m),u_aspect_ratio:new s.Uniform1f(m),u_fade_change:new s.Uniform1f(m),u_matrix:new s.UniformMatrix4f(m),u_label_plane_matrix:new s.UniformMatrix4f(m),u_coord_matrix:new s.UniformMatrix4f(m),u_is_text:new s.Uniform1i(m),u_pitch_with_map:new s.Uniform1i(m),u_texsize:new s.Uniform2f(m),u_texture:new s.Uniform1i(m),u_gamma_scale:new s.Uniform1f(m),u_device_pixel_ratio:new s.Uniform1f(m),u_tile_id:new s.Uniform3f(m),u_zoom_transition:new s.Uniform1f(m),u_inv_rot_matrix:new s.UniformMatrix4f(m),u_merc_center:new s.Uniform2f(m),u_camera_forward:new s.Uniform3f(m),u_tile_matrix:new s.UniformMatrix4f(m),u_up_vector:new s.Uniform3f(m),u_ecef_origin:new s.Uniform3f(m),u_is_halo:new s.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new s.Uniform1i(m),u_is_size_feature_constant:new s.Uniform1i(m),u_size_t:new s.Uniform1f(m),u_size:new s.Uniform1f(m),u_camera_to_center_distance:new s.Uniform1f(m),u_rotate_symbol:new s.Uniform1i(m),u_aspect_ratio:new s.Uniform1f(m),u_fade_change:new s.Uniform1f(m),u_matrix:new s.UniformMatrix4f(m),u_label_plane_matrix:new s.UniformMatrix4f(m),u_coord_matrix:new s.UniformMatrix4f(m),u_is_text:new s.Uniform1i(m),u_pitch_with_map:new s.Uniform1i(m),u_texsize:new s.Uniform2f(m),u_texsize_icon:new s.Uniform2f(m),u_texture:new s.Uniform1i(m),u_texture_icon:new s.Uniform1i(m),u_gamma_scale:new s.Uniform1f(m),u_device_pixel_ratio:new s.Uniform1f(m),u_is_halo:new s.Uniform1i(m)}),background:m=>({u_matrix:new s.UniformMatrix4f(m),u_opacity:new s.Uniform1f(m),u_color:new s.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new s.UniformMatrix4f(m),u_opacity:new s.Uniform1f(m),u_image:new s.Uniform1i(m),u_pattern_tl:new s.Uniform2f(m),u_pattern_br:new s.Uniform2f(m),u_texsize:new s.Uniform2f(m),u_pattern_size:new s.Uniform2f(m),u_pixel_coord_upper:new s.Uniform2f(m),u_pixel_coord_lower:new s.Uniform2f(m),u_tile_units_to_pixels:new s.Uniform1f(m)}),terrainRaster:Xf,terrainDepth:Xf,skybox:m=>({u_matrix:new s.UniformMatrix4f(m),u_sun_direction:new s.Uniform3f(m),u_cubemap:new s.Uniform1i(m),u_opacity:new s.Uniform1f(m),u_temporal_offset:new s.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new s.UniformMatrix4f(m),u_color_ramp:new s.Uniform1i(m),u_center_direction:new s.Uniform3f(m),u_radius:new s.Uniform1f(m),u_opacity:new s.Uniform1f(m),u_temporal_offset:new s.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new s.UniformMatrix3f(m),u_sun_direction:new s.Uniform3f(m),u_sun_intensity:new s.Uniform1f(m),u_color_tint_r:new s.Uniform4f(m),u_color_tint_m:new s.Uniform4f(m),u_luminance:new s.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new s.UniformMatrix4f(m),u_globe_matrix:new s.UniformMatrix4f(m),u_normalize_matrix:new s.UniformMatrix4f(m),u_merc_matrix:new s.UniformMatrix4f(m),u_zoom_transition:new s.Uniform1f(m),u_merc_center:new s.Uniform2f(m),u_image0:new s.Uniform1i(m),u_grid_matrix:new s.UniformMatrix3f(m),u_skirt_height:new s.Uniform1f(m),u_frustum_tl:new s.Uniform3f(m),u_frustum_tr:new s.Uniform3f(m),u_frustum_br:new s.Uniform3f(m),u_frustum_bl:new s.Uniform3f(m),u_globe_pos:new s.Uniform3f(m),u_globe_radius:new s.Uniform1f(m),u_viewport:new s.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new s.Uniform3f(m),u_frustum_tr:new s.Uniform3f(m),u_frustum_br:new s.Uniform3f(m),u_frustum_bl:new s.Uniform3f(m),u_horizon:new s.Uniform1f(m),u_transition:new s.Uniform1f(m),u_fadeout_range:new s.Uniform1f(m),u_color:new s.Uniform4f(m),u_high_color:new s.Uniform4f(m),u_space_color:new s.Uniform4f(m),u_star_intensity:new s.Uniform1f(m),u_star_density:new s.Uniform1f(m),u_star_size:new s.Uniform1f(m),u_temporal_offset:new s.Uniform1f(m),u_horizon_angle:new s.Uniform1f(m),u_rotation_matrix:new s.UniformMatrix4f(m)})};let Fd;function fu(m,l,h,y,x,w,k){const P=m.context,D=P.gl,j=m.transform,F=m.useProgram("collisionBox"),H=[];let ie=0,ue=0;for(let Ae=0;Ae<y.length;Ae++){const je=y[Ae],$e=l.getTile(je),Ne=$e.getBucket(h);if(!Ne)continue;const We=Mo(je,Ne,j);let Ue=We;x[0]===0&&x[1]===0||(Ue=m.translatePosMatrix(We,$e,x,w));const Je=k?Ne.textCollisionBox:Ne.iconCollisionBox,xt=Ne.collisionCircleArray;if(xt.length>0){const Ze=s.create(),ht=Ue;s.mul(Ze,Ne.placementInvProjMatrix,j.glCoordMatrix),s.mul(Ze,Ze,Ne.placementViewportMatrix),H.push({circleArray:xt,circleOffset:ue,transform:ht,invTransform:Ze,projection:Ne.getProjection()}),ie+=xt.length/4,ue=ie}Je&&(m.terrain&&m.terrain.setupElevationDraw($e,F),F.draw(P,D.LINES,s.DepthMode.disabled,s.StencilMode.disabled,m.colorModeForRenderPass(),s.CullFaceMode.disabled,ip(Ue,j,$e,Ne.getProjection()),h.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,j.zoom,null,[Je.collisionVertexBuffer,Je.collisionVertexBufferExt]))}if(!k||!H.length)return;const pe=m.useProgram("collisionCircle"),he=new s.StructArrayLayout2f1f2i16;he.resize(4*ie),he._trim();let me=0;for(const Ae of H)for(let je=0;je<Ae.circleArray.length/4;je++){const $e=4*je,Ne=Ae.circleArray[$e+0],We=Ae.circleArray[$e+1],Ue=Ae.circleArray[$e+2],Je=Ae.circleArray[$e+3];he.emplace(me++,Ne,We,Ue,Je,0),he.emplace(me++,Ne,We,Ue,Je,1),he.emplace(me++,Ne,We,Ue,Je,2),he.emplace(me++,Ne,We,Ue,Je,3)}(!Fd||Fd.length<2*ie)&&(Fd=function(Ae){const je=2*Ae,$e=new s.StructArrayLayout3ui6;$e.resize(je),$e._trim();for(let Ne=0;Ne<je;Ne++){const We=6*Ne;$e.uint16[We+0]=4*Ne+0,$e.uint16[We+1]=4*Ne+1,$e.uint16[We+2]=4*Ne+2,$e.uint16[We+3]=4*Ne+2,$e.uint16[We+4]=4*Ne+3,$e.uint16[We+5]=4*Ne+0}return $e}(ie));const Z=P.createIndexBuffer(Fd,!0),ce=P.createVertexBuffer(he,s.collisionCircleLayout.members,!0);for(const Ae of H){const je={u_matrix:Ae.transform,u_inv_matrix:Ae.invTransform,u_camera_to_center_distance:(Ee=j).getCameraToCenterDistance(Ae.projection),u_viewport_size:[Ee.width,Ee.height]};pe.draw(P,D.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,m.colorModeForRenderPass(),s.CullFaceMode.disabled,je,h.id,ce,Z,s.SegmentVector.simpleSegment(0,2*Ae.circleOffset,Ae.circleArray.length,Ae.circleArray.length/2),null,j.zoom)}var Ee;ce.destroy(),Z.destroy()}const Cy=s.create();function up({width:m,height:l,anchor:h,textOffset:y,textScale:x},w){const{horizontalAlign:k,verticalAlign:P}=s.getAnchorAlignment(h),D=-(k-.5)*m,j=-(P-.5)*l,F=s.evaluateVariableOffset(h,y);return new s.Point((D/x+F[0])*w,(j/x+F[1])*w)}function c1(m,l,h,y,x,w,k,P,D,j,F){const H=m.text.placedSymbolArray,ie=m.text.dynamicLayoutVertexArray,ue=m.icon.dynamicLayoutVertexArray,pe={},he=m.getProjection(),me=Tr(P,he,w),Z=w.elevation,ce=he.upVectorScale(P.canonical,w.center.lat,w.worldSize).metersToTile;ie.clear();for(let Ee=0;Ee<H.length;Ee++){const Ae=H.get(Ee),{tileAnchorX:je,tileAnchorY:$e,numGlyphs:Ne}=Ae,We=Ae.hidden||!Ae.crossTileID||m.allowVerticalPlacement&&!Ae.placedOrientation?null:y[Ae.crossTileID];if(We){let Ue=0,Je=0,xt=0;if(Z){const St=Z?Z.getAtTileOffset(P,je,$e):0,[en,yn,Gt]=he.upVector(P.canonical,je,$e);Ue=St*en*ce,Je=St*yn*ce,xt=St*Gt*ce}let[Ze,ht,tt,_t]=Ti(Ae.projectedAnchorX+Ue,Ae.projectedAnchorY+Je,Ae.projectedAnchorZ+xt,h?me:k);const Xe=hy(w.getCameraToCenterDistance(he),_t);let dt=x.evaluateSizeForFeature(m.textSizeData,j,Ae)*Xe/s.ONE_EM;h&&(dt*=m.tilePixelRatio/D);const wt=up(We,dt);h?({x:Ze,y:ht,z:tt}=he.projectTilePoint(je+wt.x,$e+wt.y,P.canonical),[Ze,ht,tt]=Ti(Ze+Ue,ht+Je,tt+xt,k)):(l&&wt._rotate(-w.angle),Ze+=wt.x,ht+=wt.y,tt=0);const mt=m.allowVerticalPlacement&&Ae.placedOrientation===s.WritingMode.vertical?Math.PI/2:0;for(let St=0;St<Ne;St++)s.addDynamicAttributes(ie,Ze,ht,tt,mt);F&&Ae.associatedIconIndex>=0&&(pe[Ae.associatedIconIndex]={x:Ze,y:ht,z:tt,angle:mt})}else Jo(Ne,ie)}if(F){ue.clear();const Ee=m.icon.placedSymbolArray;for(let Ae=0;Ae<Ee.length;Ae++){const je=Ee.get(Ae),{numGlyphs:$e}=je,Ne=pe[Ae];if(je.hidden||!Ne)Jo($e,ue);else{const{x:We,y:Ue,z:Je,angle:xt}=Ne;for(let Ze=0;Ze<$e;Ze++)s.addDynamicAttributes(ue,We,Ue,Je,xt)}}m.icon.dynamicLayoutVertexBuffer.updateData(ue)}m.text.dynamicLayoutVertexBuffer.updateData(ie)}function dp(m,l,h){return h.iconsInText&&l?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Ay(m,l,h,y,x,w,k,P,D,j,F,H){const ie=m.context,ue=ie.gl,pe=m.transform,he=P==="map",me=D==="map",Z=he&&h.layout.get("symbol-placement")!=="point",ce=he&&!me&&!Z,Ee=h.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Ae=!1;const je=m.depthModeForSublayer(0,s.DepthMode.ReadOnly),$e=[s.mercatorXfromLng(pe.center.lng),s.mercatorYfromLat(pe.center.lat)],Ne=h.layout.get("text-variable-anchor"),We=pe.projection.name==="globe",Ue=[],Je=[0,-1,0];let xt=Je;!We&&!pe.mercatorFromTransition||he||(xt=function(Ze){const ht=Ze._camera.getWorldToCamera(Ze.worldSize,1),tt=s.multiply([],ht,Ze.globeMatrix);s.invert(tt,tt);const _t=[0,0,0],Xe=[0,1,0,0];return s.transformMat4$1(Xe,Xe,tt),_t[0]=Xe[0],_t[1]=Xe[1],_t[2]=Xe[2],s.normalize(_t,_t),_t}(pe));for(const Ze of y){const ht=l.getTile(Ze),tt=ht.getBucket(h);if(!tt||tt.projection.name==="mercator"&&We)continue;const _t=x?tt.text:tt.icon;if(!_t||tt.fullyClipped||!_t.segments.get().length)continue;const Xe=_t.programConfigurations.get(h.id),dt=x||tt.sdfIcons,wt=x?tt.textSizeData:tt.iconSizeData,mt=me||pe.pitch!==0,St=s.evaluateSizeForZoom(wt,pe.zoom);let en,yn,Gt,dn,Fn=[0,0],Ln=null;if(x)yn=ht.glyphAtlasTexture,Gt=ue.LINEAR,en=ht.glyphAtlasTexture.size,tt.iconsInText&&(Fn=ht.imageAtlasTexture.size,Ln=ht.imageAtlasTexture,dn=mt||m.options.rotating||m.options.zooming||wt.kind==="composite"||wt.kind==="camera"?ue.LINEAR:ue.NEAREST);else{const na=h.layout.get("icon-size").constantOr(0)!==1||tt.iconsNeedLinear;yn=ht.imageAtlasTexture,Gt=dt||m.options.rotating||m.options.zooming||na||mt?ue.LINEAR:ue.NEAREST,en=ht.imageAtlasTexture.size}const Jt=tt.projection.name==="globe",Yn=Jt?xt:Je,rr=Jt?s.globeToMercatorTransition(pe.zoom):0,ir=Tr(Ze,tt.getProjection(),pe),or=pe.calculatePixelsToTileUnitsMatrix(ht),Gi=st(ir,ht.tileID.canonical,me,he,pe,tt.getProjection(),or),Ai=m.terrain&&me&&Z?s.invert(s.create(),Gi):Cy,Ro=Hr(ir,ht.tileID.canonical,me,he,pe,tt.getProjection(),or),bs=Ne&&tt.hasTextData(),Cr=h.layout.get("icon-text-fit")!=="none"&&bs&&tt.hasIconData();if(Z){const na=pe.elevation,Sa=na?na.getAtTileOffsetFunc(Ze,pe.center.lat,pe.worldSize,tt.getProjection()):null,ul=qs(ir,ht.tileID.canonical,me,he,pe,tt.getProjection(),or);Bf(tt,ir,m,x,ul,Ro,me,j,Sa,Ze)}const sr=Z||x&&Ne||Cr,Hn=m.translatePosMatrix(ir,ht,w,k),Zr=sr?Cy:Gi,Yi=m.translatePosMatrix(Ro,ht,w,k,!0),_r=tt.getProjection().createInversionMatrix(pe,Ze.canonical),ao=[];m.terrainRenderModeElevated()&&me&&ao.push("PITCH_WITH_MAP_TERRAIN"),Jt&&ao.push("PROJECTION_GLOBE_VIEW"),sr&&ao.push("PROJECTED_POS_ON_VIEWPORT");const eh=dt&&h.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let cl;cl=dt?tt.iconsInText?Ty(wt.kind,St,ce,me,m,Hn,Zr,Yi,en,Fn,Ze,rr,$e,_r,Yn,tt.getProjection()):Bd(wt.kind,St,ce,me,m,Hn,Zr,Yi,x,en,!0,Ze,rr,$e,_r,Yn,tt.getProjection()):ap(wt.kind,St,ce,me,m,Hn,Zr,Yi,x,en,Ze,rr,$e,_r,Yn,tt.getProjection());const Eu={program:m.useProgram(dp(dt,x,tt),Xe,ao),buffers:_t,uniformValues:cl,atlasTexture:yn,atlasTextureIcon:Ln,atlasInterpolation:Gt,atlasInterpolationIcon:dn,isSDF:dt,hasHalo:eh,tile:ht,labelPlaneMatrixInv:Ai};if(Ee&&tt.canOverlap){Ae=!0;const na=_t.segments.get();for(const Sa of na)Ue.push({segments:new s.SegmentVector([Sa]),sortKey:Sa.sortKey,state:Eu})}else Ue.push({segments:_t.segments,sortKey:0,state:Eu})}Ae&&Ue.sort((Ze,ht)=>Ze.sortKey-ht.sortKey);for(const Ze of Ue){const ht=Ze.state;if(m.terrain&&m.terrain.setupElevationDraw(ht.tile,ht.program,{useDepthForOcclusion:!We,labelPlaneMatrixInv:ht.labelPlaneMatrixInv}),ie.activeTexture.set(ue.TEXTURE0),ht.atlasTexture.bind(ht.atlasInterpolation,ue.CLAMP_TO_EDGE),ht.atlasTextureIcon&&(ie.activeTexture.set(ue.TEXTURE1),ht.atlasTextureIcon&&ht.atlasTextureIcon.bind(ht.atlasInterpolationIcon,ue.CLAMP_TO_EDGE)),ht.isSDF){const tt=ht.uniformValues;ht.hasHalo&&(tt.u_is_halo=1,pu(ht.buffers,Ze.segments,h,m,ht.program,je,F,H,tt)),tt.u_is_halo=0}pu(ht.buffers,Ze.segments,h,m,ht.program,je,F,H,ht.uniformValues)}}function pu(m,l,h,y,x,w,k,P,D){const j=y.context,F=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];x.draw(j,j.gl.TRIANGLES,w,k,P,s.CullFaceMode.disabled,D,h.id,m.layoutVertexBuffer,m.indexBuffer,l,h.paint,y.transform.zoom,m.programConfigurations.get(h.id),F)}function ky(m,l,h,y,x,w,k){const P=m.context.gl,D=h.paint.get("fill-pattern"),j=D&&D.constantOr(1);let F,H,ie,ue,pe;k?(H=j&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",F=P.LINES):(H=j?"fillPattern":"fill",F=P.TRIANGLES);for(const he of y){const me=l.getTile(he);if(j&&!me.patternsLoaded())continue;const Z=me.getBucket(h);if(!Z)continue;m.prepareDrawTile();const ce=Z.programConfigurations.get(h.id),Ee=m.useProgram(H,ce);j&&(m.context.activeTexture.set(P.TEXTURE0),me.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),ce.updatePaintBuffers());const Ae=D.constantOr(null);if(Ae&&me.imageAtlas){const $e=me.imageAtlas.patternPositions[Ae.toString()];$e&&ce.setConstantPatternPositions($e)}const je=m.translatePosMatrix(he.projMatrix,me,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(k){ue=Z.indexBuffer2,pe=Z.segments2;const $e=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[P.drawingBufferWidth,P.drawingBufferHeight];ie=H==="fillOutlinePattern"&&j?o1(je,m,me,$e):i1(je,$e)}else ue=Z.indexBuffer,pe=Z.segments,ie=j?tp(je,m,me):ol(je);m.prepareDrawProgram(m.context,Ee,he.toUnwrapped()),Ee.draw(m.context,F,x,m.stencilModeForClipping(he),w,s.CullFaceMode.disabled,ie,h.id,Z.layoutVertexBuffer,ue,pe,h.paint,m.transform.zoom,ce)}}function jd(m,l,h,y,x,w,k){const P=m.context,D=P.gl,j=m.transform,F=h.paint.get("fill-extrusion-pattern"),H=F.constantOr(1),ie=h.paint.get("fill-extrusion-opacity"),ue=[h.paint.get("fill-extrusion-ambient-occlusion-intensity"),h.paint.get("fill-extrusion-ambient-occlusion-radius")],pe=h.layout.get("fill-extrusion-edge-radius"),he=pe>0&&!h.paint.get("fill-extrusion-rounded-roof"),me=he?0:pe,Z=j.projection.name==="globe"?s.fillExtrusionHeightLift():0,ce=j.projection.name==="globe",Ee=ce?s.globeToMercatorTransition(j.zoom):0,Ae=[s.mercatorXfromLng(j.center.lng),s.mercatorYfromLat(j.center.lat)],je=[];ce&&je.push("PROJECTION_GLOBE_VIEW"),ue[0]>0&&je.push("FAUX_AO"),he&&je.push("ZERO_ROOF_RADIUS");for(const $e of y){const Ne=l.getTile($e),We=Ne.getBucket(h);if(!We||We.projection.name!==j.projection.name)continue;const Ue=We.programConfigurations.get(h.id),Je=m.useProgram(H?"fillExtrusionPattern":"fillExtrusion",Ue,je);if(m.terrain){const dt=m.terrain;if(m.style.terrainSetForDrapingOnly())dt.setupElevationDraw(Ne,Je,{useMeterToDem:!0});else{if(!We.enableTerrain)continue;if(dt.setupElevationDraw(Ne,Je,{useMeterToDem:!0}),Iy(P,l,$e,We,h,dt),!We.centroidVertexBuffer){const wt=Je.attributes.a_centroid_pos;wt!==void 0&&D.vertexAttrib2f(wt,0,0)}}}H&&(m.context.activeTexture.set(D.TEXTURE0),Ne.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),Ue.updatePaintBuffers());const xt=F.constantOr(null);if(xt&&Ne.imageAtlas){const dt=Ne.imageAtlas.patternPositions[xt.toString()];dt&&Ue.setConstantPatternPositions(dt)}const Ze=m.translatePosMatrix($e.projMatrix,Ne,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),ht=j.projection.createInversionMatrix(j,$e.canonical),tt=h.paint.get("fill-extrusion-vertical-gradient"),_t=H?wy(Ze,m,tt,ie,ue,me,$e,Ne,Z,Ee,Ae,ht):ep(Ze,m,tt,ie,ue,me,$e,Z,Ee,Ae,ht);m.prepareDrawProgram(P,Je,$e.toUnwrapped());const Xe=[];m.terrain&&Xe.push(We.centroidVertexBuffer),ce&&Xe.push(We.layoutVertexExtBuffer),Je.draw(P,P.gl.TRIANGLES,x,w,k,s.CullFaceMode.backCCW,_t,h.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,h.paint,m.transform.zoom,Ue,Xe)}}function Iy(m,l,h,y,x,w){const k=[Z=>{let ce=Z.canonical.x-1,Ee=Z.wrap;return ce<0&&(ce=(1<<Z.canonical.z)-1,Ee--),new s.OverscaledTileID(Z.overscaledZ,Ee,Z.canonical.z,ce,Z.canonical.y)},Z=>{let ce=Z.canonical.x+1,Ee=Z.wrap;return ce===1<<Z.canonical.z&&(ce=0,Ee++),new s.OverscaledTileID(Z.overscaledZ,Ee,Z.canonical.z,ce,Z.canonical.y)},Z=>new s.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,(Z.canonical.y===0?1<<Z.canonical.z:Z.canonical.y)-1),Z=>new s.OverscaledTileID(Z.overscaledZ,Z.wrap,Z.canonical.z,Z.canonical.x,Z.canonical.y===(1<<Z.canonical.z)-1?0:Z.canonical.y+1)],P=Z=>{const ce=l.getSource().minzoom,Ee=je=>{const $e=l.getTileByID(je);if($e&&$e.hasData())return $e.getBucket(x)},Ae=[0,-1,1];for(const je of Ae){if(Z.overscaledZ+je<ce)continue;const $e=Ee(Z.calculateScaledKey(Z.overscaledZ+je));if($e)return $e}},D=[0,0,0],j=(Z,ce)=>(D[0]=Math.min(Z.min.y,ce.min.y),D[1]=Math.max(Z.max.y,ce.max.y),D[2]=s.EXTENT-ce.min.x>Z.max.x?ce.min.x-s.EXTENT:Z.max.x,D),F=(Z,ce)=>(D[0]=Math.min(Z.min.x,ce.min.x),D[1]=Math.max(Z.max.x,ce.max.x),D[2]=s.EXTENT-ce.min.y>Z.max.y?ce.min.y-s.EXTENT:Z.max.y,D),H=[(Z,ce)=>j(Z,ce),(Z,ce)=>j(ce,Z),(Z,ce)=>F(Z,ce),(Z,ce)=>F(ce,Z)],ie=new s.Point(0,0);let ue,pe,he;const me=(Z,ce,Ee,Ae,je)=>{const $e=[[Ae?Ee:Z,Ae?Z:Ee,0],[Ae?Ee:ce,Ae?ce:Ee,0]],Ne=je<0?s.EXTENT+je:je,We=[Ae?Ne:(Z+ce)/2,Ae?(Z+ce)/2:Ne,0];return Ee===0&&je<0||Ee!==0&&je>0?w.getForTilePoints(he,[We],!0,pe):$e.push(We),w.getForTilePoints(h,$e,!0,ue),Math.max($e[0][2],$e[1][2],We[2])/w.exaggeration()};for(let Z=0;Z<4;Z++){const ce=(Z<2?1:5)-Z,Ee=y.borders[Z];if(Ee.length===0)continue;const Ae=he=k[Z](h),je=P(Ae);if(!(je&&je instanceof s.FillExtrusionBucket&&je.enableTerrain)||y.borderDoneWithNeighborZ[Z]===je.canonical.z&&je.borderDoneWithNeighborZ[ce]===y.canonical.z||(pe=w.findDEMTileFor(Ae),!pe||!pe.dem))continue;if(!ue){const Ue=w.findDEMTileFor(h);if(!Ue||!Ue.dem)return;ue=Ue}const $e=je.borders[ce];let Ne=0;const We=je.borderDoneWithNeighborZ[ce]!==y.canonical.z;if(y.canonical.z===je.canonical.z){for(let Ue=0;Ue<Ee.length;Ue++){const Je=y.featuresOnBorder[Ee[Ue]],xt=Je.borders[Z];let Ze;for(;Ne<$e.length&&(Ze=je.featuresOnBorder[$e[Ne]],!(Ze.borders[ce][1]>xt[0]+3));)We&&je.encodeCentroid(void 0,Ze,!1),Ne++;if(Ze&&Ne<$e.length){const ht=Ne;let tt=0;for(;!(Ze.borders[ce][0]>xt[1]-3)&&(tt++,++Ne!==$e.length);)Ze=je.featuresOnBorder[$e[Ne]];if(Ze=je.featuresOnBorder[$e[ht]],Je.intersectsCount()>1||Ze.intersectsCount()>1||tt!==1){tt!==1&&(Ne=ht),y.encodeCentroid(void 0,Je,!1),We&&je.encodeCentroid(void 0,Ze,!1);continue}const _t=H[Z](Je,Ze),Xe=Z%2?s.EXTENT-1:0;ie.x=me(_t[0],Math.min(s.EXTENT-1,_t[1]),Xe,Z<2,_t[2]),ie.y=0,y.encodeCentroid(ie,Je,!1),We&&je.encodeCentroid(ie,Ze,!1)}else y.encodeCentroid(void 0,Je,!1)}y.borderDoneWithNeighborZ[Z]=je.canonical.z,y.needsCentroidUpdate=!0,We&&(je.borderDoneWithNeighborZ[ce]=y.canonical.z,je.needsCentroidUpdate=!0)}else{for(const Ue of Ee)y.encodeCentroid(void 0,y.featuresOnBorder[Ue],!1);if(We){for(const Ue of $e)je.encodeCentroid(void 0,je.featuresOnBorder[Ue],!1);je.borderDoneWithNeighborZ[ce]=y.canonical.z,je.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[Z]=je.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(m)}const Xl=new s.Color(1,0,0,1),u1=new s.Color(0,1,0,1),d1=new s.Color(0,0,1,1),h1=new s.Color(1,0,1,1),f1=new s.Color(0,1,1,1);function p1(m,l,h){const y=m.context,x=m.transform,w=y.gl,k=x.projection.name==="globe",P=k?["PROJECTION_GLOBE_VIEW"]:null;let D=h.projMatrix;if(k&&s.globeToMercatorTransition(x.zoom)>0){const Je=s.transitionTileAABBinECEF(h.canonical,x),xt=s.globeDenormalizeECEF(Je);D=s.multiply(new Float32Array(16),x.globeMatrix,xt),s.multiply(D,x.projMatrix,D)}const j=m.useProgram("debug",null,P),F=l.getTileByID(h.key);m.terrain&&m.terrain.setupElevationDraw(F,j);const H=s.DepthMode.disabled,ie=s.StencilMode.disabled,ue=m.colorModeForRenderPass(),pe="$debug";y.activeTexture.set(w.TEXTURE0),m.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE),k?F._makeGlobeTileDebugBuffers(m.context,x):F._makeDebugTileBoundsBuffers(m.context,x.projection);const he=F._tileDebugBuffer||m.debugBuffer,me=F._tileDebugIndexBuffer||m.debugIndexBuffer,Z=F._tileDebugSegments||m.debugSegments;j.draw(y,w.LINE_STRIP,H,ie,ue,s.CullFaceMode.disabled,Rd(D,s.Color.red),pe,he,me,Z,null,null,null,[F._globeTileDebugBorderBuffer]);const ce=F.latestRawTileData,Ee=Math.floor((ce&&ce.byteLength||0)/1024),Ae=l.getTile(h).tileSize,je=512/Math.min(Ae,512)*(h.overscaledZ/x.zoom)*.5;let $e=h.canonical.toString();h.overscaledZ!==h.canonical.z&&($e+=` => ${h.overscaledZ}`),$e+=` ${Ee}kb`,function(Je,xt){Je.initDebugOverlayCanvas();const Ze=Je.debugOverlayCanvas,ht=Je.context.gl,tt=Je.debugOverlayCanvas.getContext("2d");tt.clearRect(0,0,Ze.width,Ze.height),tt.shadowColor="white",tt.shadowBlur=2,tt.lineWidth=1.5,tt.strokeStyle="white",tt.textBaseline="top",tt.font="bold 36px Open Sans, sans-serif",tt.fillText(xt,5,5),tt.strokeText(xt,5,5),Je.debugOverlayTexture.update(Ze),Je.debugOverlayTexture.bind(ht.LINEAR,ht.CLAMP_TO_EDGE)}(m,$e);const Ne=F._tileDebugTextBuffer||m.debugBuffer,We=F._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Ue=F._tileDebugTextSegments||m.debugSegments;j.draw(y,w.TRIANGLES,H,ie,s.ColorMode.alphaBlended,s.CullFaceMode.disabled,Rd(D,s.Color.transparent,je),pe,Ne,We,Ue,null,null,null,[F._globeTileDebugTextBuffer])}function Py(m,l,h,y){Jl(m,0,l+h/2,m.transform.width,h,y)}function Nd(m,l,h,y){Jl(m,l-h/2,0,h,m.transform.height,y)}function Jl(m,l,h,y,x,w){const k=m.context,P=k.gl;P.enable(P.SCISSOR_TEST),P.scissor(l*s.exported.devicePixelRatio,h*s.exported.devicePixelRatio,y*s.exported.devicePixelRatio,x*s.exported.devicePixelRatio),k.clear({color:w}),P.disable(P.SCISSOR_TEST)}const My=s.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Dy}=My;function ea(m,l,h,y){m.emplaceBack(l,h,y)}class $d{constructor(l){this.vertexArray=new s.StructArrayLayout3f12,this.indices=new s.StructArrayLayout3ui6,ea(this.vertexArray,-1,-1,1),ea(this.vertexArray,1,-1,1),ea(this.vertexArray,-1,1,1),ea(this.vertexArray,1,1,1),ea(this.vertexArray,-1,-1,-1),ea(this.vertexArray,1,-1,-1),ea(this.vertexArray,-1,1,-1),ea(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Dy),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=s.SegmentVector.simpleSegment(0,0,36,12)}}function zo(m,l,h,y,x,w){const k=m.gl,P=l.paint.get("sky-atmosphere-color"),D=l.paint.get("sky-atmosphere-halo-color"),j=l.paint.get("sky-atmosphere-sun-intensity"),F=((H,ie,ue,pe,he)=>({u_matrix_3f:H,u_sun_direction:ie,u_sun_intensity:ue,u_color_tint_r:[pe.r,pe.g,pe.b,pe.a],u_color_tint_m:[he.r,he.g,he.b,he.a],u_luminance:5e-5}))(s.fromMat4(s.create$1(),y),x,j,P,D);k.framebufferTexture2D(k.FRAMEBUFFER,k.COLOR_ATTACHMENT0,k.TEXTURE_CUBE_MAP_POSITIVE_X+w,l.skyboxTexture,0),h.draw(m,k.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,s.ColorMode.unblended,s.CullFaceMode.frontCW,F,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const mu=s.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class zy{constructor(l){const h=new s.StructArrayLayout5f20;h.emplaceBack(-1,1,1,0,0),h.emplaceBack(1,1,1,1,0),h.emplaceBack(1,-1,1,1,1),h.emplaceBack(-1,-1,1,0,1);const y=new s.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(h,mu.members),this.indexBuffer=l.createIndexBuffer(y),this.segments=s.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const sl={symbol:function(m,l,h,y,x){if(m.renderPass!=="translucent")return;const w=s.StencilMode.disabled,k=m.colorModeForRenderPass();h.layout.get("text-variable-anchor")&&function(P,D,j,F,H,ie,ue){const pe=D.transform,he=H==="map",me=ie==="map";for(const Z of P){const ce=F.getTile(Z),Ee=ce.getBucket(j);if(!Ee||!Ee.text||!Ee.text.segments.get().length)continue;const Ae=s.evaluateSizeForZoom(Ee.textSizeData,pe.zoom),je=Tr(Z,Ee.getProjection(),pe),$e=pe.calculatePixelsToTileUnitsMatrix(ce),Ne=st(je,ce.tileID.canonical,me,he,pe,Ee.getProjection(),$e),We=j.layout.get("icon-text-fit")!=="none"&&Ee.hasIconData();if(Ae){const Ue=Math.pow(2,pe.zoom-ce.tileID.overscaledZ);c1(Ee,he,me,ue,s.symbolSize,pe,Ne,Z,Ue,Ae,We)}}}(y,m,h,l,h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),x),h.paint.get("icon-opacity").constantOr(1)!==0&&Ay(m,l,h,y,!1,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),h.layout.get("icon-rotation-alignment"),h.layout.get("icon-pitch-alignment"),h.layout.get("icon-keep-upright"),w,k),h.paint.get("text-opacity").constantOr(1)!==0&&Ay(m,l,h,y,!0,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),h.layout.get("text-rotation-alignment"),h.layout.get("text-pitch-alignment"),h.layout.get("text-keep-upright"),w,k),l.map.showCollisionBoxes&&(fu(m,l,h,y,h.paint.get("text-translate"),h.paint.get("text-translate-anchor"),!0),fu(m,l,h,y,h.paint.get("icon-translate"),h.paint.get("icon-translate-anchor"),!1))},circle:function(m,l,h,y){if(m.renderPass!=="translucent")return;const x=h.paint.get("circle-opacity"),w=h.paint.get("circle-stroke-width"),k=h.paint.get("circle-stroke-opacity"),P=h.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)===0&&(w.constantOr(1)===0||k.constantOr(1)===0))return;const D=m.context,j=D.gl,F=m.transform,H=m.depthModeForSublayer(0,s.DepthMode.ReadOnly),ie=s.StencilMode.disabled,ue=m.colorModeForRenderPass(),pe=F.projection.name==="globe",he=[s.mercatorXfromLng(F.center.lng),s.mercatorYfromLat(F.center.lat)],me=[];for(let ce=0;ce<y.length;ce++){const Ee=y[ce],Ae=l.getTile(Ee),je=Ae.getBucket(h);if(!je||je.projection.name!==F.projection.name)continue;const $e=je.programConfigurations.get(h.id),Ne=rp(h);pe&&Ne.push("PROJECTION_GLOBE_VIEW");const We=m.useProgram("circle",$e,Ne),Ue=je.layoutVertexBuffer,Je=je.globeExtVertexBuffer,xt=je.indexBuffer,Ze=F.projection.createInversionMatrix(F,Ee.canonical),ht={programConfiguration:$e,program:We,layoutVertexBuffer:Ue,globeExtVertexBuffer:Je,indexBuffer:xt,uniformValues:np(m,Ee,Ae,Ze,he,h),tile:Ae};if(P){const tt=je.segments.get();for(const _t of tt)me.push({segments:new s.SegmentVector([_t]),sortKey:_t.sortKey,state:ht})}else me.push({segments:je.segments,sortKey:0,state:ht})}P&&me.sort((ce,Ee)=>ce.sortKey-Ee.sortKey);const Z={useDepthForOcclusion:!pe};for(const ce of me){const{programConfiguration:Ee,program:Ae,layoutVertexBuffer:je,globeExtVertexBuffer:$e,indexBuffer:Ne,uniformValues:We,tile:Ue}=ce.state,Je=ce.segments;m.terrain&&m.terrain.setupElevationDraw(Ue,Ae,Z),m.prepareDrawProgram(D,Ae,Ue.tileID.toUnwrapped()),Ae.draw(D,j.TRIANGLES,H,ie,ue,s.CullFaceMode.disabled,We,h.id,je,Ne,Je,h.paint,F.zoom,Ee,[$e])}},heatmap:function(m,l,h,y){if(h.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const x=m.context,w=x.gl,k=s.StencilMode.disabled,P=new s.ColorMode([w.ONE,w.ONE],s.Color.transparent,[!0,!0,!0,!0]);(function(ue,pe,he,me){const Z=ue.gl,ce=pe.width*me,Ee=pe.height*me;ue.activeTexture.set(Z.TEXTURE1),ue.viewport.set([0,0,ce,Ee]);let Ae=he.heatmapFbo;if(!Ae||Ae&&(Ae.width!==ce||Ae.height!==Ee)){Ae&&Ae.destroy();const je=Z.createTexture();Z.bindTexture(Z.TEXTURE_2D,je),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_S,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_WRAP_T,Z.CLAMP_TO_EDGE),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MIN_FILTER,Z.LINEAR),Z.texParameteri(Z.TEXTURE_2D,Z.TEXTURE_MAG_FILTER,Z.LINEAR),Ae=he.heatmapFbo=ue.createFramebuffer(ce,Ee,!1),function($e,Ne,We,Ue,Je,xt){const Ze=$e.gl;Ze.texImage2D(Ze.TEXTURE_2D,0,$e.isWebGL2&&$e.extRenderToTextureHalfFloat?Ze.RGBA16F:Ze.RGBA,Je,xt,0,Ze.RGBA,$e.extRenderToTextureHalfFloat?$e.isWebGL2?Ze.HALF_FLOAT:$e.extTextureHalfFloat.HALF_FLOAT_OES:Ze.UNSIGNED_BYTE,null),Ue.colorAttachment.set(We)}(ue,0,je,Ae,ce,Ee)}else Z.bindTexture(Z.TEXTURE_2D,Ae.colorAttachment.get()),ue.bindFramebuffer.set(Ae.framebuffer)})(x,m,h,m.transform.projection.name==="globe"?.5:.25),x.clear({color:s.Color.transparent});const D=m.transform,j=D.projection.name==="globe",F=j?["PROJECTION_GLOBE_VIEW"]:null,H=j?s.CullFaceMode.frontCCW:s.CullFaceMode.disabled,ie=[s.mercatorXfromLng(D.center.lng),s.mercatorYfromLat(D.center.lat)];for(let ue=0;ue<y.length;ue++){const pe=y[ue];if(l.hasRenderableParent(pe))continue;const he=l.getTile(pe),me=he.getBucket(h);if(!me||me.projection.name!==D.projection.name)continue;const Z=me.programConfigurations.get(h.id),ce=m.useProgram("heatmap",Z,F),{zoom:Ee}=m.transform;m.terrain&&m.terrain.setupElevationDraw(he,ce),m.prepareDrawProgram(x,ce,pe.toUnwrapped());const Ae=D.projection.createInversionMatrix(D,pe.canonical);ce.draw(x,w.TRIANGLES,s.DepthMode.disabled,k,P,H,Ey(m,pe,he,Ae,ie,Ee,h.paint.get("heatmap-intensity")),h.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,h.paint,m.transform.zoom,Z,j?[me.globeExtVertexBuffer]:null)}x.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(x,w){const k=x.context,P=k.gl,D=w.heatmapFbo;if(!D)return;k.activeTexture.set(P.TEXTURE0),P.bindTexture(P.TEXTURE_2D,D.colorAttachment.get()),k.activeTexture.set(P.TEXTURE1);let j=w.colorRampTexture;j||(j=w.colorRampTexture=new s.Texture(k,w.colorRamp,P.RGBA)),j.bind(P.LINEAR,P.CLAMP_TO_EDGE),x.useProgram("heatmapTexture").draw(k,P.TRIANGLES,s.DepthMode.disabled,s.StencilMode.disabled,x.colorModeForRenderPass(),s.CullFaceMode.disabled,((F,H,ie,ue)=>({u_image:0,u_color_ramp:1,u_opacity:H.paint.get("heatmap-opacity")}))(0,w),w.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,w.paint,x.transform.zoom)}(m,h))},line:function(m,l,h,y){if(m.renderPass!=="translucent")return;const x=h.paint.get("line-opacity"),w=h.paint.get("line-width");if(x.constantOr(1)===0||w.constantOr(1)===0)return;const k=m.depthModeForSublayer(0,s.DepthMode.ReadOnly),P=m.colorModeForRenderPass(),D=m.terrain&&m.terrain.renderingToTexture?1:s.exported.devicePixelRatio,j=h.paint.get("line-dasharray"),F=j.constantOr(1),H=h.layout.get("line-cap"),ie=h.paint.get("line-pattern"),ue=ie.constantOr(1),pe=h.paint.get("line-gradient"),he=ue?"linePattern":"line",me=m.context,Z=me.gl,ce=(Ae=>{const je=[];hu(Ae)&&je.push("RENDER_LINE_DASH"),Ae.paint.get("line-gradient")&&je.push("RENDER_LINE_GRADIENT");const $e=Ae.paint.get("line-trim-offset");$e[0]===0&&$e[1]===0||je.push("RENDER_LINE_TRIM_OFFSET");const Ne=Ae.paint.get("line-pattern").constantOr(1),We=Ae.paint.get("line-opacity").constantOr(1)!==1;return!Ne&&We&&je.push("RENDER_LINE_ALPHA_DISCARD"),je})(h);let Ee=ce.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(Ee=!1);for(const Ae of y){const je=l.getTile(Ae);if(ue&&!je.patternsLoaded())continue;const $e=je.getBucket(h);if(!$e)continue;m.prepareDrawTile();const Ne=$e.programConfigurations.get(h.id),We=m.useProgram(he,Ne,ce),Ue=ie.constantOr(null);if(Ue&&je.imageAtlas){const dt=je.imageAtlas.patternPositions[Ue.toString()];dt&&Ne.setConstantPatternPositions(dt)}const Je=j.constantOr(null),xt=H.constantOr(null);if(!ue&&Je&&xt&&je.lineAtlas){const dt=je.lineAtlas.getDash(Je,xt);dt&&Ne.setConstantPatternPositions(dt)}let[Ze,ht]=h.paint.get("line-trim-offset");(xt==="round"||xt==="square")&&Ze!==ht&&(Ze===0&&(Ze-=1),ht===1&&(ht+=1));const tt=m.terrain?Ae.projMatrix:null,_t=ue?du(m,je,h,tt,D):a1(m,je,h,tt,$e.lineClipsArray.length,D,[Ze,ht]);if(pe){const dt=$e.gradients[h.id];let wt=dt.texture;if(h.gradientVersion!==dt.version){let mt=256;if(h.stepInterpolant){const St=l.getSource().maxzoom,en=Ae.canonical.z===St?Math.ceil(1<<m.transform.maxZoom-Ae.canonical.z):1;mt=s.clamp(s.nextPowerOfTwo($e.maxLineLength/s.EXTENT*1024*en),256,me.maxTextureSize)}dt.gradient=s.renderColorRamp({expression:h.gradientExpression(),evaluationKey:"lineProgress",resolution:mt,image:dt.gradient||void 0,clips:$e.lineClipsArray}),dt.texture?dt.texture.update(dt.gradient):dt.texture=new s.Texture(me,dt.gradient,Z.RGBA),dt.version=h.gradientVersion,wt=dt.texture}me.activeTexture.set(Z.TEXTURE1),wt.bind(h.stepInterpolant?Z.NEAREST:Z.LINEAR,Z.CLAMP_TO_EDGE)}F&&(me.activeTexture.set(Z.TEXTURE0),je.lineAtlasTexture.bind(Z.LINEAR,Z.REPEAT),Ne.updatePaintBuffers()),ue&&(me.activeTexture.set(Z.TEXTURE0),je.imageAtlasTexture.bind(Z.LINEAR,Z.CLAMP_TO_EDGE),Ne.updatePaintBuffers()),m.prepareDrawProgram(me,We,Ae.toUnwrapped());const Xe=dt=>{We.draw(me,Z.TRIANGLES,k,dt,P,s.CullFaceMode.disabled,_t,h.id,$e.layoutVertexBuffer,$e.indexBuffer,$e.segments,h.paint,m.transform.zoom,Ne,[$e.layoutVertexBuffer2])};if(Ee){const dt=m.stencilModeForClipping(Ae).ref;dt===0&&m.terrain&&me.clear({stencil:0});const wt={func:Z.EQUAL,mask:255};_t.u_alpha_discard_threshold=.8,Xe(new s.StencilMode(wt,dt,255,Z.KEEP,Z.KEEP,Z.INVERT)),_t.u_alpha_discard_threshold=0,Xe(new s.StencilMode(wt,dt,255,Z.KEEP,Z.KEEP,Z.KEEP))}else Xe(m.stencilModeForClipping(Ae))}Ee&&(m.resetStencilClippingMasks(),m.terrain&&me.clear({stencil:0}))},fill:function(m,l,h,y){const x=h.paint.get("fill-color"),w=h.paint.get("fill-opacity");if(w.constantOr(1)===0)return;const k=m.colorModeForRenderPass(),P=h.paint.get("fill-pattern"),D=m.opaquePassEnabledForLayer()&&!P.constantOr(1)&&x.constantOr(s.Color.transparent).a===1&&w.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===D){const j=m.depthModeForSublayer(1,m.renderPass==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly);ky(m,l,h,y,j,k,!1)}if(m.renderPass==="translucent"&&h.paint.get("fill-antialias")){const j=m.depthModeForSublayer(h.getPaintProperty("fill-outline-color")?2:0,s.DepthMode.ReadOnly);ky(m,l,h,y,j,k,!0)}},"fill-extrusion":function(m,l,h,y){const x=h.paint.get("fill-extrusion-opacity");if(x!==0&&m.renderPass==="translucent"){const w=new s.DepthMode(m.context.gl.LEQUAL,s.DepthMode.ReadWrite,m.depthRangeFor3D);if(x!==1||h.paint.get("fill-extrusion-pattern").constantOr(1))jd(m,l,h,y,w,s.StencilMode.disabled,s.ColorMode.disabled),jd(m,l,h,y,w,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const k=m.colorModeForRenderPass();jd(m,l,h,y,w,s.StencilMode.disabled,k)}}},hillshade:function(m,l,h,y){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const x=m.context,w=m.depthModeForSublayer(0,s.DepthMode.ReadOnly),k=m.colorModeForRenderPass(),P=m.terrain&&m.terrain.renderingToTexture,[D,j]=m.renderPass!=="translucent"||P?[{},y]:m.stencilConfigForOverlap(y);for(const F of j){const H=l.getTile(F);if(H.needsHillshadePrepare&&m.renderPass==="offscreen")_y(m,H,h,w,s.StencilMode.disabled,k);else if(m.renderPass==="translucent"){const ie=P&&m.terrain?m.terrain.stencilModeForRTTOverlap(F):D[F.overscaledZ];vy(m,F,H,h,w,ie,k)}}x.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,l,h,y,x,w){if(m.renderPass!=="translucent"||h.paint.get("raster-opacity")===0||!y.length)return;const k=m.context,P=k.gl,D=l.getSource(),j=m.useProgram("raster"),F=m.colorModeForRenderPass(),H=m.terrain&&m.terrain.renderingToTexture,[ie,ue]=D instanceof Lt||H?[{},y]:m.stencilConfigForOverlap(y),pe=ue[ue.length-1].overscaledZ,he=!m.options.moving;for(const me of ue){const Z=H?s.DepthMode.disabled:m.depthModeForSublayer(me.overscaledZ-pe,h.paint.get("raster-opacity")===1?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly,P.LESS),ce=me.toUnwrapped(),Ee=l.getTile(me);if(H&&(!Ee||!Ee.hasData()))continue;const Ae=H?me.projMatrix:m.transform.calculateProjMatrix(ce,he),je=m.terrain&&H?m.terrain.stencilModeForRTTOverlap(me):ie[me.overscaledZ],$e=w?0:h.paint.get("raster-fade-duration");Ee.registerFadeDuration($e);const Ne=l.findLoadedParent(me,0),We=Jf(Ee,Ne,l,m.transform,$e);let Ue,Je;m.terrain&&m.terrain.prepareDrawTile();const xt=h.paint.get("raster-resampling")==="nearest"?P.NEAREST:P.LINEAR;k.activeTexture.set(P.TEXTURE0),Ee.texture.bind(xt,P.CLAMP_TO_EDGE),k.activeTexture.set(P.TEXTURE1),Ne?(Ne.texture.bind(xt,P.CLAMP_TO_EDGE),Ue=Math.pow(2,Ne.tileID.overscaledZ-Ee.tileID.overscaledZ),Je=[Ee.tileID.canonical.x*Ue%1,Ee.tileID.canonical.y*Ue%1]):Ee.texture.bind(xt,P.CLAMP_TO_EDGE),Ee.texture.useMipmap&&k.extTextureFilterAnisotropic&&m.transform.pitch>20&&P.texParameterf(P.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax);const Ze=sp(Ae,Je||[0,0],Ue||1,We,h,D instanceof Lt?D.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(k,j,ce),D instanceof Lt)D.boundsBuffer&&D.boundsSegments&&j.draw(k,P.TRIANGLES,Z,s.StencilMode.disabled,F,s.CullFaceMode.disabled,Ze,h.id,D.boundsBuffer,m.quadTriangleIndexBuffer,D.boundsSegments);else{const{tileBoundsBuffer:ht,tileBoundsIndexBuffer:tt,tileBoundsSegments:_t}=m.getTileBoundsBuffers(Ee);j.draw(k,P.TRIANGLES,Z,je,F,s.CullFaceMode.disabled,Ze,h.id,ht,tt,_t)}}m.resetStencilClippingMasks()},background:function(m,l,h,y){const x=h.paint.get("background-color"),w=h.paint.get("background-opacity");if(w===0)return;const k=m.context,P=k.gl,D=m.transform,j=D.tileSize,F=h.paint.get("background-pattern");if(m.isPatternMissing(F))return;const H=!F&&x.a===1&&w===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==H)return;const ie=s.StencilMode.disabled,ue=m.depthModeForSublayer(0,H==="opaque"?s.DepthMode.ReadWrite:s.DepthMode.ReadOnly),pe=m.colorModeForRenderPass(),he=m.useProgram(F?"backgroundPattern":"background");let me,Z=y;Z||(me=m.getBackgroundTiles(),Z=Object.values(me).map(ce=>ce.tileID)),F&&(k.activeTexture.set(P.TEXTURE0),m.imageManager.bind(m.context));for(const ce of Z){const Ee=ce.toUnwrapped(),Ae=y?ce.projMatrix:m.transform.calculateProjMatrix(Ee);m.prepareDrawTile();const je=l?l.getTile(ce):me?me[ce.key]:new s.Tile(ce,j,D.zoom,m),$e=F?l1(Ae,w,m,F,{tileID:ce,tileSize:j}):lp(Ae,w,x);m.prepareDrawProgram(k,he,Ee);const{tileBoundsBuffer:Ne,tileBoundsIndexBuffer:We,tileBoundsSegments:Ue}=m.getTileBoundsBuffers(je);he.draw(k,P.TRIANGLES,ue,ie,pe,s.CullFaceMode.disabled,$e,h.id,Ne,We,Ue)}},sky:function(m,l,h){const y=m.transform,x=y.projection.name==="mercator"||y.projection.name==="globe"?1:s.smoothstep(7,8,y.zoom),w=h.paint.get("sky-opacity")*x;if(w===0)return;const k=m.context,P=h.paint.get("sky-type"),D=new s.DepthMode(k.gl.LEQUAL,s.DepthMode.ReadOnly,[0,1]),j=m.frameCounter/1e3%1;P==="atmosphere"?m.renderPass==="offscreen"?h.needsSkyboxCapture(m)&&(function(F,H,ie,ue){const pe=F.context,he=pe.gl;let me=H.skyboxFbo;if(!me){me=H.skyboxFbo=pe.createFramebuffer(32,32,!1),H.skyboxGeometry=new $d(pe),H.skyboxTexture=pe.gl.createTexture(),he.bindTexture(he.TEXTURE_CUBE_MAP,H.skyboxTexture),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_WRAP_S,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_WRAP_T,he.CLAMP_TO_EDGE),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_MIN_FILTER,he.LINEAR),he.texParameteri(he.TEXTURE_CUBE_MAP,he.TEXTURE_MAG_FILTER,he.LINEAR);for(let Ae=0;Ae<6;++Ae)he.texImage2D(he.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,he.RGBA,32,32,0,he.RGBA,he.UNSIGNED_BYTE,null)}pe.bindFramebuffer.set(me.framebuffer),pe.viewport.set([0,0,32,32]);const Z=H.getCenter(F,!0),ce=F.useProgram("skyboxCapture"),Ee=new Float64Array(16);s.identity(Ee),s.rotateY(Ee,Ee,.5*-Math.PI),zo(pe,H,ce,Ee,Z,0),s.identity(Ee),s.rotateY(Ee,Ee,.5*Math.PI),zo(pe,H,ce,Ee,Z,1),s.identity(Ee),s.rotateX(Ee,Ee,.5*-Math.PI),zo(pe,H,ce,Ee,Z,2),s.identity(Ee),s.rotateX(Ee,Ee,.5*Math.PI),zo(pe,H,ce,Ee,Z,3),s.identity(Ee),zo(pe,H,ce,Ee,Z,4),s.identity(Ee),s.rotateY(Ee,Ee,Math.PI),zo(pe,H,ce,Ee,Z,5),pe.viewport.set([0,0,F.width,F.height])}(m,h),h.markSkyboxValid(m)):m.renderPass==="sky"&&function(F,H,ie,ue,pe){const he=F.context,me=he.gl,Z=F.transform,ce=F.useProgram("skybox");he.activeTexture.set(me.TEXTURE0),me.bindTexture(me.TEXTURE_CUBE_MAP,H.skyboxTexture);const Ee=((Ae,je,$e,Ne,We)=>({u_matrix:Ae,u_sun_direction:je,u_cubemap:0,u_opacity:Ne,u_temporal_offset:We}))(Z.skyboxMatrix,H.getCenter(F,!1),0,ue,pe);F.prepareDrawProgram(he,ce),ce.draw(he,me.TRIANGLES,ie,s.StencilMode.disabled,F.colorModeForRenderPass(),s.CullFaceMode.backCW,Ee,"skybox",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)}(m,h,D,w,j):P==="gradient"&&m.renderPass==="sky"&&function(F,H,ie,ue,pe){const he=F.context,me=he.gl,Z=F.transform,ce=F.useProgram("skyboxGradient");H.skyboxGeometry||(H.skyboxGeometry=new $d(he)),he.activeTexture.set(me.TEXTURE0);let Ee=H.colorRampTexture;Ee||(Ee=H.colorRampTexture=new s.Texture(he,H.colorRamp,me.RGBA)),Ee.bind(me.LINEAR,me.CLAMP_TO_EDGE);const Ae=((je,$e,Ne,We,Ue)=>({u_matrix:je,u_color_ramp:0,u_center_direction:$e,u_radius:s.degToRad(Ne),u_opacity:We,u_temporal_offset:Ue}))(Z.skyboxMatrix,H.getCenter(F,!1),H.paint.get("sky-gradient-radius"),ue,pe);F.prepareDrawProgram(he,ce),ce.draw(he,me.TRIANGLES,ie,s.StencilMode.disabled,F.colorModeForRenderPass(),s.CullFaceMode.backCW,Ae,"skyboxGradient",H.skyboxGeometry.vertexBuffer,H.skyboxGeometry.indexBuffer,H.skyboxGeometry.segment)}(m,h,D,w,j)},debug:function(m,l,h){for(let y=0;y<h.length;y++)p1(m,l,h[y])},custom:function(m,l,h,y){const x=m.context,w=h.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&h.isLayerDraped()){if(m.renderPass==="offscreen"){const k=w.prerender;if(k){if(m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const P=m.transform.pointMerc;k.call(w,x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(m.transform.zoom),[P.x,P.y],m.transform.pixelsPerMeterRatio)}else k.call(w,x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const P=w.renderToTile;if(P){const D=y[0].canonical,j=new s.MercatorCoordinate(D.x+y[0].wrap*(1<<D.z),D.y,D.z);x.setDepthMode(s.DepthMode.disabled),x.setStencilMode(s.StencilMode.disabled),x.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),P.call(w,x.gl,j),x.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),x.setStencilMode(s.StencilMode.disabled);const k=w.renderingMode==="3d"?new s.DepthMode(m.context.gl.LEQUAL,s.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,s.DepthMode.ReadOnly);if(x.setDepthMode(k),m.transform.projection.name==="globe"){const P=m.transform.pointMerc;w.render(x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),s.globeToMercatorTransition(m.transform.zoom),[P.x,P.y],m.transform.pixelsPerMeterRatio)}else w.render(x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState(),x.bindFramebuffer.set(null)}}else s.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Yl{constructor(l,h,y=!1){this.context=new He(l,y),this.transform=h,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=s.SourceCache.maxUnderzooming+s.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,h){const y=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Qf(this,l));const x=this._terrain;this.transform.elevation=y?x:null,x.update(l,this.transform,h)}_updateFog(l){const h=l.fog;if(!h||this.transform.projection.name==="globe"||h.getOpacity(this.transform.pitch)<1||h.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,x]=h.getFovAdjustedRange(this.transform._fov);if(y>x)return void(this.transform.fogCullDistSq=null);const w=y+.78*(x-y);this.transform.fogCullDistSq=w*w}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,h){if(this.width=l*s.exported.devicePixelRatio,this.height=h*s.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const l=this.context,h=new s.StructArrayLayout2i4;h.emplaceBack(0,0),h.emplaceBack(s.EXTENT,0),h.emplaceBack(0,s.EXTENT),h.emplaceBack(s.EXTENT,s.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(h,s.posAttributes.members),this.tileExtentSegments=s.SegmentVector.simpleSegment(0,0,4,2);const y=new s.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(s.EXTENT,0),y.emplaceBack(0,s.EXTENT),y.emplaceBack(s.EXTENT,s.EXTENT),this.debugBuffer=l.createVertexBuffer(y,s.posAttributes.members),this.debugSegments=s.SegmentVector.simpleSegment(0,0,4,5);const x=new s.StructArrayLayout2i4;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(x,s.posAttributes.members),this.viewportSegments=s.SegmentVector.simpleSegment(0,0,4,2);const w=new s.StructArrayLayout4i8;w.emplaceBack(0,0,0,0),w.emplaceBack(s.EXTENT,0,s.EXTENT,0),w.emplaceBack(0,s.EXTENT,0,s.EXTENT),w.emplaceBack(s.EXTENT,s.EXTENT,s.EXTENT,s.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(w,s.boundsAttributes.members),this.mercatorBoundsSegments=s.SegmentVector.simpleSegment(0,0,4,2);const k=new s.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(k);const P=new s.StructArrayLayout1ui2;for(const j of[0,1,3,2,0])P.emplaceBack(j);this.debugIndexBuffer=l.createIndexBuffer(P),this.emptyTexture=new s.Texture(l,new s.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=s.create();const D=this.context.gl;this.stencilClearMode=new s.StencilMode({func:D.ALWAYS,mask:0},0,255,D.ZERO,D.ZERO,D.ZERO),this.loadTimeStamps.push(s.window.performance.now()),this.atmosphereBuffer=new zy(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,h=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,h.TRIANGLES,s.DepthMode.disabled,this.stencilClearMode,s.ColorMode.disabled,s.CullFaceMode.disabled,cu(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,h,y){if(!h||this.currentStencilSource===h.id||!l.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let P=!1;for(const D of y)if(this._tileClippingMaskIDs[D.key]===void 0){P=!0;break}if(!P)return}this.currentStencilSource=h.id;const x=this.context,w=x.gl;this.nextStencilID+y.length>256&&this.clearStencil(),x.setColorMode(s.ColorMode.disabled),x.setDepthMode(s.DepthMode.disabled);const k=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of y){const D=h.getTile(P),j=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,{tileBoundsBuffer:F,tileBoundsIndexBuffer:H,tileBoundsSegments:ie}=this.getTileBoundsBuffers(D);k.draw(x,w.TRIANGLES,s.DepthMode.disabled,new s.StencilMode({func:w.ALWAYS,mask:0},j,255,w.KEEP,w.KEEP,w.REPLACE),s.ColorMode.disabled,s.CullFaceMode.disabled,cu(P.projMatrix),"$clipping",F,H,ie)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,h=this.context.gl;return new s.StencilMode({func:h.NOTEQUAL,mask:255},l,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const h=this.context.gl;return new s.StencilMode({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(l){const h=this.context.gl,y=l.sort((k,P)=>P.overscaledZ-k.overscaledZ),x=y[y.length-1].overscaledZ,w=y[0].overscaledZ-x+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const k={};for(let P=0;P<w;P++)k[P+x]=new s.StencilMode({func:h.GEQUAL,mask:255},P+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=w,[k,y]}return[{[x]:s.StencilMode.disabled},y]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new s.ColorMode([l.CONSTANT_COLOR,l.ONE],new s.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?s.ColorMode.unblended:s.ColorMode.alphaBlended}depthModeForSublayer(l,h,y){if(!this.opaquePassEnabledForLayer())return s.DepthMode.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new s.DepthMode(y||this.context.gl.LEQUAL,h,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,h){this.style=l,this.options=h,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(s.exported.now()),this.imageManager.beginFrame();const y=this.style.order,x=this.style._sourceCaches;for(const j in x){const F=x[j];F.used&&F.prepare(this.context)}const w={},k={},P={};for(const j in x){const F=x[j];w[j]=F.getVisibleCoordinates(),k[j]=w[j].slice().reverse(),P[j]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let j=0;j<y.length;j++)if(this.style._layers[y[j]].is3D()){this.opaquePassCutoff=j;break}if(this.terrain&&(this.terrain.updateTileBinding(P),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new s.GlobeSharedBuffers(this.context)),!s.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const j of y){const F=this.style._layers[j],H=l._getLayerSourceCache(F);if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;const ie=H?k[H.id]:void 0;(F.type==="custom"||F.isSky()||ie&&ie.length)&&this.renderLayer(this,H,F,ie)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const D=this.terrain;if(D&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&D.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:h.showOverdrawInspector?s.Color.black:s.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=h.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const j=this.style._layers[y[this.currentLayer]],F=l._getLayerSourceCache(j);if(j.isSky())continue;const H=F?k[F.id]:void 0;this._renderTileClippingMasks(j,F,H),this.renderLayer(this,F,j,H)}if(this.style.fog&&this.transform.projection.supportsFog&&function(j,F){const H=j.context,ie=H.gl,ue=j.transform,pe=new s.DepthMode(ie.LEQUAL,s.DepthMode.ReadOnly,[0,1]),he=j.useProgram("globeAtmosphere",null,ue.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),me=s.globeToMercatorTransition(ue.zoom),Z=F.properties.get("color").toArray01(),ce=F.properties.get("high-color").toArray01(),Ee=F.properties.get("space-color").toArray01PremultipliedAlpha(),Ae=s.identity$1([]);s.rotateY$1(Ae,Ae,-s.degToRad(ue._center.lng)),s.rotateX$1(Ae,Ae,s.degToRad(ue._center.lat)),s.rotateZ$1(Ae,Ae,ue.angle),s.rotateX$1(Ae,Ae,-ue._pitch);const je=s.fromQuat(new Float32Array(16),Ae),$e=s.mapValue(F.properties.get("star-intensity"),0,1,0,.25),Ne=5e-4,We=s.mapValue(F.properties.get("horizon-blend"),0,1,Ne,.25),Ue=s.globeUseCustomAntiAliasing(j,H,ue)&&We===Ne?ue.worldSize/(2*Math.PI*1.025)-1:ue.globeRadius,Je=j.frameCounter/1e3%1,xt=s.length(ue.globeCenterInViewSpace),Ze=Math.sqrt(Math.pow(xt,2)-Math.pow(Ue,2)),ht=Math.acos(Ze/xt),tt=((Xe,dt,wt,mt,St,en,yn,Gt,dn,Fn,Ln,Jt,Yn,rr)=>({u_frustum_tl:Xe,u_frustum_tr:dt,u_frustum_br:wt,u_frustum_bl:mt,u_horizon:St,u_transition:en,u_fadeout_range:yn,u_color:Gt,u_high_color:dn,u_space_color:Fn,u_star_intensity:Ln,u_star_size:5*s.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:Jt,u_horizon_angle:Yn,u_rotation_matrix:rr}))(ue.frustumCorners.TL,ue.frustumCorners.TR,ue.frustumCorners.BR,ue.frustumCorners.BL,ue.frustumCorners.horizon,me,We,Z,ce,Ee,$e,Je,ht,je);j.prepareDrawProgram(H,he);const _t=j.atmosphereBuffer;_t&&he.draw(H,ie.TRIANGLES,pe,s.StencilMode.disabled,s.ColorMode.alphaBlended,s.CullFaceMode.backCW,tt,"skybox",_t.vertexBuffer,_t.indexBuffer,_t.segments)}(this,this.style.fog),this.renderPass="sky",(s.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const j=this.style._layers[y[this.currentLayer]],F=l._getLayerSourceCache(j);j.isSky()&&this.renderLayer(this,F,j,F?k[F.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const j=this.style._layers[y[this.currentLayer]],F=l._getLayerSourceCache(j);if(j.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(j)){if(j.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const H=F?(j.type==="symbol"?P:k)[F.id]:void 0;this._renderTileClippingMasks(j,F,F?w[F.id]:void 0),this.renderLayer(this,F,j,H),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let j=null;s.values(this.style._layers).forEach(F=>{const H=l._getLayerSourceCache(F);H&&!F.isHidden(this.transform.zoom)&&(!j||j.getSource().maxzoom<H.getSource().maxzoom)&&(j=H)}),j&&this.options.showTileBoundaries&&sl.debug(this,j,j.getVisibleCoordinates())}this.options.showPadding&&function(j){const F=j.transform.padding;Py(j,j.transform.height-(F.top||0),3,Xl),Py(j,F.bottom||0,3,u1),Nd(j,F.left||0,3,d1),Nd(j,j.transform.width-(F.right||0),3,h1);const H=j.transform.centerPoint;(function(ie,ue,pe,he){Jl(ie,ue-1,pe-10,2,20,he),Jl(ie,ue-10,pe-1,20,2,he)})(j,H.x,j.transform.height-H.y,f1)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(s.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,h,y,x){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||x&&x.length)&&(this.id=y.id,this.gpuTimingStart(y),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(y.type)||l.terrain&&y.type==="custom")&&sl[y.type](l,h,y,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const h=this.context.extTimerQuery;let y=this.gpuTimers[l.id];y||(y=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:h.createQueryEXT()}),y.calls++,h.beginQueryEXT(h.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,h=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(h),l.beginQueryEXT(l.TIME_ELAPSED_EXT,h)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const h={};for(const y in l){const x=l[y],w=this.context.extTimerQuery,k=w.getQueryObjectEXT(x.query,w.QUERY_RESULT_EXT)/1e6;w.deleteQueryEXT(x.query),h[y]=k}return h}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const h=this.context.extTimerQuery;let y=0;for(const x of l)y+=h.getQueryObjectEXT(x,h.QUERY_RESULT_EXT)/1e6,h.deleteQueryEXT(x);return y}translatePosMatrix(l,h,y,x,w){if(!y[0]&&!y[1])return l;const k=w?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(k){const j=Math.sin(k),F=Math.cos(k);y=[y[0]*F-y[1]*j,y[0]*j+y[1]*F]}const P=[w?y[0]:rt(h,y[0],this.transform.zoom),w?y[1]:rt(h,y[1],this.transform.zoom),0],D=new Float32Array(16);return s.translate(D,l,P),D}saveTileTexture(l){const h=this._tileTextures[l.size[0]];h?h.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const h=this._tileTextures[l];return h&&h.length>0?h.pop():null}isPatternMissing(l){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,h=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,x=[];return this.terrainRenderModeElevated()&&x.push("TERRAIN"),this.transform.projection.name==="globe"&&x.push("GLOBE"),h&&x.push("ZERO_EXAGGERATION"),y&&!l&&y.getOpacity(this.transform.pitch)!==0&&x.push("FOG"),l&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}useProgram(l,h,y){this.cache=this.cache||{};const x=y||[],w=this.currentGlobalDefines().concat(x),k=Vn.cacheKey(Zf[l],l,w,h);return this.cache[k]||(this.cache[k]=new Vn(this.context,l,Zf[l],h,cp[l],w)),this.cache[k]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=s.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new s.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,h,y){if(this.terrain&&this.terrain.renderingToTexture)return;const x=this.style.fog;if(x){const w=x.getOpacity(this.transform.pitch),k=((P,D,j,F,H,ie,ue,pe,he,me,Z)=>{const ce=P.transform,Ee=D.properties.get("color").toArray01();Ee[3]=F;const Ae=P.frameCounter/1e3%1;return{u_fog_matrix:j?ce.calculateFogTileMatrix(j):P.identityMat,u_fog_range:D.getFovAdjustedRange(ce._fov),u_fog_color:Ee,u_fog_horizon_blend:D.properties.get("horizon-blend"),u_fog_temporal_offset:Ae,u_frustum_tl:H,u_frustum_tr:ie,u_frustum_br:ue,u_frustum_bl:pe,u_globe_pos:he,u_globe_radius:me,u_viewport:Z,u_globe_transition:s.globeToMercatorTransition(ce.zoom),u_is_globe:+(ce.projection.name==="globe")}})(this,x,y,w,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*s.exported.devicePixelRatio,this.transform.height*s.exported.devicePixelRatio]);h.setFogUniformValues(l,k)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,h=l.createTexture();return l.bindTexture(l.TEXTURE_2D,h),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),h}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,h=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const x of y)h[x.key]=l[x.key]||new s.Tile(x,512,this.transform.tileZoom,this);return h}clearBackgroundTiles(){this._backgroundTiles={}}}class Vd{constructor(l=0,h=0,y=0,x=0){if(isNaN(l)||l<0||isNaN(h)||h<0||isNaN(y)||y<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=h,this.left=y,this.right=x}interpolate(l,h,y){return h.top!=null&&l.top!=null&&(this.top=s.number(l.top,h.top,y)),h.bottom!=null&&l.bottom!=null&&(this.bottom=s.number(l.bottom,h.bottom,y)),h.left!=null&&l.left!=null&&(this.left=s.number(l.left,h.left,y)),h.right!=null&&l.right!=null&&(this.right=s.number(l.right,h.right,y)),this}getCenter(l,h){const y=s.clamp((this.left+l-this.right)/2,0,l),x=s.clamp((this.top+h-this.bottom)/2,0,h);return new s.Point(y,x)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Vd(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ud(m,l){const h=s.getColumn(m,3);s.fromQuat(m,l),s.setColumn(m,3,h)}function Un(m,l){const h=s.identity$1([]);return s.rotateZ$1(h,h,-l),s.rotateX$1(h,h,-m),h}function gu(m,l){const h=[m[0],m[1],0],y=[l[0],l[1],0];if(s.length(h)>=1e-15){const k=s.normalize([],h);s.scale$2(y,k,s.dot(y,k)),l[0]=y[0],l[1]=y[1]}const x=s.cross([],l,m);if(s.len(x)<1e-15)return null;const w=Math.atan2(-x[1],x[0]);return Un(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),w)}class Ly{constructor(l,h){this.position=l,this.orientation=h}get position(){return this._position}set position(l){if(l){const h=l instanceof s.MercatorCoordinate?l:new s.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(h.x=s.wrap(h.x,0,1)),this._position=h}else this._position=null}lookAtPoint(l,h){if(this.orientation=null,!this.position)return;const y=this.position,x=this._elevation?this._elevation.getAtPointOrZero(s.MercatorCoordinate.fromLngLat(l)):0,w=s.MercatorCoordinate.fromLngLat(l,x),k=[w.x-y.x,w.y-y.y,w.z-y.z];h||(h=[0,0,1]),h[2]=Math.abs(h[2]),this.orientation=gu(k,h)}setPitchBearing(l,h){this.orientation=Un(s.degToRad(l),s.degToRad(-h))}}class Wd{constructor(l,h){this._transform=s.identity([]),this.orientation=h,this.position=l}get mercatorPosition(){const l=this.position;return new s.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=s.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var h;l&&s.setColumn(this._transform,3,[(h=l)[0],h[1],h[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||s.identity$1([]),l&&Ud(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),h=this.right();return{bearing:Math.atan2(-h[1],h[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,h){this._orientation=Un(l,h),Ud(this._transform,this._orientation)}forward(){const l=s.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=s.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=s.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,h){const y=new Float64Array(16);return s.invert(y,this.getWorldToCamera(l,h)),y}getWorldToCameraPosition(l,h,y){const x=this.position;s.scale$2(x,x,-l);const w=new Float64Array(16);return s.fromScaling(w,[y,y,y]),s.translate(w,w,x),w[10]*=h,w}getWorldToCamera(l,h){const y=new Float64Array(16),x=new Float64Array(4),w=this.position;return s.conjugate(x,this._orientation),s.scale$2(w,w,-l),s.fromQuat(y,x),s.translate(y,y,w),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=h,y[9]*=h,y[10]*=h,y[11]*=h,y}getCameraToClipPerspective(l,h,y,x){const w=new Float64Array(16);return s.perspective(w,l,h,y,x),w}getDistanceToElevation(l,h=!1){const y=l===0?0:s.mercatorZfromAltitude(l,h?s.latFromMercatorY(this.position[1]):this.position[1]),x=this.forward();return(y-this.position[2])/x[2]}clone(){return new Wd([...this.position],[...this.orientation])}}function Ql(m,l){const h=Gd(m.projection,m.zoom,m.width,m.height),y=function(w,k,P,D,j){const F=new s.LngLat(P.lng-180*ta,P.lat),H=new s.LngLat(P.lng+180*ta,P.lat),ie=w.project(F.lng,F.lat),ue=w.project(H.lng,H.lat),pe=-Math.atan2(ue.y-ie.y,ue.x-ie.x),he=s.MercatorCoordinate.fromLngLat(P);he.y=s.clamp(he.y,-1+ta,1-ta);const me=he.toLngLat(),Z=w.project(me.lng,me.lat),ce=s.MercatorCoordinate.fromLngLat(me);ce.x+=ta;const Ee=ce.toLngLat(),Ae=w.project(Ee.lng,Ee.lat),je=Hd(Ae.x-Z.x,Ae.y-Z.y,pe),$e=s.MercatorCoordinate.fromLngLat(me);$e.y+=ta;const Ne=$e.toLngLat(),We=w.project(Ne.lng,Ne.lat),Ue=Hd(We.x-Z.x,We.y-Z.y,pe),Je=Math.abs(je.x)/Math.abs(Ue.y),xt=s.identity([]);s.rotateZ(xt,xt,-pe*(1-(j?0:D)));const Ze=s.identity([]);return s.scale(Ze,Ze,[1,1-(1-Je)*D,1]),Ze[4]=-Ue.x/Ue.y*D,s.rotateZ(Ze,Ze,pe),s.multiply(Ze,xt,Ze),Ze}(m.projection,0,m.center,h,l),x=Ry(m);return s.scale(y,y,[x,x,1]),y}function Ry(m){const l=m.projection,h=Gd(m.projection,m.zoom,m.width,m.height),y=Oy(l,m.center),x=Oy(l,s.LngLat.convert(l.center));return Math.pow(2,y*h+(1-h)*x)}function Gd(m,l,h,y,x=1/0){const w=m.range;if(!w)return 0;const k=Math.min(x,Math.max(h,y)),P=Math.log(k/1024)/Math.LN2;return s.smoothstep(w[0]+P,w[1]+P,l)}const ta=1/4e4;function Oy(m,l){const h=s.clamp(l.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=new s.LngLat(l.lng-180*ta,h),x=new s.LngLat(l.lng+180*ta,h),w=m.project(y.lng,h),k=m.project(x.lng,h),P=s.MercatorCoordinate.fromLngLat(y),D=s.MercatorCoordinate.fromLngLat(x),j=k.x-w.x,F=k.y-w.y,H=D.x-P.x,ie=D.y-P.y,ue=Math.sqrt((H*H+ie*ie)/(j*j+F*F));return Math.log(ue)/Math.LN2}function Hd(m,l,h){const y=Math.cos(h),x=Math.sin(h);return{x:m*y-l*x,y:m*x+l*y}}class ec{constructor(l,h,y,x,w,k,P){this.tileSize=512,this._renderWorldCopies=w===void 0||w,this._minZoom=l||0,this._maxZoom=h||22,this._minPitch=y??0,this._maxPitch=x??60,this.setProjection(k),this.setMaxBounds(P),this.width=0,this.height=0,this._center=new s.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Vd,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Wd,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new ec(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,h=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(l||y)&&this._constrainCamera(h),this._calcMatrices()}getProjection(){return s.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const h=this.projection?this.getProjection():void 0;this.projection=s.getProjection(this.projectionOptions);const y=!_(h,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=s.getProjection({name:"mercator"});const h=l!==this.projection.name;return h&&this._calcMatrices(),h}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return s.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.Point(this.width,this.height)}get bearing(){return s.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const h=-l*Math.PI/180;var y;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=(y=new s.ARRAY_TYPE(4),s.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),function(x,w,k){var P=w[0],D=w[1],j=w[2],F=w[3],H=Math.sin(k),ie=Math.cos(k);x[0]=P*ie+j*H,x[1]=D*ie+F*H,x[2]=P*-H+j*ie,x[3]=D*-H+F*ie}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const h=s.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=s.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const h=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._setZoom(h),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,h=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let x=0,w=0;for(let k=0;k<h.length;k++){const P=new s.Point(h[k][0]*this.width,y+h[k][1]*(this.height-y)),D=l.pointCoordinate(P);if(!D)continue;const j=1/Math.hypot(D[0]-this._camera.position[0],D[1]-this._camera.position[1]);x+=D[3]*j,w+=j}return w===0?NaN:x/w}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,h=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*h,x=this._mercatorZfromZoom(l),w=this._mercatorZfromZoom(this._maxZoom),k=Math.max(x-y,w);this._setZoom(this._zoomFromMercatorZ(k))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const h=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let y;y=l.z<this._camera.position[2]?[h.x,h.y,h.z]:[l.x,l.y,l.z];const x=s.length(s.sub([],this._camera.position,y));return s.clamp(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let h=!1;if(l.orientation&&!s.exactEquals(l.orientation,this._camera.orientation)&&(h=this._setCameraOrientation(l.orientation)),l.position){const y=[l.position.x,l.position.y,l.position.z];s.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),h=!0)}h&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,h=new Ly;return h.position=new s.MercatorCoordinate(l[0],l[1],l[2]),h.orientation=this._camera.orientation,h._elevation=this.elevation,h._renderWorldCopies=this.renderWorldCopies,h}_setCameraOrientation(l){if(!s.length$1(l))return!1;s.normalize$1(l,l);const h=s.transformQuat([],[0,0,-1],l),y=s.transformQuat([],[0,-1,0],l);if(y[2]<0)return!1;const x=gu(h,y);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(l){const h=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;l[2]=s.clamp(l[2],x/y,x/h),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,h,y){this._unmodified=!1,this._edgeInsets.interpolate(l,h,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const h=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(l){const h=[new s.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const y=this.pointCoordinate(new s.Point(0,0)),x=this.pointCoordinate(new s.Point(this.width,0)),w=this.pointCoordinate(new s.Point(this.width,this.height)),k=this.pointCoordinate(new s.Point(0,this.height)),P=Math.floor(Math.min(y.x,x.x,w.x,k.x)),D=Math.floor(Math.max(y.x,x.x,w.x,k.x)),j=1;for(let F=P-j;F<=D+j;F++)F!==0&&h.push(new s.UnwrappedTileID(F,l))}return h}coveringTiles(l){let h=this.coveringZoomLevel(l);const y=h,x=this.elevation&&!l.isTerrainDEM,w=this.projection.name==="mercator";if(l.minzoom!==void 0&&h<l.minzoom)return[];l.maxzoom!==void 0&&h>l.maxzoom&&(h=l.maxzoom);const k=this.locationCoordinate(this.center),P=this.center.lat,D=1<<h,j=[D*k.x,D*k.y,0],F=this.projection.name==="globe",H=!F,ie=s.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,h,H),ue=F?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),pe=D*s.mercatorZfromAltitude(1,this.center.lat),he=this._camera.position[2]/s.mercatorZfromAltitude(1,this.center.lat),me=[D*ue.x,D*ue.y,he*(H?1:pe)],Z=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),ce=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?h:0,Ee=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,Ae=l.isTerrainDEM?-Ee:this._elevation?this._elevation.getMinElevationBelowMSL():0,je=this.projection.isReprojectedInTileSpace?Ry(this):1,$e=Xe=>{const wt=new s.MercatorCoordinate(Xe.x+25e-6,Xe.y,Xe.z),mt=new s.MercatorCoordinate(Xe.x,Xe.y+25e-6,Xe.z),St=Xe.toLngLat(),en=wt.toLngLat(),yn=mt.toLngLat(),Gt=this.locationCoordinate(St),dn=this.locationCoordinate(en),Fn=this.locationCoordinate(yn),Ln=Math.hypot(dn.x-Gt.x,dn.y-Gt.y),Jt=Math.hypot(Fn.x-Gt.x,Fn.y-Gt.y);return Math.sqrt(Ln*Jt)*je/25e-6},Ne=Xe=>{const dt=Ee,wt=Ae;return{aabb:s.tileAABB(this,D,0,0,0,Xe,wt,dt,this.projection),zoom:0,x:0,y:0,minZ:wt,maxZ:dt,wrap:Xe,fullyVisible:!1}},We=[];let Ue=[];const Je=h,xt=l.reparseOverscaled?y:h,Ze=Xe=>Xe*Xe,ht=Ze((he-this._centerAltitude)*pe),tt=Xe=>{if(!this._elevation||!Xe.tileID||!w)return;const dt=this._elevation.getMinMaxForTile(Xe.tileID),wt=Xe.aabb;dt?(wt.min[2]=dt.min,wt.max[2]=dt.max,wt.center[2]=(wt.min[2]+wt.max[2])/2):(Xe.shouldSplit=_t(Xe),Xe.shouldSplit||(wt.min[2]=wt.max[2]=wt.center[2]=this._centerAltitude))},_t=Xe=>{if(Xe.zoom<ce)return!0;if(Xe.zoom===Je)return!1;if(Xe.shouldSplit!=null)return Xe.shouldSplit;const dt=Xe.aabb.distanceX(me),wt=Xe.aabb.distanceY(me);let mt=ht,St=1;if(F){mt=Ze(Xe.aabb.distanceZ(me));const Gt=Math.pow(2,Xe.zoom),dn=s.latFromMercatorY((Xe.y+1)/Gt),Fn=s.latFromMercatorY(Xe.y/Gt),Ln=Math.min(Math.max(P,dn),Fn),Jt=s.circumferenceAtLatitude(Ln)/s.circumferenceAtLatitude(P);if(St=Ln===P?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,Jt/this._mercatorScaleRatio),this.zoom<=s.GLOBE_ZOOM_THRESHOLD_MIN&&Xe.zoom===Je-1&&Jt>=.9)return!0}else if(x&&(mt=Ze(Xe.aabb.distanceZ(me)*pe)),this.projection.isReprojectedInTileSpace&&y<=5){const Gt=Math.pow(2,Xe.zoom),dn=$e(new s.MercatorCoordinate((Xe.x+.5)/Gt,(Xe.y+.5)/Gt));St=dn>.85?1:dn}const en=dt*dt+wt*wt+mt,yn=Ze((1<<Je-Xe.zoom)*Z*St*((Gt,dn)=>{if(dn*Ze(.707)<Gt)return 1;const Fn=Math.sqrt(dn/Gt);return Fn/(1.4144271570014144+(Math.pow(1.1,Fn-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(mt,ht),en));return en<yn};if(this.renderWorldCopies)for(let Xe=1;Xe<=3;Xe++)We.push(Ne(-Xe)),We.push(Ne(Xe));for(We.push(Ne(0));We.length>0;){const Xe=We.pop(),dt=Xe.x,wt=Xe.y;let mt=Xe.fullyVisible;if(!mt){const St=Xe.aabb.intersects(ie);if(St===0)continue;mt=St===2}if(Xe.zoom!==Je&&_t(Xe))for(let St=0;St<4;St++){const en=(dt<<1)+St%2,yn=(wt<<1)+(St>>1),Gt={aabb:w?Xe.aabb.quadrant(St):s.tileAABB(this,D,Xe.zoom+1,en,yn,Xe.wrap,Xe.minZ,Xe.maxZ,this.projection),zoom:Xe.zoom+1,x:en,y:yn,wrap:Xe.wrap,fullyVisible:mt,tileID:void 0,shouldSplit:void 0,minZ:Xe.minZ,maxZ:Xe.maxZ};x&&!F&&(Gt.tileID=new s.OverscaledTileID(Xe.zoom+1===Je?xt:Xe.zoom+1,Xe.wrap,Xe.zoom+1,en,yn),tt(Gt)),We.push(Gt)}else{const St=Xe.zoom===Je?xt:Xe.zoom;if(l.minzoom&&l.minzoom>St)continue;const en=j[0]-(.5+dt+(Xe.wrap<<Xe.zoom))*(1<<h-Xe.zoom),yn=j[1]-.5-wt,Gt=Xe.tileID?Xe.tileID:new s.OverscaledTileID(St,Xe.wrap,Xe.zoom,dt,wt);Ue.push({tileID:Gt,distanceSq:en*en+yn*yn})}}if(this.fogCullDistSq){const Xe=this.fogCullDistSq,dt=this.horizonLineFromTop();Ue=Ue.filter(wt=>{const mt=[0,0,0,1],St=[s.EXTENT,s.EXTENT,0,1],en=this.calculateFogTileMatrix(wt.tileID.toUnwrapped());s.transformMat4$1(mt,mt,en),s.transformMat4$1(St,St,en);const yn=s.getAABBPointSquareDist(mt,St);if(yn===0)return!0;let Gt=!1;const dn=this._elevation;if(dn&&yn>Xe&&dt!==0){const Fn=this.calculateProjMatrix(wt.tileID.toUnwrapped());let Ln;l.isTerrainDEM||(Ln=dn.getMinMaxForTile(wt.tileID)),Ln||(Ln={min:Ae,max:Ee});const Jt=s.furthestTileCorner(this.rotation),Yn=[Jt[0]*s.EXTENT,Jt[1]*s.EXTENT,Ln.max];s.transformMat4(Yn,Yn,Fn),Gt=(1-Yn[1])*this.height*.5<dt}return yn<Xe||Gt})}return Ue.sort((Xe,dt)=>Xe.distanceSq-dt.distanceSq).map(Xe=>Xe.tileID)}resize(l,h){this.width=l,this.height=h,this.pixelsToGLUnits=[2/l,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const h=s.clamp(l.lat,-s.MAX_MERCATOR_LATITUDE,s.MAX_MERCATOR_LATITUDE),y=this.projection.project(l.lng,h);return new s.Point(y.x*this.worldSize,y.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/s.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,h){let y,x;const w=this.centerPoint;if(this.projection.name==="globe"){const P=this.worldSize;y=(h.x-w.x)/P,x=(h.y-w.y)/P}else{const P=this.pointCoordinate(h),D=this.pointCoordinate(w);y=P.x-D.x,x=P.y-D.y}const k=this.locationCoordinate(l);this.setLocation(new s.MercatorCoordinate(k.x-y,k.y-x))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,h){const y=h?s.mercatorZfromAltitude(h,l.lat):void 0,x=this.projection.project(l.lng,l.lat);return new s.MercatorCoordinate(x.x,x.y,y)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,h){const y=h??this._centerAltitude,x=[l.x,l.y,0,1],w=[l.x,l.y,1,1];s.transformMat4$1(x,x,this.pixelMatrixInverse),s.transformMat4$1(w,w,this.pixelMatrixInverse);const k=w[3];s.scale$1(x,x,1/x[3]),s.scale$1(w,w,1/k);const P=x[2],D=w[2];return{p0:x,p1:w,t:P===D?0:(y-P)/(D-P)}}screenPointToMercatorRay(l){const h=[l.x,l.y,0,1],y=[l.x,l.y,1,1];return s.transformMat4$1(h,h,this.pixelMatrixInverse),s.transformMat4$1(y,y,this.pixelMatrixInverse),s.scale$1(h,h,1/h[3]),s.scale$1(y,y,1/y[3]),h[2]=s.mercatorZfromAltitude(h[2],this._center.lat)*this.worldSize,y[2]=s.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,s.scale$1(h,h,1/this.worldSize),s.scale$1(y,y,1/this.worldSize),new s.Ray([h[0],h[1],h[2]],s.normalize([],s.sub([],y,h)))}rayIntersectionCoordinate(l){const{p0:h,p1:y,t:x}=l,w=s.mercatorZfromAltitude(h[2],this._center.lat),k=s.mercatorZfromAltitude(y[2],this._center.lat);return new s.MercatorCoordinate(s.number(h[0],y[0],x)/this.worldSize,s.number(h[1],y[1],x)/this.worldSize,s.number(w,k,x))}pointCoordinate(l,h=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,h)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let h=this.projection.pointCoordinate3D(this,l.x,l.y);if(h)return new s.MercatorCoordinate(h[0],h[1],h[2]);let y=0,x=this.horizonLineFromTop();if(l.y>x)return this.pointCoordinate(l);const w=.02*x,k=l.clone();for(let P=0;P<10&&x-y>w;P++){k.y=s.number(y,x,.66);const D=this.projection.pointCoordinate3D(this,k.x,k.y);D?(x=k.y,h=D):y=k.y}return h?new s.MercatorCoordinate(h[0],h[1],h[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(l);const h=this.pointCoordinate(l);return h.y>=0&&h.y<=1}_coordinatePoint(l,h){const y=h&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,x=[l.x*this.worldSize,l.y*this.worldSize,y+l.toAltitude(),1];return s.transformMat4$1(x,x,this.pixelMatrix),x[3]>0?new s.Point(x[0]/x[3],x[1]/x[3]):new s.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:h}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,w=this.pointLocation3D(new s.Point(h,l)),k=this.pointLocation3D(new s.Point(x,l)),P=this.pointLocation3D(new s.Point(x,y)),D=this.pointLocation3D(new s.Point(h,y));let j=Math.min(w.lng,k.lng,P.lng,D.lng),F=Math.max(w.lng,k.lng,P.lng,D.lng),H=Math.min(w.lat,k.lat,P.lat,D.lat),ie=Math.max(w.lat,k.lat,P.lat,D.lat);const ue=Math.pow(2,-this.zoom)/16*270,pe=this.projection.name==="globe"?1:4,he=(me,Z,ce,Ee,Ae)=>{const je=(me+ce)/2,$e=(Z+Ee)/2,Ne=new s.Point(je,$e),{lng:We,lat:Ue}=this.pointLocation3D(Ne),Je=Math.max(0,j-We,H-Ue,We-F,Ue-ie);j=Math.min(j,We),F=Math.max(F,We),H=Math.min(H,Ue),ie=Math.max(ie,Ue),(Ae<pe||Je>ue)&&(he(me,Z,je,$e,Ae+1),he(je,$e,ce,Ee,Ae+1))};if(he(h,l,x,l,1),he(x,l,x,y,1),he(x,y,h,y,1),he(h,y,h,l,1),this.projection.name==="globe"){const[me,Z]=s.polesInViewport(this);me?(ie=90,F=180,j=-180):Z&&(H=-90,F=180,j=-180)}return new s.LngLatBounds(new s.LngLat(j,H),new s.LngLat(F,ie))}_getBoundsRectangular(l,h){const{top:y,left:x}=this._edgeInsets,w=this.height-this._edgeInsets.bottom,k=this.width-this._edgeInsets.right,P=new s.Point(x,y),D=new s.Point(k,y),j=new s.Point(k,w),F=new s.Point(x,w);let H=this.pointCoordinate(P,l),ie=this.pointCoordinate(D,l);const ue=this.pointCoordinate(j,h),pe=this.pointCoordinate(F,h),he=(me,Z)=>(Z.y-me.y)/(Z.x-me.x);return H.y>1&&ie.y>=0?H=new s.MercatorCoordinate((1-pe.y)/he(pe,H)+pe.x,1):H.y<0&&ie.y<=1&&(H=new s.MercatorCoordinate(-pe.y/he(pe,H)+pe.x,0)),ie.y>1&&H.y>=0?ie=new s.MercatorCoordinate((1-ue.y)/he(ue,ie)+ue.x,1):ie.y<0&&H.y<=1&&(ie=new s.MercatorCoordinate(-ue.y/he(ue,ie)+ue.x,0)),new s.LngLatBounds().extend(this.coordinateLocation(H)).extend(this.coordinateLocation(ie)).extend(this.coordinateLocation(pe)).extend(this.coordinateLocation(ue))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const h=l.visibleDemTiles.reduce((y,x)=>{if(x.dem){const w=x.dem.tree;y.min=Math.min(y.min,w.minimums[0]),y.max=Math.max(y.max,w.maximums[0])}return y},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(h.min*l.exaggeration(),h.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const h=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-h*(1-this._horizonShift);return l?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-s.MAX_MERCATOR_LATITUDE,this.maxLat=s.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=s.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=s.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=s.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=s.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,h){return this.projection.createTileMatrix(this,h,l)}calculateDistanceTileData(l){const h=l.key,y=this._distanceTileDataCache;if(y[h])return y[h];const x=l.canonical,w=1/this.height,k=this.cameraWorldSize,P=k/this.zoomScale(x.z),D=(x.x+Math.pow(2,x.z)*l.wrap)*P,j=x.y*P,F=this.point;F.x*=k/this.worldSize,F.y*=k/this.worldSize;const H=this.angle,ie=Math.sin(-H),ue=-Math.cos(-H);return y[h]={bearing:[ie,ue],center:[(F.x-D)*w,(F.y-j)*w],scale:P/s.EXTENT*w},y[h]}calculateFogTileMatrix(l){const h=l.key,y=this._fogTileMatrixCache;if(y[h])return y[h];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return s.multiply(x,this.worldToFogMatrix,x),y[h]=new Float32Array(x),y[h]}calculateProjMatrix(l,h=!1){const y=l.key,x=h?this._alignedProjMatrixCache:this._projMatrixCache;if(x[y])return x[y];const w=this.calculatePosMatrix(l,this.worldSize);return s.multiply(w,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:h?this.alignedProjMatrix:this.projMatrix,w),x[y]=new Float32Array(w),x[y]}calculatePixelsToTileUnitsMatrix(l){const h=l.tileID.key,y=this._pixelsToTileUnitsCache;if(y[h])return y[h];const x=function(w,k){const{scale:P}=w.tileTransform,D=P*s.EXTENT/(w.tileSize*Math.pow(2,k.zoom-w.tileID.overscaledZ+w.tileID.canonical.z));return j=new Float32Array(4),ie=(F=k.inverseAdjustmentMatrix)[1],ue=F[2],pe=F[3],me=(H=[D,D])[1],j[0]=F[0]*(he=H[0]),j[1]=ie*he,j[2]=ue*me,j[3]=pe*me,j;var j,F,H,ie,ue,pe,he,me}(l,this);return y[h]=x,y[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,h=s.fromScaling([],[l,l,l]);return s.multiply(h,h,this.globeMatrix),h}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const h=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(h),x=this._camera.forward(),w=s.mercatorZfromAltitude(1,this._center.lat);y[2]/=w,x[2]/=w,s.normalize(x,x);const k=l.raycast(y,x,l.exaggeration());if(k){const P=s.scaleAndAdd([],y,x,k),D=new s.MercatorCoordinate(P[0],P[1],s.mercatorZfromAltitude(P[2],s.latFromMercatorY(P[1]))),j=(D.z+s.length([D.x-y[0],D.y-y[1],D.z-y[2]*w]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(j),this._centerAltitude=D.toAltitude(),this._center=this.coordinateLocation(D),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const h=this._elevation,y=s.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(y),w=h.getAtPointOrZero(new s.MercatorCoordinate(...x)),k=this.pixelsPerMeter/this.worldSize*w,P=this._minimumHeightOverTerrain(),D=x[2]-k;if(D<=P)if(D<0||l){const j=this.locationCoordinate(this._center,this._centerAltitude),F=[x[0],x[1],j.z-x[2]],H=s.length(F);F[2]-=(P-D)/this._pixelsPerMercatorPixel;const ie=s.length(F);if(ie===0)return;s.scale$2(F,F,H/ie*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],j.z*this._pixelsPerMercatorPixel-F[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const ie=this.center;return ie.lat=s.clamp(ie.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(ie.lng=s.clamp(ie.lng,this.minLng,this.maxLng)),this.center=ie,void(this._constraining=!1)}const h=this._unmodified,{x:y,y:x}=this.point;let w=0,k=y,P=x;const D=this.width/2,j=this.height/2,F=this.worldMinY*this.scale,H=this.worldMaxY*this.scale;if(x-j<F&&(P=F+j),x+j>H&&(P=H-j),H-F<this.height&&(w=Math.max(w,this.height/(H-F)),P=(H+F)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const ie=this.worldMinX*this.scale,ue=this.worldMaxX*this.scale,pe=this.worldSize/2-(ie+ue)/2;k=(y+pe+this.worldSize)%this.worldSize-pe,k-D<ie&&(k=ie+D),k+D>ue&&(k=ue-D),ue-ie<this.width&&(w=Math.max(w,this.width/(ue-ie)),k=(ue+ie)/2)}k===y&&P===x||(this.center=this.unproject(new s.Point(k,P))),w&&(this.zoom+=this.scaleZoom(w)),this._constrainCamera(),this._unmodified=h,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,h=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=s.mercatorZfromAltitude(1,this.center.lat)/s.mercatorZfromAltitude(1,s.GLOBE_SCALE_MATCH_LATITUDE));const y=Gd(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?h:1,w=this._camera.getWorldToCamera(this.worldSize,x),k=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);k[8]=2*-l.x/this.width,k[9]=2*l.y/this.height;let P=s.mul([],k,w);if(this.projection.isReprojectedInTileSpace){const $e=this.locationCoordinate(this.center),Ne=s.identity([]);s.translate(Ne,Ne,[$e.x*this.worldSize,$e.y*this.worldSize,0]),s.multiply(Ne,Ne,Ql(this)),s.translate(Ne,Ne,[-$e.x*this.worldSize,-$e.y*this.worldSize,0]),s.multiply(P,P,Ne),this.inverseAdjustmentMatrix=function(We){const Ue=Ql(We,!0);return re([],[Ue[0],Ue[1],Ue[4],Ue[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=s.scale([],P,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=P,this.invProjMatrix=s.invert(new Float64Array(16),this.projMatrix);const D=s.invert([],k);this.frustumCorners=s.FrustumCorners.fromInvProjectionMatrix(D,this.horizonLineFromTop(),this.height);const j=new Float32Array(16);s.identity(j),s.scale(j,j,[1,-1,1]),s.rotateX(j,j,this._pitch),s.rotateZ(j,j,this.angle);const F=s.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),H=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;F[8]=2*-l.x/this.width,F[9]=2*(l.y+H)/this.height,this.skyboxMatrix=s.multiply(j,F,j);const ie=this.point,ue=ie.x,pe=ie.y,he=this.width%2/2,me=this.height%2/2,Z=Math.cos(this.angle),ce=Math.sin(this.angle),Ee=ue-Math.round(ue)+Z*he+ce*me,Ae=pe-Math.round(pe)+Z*me+ce*he,je=new Float64Array(P);if(s.translate(je,je,[Ee>.5?Ee-1:Ee,Ae>.5?Ae-1:Ae,0]),this.alignedProjMatrix=je,P=s.create(),s.scale(P,P,[this.width/2,-this.height/2,1]),s.translate(P,P,[1,-1,0]),this.labelPlaneMatrix=P,P=s.create(),s.scale(P,P,[1,-1,1]),s.translate(P,P,[-1,-1,0]),s.scale(P,P,[2/this.width,2/this.height,1]),this.glCoordMatrix=P,this.pixelMatrix=s.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},P=s.invert(new Float64Array(16),this.pixelMatrix),!P)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=P,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=s.calculateGlobeMatrix(this);const $e=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=s.transformMat4($e,$e,w),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=P;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,h=this.cameraPixelsPerMeter,y=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,w=[l,l,h];s.scale$2(w,w,x),s.scale$2(y,y,-1),s.multiply$2(y,y,w);const k=s.create();s.translate(k,k,y),s.scale(k,k,w),this.mercatorFogMatrix=k,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,h,x)}_computeCameraPosition(l){const h=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),x=this.point,w=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*h-l/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-y[0]*w,x.y/this.worldSize-y[1]*w,l/this.worldSize*this._centerAltitude-y[2]*w]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const h=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],x=l[2];let w=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(w=Math.min((h-y)/x,1)),this._camera.position=s.scaleAndAdd([],this._camera.position,l,w),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,h=this._camera.forward(),{pitch:y,bearing:x}=this._camera.getPitchBearing(),w=s.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,k=this._mercatorZfromZoom(this._maxZoom)*Math.cos(s.degToRad(this._maxPitch)),P=Math.max((l[2]-w)/Math.cos(y),k),D=this._zoomFromMercatorZ(P);s.scaleAndAdd(l,l,h,P),this._pitch=s.clamp(y,s.degToRad(this.minPitch),s.degToRad(this.maxPitch)),this.angle=s.wrap(x,-Math.PI,Math.PI),this._setZoom(s.clamp(D,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new s.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let h=0,y=s.GLOBE_ZOOM_THRESHOLD_MAX,x=0,w=1/0;for(;y-h>1e-6&&y>h;){const k=h+.5*(y-h),P=this.tileSize*Math.pow(2,k),D=this.getCameraToCenterDistance(this.projection,k,P),j=this.scaleZoom(D/(l*this.tileSize)),F=Math.abs(k-j);F<w&&(w=F,x=k),k<j?h=k:y=k}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(s.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,h){const y=Math.min(l.x,h.x),x=Math.max(l.x,h.x),w=Math.min(l.y,h.y),k=Math.max(l.y,h.y);if(w<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const P=[new s.Point(y,w),new s.Point(x,k),new s.Point(y,k),new s.Point(x,w)],D=this.renderWorldCopies?-3:0,j=this.renderWorldCopies?4:1;for(const F of P){const H=this.pointRayIntersection(F);if(H.t<0)return!0;const ie=this.rayIntersectionCoordinate(H);if(ie.x<D||ie.y<0||ie.x>j||ie.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+s.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new s.Point(0,0),new s.Point(this.width,this.height))}zoomDeltaToMovement(l,h){const y=s.length(s.sub([],this._camera.position,l)),x=this._zoomFromMercatorZ(y)+h;return y-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([h,y,x],w){const k=[h,y,x,1];s.transformMat4$1(k,k,w);const P=k[3]=Math.max(k[3],1e-6);return k[0]/=P,k[1]/=P,k[2]/=P,k}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new s.Point(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.Point(0,l))}}getCameraToCenterDistance(l,h=this.zoom,y=this.worldSize){const x=Gd(l,h,this.width,this.height,1024),w=l.pixelSpaceConversion(this.center.lat,y,x);return .5/Math.tan(.5*this._fov)*this.height*w}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&s.multiply(l,l,this.globeMatrix),l}}function tc(m,l){let h=!1,y=null;const x=()=>{y=null,h&&(m(),y=setTimeout(x,l),h=!1)};return()=>(h=!0,y||x(),y)}class hp{constructor(l){this._hashName=l&&encodeURIComponent(l),s.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=tc(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,s.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),s.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const h=yu(l);if(this._hashName){const y=this._hashName;let x=!1;const w=s.window.location.hash.slice(1).split("&").map(k=>{const P=k.split("=")[0];return P===y?(x=!0,`${P}=${h}`):k}).filter(k=>k);return x||w.push(`${y}=${h}`),`#${w.join("&")}`}return`#${h}`}_getCurrentHash(){const l=s.window.location.hash.replace("#","");if(this._hashName){let h;return l.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(h=y)}),(h&&h[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const h=this._getCurrentHash();if(h.length>=3&&!h.some(y=>isNaN(y))){const y=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(h[3]||0):l.getBearing();return l.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:y,pitch:+(h[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=s.window.location.href.replace(/(#.+)?$/,this.getHashString());s.window.history.replaceState(s.window.history.state,null,l)}}function yu(m,l){const h=m.getCenter(),y=Math.round(100*m.getZoom())/100,x=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,x),k=Math.round(h.lng*w)/w,P=Math.round(h.lat*w)/w,D=m.getBearing(),j=m.getPitch();let F=l?`/${k}/${P}/${y}`:`${y}/${P}/${k}`;return(D||j)&&(F+="/"+Math.round(10*D)/10),j&&(F+=`/${Math.round(j)}`),F}const vu={linearity:.3,easing:s.bezier(0,0,.3,1)},Zd=s.extend({deceleration:2500,maxSpeed:1400},vu),qd=s.extend({deceleration:20,maxSpeed:1400},vu),$t=s.extend({deceleration:1e3,maxSpeed:360},vu),Yo=s.extend({deceleration:1e3,maxSpeed:90},vu);class By{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:s.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,h=s.exported.now();for(;l.length>0&&h-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const h={zoom:0,bearing:0,pitch:0,pan:new s.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)h.zoom+=w.zoomDelta||0,h.bearing+=w.bearingDelta||0,h.pitch+=w.pitchDelta||0,w.panDelta&&h.pan._add(w.panDelta),w.around&&(h.around=w.around),w.pinchAround&&(h.pinchAround=w.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(h.pan.mag()){const w=xu(h.pan.mag(),y,s.extend({},Zd,l||{}));x.offset=h.pan.mult(w.amount/h.pan.mag()),x.center=this._map.transform.center,_u(x,w)}if(h.zoom){const w=xu(h.zoom,y,qd);x.zoom=this._map.transform.zoom+w.amount,_u(x,w)}if(h.bearing){const w=xu(h.bearing,y,$t);x.bearing=this._map.transform.bearing+s.clamp(w.amount,-179,179),_u(x,w)}if(h.pitch){const w=xu(h.pitch,y,Yo);x.pitch=this._map.transform.pitch+w.amount,_u(x,w)}if(x.zoom||x.bearing){const w=h.pinchAround===void 0?h.around:h.pinchAround;x.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function _u(m,l){(!m.duration||m.duration<l.duration)&&(m.duration=l.duration,m.easing=l.easing)}function xu(m,l,h){const{maxSpeed:y,linearity:x,deceleration:w}=h,k=s.clamp(m*x/(l/1e3),-y,y),P=Math.abs(k)/(w*x);return{easing:h.easing,duration:1e3*P,amount:k*(P/2)}}class Ci extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y,x={}){const w=ee(h.getCanvasContainer(),y),k=h.unproject(w);super(l,s.extend({point:w,lngLat:k,originalEvent:y},x)),this._defaultPrevented=!1,this.target=h}}class bu extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y){const x=l==="touchend"?y.changedTouches:y.touches,w=ye(h.getCanvasContainer(),x),k=w.map(D=>h.unproject(D)),P=w.reduce((D,j,F,H)=>D.add(j.div(H.length)),new s.Point(0,0));super(l,{points:w,point:P,lngLats:k,lngLat:h.unproject(P),originalEvent:y}),this._defaultPrevented=!1}}class Kd extends s.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,h,y){super(l,{originalEvent:y}),this._defaultPrevented=!1}}class fp{constructor(l,h){this._map=l,this._clickTolerance=h.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new Kd(l.type,this._map,l))}mousedown(l,h){return this._mousedownPos=h,this._firePreventable(new Ci(l.type,this._map,l))}mouseup(l){this._map.fire(new Ci(l.type,this._map,l))}preclick(l){const h=s.extend({},l);h.type="preclick",this._map.fire(new Ci(h.type,this._map,h))}click(l,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||(this.preclick(l),this._map.fire(new Ci(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new Ci(l.type,this._map,l))}mouseover(l){this._map.fire(new Ci(l.type,this._map,l))}mouseout(l){this._map.fire(new Ci(l.type,this._map,l))}touchstart(l){return this._firePreventable(new bu(l.type,this._map,l))}touchmove(l){this._map.fire(new bu(l.type,this._map,l))}touchend(l){this._map.fire(new bu(l.type,this._map,l))}touchcancel(l){this._map.fire(new bu(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Xd{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new Ci(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Ci(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fy{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,h){this.isEnabled()&&l.shiftKey&&l.button===0&&(W(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(l,h){if(!this._active)return;const y=h,x=this._startPos,w=this._lastPos;if(!x||!w||w.equals(y)||!this._box&&y.dist(x)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=I("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const k=Math.min(x.x,y.x),P=Math.max(x.x,y.x),D=Math.min(x.y,y.y),j=Math.max(x.y,y.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${k}px,${D}px)`,this._box.style.width=P-k+"px",this._box.style.height=j-D+"px")})}mouseupWindow(l,h){if(!this._active)return;const y=this._startPos,x=h;if(y&&l.button===0){if(this.reset(),J(),y.x!==x.x||y.y!==x.y)return this._map.fire(new s.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:w=>w.fitScreenCoordinates(y,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),B(),delete this._startPos,delete this._lastPos}_fireEvent(l,h){return this._map.fire(new s.Event(l,{originalEvent:h}))}}function Jd(m,l){const h={};for(let y=0;y<m.length;y++)h[m[y].identifier]=l[y];return h}class nc{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,h,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),y.length===this.numTouches&&(this.centroid=function(x){const w=new s.Point(0,0);for(const k of x)w._add(k);return w.div(x.length)}(h),this.touches=Jd(y,h)))}touchmove(l,h,y){if(this.aborted||!this.centroid)return;const x=Jd(y,h);for(const w in this.touches){const k=x[w];(!k||k.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(l,h,y){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class pp{constructor(l){this.singleTap=new nc(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,h,y){this.singleTap.touchstart(l,h,y)}touchmove(l,h,y){this.singleTap.touchmove(l,h,y)}touchend(l,h,y){const x=this.singleTap.touchend(l,h,y);if(x){const w=l.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(x)<30;if(w&&k||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class m1{constructor(){this._zoomIn=new pp({numTouches:1,numTaps:2}),this._zoomOut=new pp({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,h,y){this._zoomIn.touchstart(l,h,y),this._zoomOut.touchstart(l,h,y)}touchmove(l,h,y){this._zoomIn.touchmove(l,h,y),this._zoomOut.touchmove(l,h,y)}touchend(l,h,y){const x=this._zoomIn.touchend(l,h,y),w=this._zoomOut.touchend(l,h,y);return x?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(x)},{originalEvent:l})}):w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(w)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const jy={0:1,2:2};class rc{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,h){return!1}_move(l,h){return{}}mousedown(l,h){if(this._lastPoint)return;const y=Q(l);this._correctButton(l,y)&&(this._lastPoint=h,this._eventButton=y)}mousemoveWindow(l,h){const y=this._lastPoint;if(y){if(l.preventDefault(),this._eventButton!=null&&function(x,w){const k=jy[w];return x.buttons===void 0||(x.buttons&k)!==k}(l,this._eventButton))this.reset();else if(this._moved||!(h.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=h,this._move(y,h)}}mouseupWindow(l){this._lastPoint&&Q(l)===this._eventButton&&(this._moved&&J(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mp extends rc{mousedown(l,h){super.mousedown(l,h),this._lastPoint&&(this._active=!0)}_correctButton(l,h){return h===0&&!l.ctrlKey}_move(l,h){return{around:h,panDelta:h.sub(l)}}}class gp extends rc{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const y=.8*(h.x-l.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(l){l.preventDefault()}}class yp extends rc{_correctButton(l,h){return h===0&&l.ctrlKey||h===2}_move(l,h){const y=-.5*(h.y-l.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(l){l.preventDefault()}}class Yd{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=h.clickTolerance||1,this.reset(),s.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new s.Point(0,0)}touchstart(l,h,y){return this._calculateTransform(l,h,y)}touchmove(l,h,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!s.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,h,y)}}touchend(l,h,y){this._calculateTransform(l,h,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,h,y){y.length>0&&(this._active=!0);const x=Jd(y,h),w=new s.Point(0,0),k=new s.Point(0,0);let P=0;for(const j in x){const F=x[j],H=this._touches[j];H&&(w._add(F),k._add(F.sub(H)),P++,x[j]=F)}if(this._touches=x,P<this._minTouches||!k.mag())return;const D=k.div(P);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(P),panDelta:D}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=I("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class wu{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,h,y){return{}}touchstart(l,h,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([h[0],h[1]]))}touchmove(l,h,y){const x=this._firstTwoTouches;if(!x)return;l.preventDefault();const[w,k]=x,P=Su(y,h,w),D=Su(y,h,k);if(!P||!D)return;const j=this._aroundCenter?null:P.add(D).div(2);return this._move([P,D],j,l)}touchend(l,h,y){if(!this._firstTwoTouches)return;const[x,w]=this._firstTwoTouches,k=Su(y,h,x),P=Su(y,h,w);k&&P||(this._active&&J(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Su(m,l,h){for(let y=0;y<m.length;y++)if(m[y].identifier===h)return l[y]}function vp(m,l){return Math.log(m/l)/Math.LN2}class Ny extends wu{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,h){const y=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(vp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:vp(this._distance,y),pinchAround:h}}}function _p(m,l){return 180*m.angleWith(l)/Math.PI}class $y extends wu{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,h){const y=this._vector;if(this._vector=l[0].sub(l[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:_p(this._vector,y),pinchAround:h}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const h=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const x=_p(l,y);return Math.abs(x)<h}}function wa(m){return Math.abs(m.y)>Math.abs(m.x)}class Vy extends wu{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,wa(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,h,y){const x=this._lastPoints;if(!x)return;const w=l[0].sub(x[0]),k=l[1].sub(x[1]);return this._map._cooperativeGestures&&!s.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(w,k,y.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+k.y)/2*-.5})}gestureBeginsVertically(l,h,y){if(this._valid!==void 0)return this._valid;const x=l.mag()>=2,w=h.mag()>=2;if(!x&&!w)return;if(!x||!w)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const k=l.y>0==h.y>0;return wa(l)&&wa(h)&&k}}const Uy={panStep:100,bearingStep:15,pitchStep:10};class g1{constructor(){const l=Uy;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let h=0,y=0,x=0,w=0,k=0;switch(l.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:l.shiftKey?y=-1:(l.preventDefault(),w=-1);break;case 39:l.shiftKey?y=1:(l.preventDefault(),w=1);break;case 38:l.shiftKey?x=1:(l.preventDefault(),k=-1);break;case 40:l.shiftKey?x=-1:(l.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(y=0,x=0),{cameraAnimation:P=>{const D=P.getZoom();P.easeTo({duration:300,easeId:"keyboardHandler",easing:Wy,zoom:h?Math.round(D)+h*(l.shiftKey?2:1):D,bearing:P.getBearing()+y*this._bearingStep,pitch:P.getPitch()+x*this._pitchStep,offset:[-w*this._panStep,-k*this._panStep],center:P.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Wy(m){return m*(2-m)}const xp=4.000244140625;class Gy{constructor(l,h){this._map=l,this._el=l.getCanvasContainer(),this._handler=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,s.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||s.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let h=l.deltaMode===s.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const y=s.exported.now(),x=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,h!==0&&h%xp==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(x*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),l.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=l,this._delta-=h,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=ee(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:h,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const h=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const D=this._type==="wheel"&&Math.abs(this._delta)>xp?this._wheelZoomRate:this._defaultZoomRate;let j=2/(1+Math.exp(-Math.abs(this._delta*D)));this._delta<0&&j!==0&&(j=1/j);const F=h(),H=Math.pow(2,F),ie=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):H;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ie*j))),this._type==="wheel"&&(this._startZoom=F,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:h(),x=this._startZoom,w=this._easing;let k,P=!1;if(this._type==="wheel"&&x&&w){const D=Math.min((s.exported.now()-this._lastWheelEventTime)/200,1),j=w(D);k=s.number(x,y,j),D<1?this._frameId||(this._frameId=!0):P=!0}else k=y,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:k-h(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let h=s.ease;if(this._prevEase){const y=this._prevEase,x=(s.exported.now()-y.start)/y.duration,w=y.easing(x+.01)-y.easing(x),k=.27/Math.sqrt(w*w+1e-4)*.01,P=Math.sqrt(.0729-k*k);h=s.bezier(k,P,.25,1)}return this._prevEase={start:s.exported.now(),duration:l,easing:h},h}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=I("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(s.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Hy{constructor(l,h){this._clickZoom=l,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Wi{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,h){return l.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(l.shiftKey?-1:1),around:y.unproject(h)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class y1{constructor(){this._tap=new pp({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,h,y){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=h[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(l,h,y))}touchmove(l,h,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const x=h[0],w=x.y-this._swipePoint.y;return this._swipePoint=x,l.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(l,h,y)}touchend(l,h,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(l,h,y)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zy{constructor(l,h,y){this._el=l,this._mousePan=h,this._touchPan=y}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class v1{constructor(l,h,y){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=h,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _1{constructor(l,h,y,x){this._el=l,this._touchZoom=h,this._touchRotate=y,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Lo=m=>m.zoom||m.drag||m.pitch||m.rotate;class qy extends s.Event{}class x1{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,h){const y=s.sub([],h,l);this.radius=s.length(y[2]<0?s.div([],y,this.constants):[y[0],y[1],0])}projectRay(l){s.div(l,l,this.constants),s.normalize(l,l),s.mul$1(l,l,this.constants);const h=s.scale$2([],l,this.radius);if(h[2]>0){const y=s.scale$2([],[0,0,1],s.dot(h,[0,0,1])),x=s.scale$2([],s.normalize([],[h[0],h[1],0]),this.radius),w=s.add([],h,s.scale$2([],s.sub([],s.add([],x,y),h),2));h[0]=w[0],h[1]=w[1]}return h}}function Qo(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class xs{constructor(l,h){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new By(l),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new x1,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(h),s.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[s.window.document,"mousemove",{capture:!0}],[s.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[s.window,"blur",void 0]];for(const[x,w,k]of this._listeners)x.addEventListener(w,x===s.window.document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[l,h,y]of this._listeners)l.removeEventListener(h,l===s.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(l){const h=this._map,y=h.getCanvasContainer();this._add("mapEvent",new fp(h,l));const x=h.boxZoom=new Fy(h,l);this._add("boxZoom",x);const w=new m1,k=new Wi;h.doubleClickZoom=new Hy(k,w),this._add("tapZoom",w),this._add("clickZoom",k);const P=new y1;this._add("tapDragZoom",P);const D=h.touchPitch=new Vy(h);this._add("touchPitch",D);const j=new gp(l),F=new yp(l);h.dragRotate=new v1(l,j,F),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]);const H=new mp(l),ie=new Yd(h,l);h.dragPan=new Zy(y,H,ie),this._add("mousePan",H),this._add("touchPan",ie,["touchZoom","touchRotate"]);const ue=new $y,pe=new Ny;h.touchZoomRotate=new _1(y,pe,ue,P),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",pe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Xd(h));const he=h.scrollZoom=new Gy(h,this);this._add("scrollZoom",he,["mousePan"]);const me=h.keyboard=new g1;this._add("keyboard",me);for(const Z of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Z]&&h[Z].enable(l[Z])}_add(l,h,y){this._handlers.push({handlerName:l,handler:h,allowed:y}),this._handlersById[l]=h}stop(l){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Lo(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,h,y){for(const x in l)if(x!==y&&(!h||h.indexOf(x)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const h=[];for(const y of l)this._el.contains(y.target)&&h.push(y);return h}handleEvent(l,h){this._updatingCamera=!0;const y=l.type==="renderFrame",x=y?void 0:l,w={needsRenderFrame:!1},k={},P={},D=l.touches?this._getMapTouches(l.touches):void 0,j=D?ye(this._el,D):y?void 0:ee(this._el,l);for(const{handlerName:ie,handler:ue,allowed:pe}of this._handlers){if(!ue.isEnabled())continue;let he;this._blockedByActive(P,pe,ie)?ue.reset():ue[h||l.type]&&(he=ue[h||l.type](l,j,D),this.mergeHandlerResult(w,k,he,ie,x),he&&he.needsRenderFrame&&this._triggerRenderFrame()),(he||ue.isActive())&&(P[ie]=ue)}const F={};for(const ie in this._previousActiveHandlers)P[ie]||(F[ie]=x);this._previousActiveHandlers=P,(Object.keys(F).length||Qo(w))&&(this._changes.push([w,k,F]),this._triggerRenderFrame()),(Object.keys(P).length||Qo(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:H}=w;H&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],H(this._map))}mergeHandlerResult(l,h,y,x,w){if(!y)return;s.extend(l,y);const k={handlerName:x,originalEvent:y.originalEvent||w};y.zoomDelta!==void 0&&(h.zoom=k),y.panDelta!==void 0&&(h.drag=k),y.pitchDelta!==void 0&&(h.pitch=k),y.bearingDelta!==void 0&&(h.rotate=k)}_applyChanges(){const l={},h={},y={};for(const[x,w,k]of this._changes)x.panDelta&&(l.panDelta=(l.panDelta||new s.Point(0,0))._add(x.panDelta)),x.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(l.around=x.around),x.aroundCoord!==void 0&&(l.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(l.pinchAround=x.pinchAround),x.noInertia&&(l.noInertia=x.noInertia),s.extend(h,w),s.extend(y,k);this._updateMapTransform(l,h,y),this._changes=[]}_updateMapTransform(l,h,y){const x=this._map,w=x.transform,k=ce=>[ce.x,ce.y,ce.z];if((ce=>{const Ee=this._eventsInProgress.drag;return Ee&&!this._handlersById[Ee.handlerName].isActive()})()&&!Qo(l)){const ce=w.zoom;w.cameraElevationReference="sea",w.recenterOnTerrain(),w.cameraElevationReference="ground",ce!==w.zoom&&this._map._update(!0)}if(w._isCameraConstrained&&x._stop(!0),!Qo(l))return void this._fireEvents(h,y,!0);let{panDelta:P,zoomDelta:D,bearingDelta:j,pitchDelta:F,around:H,aroundCoord:ie,pinchAround:ue}=l;w._isCameraConstrained&&(D>0&&(D=0),w._isCameraConstrained=!1),ue!==void 0&&(H=ue),(D||(ce=>h[ce]&&!this._eventsInProgress[ce])("drag"))&&H&&(this._dragOrigin=k(w.pointCoordinate3D(H)),this._trackingEllipsoid.setup(w._camera.position,this._dragOrigin)),w.cameraElevationReference="sea",x._stop(!0),H=H||x.transform.centerPoint,j&&(w.bearing+=j),F&&(w.pitch+=F),w._updateCameraState();const pe=[0,0,0];if(P)if(w.projection.name==="mercator"){const ce=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(H).dir),Ee=this._trackingEllipsoid.projectRay(w.screenPointToMercatorRay(H.sub(P)).dir);pe[0]=Ee[0]-ce[0],pe[1]=Ee[1]-ce[1]}else{const ce=w.pointCoordinate(H);if(w.projection.name==="globe"){P=P.rotate(-w.angle);const Ee=w._pixelsPerMercatorPixel/w.worldSize;pe[0]=-P.x*s.mercatorScale(s.latFromMercatorY(ce.y))*Ee,pe[1]=-P.y*s.mercatorScale(w.center.lat)*Ee}else{const Ee=w.pointCoordinate(H.sub(P));ce&&Ee&&(pe[0]=Ee.x-ce.x,pe[1]=Ee.y-ce.y)}}const he=w.zoom,me=[0,0,0];if(D){const ce=k(ie||w.pointCoordinate3D(H)),Ee={dir:s.normalize([],s.sub([],ce,w._camera.position))};if(Ee.dir[2]<0){const Ae=w.zoomDeltaToMovement(ce,D);s.scale$2(me,Ee.dir,Ae)}}const Z=s.add(pe,pe,me);w._translateCameraConstrained(Z),D&&Math.abs(w.zoom-he)>1e-4&&w.recenterOnTerrain(),w.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(h,y,!0)}_fireEvents(l,h,y){const x=Lo(this._eventsInProgress),w=Lo(l),k={};for(const F in l){const{originalEvent:H}=l[F];this._eventsInProgress[F]||(k[`${F}start`]=H),this._eventsInProgress[F]=l[F]}!x&&w&&this._fireEvent("movestart",w.originalEvent);for(const F in k)this._fireEvent(F,k[F]);w&&this._fireEvent("move",w.originalEvent);for(const F in l){const{originalEvent:H}=l[F];this._fireEvent(F,H)}const P={};let D;for(const F in this._eventsInProgress){const{handlerName:H,originalEvent:ie}=this._eventsInProgress[F];this._handlersById[H].isActive()||(delete this._eventsInProgress[F],D=h[H]||ie,P[`${F}end`]=D)}for(const F in P)this._fireEvent(F,P[F]);const j=Lo(this._eventsInProgress);if(y&&(x||w)&&!j){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=ie=>ie!==0&&-this._bearingSnap<ie&&ie<this._bearingSnap;F?(H(F.bearing||this._map.getBearing())&&(F.bearing=0),this._map.easeTo(F,{originalEvent:D})):(this._map.fire(new s.Event("moveend",{originalEvent:D})),H(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,h){this._map.fire(new s.Event(l,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new qy("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const al="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Qd extends s.Evented{constructor(l,h){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=h.bearingSnap,this._respectPrefersReducedMotion=h.respectPrefersReducedMotion!==!1,s.bindAll(["_renderFrameCallback"],this)}getCenter(){return new s.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,h){return this.jumpTo({center:l},h)}panBy(l,h,y){return l=s.Point.convert(l).mult(-1),this.panTo(this.transform.center,s.extend({offset:l},h),y)}panTo(l,h,y){return this.easeTo(s.extend({center:l},h),y)}getZoom(){return this.transform.zoom}setZoom(l,h){return this.jumpTo({zoom:l},h),this}zoomTo(l,h,y){return this.easeTo(s.extend({zoom:l},h),y)}zoomIn(l,h){return this.zoomTo(this.getZoom()+1,l,h),this}zoomOut(l,h){return this.zoomTo(this.getZoom()-1,l,h),this}getBearing(){return this.transform.bearing}setBearing(l,h){return this.jumpTo({bearing:l},h),this}getPadding(){return this.transform.padding}setPadding(l,h){return this.jumpTo({padding:l},h),this}rotateTo(l,h,y){return this.easeTo(s.extend({bearing:l},h),y)}resetNorth(l,h){return this.rotateTo(0,s.extend({duration:1e3},l),h),this}resetNorthPitch(l,h){return this.easeTo(s.extend({bearing:0,pitch:0,duration:1e3},l),h),this}snapToNorth(l,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,h):this}getPitch(){return this.transform.pitch}setPitch(l,h){return this.jumpTo({pitch:l},h),this}cameraForBounds(l,h){l=s.LngLatBounds.convert(l);const y=h&&h.bearing||0,x=h&&h.pitch||0,w=l.getNorthWest(),k=l.getSouthEast();return this._cameraForBounds(this.transform,w,k,y,x,h)}_extendCameraOptions(l){const h={top:0,bottom:0,right:0,left:0};if(typeof(l=s.extend({padding:h,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const y=l.padding;l.padding={top:y,bottom:y,right:y,left:y}}return l.padding=s.extend(h,l.padding),l}_minimumAABBFrustumDistance(l,h){const y=h.max[0]-h.min[0],x=h.max[1]-h.min[1];return y/x>l.aspect?y/(2*Math.tan(.5*l.fovX)*l.aspect):x/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,h,y,x,w,k){const P=l.clone(),D=this._extendCameraOptions(k);P.bearing=x,P.pitch=w;const j=s.LngLat.convert(h),F=s.LngLat.convert(y),H=.5*(j.lat+F.lat),ie=.5*(j.lng+F.lng),ue=s.latLngToECEF(H,ie),pe=s.normalize([],ue),he=s.normalize([],s.cross([],pe,[0,1,0])),me=s.cross([],he,pe),Z=[he[0],he[1],he[2],0,me[0],me[1],me[2],0,pe[0],pe[1],pe[2],0,0,0,0,1],ce=[ue,s.latLngToECEF(j.lat,j.lng),s.latLngToECEF(F.lat,j.lng),s.latLngToECEF(F.lat,F.lng),s.latLngToECEF(j.lat,F.lng),s.latLngToECEF(H,j.lng),s.latLngToECEF(H,F.lng),s.latLngToECEF(j.lat,ie),s.latLngToECEF(F.lat,ie)];let Ee=s.Aabb.fromPoints(ce.map(mt=>[s.dot(he,mt),s.dot(me,mt),s.dot(pe,mt)]));const Ae=s.transformMat4([],Ee.center,Z);s.squaredLength(Ae)===0&&s.set(Ae,0,0,1),s.normalize(Ae,Ae),s.scale$2(Ae,Ae,s.GLOBE_RADIUS),P.center=s.ecefToLatLng(Ae);const je=P.getWorldToCameraMatrix(),$e=s.invert(new Float64Array(16),je);Ee=s.Aabb.applyTransform(Ee,s.multiply([],je,Z)),s.transformMat4(Ae,Ae,je);const Ne=.5*(Ee.max[2]-Ee.min[2]),We=this._minimumAABBFrustumDistance(P,Ee),Ue=s.scale$2([],[0,0,1],Ne),Je=s.add(Ue,Ae,Ue),xt=We+(P.pitch===0?0:s.distance(Ae,Je)),Ze=P.globeCenterInViewSpace,ht=s.sub([],Ae,[Ze[0],Ze[1],Ze[2]]);s.normalize(ht,ht),s.scale$2(ht,ht,xt);const tt=s.add([],Ae,ht);s.transformMat4(tt,tt,$e);const _t=s.earthRadius/s.GLOBE_RADIUS,Xe=s.length(tt),dt=s.mercatorZfromAltitude(Math.max(Xe*_t-s.earthRadius,Number.EPSILON),0),wt=Math.min(P.zoomFromMercatorZAdjusted(dt),D.maxZoom);return wt>.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(P.setProjection({name:"mercator"}),P.zoom=wt,this._cameraForBounds(P,h,y,x,w,k)):{center:P.center,zoom:wt,bearing:x,pitch:w}}queryTerrainElevation(l,h){const y=this.transform.elevation;return y?(h=s.extend({},{exaggerated:!0},h),y.getAtPoint(s.MercatorCoordinate.fromLngLat(l),null,h.exaggerated)):null}_cameraForBounds(l,h,y,x,w,k){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,h,y,x,w,k);const P=l.clone(),D=this._extendCameraOptions(k),j=P.padding;P.bearing=x,P.pitch=w;const F=s.LngLat.convert(h),H=s.LngLat.convert(y),ie=new s.LngLat(F.lng,H.lat),ue=new s.LngLat(H.lng,F.lat),pe=P.project(F),he=P.project(H),me=this.queryTerrainElevation(F),Z=this.queryTerrainElevation(H),ce=this.queryTerrainElevation(ie),Ee=this.queryTerrainElevation(ue),Ae=[[pe.x,pe.y,Math.min(me||0,Z||0,ce||0,Ee||0)],[he.x,he.y,Math.max(me||0,Z||0,ce||0,Ee||0)]];let je=s.Aabb.fromPoints(Ae);const $e=P.getWorldToCameraMatrix(),Ne=s.invert(new Float64Array(16),$e);je=s.Aabb.applyTransform(je,$e);const We=s.sub([],je.max,je.min),Ue=j.left||0,Je=j.right||0,xt=j.bottom||0,Ze=j.top||0,{left:ht,right:tt,top:_t,bottom:Xe}=D.padding,dt=.5*(Ue+Je),wt=.5*(Ze+xt),mt=Math.min(P.scaleZoom(P.scale*Math.min((P.width-(Ue+Je+ht+tt))/We[0],(P.height-(xt+Ze+Xe+_t))/We[1])),D.maxZoom),St=P.scale/P.zoomScale(mt);je=new s.Aabb([je.min[0]-(ht+dt)*St,je.min[1]-(Xe+wt)*St,je.min[2]],[je.max[0]+(tt+dt)*St,je.max[1]+(_t+wt)*St,je.max[2]]);const en=.5*We[2],yn=this._minimumAABBFrustumDistance(P,je),Gt=[0,0,1,0];s.transformMat4$1(Gt,Gt,$e),s.normalize$2(Gt,Gt);const dn=s.scale$2([],Gt,yn+en),Fn=s.add([],je.center,dn),Ln=(typeof D.offset.x=="number"&&typeof D.offset.y=="number"?new s.Point(D.offset.x,D.offset.y):s.Point.convert(D.offset)).rotate(-s.degToRad(x));je.center[0]-=Ln.x*St,je.center[1]+=Ln.y*St,s.transformMat4(je.center,je.center,Ne),s.transformMat4(Fn,Fn,Ne);const Jt=[je.center[0],je.center[1],Fn[2]*P.pixelsPerMeter];s.scale$2(Jt,Jt,1/P.worldSize);const Yn=s.lngFromMercatorX(Jt[0]),rr=s.latFromMercatorY(Jt[1]),ir=Math.min(P._zoomFromMercatorZ(Jt[2]),D.maxZoom),or=new s.LngLat(Yn,rr);return P.mercatorFromTransition&&ir<.5*(s.GLOBE_ZOOM_THRESHOLD_MIN+s.GLOBE_ZOOM_THRESHOLD_MAX)?(P.setProjection({name:"globe"}),P.zoom=ir,this._cameraForBounds(P,h,y,x,w,k)):{center:or,zoom:ir,bearing:x,pitch:w}}fitBounds(l,h,y){const x=this.cameraForBounds(l,h);return this._fitInternal(x,h,y)}fitScreenCoordinates(l,h,y,x,w){const k=s.Point.convert(l),P=s.Point.convert(h),D=new s.Point(Math.min(k.x,P.x),Math.min(k.y,P.y)),j=new s.Point(Math.max(k.x,P.x),Math.max(k.y,P.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(k,P))return this;const F=this.transform.pointLocation3D(D),H=this.transform.pointLocation3D(j),ie=this.transform.pointLocation3D(new s.Point(D.x,j.y)),ue=this.transform.pointLocation3D(new s.Point(j.x,D.y)),pe=[Math.min(F.lng,H.lng,ie.lng,ue.lng),Math.min(F.lat,H.lat,ie.lat,ue.lat)],he=[Math.max(F.lng,H.lng,ie.lng,ue.lng),Math.max(F.lat,H.lat,ie.lat,ue.lat)],me=x&&x.pitch?x.pitch:this.getPitch(),Z=this._cameraForBounds(this.transform,pe,he,y,me,x);return this._fitInternal(Z,x,w)}_fitInternal(l,h,y){return l?(delete(h=s.extend(l,h)).padding,h.linear?this.easeTo(h,y):this.flyTo(h,y)):this}jumpTo(l,h){this.stop();const y=l.preloadOnly?this.transform.clone():this.transform;let x=!1,w=!1,k=!1;return"zoom"in l&&y.zoom!==+l.zoom&&(x=!0,y.zoom=+l.zoom),l.center!==void 0&&(y.center=s.LngLat.convert(l.center)),"bearing"in l&&y.bearing!==+l.bearing&&(w=!0,y.bearing=+l.bearing),"pitch"in l&&y.pitch!==+l.pitch&&(k=!0,y.pitch=+l.pitch),l.padding==null||y.isPaddingEqual(l.padding)||(y.padding=l.padding),l.preloadOnly?(this._preloadTiles(y),this):(this.fire(new s.Event("movestart",h)).fire(new s.Event("move",h)),x&&this.fire(new s.Event("zoomstart",h)).fire(new s.Event("zoom",h)).fire(new s.Event("zoomend",h)),w&&this.fire(new s.Event("rotatestart",h)).fire(new s.Event("rotate",h)).fire(new s.Event("rotateend",h)),k&&this.fire(new s.Event("pitchstart",h)).fire(new s.Event("pitch",h)).fire(new s.Event("pitchend",h)),this.fire(new s.Event("moveend",h)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||s.warnOnce(al),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,h){const y=this.transform;if(!y.projection.supportsFreeCamera)return s.warnOnce(al),this;this.stop();const x=y.zoom,w=y.pitch,k=y.bearing;y.setFreeCameraOptions(l);const P=x!==y.zoom,D=w!==y.pitch,j=k!==y.bearing;return this.fire(new s.Event("movestart",h)).fire(new s.Event("move",h)),P&&this.fire(new s.Event("zoomstart",h)).fire(new s.Event("zoom",h)).fire(new s.Event("zoomend",h)),j&&this.fire(new s.Event("rotatestart",h)).fire(new s.Event("rotate",h)).fire(new s.Event("rotateend",h)),D&&this.fire(new s.Event("pitchstart",h)).fire(new s.Event("pitch",h)).fire(new s.Event("pitchend",h)),this.fire(new s.Event("moveend",h)),this}easeTo(l,h){this._stop(!1,l.easeId),((l=s.extend({offset:[0,0],duration:500,easing:s.ease},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const y=this.transform,x=this.getZoom(),w=this.getBearing(),k=this.getPitch(),P=this.getPadding(),D="zoom"in l?+l.zoom:x,j="bearing"in l?this._normalizeBearing(l.bearing,w):w,F="pitch"in l?+l.pitch:k,H="padding"in l?l.padding:y.padding,ie=s.Point.convert(l.offset);let ue,pe,he;if(y.projection.name==="globe"){const Ue=s.MercatorCoordinate.fromLngLat(y.center),Je=ie.rotate(-y.angle);Ue.x+=Je.x/y.worldSize,Ue.y+=Je.y/y.worldSize;const xt=Ue.toLngLat(),Ze=s.LngLat.convert(l.center||xt);this._normalizeCenter(Ze),ue=y.centerPoint.add(Je),pe=new s.Point(Ue.x,Ue.y).mult(y.worldSize),he=new s.Point(s.mercatorXfromLng(Ze.lng),s.mercatorYfromLat(Ze.lat)).mult(y.worldSize).sub(pe)}else{ue=y.centerPoint.add(ie);const Ue=y.pointLocation(ue),Je=s.LngLat.convert(l.center||Ue);this._normalizeCenter(Je),pe=y.project(Ue),he=y.project(Je).sub(pe)}const me=y.zoomScale(D-x);let Z,ce;l.around&&(Z=s.LngLat.convert(l.around),ce=y.locationPoint(Z));const Ee=this._zooming||D!==x,Ae=this._rotating||w!==j,je=this._pitching||F!==k,$e=!y.isPaddingEqual(H),Ne=Ue=>Je=>{if(Ee&&(Ue.zoom=s.number(x,D,Je)),Ae&&(Ue.bearing=s.number(w,j,Je)),je&&(Ue.pitch=s.number(k,F,Je)),$e&&(Ue.interpolatePadding(P,H,Je),ue=Ue.centerPoint.add(ie)),Z)Ue.setLocationAtPoint(Z,ce);else{const xt=Ue.zoomScale(Ue.zoom-x),Ze=D>x?Math.min(2,me):Math.max(.5,me),ht=Math.pow(Ze,1-Je),tt=Ue.unproject(pe.add(he.mult(Je*ht)).mult(xt));Ue.setLocationAtPoint(Ue.renderWorldCopies?tt.wrap():tt,ue)}return l.preloadOnly||this._fireMoveEvents(h),Ue};if(l.preloadOnly){const Ue=this._emulate(Ne,l.duration,y);return this._preloadTiles(Ue),this}const We={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Ee,this._rotating=Ae,this._pitching=je,this._padding=$e,this._easeId=l.easeId,this._prepareEase(h,l.noMoveStart,We),this._ease(Ne(y),Ue=>{y.recenterOnTerrain(),this._afterEase(h,Ue)},l),this}_prepareEase(l,h,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",h||y.moving||this.fire(new s.Event("movestart",l)),this._zooming&&!y.zooming&&this.fire(new s.Event("zoomstart",l)),this._rotating&&!y.rotating&&this.fire(new s.Event("rotatestart",l)),this._pitching&&!y.pitching&&this.fire(new s.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new s.Event("move",l)),this._zooming&&this.fire(new s.Event("zoom",l)),this._rotating&&this.fire(new s.Event("rotate",l)),this._pitching&&this.fire(new s.Event("pitch",l))}_afterEase(l,h){if(this._easeId&&h&&this._easeId===h)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,x=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new s.Event("zoomend",l)),x&&this.fire(new s.Event("rotateend",l)),w&&this.fire(new s.Event("pitchend",l)),this.fire(new s.Event("moveend",l))}flyTo(l,h){if(this._prefersReducedMotion(l)){const mt=s.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(mt,h)}this.stop(),l=s.extend({offset:[0,0],speed:1.2,curve:1.42,easing:s.ease},l);const y=this.transform,x=this.getZoom(),w=this.getBearing(),k=this.getPitch(),P=this.getPadding(),D="zoom"in l?s.clamp(+l.zoom,y.minZoom,y.maxZoom):x,j="bearing"in l?this._normalizeBearing(l.bearing,w):w,F="pitch"in l?+l.pitch:k,H="padding"in l?l.padding:y.padding,ie=y.zoomScale(D-x),ue=s.Point.convert(l.offset);let pe=y.centerPoint.add(ue);const he=y.pointLocation(pe),me=s.LngLat.convert(l.center||he);this._normalizeCenter(me);const Z=y.project(he),ce=y.project(me).sub(Z);let Ee=l.curve;const Ae=Math.max(y.width,y.height),je=Ae/ie,$e=ce.mag();if("minZoom"in l){const mt=s.clamp(Math.min(l.minZoom,x,D),y.minZoom,y.maxZoom),St=Ae/y.zoomScale(mt-x);Ee=Math.sqrt(St/$e*2)}const Ne=Ee*Ee;function We(mt){const St=(je*je-Ae*Ae+(mt?-1:1)*Ne*Ne*$e*$e)/(2*(mt?je:Ae)*Ne*$e);return Math.log(Math.sqrt(St*St+1)-St)}function Ue(mt){return(Math.exp(mt)-Math.exp(-mt))/2}function Je(mt){return(Math.exp(mt)+Math.exp(-mt))/2}const xt=We(0);let Ze=function(mt){return Je(xt)/Je(xt+Ee*mt)},ht=function(mt){return Ae*((Je(xt)*(Ue(St=xt+Ee*mt)/Je(St))-Ue(xt))/Ne)/$e;var St},tt=(We(1)-xt)/Ee;if(Math.abs($e)<1e-6||!isFinite(tt)){if(Math.abs(Ae-je)<1e-6)return this.easeTo(l,h);const mt=je<Ae?-1:1;tt=Math.abs(Math.log(je/Ae))/Ee,ht=function(){return 0},Ze=function(St){return Math.exp(mt*Ee*St)}}l.duration="duration"in l?+l.duration:1e3*tt/("screenSpeed"in l?+l.screenSpeed/Ee:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const _t=w!==j,Xe=F!==k,dt=!y.isPaddingEqual(H),wt=mt=>St=>{const en=St*tt,yn=1/Ze(en);mt.zoom=St===1?D:x+mt.scaleZoom(yn),_t&&(mt.bearing=s.number(w,j,St)),Xe&&(mt.pitch=s.number(k,F,St)),dt&&(mt.interpolatePadding(P,H,St),pe=mt.centerPoint.add(ue));const Gt=St===1?me:mt.unproject(Z.add(ce.mult(ht(en))).mult(yn));return mt.setLocationAtPoint(mt.renderWorldCopies?Gt.wrap():Gt,pe),mt._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(h),mt};if(l.preloadOnly){const mt=this._emulate(wt,l.duration,y);return this._preloadTiles(mt),this}return this._zooming=!0,this._rotating=_t,this._pitching=Xe,this._padding=dt,this._prepareEase(h,!1),this._ease(wt(y),()=>this._afterEase(h),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,h){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,h)}if(!l){const y=this.handlers;y&&y.stop(!1)}return this}_ease(l,h,y){y.animate===!1||y.duration===0?(l(1),h()):(this._easeStart=s.exported.now(),this._easeOptions=y,this._onEaseFrame=l,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((s.exported.now()-this._easeStart)/this._easeOptions.duration,1),h=this._onEaseFrame;h&&h(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,h){l=s.wrap(l,-180,180);const y=Math.abs(l-h);return Math.abs(l-360-h)<y&&(l-=360),Math.abs(l+360-h)<y&&(l+=360),l}_normalizeCenter(l){const h=this.transform;if(!h.renderWorldCopies||h.maxBounds)return;const y=l.lng-h.center.lng;l.lng+=y>180?-360:y<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&s.exported.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,h,y){const x=Math.ceil(15*h/1e3),w=[],k=l(y.clone());for(let P=0;P<=x;P++){const D=k(P/x);w.push(D.clone())}return w}}class Wt{constructor(l={}){this.options=l,s.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const h=this.options&&this.options.compact;return this._map=l,this._container=I("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=I("button","mapboxgl-ctrl-attrib-button",this._container),I("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),h&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),h===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,h){const y=this._map._getUIString(`AttributionControl.${h}`);l.setAttribute("aria-label",y),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const h=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||s.config.ACCESS_TOKEN}];if(l){const y=h.reduce((x,w,k)=>(w.value&&(x+=`${w.key}=${w.value}${k<h.length-1?"&":""}`),x),"?");l.href=`${s.config.FEEDBACK_URL}/${y}#${yu(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const h=this._map.style._sourceCaches;for(const x in h){const w=h[x];if(w.used){const k=w.getSource();k.attribution&&l.indexOf(k.attribution)<0&&l.push(k.attribution)}}l.sort((x,w)=>x.length-w.length),l=l.filter((x,w)=>{for(let k=w+1;k<l.length;k++)if(l[k].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const y=l.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,l.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class bp{constructor(){s.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=I("div","mapboxgl-ctrl");const h=I("a","mapboxgl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://www.mapbox.com/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const h in l){const y=l[h].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const h=l[0];this._map.getCanvasContainer().offsetWidth<250?h.classList.add("mapboxgl-compact"):h.classList.remove("mapboxgl-compact")}}}class wp{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const h=++this._id;return this._queue.push({callback:l,id:h,cancelled:!1}),h}remove(l){const h=this._currentlyRunning,y=h?this._queue.concat(h):this._queue;for(const x of y)if(x.id===l)return void(x.cancelled=!0)}run(l=0){const h=this._currentlyRunning=this._queue;this._queue=[];for(const y of h)if(!y.cancelled&&(y.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function ic(m,l,h){if(m=new s.LngLat(m.lng,m.lat),l){const y=new s.LngLat(m.lng-360,m.lat),x=new s.LngLat(m.lng+360,m.lat),w=360*Math.ceil(Math.abs(m.lng-h.center.lng)/360),k=h.locationPoint(m).distSqr(l),P=l.x<0||l.y<0||l.x>h.width||l.y>h.height;h.locationPoint(y).distSqr(l)<k&&(P||Math.abs(y.lng-h.center.lng)<w)?m=y:h.locationPoint(x).distSqr(l)<k&&(P||Math.abs(x.lng-h.center.lng)<w)&&(m=x)}for(;Math.abs(m.lng-h.center.lng)>180;){const y=h.locationPoint(m);if(y.x>=0&&y.y>=0&&y.x<=h.width&&y.y<=h.height)break;m.lng>h.center.lng?m.lng-=360:m.lng+=360}return m}const ll={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class jt extends s.Evented{constructor(l,h){if(super(),(l instanceof s.window.HTMLElement||h)&&(l=s.extend({element:l},h)),s.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=s.Point.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=I("div");const x=41,w=27,k=O("svg",{display:"block",height:x*this._scale+"px",width:w*this._scale+"px",viewBox:`0 0 ${w} ${x}`},this._element),P=O("radialGradient",{id:"shadowGradient"},O("defs",{},k));O("stop",{offset:"10%","stop-opacity":.4},P),O("stop",{offset:"100%","stop-opacity":.05},P),O("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},k),O("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},k),O("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},k),O("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},k),this._offset=s.Point.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const y=this._element.classList;for(const x in ll)y.remove(`mapboxgl-marker-anchor-${x}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=s.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const h=l.code,y=l.charCode||l.keyCode;h!=="Space"&&h!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(l){const h=l.originalEvent.target,y=this._element;this._popup&&(h===y||y.contains(h))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,h=this._pos;if(!l||!h)return!1;const y=l.unproject(h),x=l.getFreeCameraOptions();if(!x.position)return!1;const w=x.position.toLngLat();return w.distanceTo(y)<.9*w.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const h=this._pos;if(!h||h.x<0||h.x>l.transform.width||h.y<0||h.y>l.transform.height)return void this._clearFadeTimer();const y=l.unproject(h);let x;l._showingGlobe()&&s.isLngLatBehindGlobe(l.transform,this._lngLat)?x=0:(x=1-l._queryFogOpacity(y),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const h=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${ll[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${h.x}px,${h.y}px)
        `}_calculateXYTransform(){const l=this._pos,h=this._map,y=this.getPitchAlignment();if(!h||!l||y!=="map")return"";if(!h._showingGlobe()){const D=h.getPitch();return D?`rotateX(${D}deg)`:""}const x=s.radToDeg(s.globeTiltAtLngLat(h.transform,this._lngLat)),w=l.sub(s.globeCenterToScreenPoint(h.transform)),k=Math.abs(w.x)+Math.abs(w.y);if(k===0)return"";const P=x/k;return`rotateX(${-w.y*P}deg) rotateY(${w.x*P}deg)`}_calculateZTransform(){const l=this._pos,h=this._map;if(!h||!l)return"";let y=0;const x=this.getRotationAlignment();if(x==="map")if(h._showingGlobe()){const w=h.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),k=h.project(new s.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(w);y=s.radToDeg(Math.atan2(k.y,k.x))-90}else y=-h.getBearing();else if(x==="horizon"){const w=s.smoothstep(4,6,h.getZoom()),k=s.globeCenterToScreenPoint(h.transform);k.y+=w*h.transform.height;const P=l.sub(k),D=s.radToDeg(Math.atan2(P.y,P.x));y=(D>90?D-270:D+90)*(1-w)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(l){s.window.cancelAnimationFrame(this._updateFrameId);const h=this._map;h&&(h.transform.renderWorldCopies&&(this._lngLat=ic(this._lngLat,this._pos,h.transform)),this._pos=h.project(this._lngLat),l===!0?this._updateFrameId=s.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),h._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(h._showingGlobe()||h.getTerrain()||h.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=s.Point.convert(l),this._update(),this}_onMove(l){const h=this._map;if(!h)return;const y=this._pointerdownPos,x=this._positionDelta;if(y&&x){if(!this._isDragging){const w=this._clickTolerance||h._clickTolerance;if(l.point.dist(y)<w)return;this._isDragging=!0}this._pos=l.point.sub(x),this._lngLat=h.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.Event("dragstart"))),this.fire(new s.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new s.Event("dragend")),this._state="inactive"}_addDragHandler(l){const h=this._map,y=this._pos;h&&y&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(y),this._pointerdownPos=l.point,this._state="pending",h.on("mousemove",this._onMove),h.on("touchmove",this._onMove),h.once("mouseup",this._onUp),h.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const h=this._map;return h&&(l?(h.on("mousedown",this._addDragHandler),h.on("touchstart",this._addDragHandler)):(h.off("mousedown",this._addDragHandler),h.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Sp={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},b1=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ky(m=new s.Point(0,0),l="bottom"){if(typeof m=="number"){const h=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(l){case"top":return new s.Point(0,m);case"top-left":return new s.Point(h,h);case"top-right":return new s.Point(-h,h);case"bottom":return new s.Point(0,-m);case"bottom-left":return new s.Point(h,-h);case"bottom-right":return new s.Point(-h,-h);case"left":return new s.Point(m,0);case"right":return new s.Point(-m,0)}return new s.Point(0,0)}return m instanceof s.Point||Array.isArray(m)?s.Point.convert(m):s.Point.convert(m[l]||[0,0])}class Ep{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const h=s.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-h)+this._end*h}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,h,y){this._start=this.getValue(h),this._end=l,this._startTime=h,this._endTime=h+y}}const Xy={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},Jy={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},w1={showCompass:!0,showZoom:!0,visualizePitch:!1};class S1{constructor(l,h,y=!1){this._clickTolerance=10,this.element=h,this.mouseRotate=new gp({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,y&&(this.mousePitch=new yp({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),s.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),h.addEventListener("mousedown",this.mousedown),h.addEventListener("touchstart",this.touchstart,{passive:!1}),h.addEventListener("touchmove",this.touchmove),h.addEventListener("touchend",this.touchend),h.addEventListener("touchcancel",this.reset)}down(l,h){this.mouseRotate.mousedown(l,h),this.mousePitch&&this.mousePitch.mousedown(l,h),W()}move(l,h){const y=this.map,x=this.mouseRotate.mousemoveWindow(l,h),w=x&&x.bearingDelta;if(w&&y.setBearing(y.getBearing()+w),this.mousePitch){const k=this.mousePitch.mousemoveWindow(l,h),P=k&&k.pitchDelta;P&&y.setPitch(y.getPitch()+P)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){B(),s.window.removeEventListener("mousemove",this.mousemove),s.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(s.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),ee(this.element,l)),s.window.addEventListener("mousemove",this.mousemove),s.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,ee(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=ye(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=ye(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const Tp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Cp={maxWidth:100,unit:"metric"},Ap={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},oc={version:s.version,supported:S,setRTLTextPlugin:s.setRTLTextPlugin,getRTLTextPluginStatus:s.getRTLTextPluginStatus,Map:class extends Qd{constructor(m){if(s.LivePerformanceUtils.mark(s.PerformanceMarkers.create),(m=s.extend({},Jy,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&s.isSafariWithAntialiasingBug(s.window)&&(m.antialias=!1,s.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ec(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new wp,this._domRenderTaskQueue=new wp,this._controls=[],this._markers=[],this._popups=[],this._mapId=s.uniqueId(),this._locale=s.extend({},Xy,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Ep(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new s.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,typeof m.container=="string"){if(this._container=s.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof s.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&s.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),s.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),s.window!==void 0&&(s.window.addEventListener("online",this._onWindowOnline,!1),s.window.addEventListener("resize",this._onWindowResize,!1),s.window.addEventListener("orientationchange",this._onWindowResize,!1),s.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new xs(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new hp(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,s.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new Wt({customAttribution:m.customAttribution})),this._logoControl=new bp,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new s.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new s.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(m,l){if(l===void 0&&(l=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=m.onAdd(this);this._controls.push(m);const y=this._controlPositions[l];return l.indexOf("bottom")!==-1?y.insertBefore(h,y.firstChild):y.appendChild(h),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new s.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(m);return l>-1&&this._controls.splice(l,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new s.Event("movestart",m)).fire(new s.Event("move",m)),this.fire(new s.Event("resize",m)),l&&this.fire(new s.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(s.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new s.Event("zoomstart")).fire(new s.Event("zoom")).fire(new s.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new s.Event("pitchstart")).fire(new s.Event("pitch")).fire(new s.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?s.window.navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(l=>l==="auto"?s.window.navigator.language:l):m}setLanguage(m){const l=this._parseLanguage(m);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const h of this._controls)h._setLanguage&&h._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,l=m.projection.name;let h;l==="globe"&&m.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),h=!0):l==="mercator"&&m.zoom<s.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),h=!0),h&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,l){return this._updateProjection(m||l||{name:"mercator"})}_updateProjection(m){let l;if(l=m.name==="globe"&&this.transform.zoom>=s.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const h in this.style._sourceCaches)this.style._sourceCaches[h].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(s.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(s.Point.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,l,h){if(m==="mouseenter"||m==="mouseover"){let y=!1;const x=k=>{const P=l.filter(j=>this.getLayer(j)),D=P.length?this.queryRenderedFeatures(k.point,{layers:P}):[];D.length?y||(y=!0,h.call(this,new Ci(m,this,k.originalEvent,{features:D}))):y=!1},w=()=>{y=!1};return{layers:new Set(l),listener:h,delegates:{mousemove:x,mouseout:w}}}if(m==="mouseleave"||m==="mouseout"){let y=!1;const x=k=>{const P=l.filter(D=>this.getLayer(D));(P.length?this.queryRenderedFeatures(k.point,{layers:P}):[]).length?y=!0:y&&(y=!1,h.call(this,new Ci(m,this,k.originalEvent)))},w=k=>{y&&(y=!1,h.call(this,new Ci(m,this,k.originalEvent)))};return{layers:new Set(l),listener:h,delegates:{mousemove:x,mouseout:w}}}{const y=x=>{const w=l.filter(P=>this.getLayer(P)),k=w.length?this.queryRenderedFeatures(x.point,{layers:w}):[];k.length&&(x.features=k,h.call(this,x),delete x.features)};return{layers:new Set(l),listener:h,delegates:{[m]:y}}}}on(m,l,h){if(h===void 0)return super.on(m,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(m,l,h);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(y);for(const x in y.delegates)this.on(x,y.delegates[x]);return this}once(m,l,h){if(h===void 0)return super.once(m,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(m,l,h);for(const x in y.delegates)this.once(x,y.delegates[x]);return this}off(m,l,h){if(h===void 0)return super.off(m,l);l=new Set(Array.isArray(l)?l:[l]);const y=(w,k)=>{if(w.size!==k.size)return!1;for(const P of w)if(!k.has(P))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[m]:void 0;return x&&(w=>{for(let k=0;k<w.length;k++){const P=w[k];if(P.listener===h&&y(P.layers,l)){for(const D in P.delegates)this.off(D,P.delegates[D]);return w.splice(k,1),this}}})(x),this}queryRenderedFeatures(m,l){return this.style?(l!==void 0||m===void 0||m instanceof s.Point||Array.isArray(m)||(l=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(m,l){return this.style.querySourceFeatures(m,l)}isPointOnSurface(m){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&s.warnOnce(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(s.Point.convert(m))}setStyle(m,l){return(l=s.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(m,l))}_getUIString(m){const l=this._locale[m];if(l==null)throw new Error(`Missing UI string '${m}'`);return l}_updateStyle(m,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new vs(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new vs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,l){if(typeof m=="string"){const h=this._requestManager.normalizeStyleURL(m),y=this._requestManager.transformRequest(h,s.ResourceType.Style);s.getJSON(y,(x,w)=>{x?this.fire(new s.ErrorEvent(x)):w&&this._updateDiff(w,l)})}else typeof m=="object"&&this._updateDiff(m,l)}_updateDiff(m,l){try{this.style.setState(m)&&this._update(!0)}catch(h){s.warnOnce(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(m,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(s.warnOnce("There is no style added to the map."),!1)}addSource(m,l){return this._lazyInitEmptyStyle(),this.style.addSource(m,l),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const l in m){const h=m[l]._tiles;for(const y in h){const x=h[y];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}addSourceType(m,l,h){this._lazyInitEmptyStyle(),this.style.addSourceType(m,l,h)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,l,{pixelRatio:h=1,sdf:y=!1,stretchX:x,stretchY:w,content:k}={}){if(this._lazyInitEmptyStyle(),l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap){const{width:P,height:D,data:j}=s.exported.getImageData(l);this.style.addImage(m,{data:new s.RGBAImage({width:P,height:D},j),pixelRatio:h,stretchX:x,stretchY:w,content:k,sdf:y,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:P,height:D}=l,j=l;this.style.addImage(m,{data:new s.RGBAImage({width:P,height:D},new Uint8Array(j.data)),pixelRatio:h,stretchX:x,stretchY:w,content:k,sdf:y,version:0,userImage:j}),j.onAdd&&j.onAdd(this,m)}}updateImage(m,l){const h=this.style.getImage(m);if(!h)return void this.fire(new s.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap?s.exported.getImageData(l):l,{width:x,height:w}=y;x!==void 0&&w!==void 0?x===h.data.width&&w===h.data.height?(h.data.replace(y.data,!(l instanceof s.window.HTMLImageElement||s.window.ImageBitmap&&l instanceof s.window.ImageBitmap)),this.style.updateImage(m,h)):this.fire(new s.ErrorEvent(new Error(`The width and height of the updated image (${x}, ${w})
                must be that same as the previous version of the image
                (${h.data.width}, ${h.data.height})`))):this.fire(new s.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new s.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,l){s.getImage(this._requestManager.transformRequest(m,s.ResourceType.Image),(h,y)=>{l(h,y instanceof s.window.HTMLImageElement?s.exported.getImageData(y):y)})}listImages(){return this.style.listImages()}addLayer(m,l){return this._lazyInitEmptyStyle(),this.style.addLayer(m,l),this._update(!0)}moveLayer(m,l){return this.style.moveLayer(m,l),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,l,h){return this.style.setLayerZoomRange(m,l,h),this._update(!0)}setFilter(m,l,h={}){return this.style.setFilter(m,l,h),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,l,h,y={}){return this.style.setPaintProperty(m,l,h,y),this._update(!0)}getPaintProperty(m,l){return this.style.getPaintProperty(m,l)}setLayoutProperty(m,l,h,y={}){return this.style.setLayoutProperty(m,l,h,y),this._update(!0)}getLayoutProperty(m,l){return this.style.getLayoutProperty(m,l)}setLight(m,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(s.LngLat.convert(m),this.transform):0}setFeatureState(m,l){return this.style.setFeatureState(m,l),this._update()}removeFeatureState(m,l){return this.style.removeFeatureState(m,l),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let h,y,x,w=this._container;for(;w&&(!y||!x);){const k=s.window.getComputedStyle(w).transform;k&&k!=="none"&&(h=k.match(/matrix.*\((.+)\)/)[1].split(", "),h[0]&&h[0]!=="0"&&h[0]!=="1"&&(y=h[0]),h[3]&&h[3]!=="0"&&h[3]!=="1"&&(x=h[3])),w=w.parentElement}this._containerWidth=y?Math.abs(m/y):m,this._containerHeight=x?Math.abs(l/x):l}_detectMissingCSS(){s.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&s.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=I("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=I("div","mapboxgl-canvas-container",m);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=I("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const h=this._controlContainer=I("div","mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=I("div",`mapboxgl-ctrl-${x}`,h)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,l){const h=s.exported.devicePixelRatio||1;this._canvas.width=h*Math.ceil(m),this._canvas.height=h*Math.ceil(l),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${l}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const l=this._markers.indexOf(m);l!==-1&&this._markers.splice(l,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const l=this._popups.indexOf(m);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const m=s.extend({},S.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",m),h=l||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);h?(this._useWebGL2&&!l&&s.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),s.storeAuthState(h,!0),this.painter=new Yl(h,this.transform,!!l),this.on("data",y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),s.exported$1.testSupport(h)):this.fire(new s.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new s.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new s.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let l;const h=this.painter.context.extTimerQuery,y=s.exported.now();if(this.listens("gpu-timing-frame")&&(l=h.createQueryEXT(),h.beginQueryEXT(h.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],s.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],s.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,D=this.transform.pitch,j=s.exported.now(),F=new s.EvaluationParameters(P,{now:j,fadeDuration:x,pitch:D,transition:this.style.getTransition()});this.style.update(F)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let w=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),w=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):w=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new s.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new s.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const P=s.exported.now()-y;h.endQueryEXT(h.TIME_ELAPSED_EXT,l),setTimeout(()=>{const D=h.getQueryObjectEXT(l,h.QUERY_RESULT_EXT)/1e6;h.deleteQueryEXT(l),this.fire(new s.Event("gpu-timing-frame",{cpuTime:P,gpuTime:D})),s.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:D}})},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const D=this.painter.queryGpuTimers(P);this.fire(new s.Event("gpu-timing-layer",{layerTimes:D}))},50)}if(this.listens("gpu-timing-deferred-render")){const P=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const D=this.painter.queryGpuTimeDeferredRender(P);this.fire(new s.Event("gpu-timing-deferred-render",{gpuTime:D}))},50)}const k=this._sourcesDirty||this._styleDirty||this._placementDirty||w;if(k||this._repaint)this.triggerRepaint();else{const P=!this.isMoving()&&this.loaded();if(P&&(w=this._updateAverageElevation(y,!0)),w)this.triggerRepaint();else if(this._triggerFrame(!1),P&&(this.fire(new s.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const D=this._calculateSpeedIndex();this.fire(new s.Event("speedindexcompleted",{speedIndex:D})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,s.LivePerformanceUtils.mark(s.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&s.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const l of this._markers)m&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!m||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(m,l=!1){const h=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&h(0);if((l||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const y=this.transform.averageElevation;let x=this.transform.sampleAverageElevation(),w=!1;this.transform.elevation&&(w=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=m;const k=Math.abs(y-x);if(k>1){if(this._isInitialLoad||w)return this._averageElevation.jumpTo(x),h(x);this._averageElevation.easeTo(x,m,300)}else if(k>1e-4)return this._averageElevation.jumpTo(x),h(x)}return!!this._averageElevation.isEasing(m)&&h(this._averageElevation.getValue(m))}_authenticate(){s.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===s.AUTH_ERR_MSG||m.status===401)){const l=this.painter.context.gl;s.storeAuthState(l,!1),this._logoControl instanceof bp&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new s.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),s.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const h=this.painter.context.gl,y=h.createFramebuffer();function x(w){h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,w,0);const k=new Uint8Array(h.drawingBufferWidth*h.drawingBufferHeight*4);return h.readPixels(0,0,h.drawingBufferWidth,h.drawingBufferHeight,h.RGBA,h.UNSIGNED_BYTE,k),k}return h.bindFramebuffer(h.FRAMEBUFFER,y),this._canvasPixelComparison(x(m),l.canvasCopies.map(x),l.timeStamps)}_canvasPixelComparison(m,l,h){let y=h[1]-h[0];const x=m.length/4;for(let w=0;w<l.length;w++){const k=l[w];let P=0;for(let D=0;D<k.length;D+=4)k[D]===m[D]&&k[D+1]===m[D+1]&&k[D+2]===m[D+2]&&k[D+3]===m[D+3]&&(P+=1);y+=(h[w+2]-h[w+1])*(1-P/x)}return y}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),s.window!==void 0&&(s.window.removeEventListener("resize",this._onWindowResize,!1),s.window.removeEventListener("orientationchange",this._onWindowResize,!1),s.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),s.window.removeEventListener("online",this._onWindowOnline,!1),s.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),s.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new s.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=s.exported.frame(l=>{const h=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,h&&this._render(l)}))}_preloadTiles(m){const l=this.style?Object.values(this.style._sourceCaches):[];return s.asyncAll(l,(h,y)=>h._preloadTiles(m,y),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){s.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,l){s.setCacheLimits(m,l)}get version(){return s.version}},NavigationControl:class{constructor(m){this.options=s.extend({},w1,m),this._container=I("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(s.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),I("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),I("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(s.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const h=this._map;h&&(this.options.visualizePitch?h.resetNorthPitch({},{originalEvent:l}):h.resetNorth({},{originalEvent:l}))}),this._compassIcon=I("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const l=m.getZoom(),h=l===m.getMaxZoom(),y=l===m.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new S1(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,l){const h=I("button",m,this._container);return h.type="button",h.addEventListener("click",l),h}_setButtonTitle(m,l){if(!this._map)return;const h=this._map._getUIString(`NavigationControl.${l}`);m.setAttribute("aria-label",h),m.firstElementChild&&m.firstElementChild.setAttribute("title",h)}},GeolocateControl:class extends s.Evented{constructor(m){super(),this.options=s.extend({geolocation:s.window.navigator.geolocation},Tp,m),s.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=tc(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=I("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const l=(h=!!this.options.geolocation)=>{this._supportsGeolocation=h,m(h)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):s.window.navigator.permissions!==void 0?s.window.navigator.permissions.query({name:"geolocation"}).then(h=>l(h.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(m){const l=this._map.getMaxBounds(),h=m.coords;return!!l&&(h.longitude<l.getWest()||h.longitude>l.getEast()||h.latitude<l.getSouth()||h.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new s.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("geolocate",m)),this._finish()}}_updateCamera(m){const l=new s.LngLat(m.coords.longitude,m.coords.latitude),h=m.coords.accuracy,y=this._map.getBearing(),x=s.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(h),x,{geolocateSource:!0})}_updateMarker(m){if(m){const l=new s.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,l=s.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,h=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new s.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=I("button","mapboxgl-ctrl-geolocate",this._container),I("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){s.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I("div","mapboxgl-user-location"),this._dotElement.appendChild(I("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(I("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new jt({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=I("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new jt({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new s.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return s.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new s.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{s.window.addEventListener("ondeviceorientationabsolute"in s.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};s.window.DeviceMotionEvent!==void 0&&typeof s.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),s.window.removeEventListener("deviceorientation",this._onDeviceOrientation),s.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Wt,ScaleControl:class{constructor(m){this.options=s.extend({},Cp,m),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),s.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,l=this._map,h=l._containerHeight/2,y=l._containerWidth/2-m/2,x=l.unproject([y,h]),w=l.unproject([y+m,h]),k=x.distanceTo(w);if(this.options.unit==="imperial"){const P=3.2808*k;P>5280?this._setScale(m,P/5280,"mile"):this._setScale(m,P,"foot")}else this.options.unit==="nautical"?this._setScale(m,k/1852,"nautical-mile"):k>=1e3?this._setScale(m,k/1e3,"kilometer"):this._setScale(m,k,"meter")}_setScale(m,l,h){this._map._requestDomTask(()=>{const y=function(w){const k=Math.pow(10,`${Math.floor(w)}`.length-1);let P=w/k;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(D){const j=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*j)/j}(P),k*P}(l),x=y/l;this._container.innerHTML=this._isNumberFormatSupported&&h!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:h}).format(y):`${y}&nbsp;${Ap[h]}`,this._container.style.width=m*x+"px"})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=I("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof s.window.HTMLElement?this._container=m.container:s.warnOnce("Full screen control 'container' must be a DOM element.")),s.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in s.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in s.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=I("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",s.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,s.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!s.window.document.fullscreenEnabled&&!s.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=I("button","mapboxgl-ctrl-fullscreen",this._controlContainer);I("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),s.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(s.window.document.fullscreenElement||s.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?s.window.document.exitFullscreen?s.window.document.exitFullscreen():s.window.document.webkitCancelFullScreen&&s.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends s.Evented{constructor(m){super(),this.options=s.extend(Object.create(Sp),m),s.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new s.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new s.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=s.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(s.window.document.createTextNode(m))}setHTML(m){const l=s.window.document.createDocumentFragment(),h=s.window.document.createElement("body");let y;for(h.innerHTML=m;y=h.firstChild,y;)l.appendChild(y);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=I("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(m),this.options.closeButton){const h=this._closeButton=I("button","mapboxgl-popup-close-button",l);h.type="button",h.setAttribute("aria-label","Close popup"),h.setAttribute("aria-hidden","true"),h.innerHTML="&#215;",h.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let l;return this._classList.delete(m)?l=!1:(this._classList.add(m),l=!0),this._updateClassList(),l}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const l=this._map,h=this._container,y=this._pos;if(!l||!h||!y)return"bottom";const x=h.offsetWidth,w=h.offsetHeight,k=y.x<x/2,P=y.x>l.transform.width-x/2;if(y.y+m<w)return k?"top-left":P?"top-right":"top";if(y.y>l.transform.height-w){if(k)return"bottom-left";if(P)return"bottom-right"}return k?"left":P?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),m.className=l.join(" ")}_update(m){const l=this._map,h=this._content;if(!l||!this._lngLat&&!this._trackPointer||!h)return;let y=this._container;if(y||(y=this._container=I("div","mapboxgl-popup",l.getContainer()),this._tip=I("div","mapboxgl-popup-tip",y),y.appendChild(h)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ic(this._lngLat,this._pos,l.transform)),!this._trackPointer||m){const x=this._pos=this._trackPointer&&m?m:l.project(this._lngLat),w=Ky(this.options.offset),k=this._anchor=this._getAnchor(w.y),P=Ky(this.options.offset,k),D=x.add(P).round();l._requestDomTask(()=>{this._container&&k&&(this._container.style.transform=`${ll[k]} translate(${D.x}px,${D.y}px)`)})}if(!this._marker&&l._showingGlobe()){const x=s.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(b1);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:jt,Style:vs,LngLat:s.LngLat,LngLatBounds:s.LngLatBounds,Point:s.Point,MercatorCoordinate:s.MercatorCoordinate,FreeCameraOptions:Ly,Evented:s.Evented,config:s.config,prewarm:function(){hn().acquire(ut)},clearPrewarmedResources:function(){const m=Bt;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(ut),Bt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return s.config.ACCESS_TOKEN},set accessToken(m){s.config.ACCESS_TOKEN=m},get baseApiUrl(){return s.config.API_URL},set baseApiUrl(m){s.config.API_URL=m},get workerCount(){return it.workerCount},set workerCount(m){it.workerCount=m},get maxParallelImageRequests(){return s.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){s.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){s.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:s.exported.setNow,restoreNow:s.exported.restoreNow};return oc});var p=c;return p})})(MB);var M_=MB.exports;const zB=Ya(M_),Loe=yS({__proto__:null,default:zB},[M_]),Roe=()=>{const{palette:e}=iz();return z.jsxs("svg",{width:"28",height:"42",viewBox:"0 0 24 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("path",{fill:"black",stroke:"black",strokeOpacity:.5,opacity:.25,transform:"translate(7, 32)",d:"M 0 0 A 5 3 0 1 1 0 0.0001 Z"}),z.jsx("path",{d:"M0.832031 12.0002C0.832031 5.82631 5.82484 0.833496 11.9987 0.833496C18.1726 0.833496 23.1654 5.82631 23.1654 12.0002C23.1654 15.3304 21.3878 19.3632 19.1755 23.0733C16.9757 26.7623 14.3983 30.0479 12.8973 31.8642C12.4305 32.4234 11.5832 32.4233 11.1166 31.8639C9.60788 30.0485 7.02598 26.7625 4.82387 23.0731C2.60953 19.3631 0.832031 15.3303 0.832031 12.0002ZM7.33203 12.0002C7.33203 14.5763 9.42255 16.6668 11.9987 16.6668C14.5748 16.6668 16.6654 14.5763 16.6654 12.0002C16.6654 9.42402 14.5748 7.3335 11.9987 7.3335C9.42255 7.3335 7.33203 9.42402 7.33203 12.0002Z",fill:e.info[600],stroke:e.neutral[900],strokeOpacity:.5,transform:"translate(0, 0)"})]})},Ooe=({coordinates:e})=>z.jsx(PB,{latitude:e.lat,longitude:e.lng,anchor:"bottom",children:z.jsx(Roe,{})}),Boe=()=>{const{palette:e}=iz();return z.jsx("div",{className:"cursor-pointer transition-all ease-in-out hover:scale-[115%]",children:z.jsxs("svg",{width:"28",height:"42",viewBox:"0 0 24 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("path",{fill:"black",stroke:"black",strokeOpacity:.5,opacity:.25,transform:"translate(7, 32)",d:"M 0 0 A 5 3 0 1 1 0 0.0001 Z"}),z.jsx("path",{d:"M0.832031 12.0002C0.832031 5.82631 5.82484 0.833496 11.9987 0.833496C18.1726 0.833496 23.1654 5.82631 23.1654 12.0002C23.1654 15.3304 21.3878 19.3632 19.1755 23.0733C16.9757 26.7623 14.3983 30.0479 12.8973 31.8642C12.4305 32.4234 11.5832 32.4233 11.1166 31.8639C9.60788 30.0485 7.02598 26.7625 4.82387 23.0731C2.60953 19.3631 0.832031 15.3303 0.832031 12.0002ZM7.33203 12.0002C7.33203 14.5763 9.42255 16.6668 11.9987 16.6668C14.5748 16.6668 16.6654 14.5763 16.6654 12.0002C16.6654 9.42402 14.5748 7.3335 11.9987 7.3335C9.42255 7.3335 7.33203 9.42402 7.33203 12.0002Z",fill:e.primary[700],stroke:e.neutral[900],strokeOpacity:.7,strokeWidth:.8})]})})},Foe=({kita:e,onClick:t})=>z.jsx(PB,{latitude:e.location.coordinates[1],longitude:e.location.coordinates[0],anchor:"center",onClick:n=>{n.originalEvent.stopPropagation(),t==null||t(e)},style:{cursor:"pointer"},children:z.jsx(Boe,{})}),joe=({kita:e,onClose:t})=>{const{desiredStartingMonth:n,coordinates:i}=Yc(),[c,d]=At.useState(n),p=_B(c),s=p?e.availability[p]:!1,[_,S]=At.useState(!1);return At.useEffect(()=>{n&&n.length!==0&&d(n)},[n]),z.jsxs("div",{className:"relative -m-2.5 flex w-full min-w-[300px] cursor-pointer flex-col gap-3 rounded-2xl bg-white p-0 py-3",children:[z.jsx("div",{className:"absolute bottom-2 right-3 z-10 opacity-100",children:z.jsx(N5,{color:"info",variant:"soft",size:"sm",onClick:()=>S(!0),children:z.jsx(G4,{})})}),z.jsx("div",{className:"absolute -right-4 -top-4 z-20",onClick:()=>t==null?void 0:t(),children:z.jsx(Ix,{variant:"solid",size:"sm"})}),z.jsx(EB,{open:_,onClose:()=>S(!1)}),z.jsxs("div",{className:"flex flex-col gap-1 px-3",onClick:()=>window.open(`https://kita-navigator.berlin.de/einrichtungen/${e.uuid}`,"_blank"),children:[z.jsx(kx,{sx:E=>({color:E.palette.neutral[900],textDecorationColor:E.palette.neutral[200],":hover":{color:E.palette.info[800]}}),component:"a",className:"text-lg font-extrabold underline-offset-4",fontSize:15,underline:"always",children:z.jsx(yd,{children:e.name})}),z.jsxs("div",{className:"mb-3 flex flex-row items-center gap-3",children:[z.jsx("span",{className:"text-xs font-bold text-deep-blue",children:`${e.address.street} ${e.address.houseNumber}, ${e.address.zip}`}),z.jsx(GE,{startDecorator:z.jsx(U4,{fontSize:"small"}),color:"neutral",variant:"soft",size:"sm",children:z.jsx("span",{className:"pl-0 pr-1 font-bold",children:vB({lat:e.location.coordinates[1],lng:e.location.coordinates[0]},i)})})]}),z.jsxs("div",{className:"flex flex-row items-center text-xs",children:[z.jsxs("span",{className:yi("font-bold","text-gray-500"),children:[c,":"]}),z.jsx("div",{className:"ml-1",children:s?z.jsxs("div",{className:"flex flex-row items-center gap-1 text-xs font-bold text-green-600",children:["Plätze frei",z.jsx(N4,{fontSize:"small"})]}):z.jsxs("div",{color:"danger",className:"flex flex-row items-center gap-1 text-xs font-bold text-red-600",children:["Ausgebucht",z.jsx(V4,{fontSize:"small"})]})})]})]})]},"kita"+e.uuid)},Noe=({kita:e,coordinates:t,onClose:n})=>z.jsx(Doe,{latitude:t.lat,longitude:t.lng,anchor:"bottom",onClose:()=>n==null?void 0:n(e),style:{padding:0},maxWidth:"inherit",className:"rounded-lg",closeButton:!1,children:z.jsx(joe,{onClose:()=>{n==null||n(e)},kita:e})});const LB=({kitas:e=[],centerCoordinates:t=eg,showNavigation:n=!0})=>{const[i,c]=At.useState(null),{scrollTo:d,generateElementScrollAnchor:p}=YT();At.useEffect(()=>{if(!i)return;const _=p(i.uuid);_&&d(_)},[i]);const s=At.useMemo(()=>e==null?void 0:e.map(_=>z.jsx(Foe,{kita:_,onClick:()=>c(_)},"kitamarker"+_.uuid)),[e]);return At.useEffect(()=>{(e===null||e.length===0)&&c(null)},[e]),z.jsxs(roe,{children:[z.jsxs(Moe,{id:"finderMap",reuseMaps:!0,mapboxAccessToken:"pk.eyJ1IjoiaGFubm9ncmltbSIsImEiOiJjbGdtamwyZHowNmxnM2VxbTd6eHZhMjExIn0.0wHQJStc2kgDh29Ewv_g-w",style:{width:"100%",height:"100%"},mapStyle:"mapbox://styles/mapbox/streets-v9",initialViewState:{latitude:(t==null?void 0:t.lat)||eg.lat,longitude:(t==null?void 0:t.lng)||eg.lng,zoom:13},interactive:!0,maxPitch:0,dragRotate:!1,minZoom:13,maxZoom:16,children:[n&&z.jsx(zoe,{showZoom:!0,position:"top-right"}),t&&typeof t.lat=="number"&&typeof t.lng=="number"&&z.jsx(Ooe,{coordinates:t}),s,i&&z.jsx(Noe,{kita:i,coordinates:{lat:i.location.coordinates[1],lng:i.location.coordinates[0]},onClose:()=>c(null)})]}),z.jsx($oe,{coordinates:t,markers:s})]})},$oe=({markers:e=[],coordinates:t})=>{const{finderMap:n}=Ioe(),i=c=>{n&&(Number.isNaN(c.lat)||Number.isNaN(c.lng)||n.flyTo({center:new M_.LngLat(c.lng,c.lat),zoom:14}))};return At.useEffect(()=>{n&&(t.lat===null||t.lng===null||i(t))},[t]),At.useEffect(()=>{if(!n||e.length===0)return;const c=new zB.LngLatBounds;e.forEach(d=>{c.extend(new M_.LngLat(d.props.kita.location.coordinates[0],d.props.kita.location.coordinates[1]))}),n.fitBounds(c,{animate:!0,linear:!0,essential:!0,screenSpeed:.5,maxZoom:14})},[e]),z.jsx("div",{})},Voe=({height:e})=>{const{kitas:t}=Td(),{coordinates:n,coordinatesAreValid:i}=Yc();return z.jsx("div",{id:"finder-map",className:`flex h-full w-full flex-grow lg:h-full lg:min-h-[500px] xl:h-full xl:min-h-[${e}px]`,children:z.jsx(LB,{kitas:t||[],centerCoordinates:n})})},Uoe=({height:e})=>z.jsxs("div",{className:`flex min-h-[${e}px] h-full w-full flex-col`,children:[z.jsx(Xie,{}),z.jsxs("div",{id:"content",style:{height:e},className:"xl:page-padding flex h-full w-full flex-col-reverse lg:gap-4 xl:flex-row xl:pr-0",children:[z.jsx(Qie,{}),e>0&&z.jsx(Voe,{height:e})]})]}),Woe=75,gS=(e=window==null?void 0:window.innerHeight)=>({fullscreen:{y:0,offset:-50},open:{y:e/5*3},closed:{y:e,offset:Woe}}),Goe=({windowHeight:e=window==null?void 0:window.innerHeight,anchors:t=gS(e),startAnchor:n="open",children:i})=>{var U;const c=J=>t[J].y-(t[J].offset??0),d=At.useRef(null),p=At.useRef(null),s=((U=p.current)==null?void 0:U.clientHeight)??0,[_,S]=At.useState("closed"),E=DQ(c(n),_==="fullscreen"?{duration:.1,bounce:0,velocity:200}:{stiffness:300,damping:30}),A=ET(0),I=oD(A,[e/2*-1,0,e/2],[.6,.2,.6]);oD(E,J=>_==="closed"?Math.min(Math.max(J,c("open")),c("closed")):_==="open"?Math.min(Math.max(J,c("fullscreen")),c("closed")):_==="fullscreen"&&Math.min(Math.max(J,e-s),c("fullscreen")));const O=J=>{console.log("close"),E.set(c("closed")),S("closed")},N=J=>{console.log("open"),E.set(c("open")),S("open")},$=J=>{console.log("fullscreen"),E.set(c("fullscreen")),S("fullscreen")},K=(J,ee)=>{if(A.set(0),_==="closed"&&ee.offset.y<0&&E.get()>c("open"))return N();if(_==="closed"&&ee.offset.y<0&&E.get()<c("open"))return $();if(_==="closed"&&ee.offset.y>0||_==="open"&&ee.offset.y>0&&ee.offset.y>(c("closed")-c("open"))/2)return O();if(_==="open"&&ee.offset.y>0)return N();if(_==="open"&&ee.offset.y<0)return $();if(_==="fullscreen"&&ee.offset.y>0&&E.get()>c("fullscreen"))return N()},W=(J,ee)=>{A.set(ee.offset.y)},B=()=>{if(_==="fullscreen")return N();if(_==="open")return $();if(_==="closed")return N()};return z.jsx(ni.div,{ref:d,style:{position:"absolute",top:0,width:"100%",y:E,zIndex:200,overflowY:_==="fullscreen"?"scroll":"hidden",paddingBottom:200,backgroundColor:"#fff"},className:"rounded-t-2xl",drag:"y",dragConstraints:{top:_==="fullscreen"?e-s:c(_==="open"?"fullscreen":"open"),bottom:c(_==="fullscreen"?"open":"closed")},onPan:W,onPanEnd:K,onDoubleClick:B,dragElastic:{top:_==="fullscreen"?0:.8,bottom:_==="fullscreen"?0:.8},dragMomentum:_==="fullscreen"&&E.get()>c("fullscreen"),children:z.jsxs(ni.div,{className:"pb-8",ref:p,style:{width:"100%",display:"flex",flexDirection:"column",height:"100%",minHeight:e},children:[z.jsx(ni.div,{className:"mb-2 ml-auto mr-auto mt-3 h-[7px] w-[56px] cursor-move rounded-lg bg-slate-400",style:{opacity:I}}),i]})})},Hoe=({onClose:e})=>{const{setCoordinates:t,setAddress:n,desiredStartingMonth:i,setDesiredStartingMonth:c,coordinatesAreValid:d,submit:p,submitted:s}=Yc(),{isFetching:_}=Td(),{isOpen:S,setOpen:E}=Us("kita-search"),A=()=>{E(!1),e==null||e()},I=async()=>{await p(),A()},O="px-4";return z.jsxs(Ux,{name:"kita-search",children:[z.jsxs("div",{className:yi("flex w-full flex-col gap-7 py-3",O),children:[z.jsx(ni.h2,{className:"text-3xl font-black",children:"Kitas in der Nähe finden"}),z.jsxs("div",{className:"flex w-full flex-col",children:[z.jsx(ni.h3,{initial:{x:-0},animate:{x:0},transition:{delay:.2,bounce:0},className:"mb-2 text-xl font-bold",children:"Wo wohnen Sie?"}),z.jsx(HT,{label:"",className:"lg:w-full",onAddressSelected:async N=>{n(N)},onCoordinatesSuccessfullyRetrieved:async N=>{N.lat==null||N.lng==null||t(N)}})]}),z.jsxs("div",{className:"flex w-full flex-col",children:[z.jsx(ni.h3,{initial:{x:-0},animate:{x:0},transition:{delay:.2,bounce:0},className:"mb-2 text-xl font-bold",children:"Gewünschter Beginn"}),z.jsx(Rg,{formControlProps:{className:"w-full lg:w-1/4"},label:"",placeholder:"z.B. Mai 2023",startDecorator:z.jsx(GT,{}),value:i,options:["Mai 2023","Juni 2023","Juli 2023","August 2023","September 2023","Oktober 2023","November 2023","Dezember 2023","Januar 2024","Februar 2024","März 2024","April 2024","Mai 2024","Juni 2024","Juli 2024","August 2024","September 2024","Oktober 2024","November 2024","Dezember 2024","Januar 2025","Februar 2025","März 2025","April 2025"],defaultValue:i,onChange:(N,$)=>{c($)}})]})]}),z.jsx("div",{className:yi("absolute bottom-0 flex w-full flex-row-reverse bg-slate-100 py-3",O),children:z.jsx(ro,{style:{padding:"16px 32px"},color:"info",startDecorator:z.jsx(oie,{}),size:"lg",variant:"solid",loading:_,loadingPosition:"center",disabled:s?!d||!i:!1,onClick:async()=>await I(),children:"Kitas finden"})})]})},Zoe=()=>{const{isOpen:e,setOpen:t}=Us("kita-search");return z.jsx("div",{className:"mt-1 flex w-full flex-col items-center justify-center",children:z.jsx(ro,{variant:"solid",size:"lg",style:{padding:"20px 40px"},color:"primary",onClick:()=>t(!0),children:"Suche starten"})})},qoe=({children:e})=>{const{kitas:t,isFetching:n}=Td(),{submitted:i}=Yc(),c=!i,d=70;return z.jsxs(z.Fragment,{children:[z.jsx(Hoe,{}),z.jsxs(Goe,{anchors:{...gS(),closed:{...gS().closed,offset:d}},children:[z.jsx("h3",{className:yi("mb-3 w-full text-center text-base",!t||t.length===0?"font-medium":"font-extrabold"),children:c?"Starten Sie Ihre Suche":n?"Suche läuft...":`${(t==null?void 0:t.length)||0} Einrichtungen in der Nähe`}),c?z.jsx(Zoe,{}):n?z.jsxs("div",{className:"mt-6 flex w-full flex-col items-center justify-center gap-4",children:[z.jsx(Cg,{color:"info",size:"lg"}),z.jsx("p",{className:"text-sm",children:"Tageseinrichtungen werden ermittelt"})]}):z.jsx(IB,{kitas:t||[]})]})]})},Koe=({})=>{const{kitas:e}=Td(),{coordinates:t}=Yc();return z.jsx("div",{id:"finder-map",className:"fixed flex h-full w-full flex-grow",children:z.jsx(LB,{kitas:e||[],centerCoordinates:t,showNavigation:!1})})},Xoe=({height:e})=>z.jsx("div",{className:"flex h-full w-full flex-col",children:z.jsxs("div",{id:"content",style:{height:e},className:"flex w-full flex-col overflow-y-hidden",children:[z.jsx(Koe,{}),z.jsx(qoe,{})]})}),t3=()=>{const e=At.useRef(null),t=At.useRef(null),[n,i]=At.useState(0),c=At.useCallback(()=>{var _,S;const p=((_=e.current)==null?void 0:_.clientHeight)??125,s=((S=t.current)==null?void 0:S.clientHeight)??220;i(window.innerHeight-s-p)},[window.innerHeight,e,t]);At.useEffect(()=>(window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c)}),[window.innerHeight,e,t]),At.useEffect(()=>{c()},[]);const d=At.useMemo(()=>!Mie(),[window.innerWidth]);return z.jsx(cy,{headerRef:e,children:z.jsx(qie,{children:z.jsx(Vie,{children:z.jsx(Kie,{children:d?z.jsx(Xoe,{height:n}):z.jsx(Uoe,{height:n})})})})})},Joe=({})=>z.jsx(cy,{children:z.jsxs("div",{className:"page-padding h-full w-full pb-40 pt-24 2xl:w-2/3",children:[z.jsx("h1",{className:"mb-14 text-4xl font-extrabold",children:"Datenschutzerklärung"}),z.jsxs("div",{className:"flex w-full flex-col gap-12",children:[z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"1. Datenschutz auf einen Blick"}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Allgemeine Hinweise"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die folgenden Hinweise geben einen einfachen Überblick darüber, was mit Ihren personenbezogenen Daten passiert, wenn Sie diese Website besuchen. Personenbezogene Daten sind alle Daten, mit denen Sie persönlich identifiziert werden können. Ausführliche Informationen zum Thema Datenschutz entnehmen Sie unserer unter diesem Text aufgeführten Datenschutzerklärung."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Datenerfassung auf dieser Website"})," ",z.jsx("h4",{className:"mb-2 mt-3 text-lg font-semibold",children:"Wer ist verantwortlich für die Datenerfassung auf dieser Website?"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die Datenverarbeitung auf dieser Website erfolgt durch den Websitebetreiber. Dessen Kontaktdaten können Sie dem Abschnitt „Hinweis zur Verantwortlichen Stelle“ in dieser Datenschutzerklärung entnehmen."})," ",z.jsx("h3",{className:"mb-2 mt-3 text-lg font-semibold",children:"Wie erfassen wir Ihre Daten?"}),z.jsx("h4",{className:"mb-2 mt-3 text-lg font-semibold",children:"Wir bieten folgende Services an, die Daten erfassen:"}),z.jsx("h4",{className:"mb-2 mt-3 text-lg font-semibold",children:"Kita-Platz Benachrichtigungsservice"}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Beschreibung und Umfang der Datenverarbeitung: Auf unserer Internetseite besteht die Möglichkeit, einen kostenfreien Kita-Platz Benachrichtigungsservice zu abonnieren. Dabei werden bei der Anmeldung zum Kita-Platz Benachrichtigungsservice die folgenden Daten aus dem Eingabeformular an uns übermittelt:"}),z.jsx("br",{}),z.jsxs("ul",{children:[" ",z.jsx("li",{children:"E-Mail-Adresse"})," "]}),z.jsx("br",{}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Zudem werden folgende Daten bei der Anmeldung erhoben:"}),z.jsx("br",{}),z.jsx("ul",{children:z.jsx("li",{className:"text-base font-normal leading-normal text-gray-700",children:"Datum und Uhrzeit der Registrierung"})}),z.jsx("br",{}),z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Für die Verarbeitung der Daten wird im Rahmen des Anmeldevorgangs Ihre Einwilligung mittels Email-Opt-In-Verfahren eingeholt und auf diese Datenschutzerklärung verwiesen. Der Kita-Platz Benachrichtigungsservice setzt erst ein, wenn Sie den Bestätigungslink in der Einladungs-E-Mail anklicken.",z.jsx("br",{}),"Der Versand erfolgt über Amazon-Server (mit Servern im EU-Raum). Außer für den Versand erfolgt im Zusammenhang mit der Datenverarbeitung für den Kita-Platz Benachrichtigungsservice keine Weitergabe der Daten an Dritte. Die Daten werden ausschließlich für den Versand des Kita-Platz Benachrichtigungsservice verwendet."]}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Rechtsgrundlage für die Datenverarbeitung: Rechtsgrundlage für die Verarbeitung der Daten nach Anmeldung zum Kita-Platz Benachrichtigungsservice durch den Nutzer ist bei Vorliegen einer Einwilligung des Nutzers Art. 6 Abs. 1 lit. a DSGVO."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Zweck der Datenverarbeitung: Die Erhebung der E-Mail-Adresse des Nutzers dient dazu, den Kita-Platz Benachrichtigungsservice zuzustellen. Die Erhebung sonstiger personenbezogener Daten im Rahmen des Anmeldevorgangs dient dazu, einen Missbrauch der Dienste oder der verwendeten E-Mail-Adresse zu verhindern."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Dauer der Speicherung: Die Daten werden gelöscht, sobald sie für die Erreichung des Zwecks ihrer Erhebung nicht mehr erforderlich sind. Die E-Mail-Adresse des Nutzers wird demnach solange gespeichert, wie das Abonnement des Kita-Platz Benachrichtigungsservice aktiv ist. Die sonstigen im Rahmen des Anmeldevorgangs erhobenen personenbezogenen Daten werden ebenfalls bei Beendigung des Abonnements gelöscht."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:'Widerspruchs- und Beseitigungsmöglichkeit: Das Abonnement des Kita-Platz Benachrichtigungsservice kann durch den betroffenen Nutzer jederzeit gekündigt werden. Zu diesem Zweck kontaktieren Sie uns bitte per E-Mail oder klicken sie auf den "Email Benachrichtigungen abmelden" button in der Anmeldungs Email. Hierdurch wird ebenfalls ein Widerruf der Einwilligung zur Speicherung der während des Anmeldevorgangs erhobenen personenbezogenen Daten ermöglicht. Wenn Sie auf die Blacklist gesetzt werden möchten, um zukünftige Anmeldungen dauerhaft zu verhindern, kontaktieren Sie uns bitte per E-Mail.'}),z.jsx("h4",{className:"mb-2 mt-3 text-lg font-semibold",children:"Kita Finder Service"}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Beschreibung und Umfang der Datenverarbeitung: Auf unserer Internetseite besteht die Möglichkeit, sich für einen Kita Finder Service anzumelden. Wenn ein Nutzer diese Möglichkeit wahrnimmt, werden die folgenden Daten in der Eingabemaske eingegeben und an uns übermittelt:"}),z.jsx("br",{}),z.jsxs("ul",{children:[z.jsx("li",{className:"text-base font-normal leading-normal text-gray-700",children:"Wohnort"}),z.jsx("li",{className:"text-base font-normal leading-normal text-gray-700",children:"Gewünschter Beginn"}),z.jsx("li",{className:"text-base font-normal leading-normal text-gray-700",children:"Geburtsmonat des Kindes"}),z.jsx("li",{className:"text-base font-normal leading-normal text-gray-700",children:"E-Mail-Adresse"})]}),z.jsx("br",{}),z.jsx("p",{children:"Zudem werden folgende Daten bei der Anmeldung erhoben:"}),z.jsx("p",{children:"Datum und Uhrzeit der Registrierung"}),z.jsx("br",{}),z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Für die Verarbeitung der Daten wird im Rahmen des Anmeldevorgangs Ihre Einwilligung mittels Double-Opt-In-Verfahren eingeholt und auf diese Datenschutzerklärung verwiesen. Der Kita Finder Service wird erst aktiviert, wenn Sie den Bestätigungslink in der Einladungs-E-Mail anklicken.",z.jsx("br",{}),"Der Versand erfolgt über Amazon-Server (mit Servern im EU-Raum). Außer für den Versand erfolgt im Zusammenhang mit der Datenverarbeitung für den Kita Finder Service keine Weitergabe der Daten an Dritte. Die Daten werden ausschließlich für den Versand des Kita Finder Service verwendet."]}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Rechtsgrundlage für die Datenverarbeitung: Rechtsgrundlage für die Verarbeitung der Daten nach Anmeldung zum Kita Finder Service durch den Nutzer ist bei Vorliegen einer Einwilligung des Nutzers Art. 6 Abs. 1 lit. a DSGVO."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Zweck der Datenverarbeitung: Die Erhebung der oben genannten Daten dient dazu, den Kita Finder Service durchzuführen und dem Nutzer passende Kitas basierend auf dem Wohnort, dem gewünschten Beginn und dem Geburtsmonat des Kindes zu empfehlen. Die Erhebung der E-Mail-Adresse des Nutzers dient dazu, den Kita Finder Service zuzustellen."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Dauer der Speicherung: Die Daten werden gelöscht, sobald sie für die Erreichung des Zwecks ihrer Erhebung nicht mehr erforderlich sind. Die E-Mail-Adresse des Nutzers wird demnach solange gespeichert, wie das Abonnement des Kita Finder Service aktiv ist, maximal jedoch 3 Monate. Die sonstigen im Rahmen des Anmeldevorgangs erhobenen personenbezogenen Daten werden ebenfalls bei Beendigung des Abonnements gelöscht."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:'Widerspruchs- und Beseitigungsmöglichkeit: Das Abonnement des Kita Finder Service kann durch den betroffenen Nutzer jederzeit gekündigt werden. Zu diesem Zweck kontaktieren Sie uns bitte per E-Mail oder klicken sie auf den "Email Benachrichtigungen abmelden" button in der Anmeldungs Email. Hierdurch wird ebenfalls ein Widerruf der Einwilligung zur Speicherung der während des Anmeldevorgangs erhobenen personenbezogenen Daten ermöglicht. Wenn Sie auf die Blacklist gesetzt werden möchten, um zukünftige Anmeldungen dauerhaft zu verhindern, kontaktieren Sie uns bitte per E-Mail.'}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Andere Daten werden automatisch oder nach Ihrer Einwilligung beim Besuch der Website durch unsere IT-Systeme erfasst. Das sind vor allem technische Daten (z. B. Internetbrowser, Betriebssystem oder Uhrzeit des Seitenaufrufs). Die Erfassung dieser Daten erfolgt automatisch, sobald Sie diese Website betreten."})," ",z.jsx("h4",{className:"mb-2 mt-3 text-lg font-semibold",children:"Wofür nutzen wir Ihre Daten?"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Ein Teil der Daten wird erhoben, um eine fehlerfreie Bereitstellung der Website zu gewährleisten. Andere Daten können zur Analyse Ihres Nutzerverhaltens verwendet werden."})," ",z.jsx("h4",{className:"mb-2 mt-3 text-lg font-semibold",children:"Analyse-Tools"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Google Analytics Diese Website nutzt Funktionen des Webanalysedienstes Google Analytics. Anbieter ist die Google Ireland Limited („Google“), Gordon House, Barrow Street, Dublin 4, Irland. Google Analytics ermöglicht es dem Websitebetreiber, das Verhalten der Websitebesucher zu analysieren. Hierbei erhält der Websitebetreiber verschiedene Nutzungsdaten, wie z. B. Seitenaufrufe, Verweildauer, verwendete Betriebssysteme und Herkunft des Nutzers. Diese Daten werden dem jeweiligen Endgerät des Users zugeordnet. Eine Zuordnung zu einer User-ID erfolgt nicht. Des Weiteren können wir mit Google Analytics u. a. Ihre Maus- und Scrollbewegungen und Klicks aufzeichnen. Ferner verwendet Google Analytics verschiedene Modellierungsansätze, um die erfassten Datensätze zu ergänzen und setzt Machine-Learning-Technologien bei der Datenanalyse ein. Google Analytics verwendet Technologien, die die Wiedererkennung des Nutzers zum Zwecke der Analyse des Nutzerverhaltens ermöglichen (z. B. Cookies oder Device-Fingerprinting). Die von Google erfassten Informationen über die Benutzung dieser Website werden in der Regel an einen Server von Google in den USA übertragen und dort gespeichert. Die Nutzung dieses Dienstes erfolgt auf Grundlage Ihrer Einwilligung nach Art. 6 Abs. 1 lit. a DSGVO und § 25 Abs. 1 TTDSG. Die Einwilligung ist jederzeit widerrufbar. Die Datenübertragung in die USA wird auf die Standardvertragsklauseln der EU-Kommission gestützt. Details finden Sie hier: https://privacy.google.com/businesses/controllerterms/mccs/."})," ",z.jsx("h4",{className:"mb-2 mt-3 text-lg font-semibold",children:"Welche Rechte haben Sie bezüglich Ihrer Daten?"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Sie haben jederzeit das Recht, unentgeltlich Auskunft über Herkunft, Empfänger und Zweck Ihrer gespeicherten personenbezogenen Daten zu erhalten. Sie haben außerdem ein Recht, die Berichtigung oder Löschung dieser Daten zu verlangen. Wenn Sie eine Einwilligung zur Datenverarbeitung erteilt haben, können Sie diese Einwilligung jederzeit für die Zukunft widerrufen. Außerdem haben Sie das Recht, unter bestimmten Umständen die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen. Des Weiteren steht Ihnen ein Beschwerderecht bei der zuständigen Aufsichtsbehörde zu."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Hierzu sowie zu weiteren Fragen zum Thema Datenschutz können Sie sich jederzeit an uns wenden."})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"2. Hosting"}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wir hosten die Inhalte unserer Website bei folgendem Anbieter:"}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Amazon Web Services (AWS)"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Anbieter ist die Amazon Web Services EMEA SARL, 38 Avenue John F. Kennedy, 1855 Luxemburg (nachfolgend AWS)."})," ",z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Wenn Sie unsere Website besuchen, werden Ihre personenbezogenen Daten auf den Servern von AWS verarbeitet. Hierbei können auch personenbezogene Daten an das Mutterunternehmen von AWS in die USA übermittelt werden. Die Datenübertragung in die USA wird auf die EU-Standardvertragsklauseln gestützt. Details finden Sie hier:"," ",z.jsx("a",{className:"text-happy-blue",href:"https://aws.amazon.com/de/blogs/security/aws-gdpr-data-processing-addendum/",target:"_blank",rel:"noopener noreferrer",children:"https://aws.amazon.com/de/blogs/security/aws-gdpr-data-processing-addendum/"}),"."]})," ",z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Weitere Informationen entnehmen Sie der Datenschutzerklärung von AWS:"," ",z.jsx("a",{className:"text-happy-blue",href:"https://aws.amazon.com/de/privacy/?nc1=f_pr",target:"_blank",rel:"noopener noreferrer",children:"https://aws.amazon.com/de/privacy/?nc1=f_pr"}),"."]})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die Verwendung von AWS erfolgt auf Grundlage von Art. 6 Abs. 1 lit. f DSGVO. Wir haben ein berechtigtes Interesse an einer möglichst zuverlässigen Darstellung unserer Website. Sofern eine entsprechende Einwilligung abgefragt wurde, erfolgt die Verarbeitung ausschließlich auf Grundlage von Art. 6 Abs. 1 lit. a DSGVO und § 25 Abs. 1 TTDSG, soweit die Einwilligung die Speicherung von Cookies oder den Zugriff auf Informationen im Endgerät des Nutzers (z. B. Device-Fingerprinting) im Sinne des TTDSG umfasst. Die Einwilligung ist jederzeit widerrufbar."})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"3. Allgemeine Hinweise und Pflicht­informationen"}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Datenschutz"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die Betreiber dieser Seiten nehmen den Schutz Ihrer persönlichen Daten sehr ernst. Wir behandeln Ihre personenbezogenen Daten vertraulich und entsprechend den gesetzlichen Datenschutzvorschriften sowie dieser Datenschutzerklärung."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wenn Sie diese Website benutzen, werden verschiedene personenbezogene Daten erhoben. Personenbezogene Daten sind Daten, mit denen Sie persönlich identifiziert werden können. Die vorliegende Datenschutzerklärung erläutert, welche Daten wir erheben und wofür wir sie nutzen. Sie erläutert auch, wie und zu welchem Zweck das geschieht."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wir weisen darauf hin, dass die Datenübertragung im Internet (z. B. bei der Kommunikation per E-Mail) Sicherheitslücken aufweisen kann. Ein lückenloser Schutz der Daten vor dem Zugriff durch Dritte ist nicht möglich."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Hinweis zur verantwortlichen Stelle"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die verantwortliche Stelle für die Datenverarbeitung auf dieser Website ist:"})," ",z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Anthony Sherrill",z.jsx("br",{}),"Darjusch Schrand",z.jsx("br",{}),"Hanno Grimm",z.jsx("br",{}),"Irakli Goderdzishvili",z.jsx("br",{}),"Studentenprojekt von Studierenden der CODE University of Applied Sciences Berlin",z.jsx("br",{}),"Lohmühlenstraße 65",z.jsx("br",{}),"12435 Berlin"]}),z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Telefon: +49 171 4965186",z.jsx("br",{}),"E-Mail: hallo@kitaplatz-zentrale.de"]}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Verantwortliche Stelle ist die natürliche oder juristische Person, die allein oder gemeinsam mit anderen über die Zwecke und Mittel der Verarbeitung von personenbezogenen Daten (z. B. Namen, E-Mail-Adressen o. Ä.) entscheidet."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Speicherdauer"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Soweit innerhalb dieser Datenschutzerklärung keine speziellere Speicherdauer genannt wurde, verbleiben Ihre personenbezogenen Daten bei uns, bis der Zweck für die Datenverarbeitung entfällt. Wenn Sie ein berechtigtes Löschersuchen geltend machen oder eine Einwilligung zur Datenverarbeitung widerrufen, werden Ihre Daten gelöscht, sofern wir keine anderen rechtlich zulässigen Gründe für die Speicherung Ihrer personenbezogenen Daten haben (z. B. steuer- oder handelsrechtliche Aufbewahrungsfristen); im letztgenannten Fall erfolgt die Löschung nach Fortfall dieser Gründe."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Allgemeine Hinweise zu den Rechtsgrundlagen der Datenverarbeitung auf dieser Website"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Sofern Sie in die Datenverarbeitung eingewilligt haben, verarbeiten wir Ihre personenbezogenen Daten auf Grundlage von Art. 6 Abs. 1 lit. a DSGVO bzw. Art. 9 Abs. 2 lit. a DSGVO, sofern besondere Datenkategorien nach Art. 9 Abs. 1 DSGVO verarbeitet werden. Im Falle einer ausdrücklichen Einwilligung in die Übertragung personenbezogener Daten in Drittstaaten erfolgt die Datenverarbeitung außerdem auf Grundlage von Art. 49 Abs. 1 lit. a DSGVO. Sofern Sie in die Speicherung von Cookies oder in den Zugriff auf Informationen in Ihr Endgerät (z. B. via Device-Fingerprinting) eingewilligt haben, erfolgt die Datenverarbeitung zusätzlich auf Grundlage von § 25 Abs. 1 TTDSG. Die Einwilligung ist jederzeit widerrufbar. Sind Ihre Daten zur Vertragserfüllung oder zur Durchführung vorvertraglicher Maßnahmen erforderlich, verarbeiten wir Ihre Daten auf Grundlage des Art. 6 Abs. 1 lit. b DSGVO. Des Weiteren verarbeiten wir Ihre Daten, sofern diese zur Erfüllung einer rechtlichen Verpflichtung erforderlich sind auf Grundlage von Art. 6 Abs. 1 lit. c DSGVO. Die Datenverarbeitung kann ferner auf Grundlage unseres berechtigten Interesses nach Art. 6 Abs. 1 lit. f DSGVO erfolgen. Über die jeweils im Einzelfall einschlägigen Rechtsgrundlagen wird in den folgenden Absätzen dieser Datenschutzerklärung informiert."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Hinweis zur Datenweitergabe in die USA und sonstige Drittstaaten"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wir verwenden unter anderem Tools von Unternehmen mit Sitz in den USA oder sonstigen datenschutzrechtlich nicht sicheren Drittstaaten. Wenn diese Tools aktiv sind, können Ihre personenbezogene Daten in diese Drittstaaten übertragen und dort verarbeitet werden. Wir weisen darauf hin, dass in diesen Ländern kein mit der EU vergleichbares Datenschutzniveau garantiert werden kann. Beispielsweise sind US-Unternehmen dazu verpflichtet, personenbezogene Daten an Sicherheitsbehörden herauszugeben, ohne dass Sie als Betroffener hiergegen gerichtlich vorgehen könnten. Es kann daher nicht ausgeschlossen werden, dass US-Behörden (z. B. Geheimdienste) Ihre auf US-Servern befindlichen Daten zu Überwachungszwecken verarbeiten, auswerten und dauerhaft speichern. Wir haben auf diese Verarbeitungstätigkeiten keinen Einfluss."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Widerruf Ihrer Einwilligung zur Datenverarbeitung"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Viele Datenverarbeitungsvorgänge sind nur mit Ihrer ausdrücklichen Einwilligung möglich. Sie können eine bereits erteilte Einwilligung jederzeit widerrufen. Die Rechtmäßigkeit der bis zum Widerruf erfolgten Datenverarbeitung bleibt vom Widerruf unberührt."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Widerspruchsrecht gegen die Datenerhebung in besonderen Fällen sowie gegen Direktwerbung (Art. 21 DSGVO)"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"WENN DIE DATENVERARBEITUNG AUF GRUNDLAGE VON ART. 6 ABS. 1 LIT. E ODER F DSGVO ERFOLGT, HABEN SIE JEDERZEIT DAS RECHT, AUS GRÜNDEN, DIE SICH AUS IHRER BESONDEREN SITUATION ERGEBEN, GEGEN DIE VERARBEITUNG IHRER PERSONENBEZOGENEN DATEN WIDERSPRUCH EINZULEGEN; DIES GILT AUCH FÜR EIN AUF DIESE BESTIMMUNGEN GESTÜTZTES PROFILING. DIE JEWEILIGE RECHTSGRUNDLAGE, AUF DENEN EINE VERARBEITUNG BERUHT, ENTNEHMEN SIE DIESER DATENSCHUTZERKLÄRUNG. WENN SIE WIDERSPRUCH EINLEGEN, WERDEN WIR IHRE BETROFFENEN PERSONENBEZOGENEN DATEN NICHT MEHR VERARBEITEN, ES SEI DENN, WIR KÖNNEN ZWINGENDE SCHUTZWÜRDIGE GRÜNDE FÜR DIE VERARBEITUNG NACHWEISEN, DIE IHRE INTERESSEN, RECHTE UND FREIHEITEN ÜBERWIEGEN ODER DIE VERARBEITUNG DIENT DER GELTENDMACHUNG, AUSÜBUNG ODER VERTEIDIGUNG VON RECHTSANSPRÜCHEN (WIDERSPRUCH NACH ART. 21 ABS. 1 DSGVO)."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"WERDEN IHRE PERSONENBEZOGENEN DATEN VERARBEITET, UM DIREKTWERBUNG ZU BETREIBEN, SO HABEN SIE DAS RECHT, JEDERZEIT WIDERSPRUCH GEGEN DIE VERARBEITUNG SIE BETREFFENDER PERSONENBEZOGENER DATEN ZUM ZWECKE DERARTIGER WERBUNG EINZULEGEN; DIES GILT AUCH FÜR DAS PROFILING, SOWEIT ES MIT SOLCHER DIREKTWERBUNG IN VERBINDUNG STEHT. WENN SIE WIDERSPRECHEN, WERDEN IHRE PERSONENBEZOGENEN DATEN ANSCHLIESSEND NICHT MEHR ZUM ZWECKE DER DIREKTWERBUNG VERWENDET (WIDERSPRUCH NACH ART. 21 ABS. 2 DSGVO)."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Beschwerde­recht bei der zuständigen Aufsichts­behörde"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Im Falle von Verstößen gegen die DSGVO steht den Betroffenen ein Beschwerderecht bei einer Aufsichtsbehörde, insbesondere in dem Mitgliedstaat ihres gewöhnlichen Aufenthalts, ihres Arbeitsplatzes oder des Orts des mutmaßlichen Verstoßes zu. Das Beschwerderecht besteht unbeschadet anderweitiger verwaltungsrechtlicher oder gerichtlicher Rechtsbehelfe."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Recht auf Daten­übertrag­barkeit"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Sie haben das Recht, Daten, die wir auf Grundlage Ihrer Einwilligung oder in Erfüllung eines Vertrags automatisiert verarbeiten, an sich oder an einen Dritten in einem gängigen, maschinenlesbaren Format aushändigen zu lassen. Sofern Sie die direkte Übertragung der Daten an einen anderen Verantwortlichen verlangen, erfolgt dies nur, soweit es technisch machbar ist."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Auskunft, Berichtigung und Löschung"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Sie haben im Rahmen der geltenden gesetzlichen Bestimmungen jederzeit das Recht auf unentgeltliche Auskunft über Ihre gespeicherten personenbezogenen Daten, deren Herkunft und Empfänger und den Zweck der Datenverarbeitung und ggf. ein Recht auf Berichtigung oder Löschung dieser Daten. Hierzu sowie zu weiteren Fragen zum Thema personenbezogene Daten können Sie sich jederzeit an uns wenden."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Recht auf Einschränkung der Verarbeitung"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Sie haben das Recht, die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen. Hierzu können Sie sich jederzeit an uns wenden. Das Recht auf Einschränkung der Verarbeitung besteht in folgenden Fällen:"})," ",z.jsxs("ul",{children:[" ",z.jsx("li",{children:"Wenn Sie die Richtigkeit Ihrer bei uns gespeicherten personenbezogenen Daten bestreiten, benötigen wir in der Regel Zeit, um dies zu überprüfen. Für die Dauer der Prüfung haben Sie das Recht, die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen."})," ",z.jsx("li",{children:"Wenn die Verarbeitung Ihrer personenbezogenen Daten unrechtmäßig geschah/geschieht, können Sie statt der Löschung die Einschränkung der Datenverarbeitung verlangen."})," ",z.jsx("li",{children:"Wenn wir Ihre personenbezogenen Daten nicht mehr benötigen, Sie sie jedoch zur Ausübung, Verteidigung oder Geltendmachung von Rechtsansprüchen benötigen, haben Sie das Recht, statt der Löschung die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen."})," ",z.jsx("li",{children:"Wenn Sie einen Widerspruch nach Art. 21 Abs. 1 DSGVO eingelegt haben, muss eine Abwägung zwischen Ihren und unseren Interessen vorgenommen werden. Solange noch nicht feststeht, wessen Interessen überwiegen, haben Sie das Recht, die Einschränkung der Verarbeitung Ihrer personenbezogenen Daten zu verlangen."})," "]})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wenn Sie die Verarbeitung Ihrer personenbezogenen Daten eingeschränkt haben, dürfen diese Daten – von ihrer Speicherung abgesehen – nur mit Ihrer Einwilligung oder zur Geltendmachung, Ausübung oder Verteidigung von Rechtsansprüchen oder zum Schutz der Rechte einer anderen natürlichen oder juristischen Person oder aus Gründen eines wichtigen öffentlichen Interesses der Europäischen Union oder eines Mitgliedstaats verarbeitet werden."}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"SSL- bzw. TLS-Verschlüsselung"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Diese Seite nutzt aus Sicherheitsgründen und zum Schutz der Übertragung vertraulicher Inhalte, wie zum Beispiel Bestellungen oder Anfragen, die Sie an uns als Seitenbetreiber senden, eine SSL- bzw. TLS-Verschlüsselung. Eine verschlüsselte Verbindung erkennen Sie daran, dass die Adresszeile des Browsers von „http://“ auf „https://“ wechselt und an dem Schloss-Symbol in Ihrer Browserzeile."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wenn die SSL- bzw. TLS-Verschlüsselung aktiviert ist, können die Daten, die Sie an uns übermitteln, nicht von Dritten mitgelesen werden."})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"4. Datenerfassung auf dieser Website"}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Anfrage per E-Mail, Telefon oder Telefax"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wenn Sie uns per E-Mail, Telefon oder Telefax kontaktieren, wird Ihre Anfrage inklusive aller daraus hervorgehenden personenbezogenen Daten (Name, Anfrage) zum Zwecke der Bearbeitung Ihres Anliegens bei uns gespeichert und verarbeitet. Diese Daten geben wir nicht ohne Ihre Einwilligung weiter."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die Verarbeitung dieser Daten erfolgt auf Grundlage von Art. 6 Abs. 1 lit. b DSGVO, sofern Ihre Anfrage mit der Erfüllung eines Vertrags zusammenhängt oder zur Durchführung vorvertraglicher Maßnahmen erforderlich ist. In allen übrigen Fällen beruht die Verarbeitung auf unserem berechtigten Interesse an der effektiven Bearbeitung der an uns gerichteten Anfragen (Art. 6 Abs. 1 lit. f DSGVO) oder auf Ihrer Einwilligung (Art. 6 Abs. 1 lit. a DSGVO) sofern diese abgefragt wurde; die Einwilligung ist jederzeit widerrufbar."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die von Ihnen an uns per Kontaktanfragen übersandten Daten verbleiben bei uns, bis Sie uns zur Löschung auffordern, Ihre Einwilligung zur Speicherung widerrufen oder der Zweck für die Datenspeicherung entfällt (z. B. nach abgeschlossener Bearbeitung Ihres Anliegens). Zwingende gesetzliche Bestimmungen – insbesondere gesetzliche Aufbewahrungsfristen – bleiben unberührt."})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"5. Newsletter"}),z.jsx("h3",{className:"mb-3 mt-4 text-xl font-bold",children:"Newsletter­daten"})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wenn Sie den auf der Website angebotenen Newsletter beziehen möchten, benötigen wir von Ihnen eine E-Mail-Adresse sowie Informationen, welche uns die Überprüfung gestatten, dass Sie der Inhaber der angegebenen E-Mail-Adresse sind und mit dem Empfang des Newsletters einverstanden sind. Weitere Daten werden nicht bzw. nur auf freiwilliger Basis erhoben. Diese Daten verwenden wir ausschließlich für den Versand der angeforderten Informationen und geben diese nicht an Dritte weiter."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die Verarbeitung der in das Newsletteranmeldeformular eingegebenen Daten erfolgt ausschließlich auf Grundlage Ihrer Einwilligung (Art. 6 Abs. 1 lit. a DSGVO). Die erteilte Einwilligung zur Speicherung der Daten, der E-Mail-Adresse sowie deren Nutzung zum Versand des Newsletters können Sie jederzeit widerrufen, etwa über den „Austragen“-Link im Newsletter. Die Rechtmäßigkeit der bereits erfolgten Datenverarbeitungsvorgänge bleibt vom Widerruf unberührt."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die von Ihnen zum Zwecke des Newsletter-Bezugs bei uns hinterlegten Daten werden von uns bis zu Ihrer Austragung aus dem Newsletter bei uns bzw. dem Newsletterdiensteanbieter gespeichert und nach der Abbestellung des Newsletters oder nach Zweckfortfall aus der Newsletterverteilerliste gelöscht. Wir behalten uns vor, E-Mail-Adressen aus unserem Newsletterverteiler nach eigenem Ermessen im Rahmen unseres berechtigten Interesses nach Art. 6 Abs. 1 lit. f DSGVO zu löschen oder zu sperren."})," ",z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Daten, die zu anderen Zwecken bei uns gespeichert wurden, bleiben hiervon unberührt."})," ",z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Nach Ihrer Austragung aus der Newsletterverteilerliste wird Ihre E-Mail-Adresse bei uns bzw. dem Newsletterdiensteanbieter ggf. in einer Blacklist gespeichert, sofern dies zur Verhinderung künftiger Mailings erforderlich ist. Die Daten aus der Blacklist werden nur für diesen Zweck verwendet und nicht mit anderen Daten zusammengeführt. Dies dient sowohl Ihrem Interesse als auch unserem Interesse an der Einhaltung der gesetzlichen Vorgaben beim Versand von Newslettern (berechtigtes Interesse im Sinne des Art. 6 Abs. 1 lit. f DSGVO). Die Speicherung in der Blacklist ist zeitlich nicht befristet."," ",z.jsx("strong",{children:"Sie können der Speicherung widersprechen, sofern Ihre Interessen unser berechtigtes Interesse überwiegen."})]})]}),z.jsx("section",{children:z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Quelle der überliegenden Abschnitte:"," ",z.jsx("a",{className:"text-happy-blue",href:"https://www.e-recht24.de",children:"https://www.e-recht24.de"})]})})]})]})}),Yoe=({})=>z.jsx(cy,{children:z.jsxs("div",{className:"page-padding pb-40 pt-24",children:[z.jsx("h1",{className:"mb-14 text-4xl font-extrabold",children:"Impressum"}),z.jsxs("div",{className:"flex w-full flex-col gap-12",children:[z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"Angaben gemäß §5 TMG"}),z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Anthony Sherrill",z.jsx("br",{}),"Darjusch Schrand",z.jsx("br",{}),"Hanno Grimm",z.jsx("br",{}),"Irakli Goderdzishvili",z.jsx("br",{}),"Studentenprojekt von Studierenden der CODE University of Applied Sciences Berlin",z.jsx("br",{}),"Lohmühlenstraße 65",z.jsx("br",{}),"12435 Berlin"]})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"Kontakt"}),z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Telefon: +49 171 4965186",z.jsx("br",{}),"E-Mail: hallo@kitaplatz-zentrale.de"]})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"Redaktionell verantwortlich"}),z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Anthony Sherrill",z.jsx("br",{}),"Darjusch Schrand",z.jsx("br",{}),"Hanno Grimm",z.jsx("br",{}),"Irakli Goderdzishvili"]})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"EU-Streitschlichtung"}),z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Die Europäische Kommission stellt eine Plattform zur Online-Streitbeilegung (OS) bereit:"," ",z.jsx("a",{className:"text-happy-blue",href:"https://ec.europa.eu/consumers/odr",target:"_blank",children:"https://ec.europa.eu/consumers/odr"}),".",z.jsx("br",{})," Unsere E-Mail-Adresse finden Sie oben im Impressum."]})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"Verbraucherstreitbeilegung/Universalschlichtungsstelle"}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Wir sind nicht bereit oder verpflichtet, an Streitbeilegungsverfahren vor einer Verbraucherschlichtungsstelle teilzunehmen."})]}),z.jsx("section",{children:z.jsxs("p",{className:"text-base font-normal leading-normal text-gray-700",children:["Quelle der überliegenden Punkten:"," ",z.jsx("a",{className:"text-happy-blue",href:"https://www.e-recht24.de/impressum-generator.html",target:"_blank",children:"https://www.e-recht24.de/impressum-generator.html"})]})}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"Haftung für Inhalte"}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Als Diensteanbieter sind wir gemäß § 7 Abs.1 TMG für eigene Inhalte auf diesen Seiten nach den allgemeinen Gesetzen verantwortlich. Nach §§ 8 bis 10 TMG sind wir als Diensteanbieter jedoch nicht verpflichtet, übermittelte oder gespeicherte fremde Informationen zu überwachen oder nach Umständen zu forschen, die auf eine rechtswidrige Tätigkeit hinweisen."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Verpflichtungen zur Entfernung oder Sperrung der Nutzung von Informationen nach den allgemeinen Gesetzen bleiben hiervon unberührt. Eine diesbezügliche Haftung ist jedoch erst ab dem Zeitpunkt der Kenntnis einer konkreten Rechtsverletzung möglich. Bei Bekanntwerden von entsprechenden Rechtsverletzungen werden wir diese Inhalte umgehend entfernen."})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"Haftung für Links"}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Unser Angebot enthält Links zu externen Websites Dritter, auf deren Inhalte wir keinen Einfluss haben. Deshalb können wir für diese fremden Inhalte auch keine Gewähr übernehmen. Für die Inhalte der verlinkten Seiten ist stets der jeweilige Anbieter oder Betreiber der Seiten verantwortlich. Die verlinkten Seiten wurden zum Zeitpunkt der Verlinkung auf mögliche Rechtsverstöße überprüft. Rechtswidrige Inhalte waren zum Zeitpunkt der Verlinkung nicht erkennbar."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Eine permanente inhaltliche Kontrolle der verlinkten Seiten ist jedoch ohne konkrete Anhaltspunkte einer Rechtsverletzung nicht zumutbar. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Links umgehend entfernen."})]}),z.jsxs("section",{children:[z.jsx("h2",{className:"mb-5 text-2xl font-bold",children:"Urheberrecht"}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Die durch die Seitenbetreiber erstellten Inhalte und Werke auf diesen Seiten unterliegen dem deutschen Urheberrecht. Die Vervielfältigung, Bearbeitung, Verbreitung und jede Art der Verwertung außerhalb der Grenzen des Urheberrechtes bedürfen der schriftlichen Zustimmung des jeweiligen Autors bzw. Erstellers. Downloads und Kopien dieser Seite sind nur für den privaten, nicht kommerziellen Gebrauch gestattet."}),z.jsx("p",{className:"text-base font-normal leading-normal text-gray-700",children:"Soweit die Inhalte auf dieser Seite nicht vom Betreiber erstellt wurden, werden die Urheberrechte Dritter beachtet. Insbesondere werden Inhalte Dritter als solche gekennzeichnet. Sollten Sie trotzdem auf eine Urheberrechtsverletzung aufmerksam werden, bitten wir um einen entsprechenden Hinweis. Bei Bekanntwerden von Rechtsverletzungen werden wir derartige Inhalte umgehend entfernen."})]})]})]})}),Qoe=({})=>{const[e,t]=At.useState(window.innerWidth<1280);return At.useEffect(()=>(window.addEventListener("resize",()=>{t(window.innerWidth<1280)}),()=>window.removeEventListener("resize",()=>{t(window.innerWidth<1280)})),[]),z.jsxs(cy,{children:[z.jsxs("div",{className:"xl:page-padding relative w-full bg-white xl:h-[800px] xl:py-64",children:[z.jsx("div",{className:"relative right-0 top-0 h-[260px] w-full md:h-[400px] xl:absolute xl:h-full",children:z.jsxs(ni.svg,{initial:{scale:1.02},animate:{scale:1},transition:{duration:1.7,delay:.1,ease:"easeInOut",type:"spring",bounce:0},height:"100%",width:"100%",children:[z.jsx("mask",{id:"mask",x:"0",y:"0",width:"100%",height:"100%",children:z.jsx("ellipse",{cx:"50%",cy:"0%",rx:e?"90%":"75%",ry:"100%",fill:"white"})}),z.jsx("image",{xlinkHref:"hero.png",mask:"url(#mask)",width:e?"100%":"80%",x:e?"0%":"20%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),z.jsxs("defs",{children:[z.jsxs("linearGradient",{id:"grad1",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[z.jsx("stop",{offset:"35%","stop-color":"#fff"}),z.jsx("stop",{offset:"60%","stop-color":"rgba(255,255,255,0)"})]}),z.jsxs("linearGradient",{id:"grad2",x1:"90%",y1:"0%",x2:"100%",y2:"0%",children:[z.jsx("stop",{offset:"0%","stop-color":"rgba(255,255,255,0)"}),z.jsx("stop",{offset:"100%","stop-color":"rgba(255,255,255,0.75)"})]}),z.jsxs("linearGradient",{id:"gradVertical",x1:"0%",y1:"60%",x2:"0%",y2:"100%",children:[z.jsx("stop",{offset:"0%","stop-color":"rgba(255,255,255,0)"}),z.jsx("stop",{offset:"100%","stop-color":"rgba(255,255,255,0.75)"})]})]}),e?z.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#gradVertical)",preserveAspectRatio:"xMidYMid slice"}):z.jsxs(z.Fragment,{children:[z.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#grad1)",preserveAspectRatio:"xMidYMid slice"}),z.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#grad2)",preserveAspectRatio:"xMidYMid slice"})]})]})}),z.jsxs(ni.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:1.2,delay:.2,type:"spring",bounce:0},className:"page-padding mt-12 flex max-w-xl flex-col xl:mt-0 xl:max-w-md xl:px-0",children:[z.jsxs("div",{className:"z-10 mb-8 flex flex-col gap-2",children:[z.jsxs("h1",{className:"text-5xl font-black leading-none lg:text-7xl",children:["Kitaplatz,",z.jsx("br",{}),"Kinderleicht."]}),z.jsxs("p",{className:"text-xl font-medium",children:["Schnell durch mehr als"," ",z.jsx("strong",{className:"font-bold",children:"2000 Tageseinrichtungen"})," ","stöbern und die perfekte Kita finden."]})]}),z.jsx(od,{className:"w-full",to:"/finder",children:z.jsx(ro,{variant:"solid",size:"lg",color:"primary",href:"/finder",fullWidth:!0,endDecorator:z.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"ml-2 h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"#fff",children:z.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8l4 4m0 0l-4 4m4-4H3"})}),children:"Kitas finden"})})]})]}),z.jsxs("div",{className:"page-padding flex w-full flex-col justify-between gap-40 bg-white py-40 2xl:flex-row",children:[z.jsxs("div",{className:"flex max-w-lg flex-col gap-6",children:[z.jsx("h3",{className:"text-3xl font-black",children:"Was ist Kitaplatz Zentrale?"}),z.jsxs("p",{className:"text-xl font-medium",children:["Kitaplatz Zentrale ist eine Plattform, die Eltern ermöglichen soll, schnell und einfach einen Kitaplatz für ihr Kind zu finden."," ",z.jsx(od,{className:"font-bold text-deep-blue underline",to:"/finder",children:"Ganz simpel und einfach."}),z.jsx("br",{}),z.jsx("br",{}),"Unsere Mission ist es, Eltern bei der Suche nach einem Kitaplatz zu unterstützen und den Prozess so einfach wie möglich zu gestalten."]})]}),z.jsxs("div",{className:"max-w-md flex-col 2xl:bg-happy-blue 2xl:bg-opacity-10 2xl:p-12",children:[z.jsx("h4",{className:"mb-6 text-3xl font-black 2xl:mb-2 2xl:text-xl",children:"Kontakt"}),z.jsxs("p",{className:"mb-4 text-xl font-medium 2xl:text-base 2xl:font-normal",children:["Haben Sie Fragen oder Anregungen? Schreiben Sie uns gerne einfach eine Mail an"," "]}),z.jsx(ro,{variant:"plain",color:"info",size:"lg",href:"mailto:hallo@kitaplatz-zentrale.de",startDecorator:z.jsxs("svg",{width:"27",height:"20",viewBox:"0 0 27 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[z.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M23.2918 2.52523L3.48992 3.55795L12.6525 11.0812C13.1614 11.4991 13.902 11.4718 14.3788 11.0175L23.2918 2.52523ZM2.57806 4.69921L3.17342 16.115L7.43748 8.68924L2.57806 4.69921ZM4.0759 17.4767L24.5713 16.4078L18.9259 8.70259L15.3864 12.075C14.3754 13.0383 12.8048 13.0963 11.7255 12.2101L8.58215 9.62912L4.0759 17.4767ZM26.548 16.6343C26.6685 16.3558 26.7282 16.0459 26.7113 15.7223L26.0455 2.95555C25.987 1.83382 25.0302 0.971899 23.9085 1.0304L3.01747 2.11992C1.89574 2.17842 1.03382 3.13519 1.09232 4.25692L1.75814 17.0237C1.81664 18.1454 2.7734 19.0073 3.89514 18.9488L24.7862 17.8593C25.456 17.8244 26.0332 17.4691 26.3771 16.9497L26.6387 16.7581L26.548 16.6343ZM25.2003 14.7949L19.9923 7.68656L24.6006 3.29576L25.2003 14.7949Z",fill:"#318DB5"}),z.jsx("path",{d:"M23.2918 2.52523L23.4642 2.70623L23.9531 2.2404L23.2788 2.27557L23.2918 2.52523ZM3.48992 3.55795L3.4769 3.30829L2.83282 3.34188L3.33128 3.75116L3.48992 3.55795ZM12.6525 11.0812L12.4938 11.2744L12.6525 11.0812ZM14.3788 11.0175L14.2063 10.8365L14.3788 11.0175ZM2.57806 4.69921L2.73671 4.506L2.2989 4.14652L2.3284 4.71223L2.57806 4.69921ZM3.17342 16.115L2.92376 16.1281L2.96793 16.975L3.39022 16.2395L3.17342 16.115ZM7.43748 8.68924L7.65428 8.81373L7.75962 8.63027L7.59612 8.49602L7.43748 8.68924ZM4.0759 17.4767L3.8591 17.3522L3.63053 17.7503L4.08892 17.7264L4.0759 17.4767ZM24.5713 16.4078L24.5843 16.6575L25.0465 16.6334L24.7729 16.2601L24.5713 16.4078ZM18.9259 8.70259L19.1276 8.55484L18.9594 8.32534L18.7535 8.5216L18.9259 8.70259ZM15.3864 12.075L15.2139 11.894L15.3864 12.075ZM11.7255 12.2101L11.5669 12.4033L11.7255 12.2101ZM8.58215 9.62912L8.7408 9.4359L8.51247 9.24843L8.36535 9.50463L8.58215 9.62912ZM26.548 16.6343L26.3185 16.5351L26.2617 16.6665L26.3463 16.7821L26.548 16.6343ZM26.7113 15.7223L26.4617 15.7353L26.4617 15.7353L26.7113 15.7223ZM26.0455 2.95555L26.2952 2.94253L26.2952 2.94253L26.0455 2.95555ZM23.9085 1.0304L23.8955 0.780739L23.9085 1.0304ZM3.01747 2.11992L3.00445 1.87026L3.01747 2.11992ZM1.09232 4.25692L0.842664 4.26994L1.09232 4.25692ZM1.75814 17.0237L2.0078 17.0106L1.75814 17.0237ZM3.89514 18.9488L3.88211 18.6991L3.88211 18.6991L3.89514 18.9488ZM24.7862 17.8593L24.7992 18.109L24.7992 18.109L24.7862 17.8593ZM26.3771 16.9497L26.2293 16.7481L26.1933 16.7745L26.1686 16.8117L26.3771 16.9497ZM26.6387 16.7581L26.7864 16.9597L26.9881 16.812L26.8403 16.6103L26.6387 16.7581ZM25.2003 14.7949L24.9986 14.9426L25.4936 15.6182L25.4499 14.7818L25.2003 14.7949ZM19.9923 7.68656L19.8198 7.50557L19.6608 7.65711L19.7906 7.83432L19.9923 7.68656ZM24.6006 3.29576L24.8502 3.28274L24.8219 2.73957L24.4281 3.11477L24.6006 3.29576ZM23.2788 2.27557L3.4769 3.30829L3.50295 3.80761L23.3048 2.77489L23.2788 2.27557ZM12.8111 10.888L3.64857 3.36473L3.33128 3.75116L12.4938 11.2744L12.8111 10.888ZM14.2063 10.8365C13.821 11.2037 13.2224 11.2257 12.8111 10.888L12.4938 11.2744C13.1003 11.7725 13.9831 11.7399 14.5513 11.1985L14.2063 10.8365ZM23.1193 2.34424L14.2063 10.8365L14.5513 11.1985L23.4642 2.70623L23.1193 2.34424ZM2.3284 4.71223L2.92376 16.1281L3.42308 16.102L2.82772 4.68619L2.3284 4.71223ZM7.22068 8.56474L2.95662 15.9906L3.39022 16.2395L7.65428 8.81373L7.22068 8.56474ZM2.41942 4.89243L7.27883 8.88245L7.59612 8.49602L2.73671 4.506L2.41942 4.89243ZM4.08892 17.7264L24.5843 16.6575L24.5583 16.1582L4.06288 17.227L4.08892 17.7264ZM18.7242 8.85035L24.3696 16.5556L24.7729 16.2601L19.1276 8.55484L18.7242 8.85035ZM15.5589 12.256L19.0984 8.88359L18.7535 8.5216L15.2139 11.894L15.5589 12.256ZM11.5669 12.4033C12.7437 13.3696 14.4564 13.3064 15.5589 12.256L15.2139 11.894C14.2944 12.7702 12.8658 12.8229 11.8842 12.0169L11.5669 12.4033ZM8.4235 9.82233L11.5669 12.4033L11.8842 12.0169L8.7408 9.4359L8.4235 9.82233ZM4.2927 17.6012L8.79895 9.75361L8.36535 9.50463L3.8591 17.3522L4.2927 17.6012ZM26.7775 16.7336C26.9129 16.4205 26.9799 16.0722 26.961 15.7093L26.4617 15.7353C26.4765 16.0196 26.4241 16.2911 26.3185 16.5351L26.7775 16.7336ZM26.961 15.7093L26.2952 2.94253L25.7958 2.96857L26.4617 15.7353L26.961 15.7093ZM26.2952 2.94253C26.2295 1.68291 25.1551 0.715047 23.8955 0.780739L23.9215 1.28006C24.9054 1.22875 25.7445 1.98472 25.7958 2.96857L26.2952 2.94253ZM23.8955 0.780739L3.00445 1.87026L3.03049 2.36958L23.9215 1.28006L23.8955 0.780739ZM3.00445 1.87026C1.74484 1.93595 0.776972 3.01032 0.842664 4.26994L1.34199 4.2439C1.29068 3.26005 2.04665 2.42089 3.03049 2.36958L3.00445 1.87026ZM0.842664 4.26994L1.50848 17.0367L2.0078 17.0106L1.34199 4.2439L0.842664 4.26994ZM1.50848 17.0367C1.57417 18.2963 2.64854 19.2642 3.90816 19.1985L3.88211 18.6991C2.89827 18.7505 2.05911 17.9945 2.0078 17.0106L1.50848 17.0367ZM3.90816 19.1985L24.7992 18.109L24.7732 17.6096L3.88211 18.6991L3.90816 19.1985ZM24.7992 18.109C25.5515 18.0697 26.1998 17.6704 26.5855 17.0877L26.1686 16.8117C25.8666 17.2679 25.3605 17.579 24.7732 17.6096L24.7992 18.109ZM26.5248 17.1514L26.7864 16.9597L26.4909 16.5564L26.2293 16.7481L26.5248 17.1514ZM26.8403 16.6103L26.7497 16.4866L26.3463 16.7821L26.437 16.9058L26.8403 16.6103ZM25.402 14.6471L20.1939 7.53881L19.7906 7.83432L24.9986 14.9426L25.402 14.6471ZM20.1647 7.86756L24.773 3.47676L24.4281 3.11477L19.8198 7.50557L20.1647 7.86756ZM25.4499 14.7818L24.8502 3.28274L24.3509 3.30878L24.9506 14.8079L25.4499 14.7818Z",fill:"#318DB5"})]}),children:z.jsx(od,{to:"mailto:hallo@kitaplatz-zentrale.de",className:"text-lg font-bold",children:"hallo@kitaplatz-zentrale.de"})})]})]})]})},ese=jq([{path:"/",element:z.jsx(Qoe,{}),errorElement:z.jsx(Nie,{})},{path:"/finder/",element:z.jsx(t3,{})},{path:"/kitas",element:z.jsx(t3,{})},{path:"/datenschutzerklaerung",element:z.jsx(Joe,{})},{path:"/impressum",element:z.jsx(Yoe,{})}]);var RB={},OB={},BB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=function(){for(var c=arguments.length,d=new Array(c),p=0;p<c;p++)d[p]=arguments[p];if(typeof window<"u"){var s;typeof window.gtag>"u"&&(window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)}),(s=window).gtag.apply(s,d)}},n=t;e.default=n})(BB);var FB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=p;var t=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function n(s){return s.toString().trim().replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(_,S,E){return S>0&&S+_.length!==E.length&&_.search(t)>-1&&E.charAt(S-2)!==":"&&(E.charAt(S+_.length)!=="-"||E.charAt(S-1)==="-")&&E.charAt(S-1).search(/[^\s-]/)<0?_.toLowerCase():_.substr(1).search(/[A-Z]|\../)>-1?_:_.charAt(0).toUpperCase()+_.substr(1)})}function i(s){return typeof s=="string"&&s.indexOf("@")!==-1}var c="REDACTED (Potential Email Address)";function d(s){return i(s)?(console.warn("This arg looks like an email address, redacting."),c):s}function p(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",_=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,E=s||"";return _&&(E=n(s)),S&&(E=d(E)),E}})(FB);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.GA4=void 0;var t=p(BB),n=p(FB),i=["eventCategory","eventAction","eventLabel","eventValue","hitType"],c=["title","location"],d=["page","hitType"];function p(Se){return Se&&Se.__esModule?Se:{default:Se}}function s(Se,oe){if(Se==null)return{};var te=_(Se,oe),Ce,ve;if(Object.getOwnPropertySymbols){var Fe=Object.getOwnPropertySymbols(Se);for(ve=0;ve<Fe.length;ve++)Ce=Fe[ve],!(oe.indexOf(Ce)>=0)&&Object.prototype.propertyIsEnumerable.call(Se,Ce)&&(te[Ce]=Se[Ce])}return te}function _(Se,oe){if(Se==null)return{};var te={},Ce=Object.keys(Se),ve,Fe;for(Fe=0;Fe<Ce.length;Fe++)ve=Ce[Fe],!(oe.indexOf(ve)>=0)&&(te[ve]=Se[ve]);return te}function S(Se){"@babel/helpers - typeof";return S=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(oe){return typeof oe}:function(oe){return oe&&typeof Symbol=="function"&&oe.constructor===Symbol&&oe!==Symbol.prototype?"symbol":typeof oe},S(Se)}function E(Se){return O(Se)||I(Se)||B(Se)||A()}function A(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(Se){if(typeof Symbol<"u"&&Se[Symbol.iterator]!=null||Se["@@iterator"]!=null)return Array.from(Se)}function O(Se){if(Array.isArray(Se))return U(Se)}function N(Se,oe){var te=Object.keys(Se);if(Object.getOwnPropertySymbols){var Ce=Object.getOwnPropertySymbols(Se);oe&&(Ce=Ce.filter(function(ve){return Object.getOwnPropertyDescriptor(Se,ve).enumerable})),te.push.apply(te,Ce)}return te}function $(Se){for(var oe=1;oe<arguments.length;oe++){var te=arguments[oe]!=null?arguments[oe]:{};oe%2?N(Object(te),!0).forEach(function(Ce){re(Se,Ce,te[Ce])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(te)):N(Object(te)).forEach(function(Ce){Object.defineProperty(Se,Ce,Object.getOwnPropertyDescriptor(te,Ce))})}return Se}function K(Se,oe){return ee(Se)||J(Se,oe)||B(Se,oe)||W()}function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B(Se,oe){if(Se){if(typeof Se=="string")return U(Se,oe);var te=Object.prototype.toString.call(Se).slice(8,-1);if(te==="Object"&&Se.constructor&&(te=Se.constructor.name),te==="Map"||te==="Set")return Array.from(Se);if(te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te))return U(Se,oe)}}function U(Se,oe){(oe==null||oe>Se.length)&&(oe=Se.length);for(var te=0,Ce=new Array(oe);te<oe;te++)Ce[te]=Se[te];return Ce}function J(Se,oe){var te=Se==null?null:typeof Symbol<"u"&&Se[Symbol.iterator]||Se["@@iterator"];if(te!=null){var Ce,ve,Fe,Ge,rt=[],Ct=!0,It=!1;try{if(Fe=(te=te.call(Se)).next,oe===0){if(Object(te)!==te)return;Ct=!1}else for(;!(Ct=(Ce=Fe.call(te)).done)&&(rt.push(Ce.value),rt.length!==oe);Ct=!0);}catch(Pt){It=!0,ve=Pt}finally{try{if(!Ct&&te.return!=null&&(Ge=te.return(),Object(Ge)!==Ge))return}finally{if(It)throw ve}}return rt}}function ee(Se){if(Array.isArray(Se))return Se}function ye(Se,oe){if(!(Se instanceof oe))throw new TypeError("Cannot call a class as a function")}function Q(Se,oe){for(var te=0;te<oe.length;te++){var Ce=oe[te];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(Se,Ie(Ce.key),Ce)}}function be(Se,oe,te){return oe&&Q(Se.prototype,oe),te&&Q(Se,te),Object.defineProperty(Se,"prototype",{writable:!1}),Se}function re(Se,oe,te){return oe=Ie(oe),oe in Se?Object.defineProperty(Se,oe,{value:te,enumerable:!0,configurable:!0,writable:!0}):Se[oe]=te,Se}function Ie(Se){var oe=Be(Se,"string");return S(oe)==="symbol"?oe:String(oe)}function Be(Se,oe){if(S(Se)!=="object"||Se===null)return Se;var te=Se[Symbol.toPrimitive];if(te!==void 0){var Ce=te.call(Se,oe||"default");if(S(Ce)!=="object")return Ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return(oe==="string"?String:Number)(Se)}var le=function(){function Se(){var oe=this;ye(this,Se),re(this,"reset",function(){oe.isInitialized=!1,oe._testMode=!1,oe._currentMeasurementId,oe._hasLoadedGA=!1,oe._isQueuing=!1,oe._queueGtag=[]}),re(this,"_gtag",function(){for(var te=arguments.length,Ce=new Array(te),ve=0;ve<te;ve++)Ce[ve]=arguments[ve];oe._testMode||oe._isQueuing?oe._queueGtag.push(Ce):t.default.apply(void 0,Ce)}),re(this,"_loadGA",function(te,Ce){var ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"https://www.googletagmanager.com/gtag/js";if(!(typeof window>"u"||typeof document>"u")&&!oe._hasLoadedGA){var Fe=document.createElement("script");Fe.async=!0,Fe.src="".concat(ve,"?id=").concat(te),Ce&&Fe.setAttribute("nonce",Ce),document.body.appendChild(Fe),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},oe._hasLoadedGA=!0}}),re(this,"_toGtagOptions",function(te){if(te){var Ce={cookieUpdate:"cookie_update",cookieExpires:"cookie_expires",cookieDomain:"cookie_domain",cookieFlags:"cookie_flags",userId:"user_id",clientId:"client_id",anonymizeIp:"anonymize_ip",contentGroup1:"content_group1",contentGroup2:"content_group2",contentGroup3:"content_group3",contentGroup4:"content_group4",contentGroup5:"content_group5",allowAdFeatures:"allow_google_signals",allowAdPersonalizationSignals:"allow_ad_personalization_signals",nonInteraction:"non_interaction",page:"page_path",hitCallback:"event_callback"},ve=Object.entries(te).reduce(function(Fe,Ge){var rt=K(Ge,2),Ct=rt[0],It=rt[1];return Ce[Ct]?Fe[Ce[Ct]]=It:Fe[Ct]=It,Fe},{});return ve}}),re(this,"initialize",function(te){var Ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!te)throw new Error("Require GA_MEASUREMENT_ID");var ve=typeof te=="string"?[{trackingId:te}]:te;oe._currentMeasurementId=ve[0].trackingId;var Fe=Ce.gaOptions,Ge=Ce.gtagOptions,rt=Ce.nonce,Ct=Ce.testMode,It=Ct===void 0?!1:Ct,Pt=Ce.gtagUrl;if(oe._testMode=It,It||oe._loadGA(oe._currentMeasurementId,rt,Pt),oe.isInitialized||(oe._gtag("js",new Date),ve.forEach(function(an){var ct=$($($({},oe._toGtagOptions($($({},Fe),an.gaOptions))),Ge),an.gtagOptions);Object.keys(ct).length?oe._gtag("config",an.trackingId,ct):oe._gtag("config",an.trackingId)})),oe.isInitialized=!0,!It){var Kt=E(oe._queueGtag);for(oe._queueGtag=[],oe._isQueuing=!1;Kt.length;){var nn=Kt.shift();oe._gtag.apply(oe,E(nn)),nn[0]==="get"&&(oe._isQueuing=!0)}}}),re(this,"set",function(te){if(!te){console.warn("`fieldsObject` is required in .set()");return}if(S(te)!=="object"){console.warn("Expected `fieldsObject` arg to be an Object");return}Object.keys(te).length===0&&console.warn("empty `fieldsObject` given to .set()"),oe._gaCommand("set",te)}),re(this,"_gaCommandSendEvent",function(te,Ce,ve,Fe,Ge){oe._gtag("event",Ce,$($({event_category:te,event_label:ve,value:Fe},Ge&&{non_interaction:Ge.nonInteraction}),oe._toGtagOptions(Ge)))}),re(this,"_gaCommandSendEventParameters",function(){for(var te=arguments.length,Ce=new Array(te),ve=0;ve<te;ve++)Ce[ve]=arguments[ve];if(typeof Ce[0]=="string")oe._gaCommandSendEvent.apply(oe,E(Ce.slice(1)));else{var Fe=Ce[0],Ge=Fe.eventCategory,rt=Fe.eventAction,Ct=Fe.eventLabel,It=Fe.eventValue;Fe.hitType;var Pt=s(Fe,i);oe._gaCommandSendEvent(Ge,rt,Ct,It,Pt)}}),re(this,"_gaCommandSendTiming",function(te,Ce,ve,Fe){oe._gtag("event","timing_complete",{name:Ce,value:ve,event_category:te,event_label:Fe})}),re(this,"_gaCommandSendPageview",function(te,Ce){if(Ce&&Object.keys(Ce).length){var ve=oe._toGtagOptions(Ce),Fe=ve.title,Ge=ve.location,rt=s(ve,c);oe._gtag("event","page_view",$($($($({},te&&{page_path:te}),Fe&&{page_title:Fe}),Ge&&{page_location:Ge}),rt))}else te?oe._gtag("event","page_view",{page_path:te}):oe._gtag("event","page_view")}),re(this,"_gaCommandSendPageviewParameters",function(){for(var te=arguments.length,Ce=new Array(te),ve=0;ve<te;ve++)Ce[ve]=arguments[ve];if(typeof Ce[0]=="string")oe._gaCommandSendPageview.apply(oe,E(Ce.slice(1)));else{var Fe=Ce[0],Ge=Fe.page;Fe.hitType;var rt=s(Fe,d);oe._gaCommandSendPageview(Ge,rt)}}),re(this,"_gaCommandSend",function(){for(var te=arguments.length,Ce=new Array(te),ve=0;ve<te;ve++)Ce[ve]=arguments[ve];var Fe=typeof Ce[0]=="string"?Ce[0]:Ce[0].hitType;switch(Fe){case"event":oe._gaCommandSendEventParameters.apply(oe,Ce);break;case"pageview":oe._gaCommandSendPageviewParameters.apply(oe,Ce);break;case"timing":oe._gaCommandSendTiming.apply(oe,E(Ce.slice(1)));break;case"screenview":case"transaction":case"item":case"social":case"exception":console.warn("Unsupported send command: ".concat(Fe));break;default:console.warn("Send command doesn't exist: ".concat(Fe))}}),re(this,"_gaCommandSet",function(){for(var te=arguments.length,Ce=new Array(te),ve=0;ve<te;ve++)Ce[ve]=arguments[ve];typeof Ce[0]=="string"&&(Ce[0]=re({},Ce[0],Ce[1])),oe._gtag("set",oe._toGtagOptions(Ce[0]))}),re(this,"_gaCommand",function(te){for(var Ce=arguments.length,ve=new Array(Ce>1?Ce-1:0),Fe=1;Fe<Ce;Fe++)ve[Fe-1]=arguments[Fe];switch(te){case"send":oe._gaCommandSend.apply(oe,ve);break;case"set":oe._gaCommandSet.apply(oe,ve);break;default:console.warn("Command doesn't exist: ".concat(te))}}),re(this,"ga",function(){for(var te=arguments.length,Ce=new Array(te),ve=0;ve<te;ve++)Ce[ve]=arguments[ve];if(typeof Ce[0]=="string")oe._gaCommand.apply(oe,Ce);else{var Fe=Ce[0];oe._gtag("get",oe._currentMeasurementId,"client_id",function(Ge){oe._isQueuing=!1;var rt=oe._queueGtag;for(Fe({get:function(Pt){return Pt==="clientId"?Ge:Pt==="trackingId"?oe._currentMeasurementId:Pt==="apiVersion"?"1":void 0}});rt.length;){var Ct=rt.shift();oe._gtag.apply(oe,E(Ct))}}),oe._isQueuing=!0}return oe.ga}),re(this,"event",function(te,Ce){if(typeof te=="string")oe._gtag("event",te,oe._toGtagOptions(Ce));else{var ve=te.action,Fe=te.category,Ge=te.label,rt=te.value,Ct=te.nonInteraction,It=te.transport;if(!Fe||!ve){console.warn("args.category AND args.action are required in event()");return}var Pt={hitType:"event",eventCategory:(0,n.default)(Fe),eventAction:(0,n.default)(ve)};Ge&&(Pt.eventLabel=(0,n.default)(Ge)),typeof rt<"u"&&(typeof rt!="number"?console.warn("Expected `args.value` arg to be a Number."):Pt.eventValue=rt),typeof Ct<"u"&&(typeof Ct!="boolean"?console.warn("`args.nonInteraction` must be a boolean."):Pt.nonInteraction=Ct),typeof It<"u"&&(typeof It!="string"?console.warn("`args.transport` must be a string."):(["beacon","xhr","image"].indexOf(It)===-1&&console.warn("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),Pt.transport=It)),oe._gaCommand("send",Pt)}}),re(this,"send",function(te){oe._gaCommand("send",te)}),this.reset()}return be(Se,[{key:"gtag",value:function(){this._gtag.apply(this,arguments)}}]),Se}();e.GA4=le;var xe=new le;e.default=xe})(OB);(function(e){function t(s){"@babel/helpers - typeof";return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},t(s)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ReactGAImplementation=void 0;var n=c(OB);function i(s){if(typeof WeakMap!="function")return null;var _=new WeakMap,S=new WeakMap;return(i=function(A){return A?S:_})(s)}function c(s,_){if(!_&&s&&s.__esModule)return s;if(s===null||t(s)!=="object"&&typeof s!="function")return{default:s};var S=i(_);if(S&&S.has(s))return S.get(s);var E={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var I in s)if(I!=="default"&&Object.prototype.hasOwnProperty.call(s,I)){var O=A?Object.getOwnPropertyDescriptor(s,I):null;O&&(O.get||O.set)?Object.defineProperty(E,I,O):E[I]=s[I]}return E.default=s,S&&S.set(s,E),E}var d=n.GA4;e.ReactGAImplementation=d;var p=n.default;e.default=p})(RB);const tse=Ya(RB);var eC={};Object.defineProperty(eC,"__esModule",{value:!0});var nse=function(t){console.warn("[react-gtm]",t)};eC.default=nse;var rse=eC,ise=ose(rse);function ose(e){return e&&e.__esModule?e:{default:e}}var sse={tags:function(t){var n=t.id,i=t.events,c=t.dataLayer,d=t.dataLayerName,p=t.preview,s=t.auth,_="&gtm_auth="+s,S="&gtm_preview="+p;n||(0,ise.default)("GTM Id is required");var E=`
      <iframe src="https://www.googletagmanager.com/ns.html?id=`+n+_+S+`&gtm_cookies_win=x"
        height="0" width="0" style="display:none;visibility:hidden" id="tag-manager"></iframe>`,A=`
      (function(w,d,s,l,i){w[l]=w[l]||[];
        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js', `+JSON.stringify(i).slice(1,-1)+`});
        var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
        j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'`+_+S+`&gtm_cookies_win=x';
        f.parentNode.insertBefore(j,f);
      })(window,document,'script','`+d+"','"+n+"');",I=this.dataLayer(c,d);return{iframe:E,script:A,dataLayerVar:I}},dataLayer:function(t,n){return`
      window.`+n+" = window."+n+` || [];
      window.`+n+".push("+JSON.stringify(t)+")"}},ase=sse,lse=ase,n3=cse(lse);function cse(e){return e&&e.__esModule?e:{default:e}}var use={dataScript:function(t){var n=document.createElement("script");return n.innerHTML=t,n},gtm:function(t){var n=n3.default.tags(t),i=function(){var s=document.createElement("noscript");return s.innerHTML=n.iframe,s},c=function(){var s=document.createElement("script");return s.innerHTML=n.script,s},d=this.dataScript(n.dataLayerVar);return{noScript:i,script:c,dataScript:d}},initialize:function(t){var n=t.gtmId,i=t.events,c=i===void 0?{}:i,d=t.dataLayer,p=t.dataLayerName,s=p===void 0?"dataLayer":p,_=t.auth,S=_===void 0?"":_,E=t.preview,A=E===void 0?"":E,I=this.gtm({id:n,events:c,dataLayer:d||void 0,dataLayerName:s,auth:S,preview:A});d&&document.head.appendChild(I.dataScript),document.head.insertBefore(I.script(),document.head.childNodes[0]),document.body.insertBefore(I.noScript(),document.body.childNodes[0])},dataLayer:function(t){var n=t.dataLayer,i=t.dataLayerName,c=i===void 0?"dataLayer":i;if(window[c])return window[c].push(n);var d=n3.default.dataLayer(n,c),p=this.dataScript(d);document.head.insertBefore(p,document.head.childNodes[0])}},dse=use,hse=dse,fse=pse(hse);function pse(e){return e&&e.__esModule?e:{default:e}}var mse=fse.default;const gse=Ya(mse),yse={gtmId:"GTM-NPXTHLVJ"};gse.initialize(yse);const vse="G-GNDE5XDS4C";tse.initialize(vse);$2.createRoot(document.getElementById("root")).render(z.jsx(ZV,{theme:q2,children:z.jsx(GV,{theme:q2,children:z.jsx(Zq,{router:ese})})}));
